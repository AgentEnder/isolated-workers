<!DOCTYPE html>
    <html lang="en">
      <head>
        <link rel="stylesheet" type="text/css" href="/isolated-workers/assets/static/pages_tailwind-65fb2459.DWwu-Xsw.css">
        <meta charset="UTF-8" />
        
        
    <title>isolated-workers</title><meta property="og:title" content="isolated-workers" />
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="icon" href="data:image/svg+xml,%3csvg%20width=&#x27;48&#x27;%20height=&#x27;48&#x27;%20viewBox=&#x27;0%200%2048%2048&#x27;%20fill=&#x27;none&#x27;%20xmlns=&#x27;http://www.w3.org/2000/svg&#x27;%3e%3c!--%20Background%20hexagon%20representing%20the%20isolated%20container%20--%3e%3cpath%20d=&#x27;M24%204L42%2014V34L24%2044L6%2034V14L24%204Z&#x27;%20fill=&#x27;%231a1a2e&#x27;%20stroke=&#x27;%234a5568&#x27;%20stroke-width=&#x27;1.5&#x27;/%3e%3c!--%20Inner%20isolated%20worker%20cells%20--%3e%3c!--%20Top%20worker%20--%3e%3cg%20transform=&#x27;translate(24,%2012)&#x27;%3e%3crect%20x=&#x27;-6&#x27;%20y=&#x27;-4&#x27;%20width=&#x27;12&#x27;%20height=&#x27;8&#x27;%20rx=&#x27;2&#x27;%20fill=&#x27;%233b82f6&#x27;%20stroke=&#x27;%2360a5fa&#x27;%20stroke-width=&#x27;1&#x27;/%3e%3ccircle%20cx=&#x27;0&#x27;%20cy=&#x27;0&#x27;%20r=&#x27;2&#x27;%20fill=&#x27;%23fff&#x27;/%3e%3c/g%3e%3c!--%20Bottom-left%20worker%20--%3e%3cg%20transform=&#x27;translate(14,%2030)&#x27;%3e%3crect%20x=&#x27;-6&#x27;%20y=&#x27;-4&#x27;%20width=&#x27;12&#x27;%20height=&#x27;8&#x27;%20rx=&#x27;2&#x27;%20fill=&#x27;%2310b981&#x27;%20stroke=&#x27;%2334d399&#x27;%20stroke-width=&#x27;1&#x27;/%3e%3ccircle%20cx=&#x27;0&#x27;%20cy=&#x27;0&#x27;%20r=&#x27;2&#x27;%20fill=&#x27;%23fff&#x27;/%3e%3c/g%3e%3c!--%20Bottom-right%20worker%20--%3e%3cg%20transform=&#x27;translate(34,%2030)&#x27;%3e%3crect%20x=&#x27;-6&#x27;%20y=&#x27;-4&#x27;%20width=&#x27;12&#x27;%20height=&#x27;8&#x27;%20rx=&#x27;2&#x27;%20fill=&#x27;%238b5cf6&#x27;%20stroke=&#x27;%23a78bfa&#x27;%20stroke-width=&#x27;1&#x27;/%3e%3ccircle%20cx=&#x27;0&#x27;%20cy=&#x27;0&#x27;%20r=&#x27;2&#x27;%20fill=&#x27;%23fff&#x27;/%3e%3c/g%3e%3c!--%20Communication%20channels%20(dashed%20lines%20showing%20IPC)%20--%3e%3cline%20x1=&#x27;24&#x27;%20y1=&#x27;16&#x27;%20x2=&#x27;14&#x27;%20y2=&#x27;26&#x27;%20stroke=&#x27;%236b7280&#x27;%20stroke-width=&#x27;1.5&#x27;%20stroke-dasharray=&#x27;2,2&#x27;/%3e%3cline%20x1=&#x27;24&#x27;%20y1=&#x27;16&#x27;%20x2=&#x27;34&#x27;%20y2=&#x27;26&#x27;%20stroke=&#x27;%236b7280&#x27;%20stroke-width=&#x27;1.5&#x27;%20stroke-dasharray=&#x27;2,2&#x27;/%3e%3cline%20x1=&#x27;20&#x27;%20y1=&#x27;30&#x27;%20x2=&#x27;28&#x27;%20y2=&#x27;30&#x27;%20stroke=&#x27;%236b7280&#x27;%20stroke-width=&#x27;1.5&#x27;%20stroke-dasharray=&#x27;2,2&#x27;/%3e%3c!--%20Type-safe%20data%20packets%20on%20channels%20--%3e%3ccircle%20cx=&#x27;19&#x27;%20cy=&#x27;21&#x27;%20r=&#x27;1.5&#x27;%20fill=&#x27;%23fbbf24&#x27;/%3e%3ccircle%20cx=&#x27;29&#x27;%20cy=&#x27;21&#x27;%20r=&#x27;1.5&#x27;%20fill=&#x27;%23fbbf24&#x27;/%3e%3ccircle%20cx=&#x27;24&#x27;%20cy=&#x27;30&#x27;%20r=&#x27;1.5&#x27;%20fill=&#x27;%23fbbf24&#x27;/%3e%3c/svg%3e"/><meta name="theme-color" content="#131316"/><meta property="og:type" content="website"/><meta property="og:title" content="isolated-workers"/><meta property="og:description" content="Type-safe worker processes with end-to-end message contracts"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="isolated-workers"/><meta name="twitter:description" content="Type-safe worker processes with end-to-end message contracts"/>
    
    <meta name="description" content="Type-safe worker processes with end-to-end message contracts" /><meta property="og:description" content="Type-safe worker processes with end-to-end message contracts" />
    
  
        
      </head>
      <body>
        
        <div id="root"><div class="min-h-screen bg-primary text-gray-100"><div class="fixed inset-0 overflow-hidden pointer-events-none " aria-hidden="true"><div class="absolute inset-0 retro-horizon"></div><div class="absolute inset-0 retro-grid"></div><div class="absolute w-96 h-96 rounded-full blur-3xl animate-float" style="top:15%;left:20%;background:radial-gradient(circle, rgba(0, 240, 255, 0.15) 0%, transparent 70%)"></div><div class="absolute w-96 h-96 rounded-full blur-3xl animate-float" style="bottom:20%;right:15%;background:radial-gradient(circle, rgba(191, 0, 255, 0.12) 0%, transparent 70%);animation-delay:2s"></div><div class="absolute w-72 h-72 rounded-full blur-3xl animate-float" style="top:40%;left:50%;transform:translateX(-50%);background:radial-gradient(circle, rgba(255, 0, 128, 0.08) 0%, transparent 70%);animation-delay:4s"></div><div class="absolute w-64 h-64 rounded-full blur-3xl animate-pulse-slow" style="top:10%;right:25%;background:radial-gradient(circle, rgba(0, 255, 157, 0.06) 0%, transparent 70%);animation-delay:1s"></div><div class="absolute inset-0 retro-scanlines"></div></div><header class="fixed top-0 left-0 right-0 h-20 z-50 glass-enhanced border-b border-neon-cyan/10"><div class="max-w-7xl mx-auto px-4 h-full flex items-center justify-between"><a href="/isolated-workers/" class="flex items-center gap-3 group"><div class="relative neon-flicker-slow"><img src="data:image/svg+xml,%3csvg%20width=&#x27;48&#x27;%20height=&#x27;48&#x27;%20viewBox=&#x27;0%200%2048%2048&#x27;%20fill=&#x27;none&#x27;%20xmlns=&#x27;http://www.w3.org/2000/svg&#x27;%3e%3c!--%20Background%20hexagon%20representing%20the%20isolated%20container%20--%3e%3cpath%20d=&#x27;M24%204L42%2014V34L24%2044L6%2034V14L24%204Z&#x27;%20fill=&#x27;%231a1a2e&#x27;%20stroke=&#x27;%234a5568&#x27;%20stroke-width=&#x27;1.5&#x27;/%3e%3c!--%20Inner%20isolated%20worker%20cells%20--%3e%3c!--%20Top%20worker%20--%3e%3cg%20transform=&#x27;translate(24,%2012)&#x27;%3e%3crect%20x=&#x27;-6&#x27;%20y=&#x27;-4&#x27;%20width=&#x27;12&#x27;%20height=&#x27;8&#x27;%20rx=&#x27;2&#x27;%20fill=&#x27;%233b82f6&#x27;%20stroke=&#x27;%2360a5fa&#x27;%20stroke-width=&#x27;1&#x27;/%3e%3ccircle%20cx=&#x27;0&#x27;%20cy=&#x27;0&#x27;%20r=&#x27;2&#x27;%20fill=&#x27;%23fff&#x27;/%3e%3c/g%3e%3c!--%20Bottom-left%20worker%20--%3e%3cg%20transform=&#x27;translate(14,%2030)&#x27;%3e%3crect%20x=&#x27;-6&#x27;%20y=&#x27;-4&#x27;%20width=&#x27;12&#x27;%20height=&#x27;8&#x27;%20rx=&#x27;2&#x27;%20fill=&#x27;%2310b981&#x27;%20stroke=&#x27;%2334d399&#x27;%20stroke-width=&#x27;1&#x27;/%3e%3ccircle%20cx=&#x27;0&#x27;%20cy=&#x27;0&#x27;%20r=&#x27;2&#x27;%20fill=&#x27;%23fff&#x27;/%3e%3c/g%3e%3c!--%20Bottom-right%20worker%20--%3e%3cg%20transform=&#x27;translate(34,%2030)&#x27;%3e%3crect%20x=&#x27;-6&#x27;%20y=&#x27;-4&#x27;%20width=&#x27;12&#x27;%20height=&#x27;8&#x27;%20rx=&#x27;2&#x27;%20fill=&#x27;%238b5cf6&#x27;%20stroke=&#x27;%23a78bfa&#x27;%20stroke-width=&#x27;1&#x27;/%3e%3ccircle%20cx=&#x27;0&#x27;%20cy=&#x27;0&#x27;%20r=&#x27;2&#x27;%20fill=&#x27;%23fff&#x27;/%3e%3c/g%3e%3c!--%20Communication%20channels%20(dashed%20lines%20showing%20IPC)%20--%3e%3cline%20x1=&#x27;24&#x27;%20y1=&#x27;16&#x27;%20x2=&#x27;14&#x27;%20y2=&#x27;26&#x27;%20stroke=&#x27;%236b7280&#x27;%20stroke-width=&#x27;1.5&#x27;%20stroke-dasharray=&#x27;2,2&#x27;/%3e%3cline%20x1=&#x27;24&#x27;%20y1=&#x27;16&#x27;%20x2=&#x27;34&#x27;%20y2=&#x27;26&#x27;%20stroke=&#x27;%236b7280&#x27;%20stroke-width=&#x27;1.5&#x27;%20stroke-dasharray=&#x27;2,2&#x27;/%3e%3cline%20x1=&#x27;20&#x27;%20y1=&#x27;30&#x27;%20x2=&#x27;28&#x27;%20y2=&#x27;30&#x27;%20stroke=&#x27;%236b7280&#x27;%20stroke-width=&#x27;1.5&#x27;%20stroke-dasharray=&#x27;2,2&#x27;/%3e%3c!--%20Type-safe%20data%20packets%20on%20channels%20--%3e%3ccircle%20cx=&#x27;19&#x27;%20cy=&#x27;21&#x27;%20r=&#x27;1.5&#x27;%20fill=&#x27;%23fbbf24&#x27;/%3e%3ccircle%20cx=&#x27;29&#x27;%20cy=&#x27;21&#x27;%20r=&#x27;1.5&#x27;%20fill=&#x27;%23fbbf24&#x27;/%3e%3ccircle%20cx=&#x27;24&#x27;%20cy=&#x27;30&#x27;%20r=&#x27;1.5&#x27;%20fill=&#x27;%23fbbf24&#x27;/%3e%3c/svg%3e" height="40" width="40" alt="isolated-workers logo" class="transition-all duration-300 group-hover:drop-shadow-[0_0_12px_rgba(0,240,255,0.6)]"/></div><span class="text-xl font-bold bg-linear-to-r from-neon-cyan to-neon-purple bg-clip-text text-transparent neon-flicker-alt neon-flicker-delay-1">isolated-workers</span></a><nav class="hidden md:flex items-center gap-6"><a href="/isolated-workers/docs/getting-started" class="
        text-sm font-medium transition-all duration-200 relative link-underline
        text-gray-400 hover:text-gray-200
      ">Getting Started</a><a href="/isolated-workers/docs/guides" class="
        text-sm font-medium transition-all duration-200 relative link-underline
        text-neon-cyan text-glow-cyan
      ">Guides<span class="absolute -bottom-1 left-0 right-0 h-0.5 bg-linear-to-r from-neon-cyan to-neon-purple shadow-neon-sm"></span></a><a href="/isolated-workers/examples" class="
        text-sm font-medium transition-all duration-200 relative link-underline
        text-gray-400 hover:text-gray-200
      ">Examples</a><a href="/isolated-workers/api" class="
        text-sm font-medium transition-all duration-200 relative link-underline
        text-gray-400 hover:text-gray-200
      ">API Reference</a></nav><div class="hidden md:block"><div class="relative"><div class="relative"><svg class="absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500 pointer-events-none" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg><input type="text" placeholder="Search docs..." class="
            w-64 pl-10 pr-16 py-2 rounded-lg text-sm
            bg-black/40 border border-white/10
            text-gray-100 placeholder:text-gray-500
            focus:border-neon-cyan focus:ring-1 focus:ring-neon-cyan/50
            focus:outline-none transition-all duration-200
            hover:border-white/20
          " value=""/><kbd class="absolute right-3 top-1/2 -translate-y-1/2 px-1.5 py-0.5 text-xs bg-white/5 border border-white/10 rounded text-gray-500 pointer-events-none flex items-center gap-0.5"><span class="text-[10px]">âŒ˜</span>K</kbd></div></div></div></div></header><div class="pt-20"><div class="relative flex min-h-[calc(100vh-5rem)] p-4 lg:max-w-9/12 m-auto gap-4"><aside class="hidden lg:block shrink-0 p-4 sticky top-0 self-start w-72 rounded-2xl glass-enhanced border-glow"><div class="h-[calc(100vh-6rem)] overflow-y-auto"><nav class="p-4 h-full overflow-y-auto space-y-6"><div><div class="flex items-center justify-between mb-2 px-3"><a href="/isolated-workers/docs/getting-started" class="text-xs font-semibold text-gray-500 uppercase tracking-wider neon-flicker-slow neon-flicker-delay-2 hover:text-neon-cyan transition-colors duration-200">Getting Started</a><button class="shrink-0 ml-2 hover:text-neon-cyan transition-colors"><svg class="w-4 h-4 transition-transform duration-200 " fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button></div><ul class="space-y-1 list-none"><li><a href="/isolated-workers/docs/getting-started/installation" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Installation</a></li><li><a href="/isolated-workers/docs/getting-started/quick-start" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Quick Start</a></li><li><a href="/isolated-workers/docs/getting-started/first-worker" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Building Your First Worker</a></li></ul></div><div><div class="divider-glow mb-4"></div><div class="flex items-center justify-between mb-2 px-3"><a href="/isolated-workers/docs/concepts" class="text-xs font-semibold text-gray-500 uppercase tracking-wider neon-flicker-slow neon-flicker-delay-2 hover:text-neon-cyan transition-colors duration-200">Concepts</a><button class="shrink-0 ml-2 hover:text-neon-cyan transition-colors"><svg class="w-4 h-4 transition-transform duration-200 " fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button></div><ul class="space-y-1 list-none"><li><a href="/isolated-workers/docs/concepts/why-isolated-workers" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Why isolated-workers?</a></li><li><a href="/isolated-workers/docs/concepts/drivers" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Drivers</a></li></ul></div><div><div class="divider-glow mb-4"></div><div class="flex items-center justify-between mb-2 px-3"><a href="/isolated-workers/docs/guides" class="text-xs font-semibold text-gray-500 uppercase tracking-wider neon-flicker-slow neon-flicker-delay-2 hover:text-neon-cyan transition-colors duration-200">Guides</a><button class="shrink-0 ml-2 hover:text-neon-cyan transition-colors"><svg class="w-4 h-4 transition-transform duration-200 " fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button></div><ul class="space-y-1 list-none"><li><a href="/isolated-workers/docs/guides/error-handling" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Error Handling</a></li><li><a href="/isolated-workers/docs/guides/middleware" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Middleware</a></li><li><a href="/isolated-workers/docs/guides/timeout-configuration" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Timeout Configuration</a></li><li><a href="/isolated-workers/docs/guides/custom-serializers" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Custom Serializers</a></li><li><a href="/isolated-workers/docs/guides/worker-lifecycle" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Worker Lifecycle</a></li><li><a href="/isolated-workers/docs/guides/typescript" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">TypeScript Deep Dive</a></li><li><a href="/isolated-workers/docs/guides/troubleshooting" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        bg-neon-cyan/10 text-neon-cyan border-l-2 border-neon-cyan shadow-neon-sm active-pulse
      ">Troubleshooting</a></li><li><a href="/isolated-workers/docs/guides/testing" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Testing Workers</a></li><li><a href="/isolated-workers/docs/guides/security" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Security Considerations</a></li></ul></div><div><div class="divider-glow mb-4"></div><div class="flex items-center justify-between mb-2 px-3"><a href="/isolated-workers/examples" class="text-xs font-semibold text-gray-500 uppercase tracking-wider neon-flicker-slow neon-flicker-delay-2 hover:text-neon-cyan transition-colors duration-200">Examples</a><button class="shrink-0 ml-2 hover:text-neon-cyan transition-colors"><svg class="w-4 h-4 transition-transform duration-200 " fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button></div><ul class="space-y-1 list-none"><li><a href="/isolated-workers/examples/basic-ping" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Basic Ping-Pong Worker</a></li><li><a href="/isolated-workers/examples/custom-serializer" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Custom Serializer</a></li><li><a href="/isolated-workers/examples/error-handling" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Error Handling</a></li><li><a href="/isolated-workers/examples/middleware" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Middleware Pipeline</a></li><li><a href="/isolated-workers/examples/timeout-config" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Timeout Configuration</a></li><li><a href="/isolated-workers/examples/shutdown-handling" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Unexpected Worker Shutdown Handling</a></li><li><a href="/isolated-workers/examples/worker-lifecycle" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Worker Lifecycle Management</a></li><li><a href="/isolated-workers/examples/worker-threads-driver" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Worker Threads Driver</a></li></ul></div><div><div class="divider-glow mb-4"></div><div class="flex items-center justify-between mb-2 px-3"><a href="/isolated-workers/api" class="text-xs font-semibold text-gray-500 uppercase tracking-wider neon-flicker-slow neon-flicker-delay-2 hover:text-neon-cyan transition-colors duration-200">API Reference</a><button class="shrink-0 ml-2 hover:text-neon-cyan transition-colors"><svg class="w-4 h-4 transition-transform duration-200 " fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button></div><ul class="space-y-1 list-none"><li><a href="/isolated-workers/api#configuration" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Configuration</a></li><li><a href="/isolated-workers/api#core" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Core</a></li><li><a href="/isolated-workers/api#drivers" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Drivers</a></li><li><a href="/isolated-workers/api#other" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Other</a></li><li><a href="/isolated-workers/api#serialization" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Serialization</a></li><li><a href="/isolated-workers/api#types" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Types</a></li></ul></div><div><div class="divider-glow mb-4"></div><div class="flex items-center justify-between mb-2 px-3"><span class="text-xs font-semibold text-gray-500 uppercase tracking-wider neon-flicker-slow neon-flicker-delay-2">Configuration</span><button class="shrink-0 ml-2 hover:text-neon-cyan transition-colors"><svg class="w-4 h-4 transition-transform duration-200 " fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button></div><ul class="space-y-1 list-none"><li><a href="/isolated-workers/docs/guides/shutdown-handling" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Shutdown Handling</a></li></ul></div><div><div class="divider-glow mb-4"></div><div class="flex items-center justify-between mb-2 px-3"><span class="text-xs font-semibold text-gray-500 uppercase tracking-wider neon-flicker-slow neon-flicker-delay-2">Resources</span><button class="shrink-0 ml-2 hover:text-neon-cyan transition-colors"><svg class="w-4 h-4 transition-transform duration-200 " fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button></div><ul class="space-y-1 list-none"><li><a href="/isolated-workers/docs/faq" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">FAQ</a></li><li><a href="/isolated-workers/docs/contributing" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Contributing</a></li></ul></div></nav></div></aside><aside class="
                  lg:hidden left-4 bottom-4 top-24 w-72
                  glass-enhanced border-glow fixed! rounded-2xl
                  z-40 transition-transform duration-300 ease-in-out
                  -translate-x-full
                  overflow-clip
                "><div class="h-[calc(100vh-5rem)] overflow-y-auto"><nav class="p-4 h-full overflow-y-auto space-y-6"><div><div class="flex items-center justify-between mb-2 px-3"><a href="/isolated-workers/docs/getting-started" class="text-xs font-semibold text-gray-500 uppercase tracking-wider neon-flicker-slow neon-flicker-delay-2 hover:text-neon-cyan transition-colors duration-200">Getting Started</a><button class="shrink-0 ml-2 hover:text-neon-cyan transition-colors"><svg class="w-4 h-4 transition-transform duration-200 " fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button></div><ul class="space-y-1 list-none"><li><a href="/isolated-workers/docs/getting-started/installation" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Installation</a></li><li><a href="/isolated-workers/docs/getting-started/quick-start" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Quick Start</a></li><li><a href="/isolated-workers/docs/getting-started/first-worker" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Building Your First Worker</a></li></ul></div><div><div class="divider-glow mb-4"></div><div class="flex items-center justify-between mb-2 px-3"><a href="/isolated-workers/docs/concepts" class="text-xs font-semibold text-gray-500 uppercase tracking-wider neon-flicker-slow neon-flicker-delay-2 hover:text-neon-cyan transition-colors duration-200">Concepts</a><button class="shrink-0 ml-2 hover:text-neon-cyan transition-colors"><svg class="w-4 h-4 transition-transform duration-200 " fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button></div><ul class="space-y-1 list-none"><li><a href="/isolated-workers/docs/concepts/why-isolated-workers" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Why isolated-workers?</a></li><li><a href="/isolated-workers/docs/concepts/drivers" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Drivers</a></li></ul></div><div><div class="divider-glow mb-4"></div><div class="flex items-center justify-between mb-2 px-3"><a href="/isolated-workers/docs/guides" class="text-xs font-semibold text-gray-500 uppercase tracking-wider neon-flicker-slow neon-flicker-delay-2 hover:text-neon-cyan transition-colors duration-200">Guides</a><button class="shrink-0 ml-2 hover:text-neon-cyan transition-colors"><svg class="w-4 h-4 transition-transform duration-200 " fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button></div><ul class="space-y-1 list-none"><li><a href="/isolated-workers/docs/guides/error-handling" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Error Handling</a></li><li><a href="/isolated-workers/docs/guides/middleware" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Middleware</a></li><li><a href="/isolated-workers/docs/guides/timeout-configuration" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Timeout Configuration</a></li><li><a href="/isolated-workers/docs/guides/custom-serializers" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Custom Serializers</a></li><li><a href="/isolated-workers/docs/guides/worker-lifecycle" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Worker Lifecycle</a></li><li><a href="/isolated-workers/docs/guides/typescript" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">TypeScript Deep Dive</a></li><li><a href="/isolated-workers/docs/guides/troubleshooting" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        bg-neon-cyan/10 text-neon-cyan border-l-2 border-neon-cyan shadow-neon-sm active-pulse
      ">Troubleshooting</a></li><li><a href="/isolated-workers/docs/guides/testing" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Testing Workers</a></li><li><a href="/isolated-workers/docs/guides/security" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Security Considerations</a></li></ul></div><div><div class="divider-glow mb-4"></div><div class="flex items-center justify-between mb-2 px-3"><a href="/isolated-workers/examples" class="text-xs font-semibold text-gray-500 uppercase tracking-wider neon-flicker-slow neon-flicker-delay-2 hover:text-neon-cyan transition-colors duration-200">Examples</a><button class="shrink-0 ml-2 hover:text-neon-cyan transition-colors"><svg class="w-4 h-4 transition-transform duration-200 " fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button></div><ul class="space-y-1 list-none"><li><a href="/isolated-workers/examples/basic-ping" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Basic Ping-Pong Worker</a></li><li><a href="/isolated-workers/examples/custom-serializer" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Custom Serializer</a></li><li><a href="/isolated-workers/examples/error-handling" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Error Handling</a></li><li><a href="/isolated-workers/examples/middleware" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Middleware Pipeline</a></li><li><a href="/isolated-workers/examples/timeout-config" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Timeout Configuration</a></li><li><a href="/isolated-workers/examples/shutdown-handling" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Unexpected Worker Shutdown Handling</a></li><li><a href="/isolated-workers/examples/worker-lifecycle" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Worker Lifecycle Management</a></li><li><a href="/isolated-workers/examples/worker-threads-driver" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Worker Threads Driver</a></li></ul></div><div><div class="divider-glow mb-4"></div><div class="flex items-center justify-between mb-2 px-3"><a href="/isolated-workers/api" class="text-xs font-semibold text-gray-500 uppercase tracking-wider neon-flicker-slow neon-flicker-delay-2 hover:text-neon-cyan transition-colors duration-200">API Reference</a><button class="shrink-0 ml-2 hover:text-neon-cyan transition-colors"><svg class="w-4 h-4 transition-transform duration-200 " fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button></div><ul class="space-y-1 list-none"><li><a href="/isolated-workers/api#configuration" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Configuration</a></li><li><a href="/isolated-workers/api#core" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Core</a></li><li><a href="/isolated-workers/api#drivers" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Drivers</a></li><li><a href="/isolated-workers/api#other" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Other</a></li><li><a href="/isolated-workers/api#serialization" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Serialization</a></li><li><a href="/isolated-workers/api#types" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Types</a></li></ul></div><div><div class="divider-glow mb-4"></div><div class="flex items-center justify-between mb-2 px-3"><span class="text-xs font-semibold text-gray-500 uppercase tracking-wider neon-flicker-slow neon-flicker-delay-2">Configuration</span><button class="shrink-0 ml-2 hover:text-neon-cyan transition-colors"><svg class="w-4 h-4 transition-transform duration-200 " fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button></div><ul class="space-y-1 list-none"><li><a href="/isolated-workers/docs/guides/shutdown-handling" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Shutdown Handling</a></li></ul></div><div><div class="divider-glow mb-4"></div><div class="flex items-center justify-between mb-2 px-3"><span class="text-xs font-semibold text-gray-500 uppercase tracking-wider neon-flicker-slow neon-flicker-delay-2">Resources</span><button class="shrink-0 ml-2 hover:text-neon-cyan transition-colors"><svg class="w-4 h-4 transition-transform duration-200 " fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button></div><ul class="space-y-1 list-none"><li><a href="/isolated-workers/docs/faq" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">FAQ</a></li><li><a href="/isolated-workers/docs/contributing" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Contributing</a></li></ul></div></nav></div></aside><main class="flex-1 min-w-0 py-4"><div class="max-w-4xl rounded-2xl bg-secondary/60 backdrop-blur-sm border border-tertiary/30 px-8 py-8"><div><div class="flex items-center gap-2 text-sm text-gray-400 mb-6"><a href="/isolated-workers/" class="hover:text-neon-cyan">Home</a><span>/</span><span class="text-gray-100">Troubleshooting</span></div><div class="prose prose-invert max-w-none space-y-8"><div class="docs-prose"><h1>Troubleshooting</h1>
<p>This guide covers common issues you may encounter when using isolated-workers and how to resolve them.</p>
<h2>Connection Errors</h2>
<h3>Worker Failed to Start</h3>
<p><strong>Problem</strong>: <code class="inline-code"><a class="code-link" href="/isolated-workers/isolated-workers/api/create-worker">createWorker</a></code> throws an error indicating the worker failed to start.</p>
<p><strong>Cause</strong>: This typically occurs when:</p>
<ul>
<li>The script path is incorrect or the file doesn't exist</li>
<li>The worker script has syntax errors</li>
<li>The Node.js executable can't be found</li>
<li>The script file doesn't have execute permissions</li>
</ul>
<p><strong>Solution</strong>: Verify your script path and ensure the file exists and is valid JavaScript/TypeScript.</p></div><div class="relative group my-6"><div class="
          rounded-lg overflow-hidden border border-white/10 bg-tertiary/80
          transition-all duration-300 border-glow
          shadow-neon-sm
        "><div class="px-4 py-3 bg-black/50 border-b border-white/5 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex gap-2"><span class="w-3 h-3 rounded-full bg-[#ff5f56] shadow-[0_0_6px_rgba(255,95,86,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#ffbd2e] shadow-[0_0_6px_rgba(255,189,46,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#27ca40] shadow-[0_0_6px_rgba(39,202,64,0.4)]"></span></div><span class="text-xs text-gray-500 font-mono">typescript</span></div><button class="
              text-xs flex items-center gap-1.5 px-2 py-1 rounded
              transition-all duration-200
              text-neon-cyan hover:text-neon-mint hover:bg-neon-cyan/10
            " title="Copy code"><svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>Copy</button></div><div class="overflow-x-auto bg-black/60"><div class="p-4 [&amp;_pre]:bg-transparent [&amp;_code]:bg-transparent"><div class="text-sm [&amp;_pre]:m-0 [&amp;_code]:m-0"><pre class="shiki github-dark" style="background-color:#00000000;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { <a href="/isolated-workers/api/create-worker" class="code-link" title="View createWorker documentation">createWorker</a> } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> 'isolated-workers'</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { resolve } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> 'path'</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// Use absolute paths to avoid path resolution issues</span></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> worker</span><span style="color:#F97583"> =</span><span style="color:#F97583"> await</span><span style="color:#B392F0"> <a href="/isolated-workers/api/create-worker" class="code-link" title="View createWorker documentation">createWorker</a></span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">Messages</span><span style="color:#E1E4E8">>({</span></span>
<span class="line"><span style="color:#E1E4E8">  script: </span><span style="color:#B392F0">resolve</span><span style="color:#E1E4E8">(__dirname, </span><span style="color:#9ECBFF">'./worker.js'</span><span style="color:#E1E4E8">),</span></span>
<span class="line"><span style="color:#E1E4E8">});</span></span></code></pre></div></div></div></div></div><div class="docs-prose"><p><strong>Debugging Steps</strong>:</p>
<ol>
<li>Try running the worker script directly: <code class="inline-code">node ./worker.js</code></li>
<li>Check for syntax errors in your IDE or with <code class="inline-code">node --check ./worker.js</code></li>
<li>Ensure the path is absolute or correctly relative to the current working directory</li>
</ol>
<h3>Connection Timeout</h3>
<p><strong>Problem</strong>: Worker starts but connection times out with "Connection timeout" or similar error.</p>
<p><strong>Cause</strong>: The worker process started but didn't establish an IPC connection. This usually means the worker script doesn't call <code class="inline-code"><a class="code-link" href="/isolated-workers/isolated-workers/api/start-worker-server">startWorkerServer</a></code>.</p>
<p><strong>Solution</strong>: Ensure your worker script calls <code class="inline-code"><a class="code-link" href="/isolated-workers/isolated-workers/api/start-worker-server">startWorkerServer</a></code> at the top level:</p></div><div class="relative group my-6"><div class="
          rounded-lg overflow-hidden border border-white/10 bg-tertiary/80
          transition-all duration-300 border-glow
          shadow-neon-sm
        "><div class="px-4 py-3 bg-black/50 border-b border-white/5 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex gap-2"><span class="w-3 h-3 rounded-full bg-[#ff5f56] shadow-[0_0_6px_rgba(255,95,86,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#ffbd2e] shadow-[0_0_6px_rgba(255,189,46,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#27ca40] shadow-[0_0_6px_rgba(39,202,64,0.4)]"></span></div><span class="text-xs text-gray-500 font-mono">typescript</span></div><button class="
              text-xs flex items-center gap-1.5 px-2 py-1 rounded
              transition-all duration-200
              text-neon-cyan hover:text-neon-mint hover:bg-neon-cyan/10
            " title="Copy code"><svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>Copy</button></div><div class="overflow-x-auto bg-black/60"><div class="p-4 [&amp;_pre]:bg-transparent [&amp;_code]:bg-transparent"><div class="text-sm [&amp;_pre]:m-0 [&amp;_code]:m-0"><pre class="shiki github-dark" style="background-color:#00000000;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#6A737D">// worker.ts - CORRECT</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { <a href="/isolated-workers/api/start-worker-server" class="code-link" title="View startWorkerServer documentation">startWorkerServer</a> } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> 'isolated-workers'</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0"><a href="/isolated-workers/api/start-worker-server" class="code-link" title="View startWorkerServer documentation">startWorkerServer</a></span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">Messages</span><span style="color:#E1E4E8">>({</span></span>
<span class="line"><span style="color:#E1E4E8">  handlers: {</span></span>
<span class="line"><span style="color:#6A737D">    // your handlers</span></span>
<span class="line"><span style="color:#E1E4E8">  },</span></span>
<span class="line"><span style="color:#E1E4E8">});</span></span></code></pre></div></div></div></div></div><div class="docs-prose"><p>Common mistakes to avoid:</p></div><div class="relative group my-6"><div class="
          rounded-lg overflow-hidden border border-white/10 bg-tertiary/80
          transition-all duration-300 border-glow
          shadow-neon-sm
        "><div class="px-4 py-3 bg-black/50 border-b border-white/5 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex gap-2"><span class="w-3 h-3 rounded-full bg-[#ff5f56] shadow-[0_0_6px_rgba(255,95,86,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#ffbd2e] shadow-[0_0_6px_rgba(255,189,46,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#27ca40] shadow-[0_0_6px_rgba(39,202,64,0.4)]"></span></div><span class="text-xs text-gray-500 font-mono">typescript</span></div><button class="
              text-xs flex items-center gap-1.5 px-2 py-1 rounded
              transition-all duration-200
              text-neon-cyan hover:text-neon-mint hover:bg-neon-cyan/10
            " title="Copy code"><svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>Copy</button></div><div class="overflow-x-auto bg-black/60"><div class="p-4 [&amp;_pre]:bg-transparent [&amp;_code]:bg-transparent"><div class="text-sm [&amp;_pre]:m-0 [&amp;_code]:m-0"><pre class="shiki github-dark" style="background-color:#00000000;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#6A737D">// WRONG - <a href="/isolated-workers/api/start-worker-server" class="code-link" title="View startWorkerServer documentation">startWorkerServer</a> inside async function that's never called</span></span>
<span class="line"><span style="color:#F97583">async</span><span style="color:#F97583"> function</span><span style="color:#B392F0"> main</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#B392F0">  <a href="/isolated-workers/api/start-worker-server" class="code-link" title="View startWorkerServer documentation">startWorkerServer</a></span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">Messages</span><span style="color:#E1E4E8">>({ handlers: {} });</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// WRONG - conditional that might not execute</span></span>
<span class="line"><span style="color:#F97583">if</span><span style="color:#E1E4E8"> (process.env.</span><span style="color:#79B8FF">SOME_VAR</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#B392F0">  <a href="/isolated-workers/api/start-worker-server" class="code-link" title="View startWorkerServer documentation">startWorkerServer</a></span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">Messages</span><span style="color:#E1E4E8">>({ handlers: {} });</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre></div></div></div></div></div><div class="docs-prose"><h3>Socket Permission Issues</h3>
<p><strong>Problem</strong>: Error messages about socket permissions or "EACCES" errors.</p>
<p><strong>Cause</strong>: On Unix systems, socket files are created in a temporary directory. Permission issues can occur if:</p>
<ul>
<li>The temp directory has restrictive permissions</li>
<li>A previous socket file wasn't cleaned up and is owned by a different user</li>
<li>SELinux or AppArmor policies are blocking socket creation</li>
</ul>
<p><strong>Solution</strong>:</p>
<ol>
<li>Check temp directory permissions:</li>
</ol></div><div class="relative group my-6"><div class="
          rounded-lg overflow-hidden border border-white/10 bg-tertiary/80
          transition-all duration-300 border-glow
          shadow-neon-sm
        "><div class="px-4 py-3 bg-black/50 border-b border-white/5 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex gap-2"><span class="w-3 h-3 rounded-full bg-[#ff5f56] shadow-[0_0_6px_rgba(255,95,86,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#ffbd2e] shadow-[0_0_6px_rgba(255,189,46,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#27ca40] shadow-[0_0_6px_rgba(39,202,64,0.4)]"></span></div><span class="text-xs text-gray-500 font-mono">bash</span></div><button class="
              text-xs flex items-center gap-1.5 px-2 py-1 rounded
              transition-all duration-200
              text-neon-cyan hover:text-neon-mint hover:bg-neon-cyan/10
            " title="Copy code"><svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>Copy</button></div><div class="overflow-x-auto bg-black/60"><div class="p-4 [&amp;_pre]:bg-transparent [&amp;_code]:bg-transparent"><div class="text-sm [&amp;_pre]:m-0 [&amp;_code]:m-0"><pre class="shiki github-dark" style="background-color:#00000000;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#B392F0">ls</span><span style="color:#79B8FF"> -la</span><span style="color:#9ECBFF"> /tmp</span></span></code></pre></div></div></div></div></div><div class="docs-prose"><ol start="2">
<li>Clean up stale socket files:</li>
</ol></div><div class="relative group my-6"><div class="
          rounded-lg overflow-hidden border border-white/10 bg-tertiary/80
          transition-all duration-300 border-glow
          shadow-neon-sm
        "><div class="px-4 py-3 bg-black/50 border-b border-white/5 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex gap-2"><span class="w-3 h-3 rounded-full bg-[#ff5f56] shadow-[0_0_6px_rgba(255,95,86,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#ffbd2e] shadow-[0_0_6px_rgba(255,189,46,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#27ca40] shadow-[0_0_6px_rgba(39,202,64,0.4)]"></span></div><span class="text-xs text-gray-500 font-mono">bash</span></div><button class="
              text-xs flex items-center gap-1.5 px-2 py-1 rounded
              transition-all duration-200
              text-neon-cyan hover:text-neon-mint hover:bg-neon-cyan/10
            " title="Copy code"><svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>Copy</button></div><div class="overflow-x-auto bg-black/60"><div class="p-4 [&amp;_pre]:bg-transparent [&amp;_code]:bg-transparent"><div class="text-sm [&amp;_pre]:m-0 [&amp;_code]:m-0"><pre class="shiki github-dark" style="background-color:#00000000;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#B392F0">rm</span><span style="color:#79B8FF"> -f</span><span style="color:#9ECBFF"> /tmp/isolated-workers-</span><span style="color:#79B8FF">*</span></span></code></pre></div></div></div></div></div><div class="docs-prose"><ol start="3">
<li>Specify a custom socket path with proper permissions:</li>
</ol></div><div class="relative group my-6"><div class="
          rounded-lg overflow-hidden border border-white/10 bg-tertiary/80
          transition-all duration-300 border-glow
          shadow-neon-sm
        "><div class="px-4 py-3 bg-black/50 border-b border-white/5 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex gap-2"><span class="w-3 h-3 rounded-full bg-[#ff5f56] shadow-[0_0_6px_rgba(255,95,86,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#ffbd2e] shadow-[0_0_6px_rgba(255,189,46,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#27ca40] shadow-[0_0_6px_rgba(39,202,64,0.4)]"></span></div><span class="text-xs text-gray-500 font-mono">typescript</span></div><button class="
              text-xs flex items-center gap-1.5 px-2 py-1 rounded
              transition-all duration-200
              text-neon-cyan hover:text-neon-mint hover:bg-neon-cyan/10
            " title="Copy code"><svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>Copy</button></div><div class="overflow-x-auto bg-black/60"><div class="p-4 [&amp;_pre]:bg-transparent [&amp;_code]:bg-transparent"><div class="text-sm [&amp;_pre]:m-0 [&amp;_code]:m-0"><pre class="shiki github-dark" style="background-color:#00000000;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> worker</span><span style="color:#F97583"> =</span><span style="color:#F97583"> await</span><span style="color:#B392F0"> <a href="/isolated-workers/api/create-worker" class="code-link" title="View createWorker documentation">createWorker</a></span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">Messages</span><span style="color:#E1E4E8">>({</span></span>
<span class="line"><span style="color:#E1E4E8">  script: </span><span style="color:#9ECBFF">'./worker.js'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">  socketPath: </span><span style="color:#9ECBFF">'/path/to/socket.sock'</span><span style="color:#E1E4E8">, </span><span style="color:#6A737D">// Optional - defaults to auto-generated path</span></span>
<span class="line"><span style="color:#E1E4E8">});</span></span></code></pre></div></div></div></div></div><div class="docs-prose"><h2>Message Errors</h2>
<h3>Message Timeout</h3>
<p><strong>Problem</strong>: A request times out with "Message timeout" or similar error.</p>
<p><strong>Cause</strong>: The worker handler is taking longer than the configured timeout. This can happen when:</p>
<ul>
<li>The operation is legitimately slow (file I/O, network requests, heavy computation)</li>
<li>The handler is stuck in an infinite loop</li>
<li>The handler is waiting on a resource that's not available</li>
</ul>
<p><strong>Solution</strong>: Configure appropriate timeouts for your operations:</p></div><div class="relative group my-6"><div class="
          rounded-lg overflow-hidden border border-white/10 bg-tertiary/80
          transition-all duration-300 border-glow
          shadow-neon-sm
        "><div class="px-4 py-3 bg-black/50 border-b border-white/5 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex gap-2"><span class="w-3 h-3 rounded-full bg-[#ff5f56] shadow-[0_0_6px_rgba(255,95,86,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#ffbd2e] shadow-[0_0_6px_rgba(255,189,46,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#27ca40] shadow-[0_0_6px_rgba(39,202,64,0.4)]"></span></div><span class="text-xs text-gray-500 font-mono">typescript</span></div><button class="
              text-xs flex items-center gap-1.5 px-2 py-1 rounded
              transition-all duration-200
              text-neon-cyan hover:text-neon-mint hover:bg-neon-cyan/10
            " title="Copy code"><svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>Copy</button></div><div class="overflow-x-auto bg-black/60"><div class="p-4 [&amp;_pre]:bg-transparent [&amp;_code]:bg-transparent"><div class="text-sm [&amp;_pre]:m-0 [&amp;_code]:m-0"><pre class="shiki github-dark" style="background-color:#00000000;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { <a href="/isolated-workers/api/create-worker" class="code-link" title="View createWorker documentation">createWorker</a>, </span><span style="color:#F97583">type</span><span style="color:#E1E4E8"> <a href="/isolated-workers/api/timeout-config" class="code-link" title="View TimeoutConfig documentation">TimeoutConfig</a> } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> 'isolated-workers'</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> timeout</span><span style="color:#F97583">:</span><span style="color:#B392F0"> <a href="/isolated-workers/api/timeout-config" class="code-link" title="View TimeoutConfig documentation">TimeoutConfig</a></span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">Messages</span><span style="color:#E1E4E8">> </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">  WORKER_MESSAGE: </span><span style="color:#79B8FF">5000</span><span style="color:#E1E4E8">, </span><span style="color:#6A737D">// 5s default</span></span>
<span class="line"><span style="color:#E1E4E8">  processLargeFile: </span><span style="color:#79B8FF">120000</span><span style="color:#E1E4E8">, </span><span style="color:#6A737D">// 2 minutes for slow operations</span></span>
<span class="line"><span style="color:#E1E4E8">  quickCheck: </span><span style="color:#79B8FF">1000</span><span style="color:#E1E4E8">, </span><span style="color:#6A737D">// 1 second for fast operations</span></span>
<span class="line"><span style="color:#E1E4E8">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> worker</span><span style="color:#F97583"> =</span><span style="color:#F97583"> await</span><span style="color:#B392F0"> <a href="/isolated-workers/api/create-worker" class="code-link" title="View createWorker documentation">createWorker</a></span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">Messages</span><span style="color:#E1E4E8">>({</span></span>
<span class="line"><span style="color:#E1E4E8">  script: </span><span style="color:#9ECBFF">'./worker.js'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">  timeout,</span></span>
<span class="line"><span style="color:#E1E4E8">});</span></span></code></pre></div></div></div></div></div><div class="docs-prose"><p>For handlers that may take variable time, implement progress reporting or break the work into smaller chunks.</p>
<h3>Serialization Errors</h3>
<p><strong>Problem</strong>: Errors about "circular structure" or "not JSON serializable" when sending messages.</p>
<p><strong>Cause</strong>: Messages between host and worker are serialized as JSON. Objects that can't be serialized cause errors:</p>
<ul>
<li>Circular references</li>
<li>Functions</li>
<li>BigInt values</li>
<li>Symbols</li>
<li>Class instances with methods</li>
</ul>
<p><strong>Solution</strong>: Ensure all message payloads are plain JSON-serializable objects:</p></div><div class="relative group my-6"><div class="
          rounded-lg overflow-hidden border border-white/10 bg-tertiary/80
          transition-all duration-300 border-glow
          shadow-neon-sm
        "><div class="px-4 py-3 bg-black/50 border-b border-white/5 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex gap-2"><span class="w-3 h-3 rounded-full bg-[#ff5f56] shadow-[0_0_6px_rgba(255,95,86,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#ffbd2e] shadow-[0_0_6px_rgba(255,189,46,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#27ca40] shadow-[0_0_6px_rgba(39,202,64,0.4)]"></span></div><span class="text-xs text-gray-500 font-mono">typescript</span></div><button class="
              text-xs flex items-center gap-1.5 px-2 py-1 rounded
              transition-all duration-200
              text-neon-cyan hover:text-neon-mint hover:bg-neon-cyan/10
            " title="Copy code"><svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>Copy</button></div><div class="overflow-x-auto bg-black/60"><div class="p-4 [&amp;_pre]:bg-transparent [&amp;_code]:bg-transparent"><div class="text-sm [&amp;_pre]:m-0 [&amp;_code]:m-0"><pre class="shiki github-dark" style="background-color:#00000000;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#6A737D">// WRONG - contains function and circular reference</span></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> message</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">  data: myData,</span></span>
<span class="line"><span style="color:#B392F0">  callback</span><span style="color:#E1E4E8">: () </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> console.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'done'</span><span style="color:#E1E4E8">), </span><span style="color:#6A737D">// Functions can't be serialized</span></span>
<span class="line"><span style="color:#E1E4E8">  self: </span><span style="color:#79B8FF">null</span><span style="color:#F97583"> as</span><span style="color:#79B8FF"> any</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">};</span></span>
<span class="line"><span style="color:#E1E4E8">message.self </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> message; </span><span style="color:#6A737D">// Circular reference</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// CORRECT - plain data only</span></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> message</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">  data: myData,</span></span>
<span class="line"><span style="color:#E1E4E8">  callbackId: </span><span style="color:#9ECBFF">'done-callback'</span><span style="color:#E1E4E8">, </span><span style="color:#6A737D">// Use IDs instead of functions</span></span>
<span class="line"><span style="color:#E1E4E8">};</span></span></code></pre></div></div></div></div></div><div class="docs-prose"><p>For complex data, use a custom serializer. See <a href="/isolated-workers/docs/guides/custom-serializers">Custom Serializers</a> for details.</p>
<h3>Type Mismatches</h3>
<p><strong>Problem</strong>: Runtime errors about unexpected message types or missing handlers.</p>
<p><strong>Cause</strong>: The host and worker have different message type definitions. This can happen when:</p>
<ul>
<li>Message definitions are duplicated instead of shared</li>
<li>The worker wasn't rebuilt after message type changes</li>
<li>Different versions of message definitions are used</li>
</ul>
<p><strong>Solution</strong>: Share message definitions between host and worker:</p></div><div class="relative group my-6"><div class="
          rounded-lg overflow-hidden border border-white/10 bg-tertiary/80
          transition-all duration-300 border-glow
          shadow-neon-sm
        "><div class="px-4 py-3 bg-black/50 border-b border-white/5 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex gap-2"><span class="w-3 h-3 rounded-full bg-[#ff5f56] shadow-[0_0_6px_rgba(255,95,86,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#ffbd2e] shadow-[0_0_6px_rgba(255,189,46,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#27ca40] shadow-[0_0_6px_rgba(39,202,64,0.4)]"></span></div><span class="text-xs text-gray-500 font-mono">typescript</span></div><button class="
              text-xs flex items-center gap-1.5 px-2 py-1 rounded
              transition-all duration-200
              text-neon-cyan hover:text-neon-mint hover:bg-neon-cyan/10
            " title="Copy code"><svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>Copy</button></div><div class="overflow-x-auto bg-black/60"><div class="p-4 [&amp;_pre]:bg-transparent [&amp;_code]:bg-transparent"><div class="text-sm [&amp;_pre]:m-0 [&amp;_code]:m-0"><pre class="shiki github-dark" style="background-color:#00000000;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#6A737D">// messages.ts - shared definitions</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { defineMessages } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> 'isolated-workers'</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">export</span><span style="color:#F97583"> type</span><span style="color:#B392F0"> Messages</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> defineMessages</span><span style="color:#E1E4E8">&#x3C;{</span></span>
<span class="line"><span style="color:#FFAB70">  greet</span><span style="color:#F97583">:</span><span style="color:#E1E4E8"> { </span><span style="color:#FFAB70">name</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> string</span><span style="color:#E1E4E8"> } </span><span style="color:#F97583">=></span><span style="color:#79B8FF"> string</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#FFAB70">  calculate</span><span style="color:#F97583">:</span><span style="color:#E1E4E8"> { </span><span style="color:#FFAB70">a</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> number</span><span style="color:#E1E4E8">; </span><span style="color:#FFAB70">b</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> number</span><span style="color:#E1E4E8"> } </span><span style="color:#F97583">=></span><span style="color:#79B8FF"> number</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">}>;</span></span></code></pre></div></div></div></div></div><div class="relative group my-6"><div class="
          rounded-lg overflow-hidden border border-white/10 bg-tertiary/80
          transition-all duration-300 border-glow
          shadow-neon-sm
        "><div class="px-4 py-3 bg-black/50 border-b border-white/5 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex gap-2"><span class="w-3 h-3 rounded-full bg-[#ff5f56] shadow-[0_0_6px_rgba(255,95,86,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#ffbd2e] shadow-[0_0_6px_rgba(255,189,46,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#27ca40] shadow-[0_0_6px_rgba(39,202,64,0.4)]"></span></div><span class="text-xs text-gray-500 font-mono">typescript</span></div><button class="
              text-xs flex items-center gap-1.5 px-2 py-1 rounded
              transition-all duration-200
              text-neon-cyan hover:text-neon-mint hover:bg-neon-cyan/10
            " title="Copy code"><svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>Copy</button></div><div class="overflow-x-auto bg-black/60"><div class="p-4 [&amp;_pre]:bg-transparent [&amp;_code]:bg-transparent"><div class="text-sm [&amp;_pre]:m-0 [&amp;_code]:m-0"><pre class="shiki github-dark" style="background-color:#00000000;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#6A737D">// host.ts</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { Messages } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> './messages.js'</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> worker</span><span style="color:#F97583"> =</span><span style="color:#F97583"> await</span><span style="color:#B392F0"> <a href="/isolated-workers/api/create-worker" class="code-link" title="View createWorker documentation">createWorker</a></span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">Messages</span><span style="color:#E1E4E8">>({ script: </span><span style="color:#9ECBFF">'./worker.js'</span><span style="color:#E1E4E8"> });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// worker.ts</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { Messages } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> './messages.js'</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#B392F0"><a href="/isolated-workers/api/start-worker-server" class="code-link" title="View startWorkerServer documentation">startWorkerServer</a></span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">Messages</span><span style="color:#E1E4E8">>({</span></span>
<span class="line"><span style="color:#E1E4E8">  handlers: {</span></span>
<span class="line"><span style="color:#6A737D">    /* ... */</span></span>
<span class="line"><span style="color:#E1E4E8">  },</span></span>
<span class="line"><span style="color:#E1E4E8">});</span></span></code></pre></div></div></div></div></div><div class="docs-prose"><p>Always rebuild both host and worker after changing message definitions.</p>
<h2>Lifecycle Issues</h2>
<h3>Worker Crashes Unexpectedly</h3>
<p><strong>Problem</strong>: Worker process terminates without an explicit <code class="inline-code">close()</code> call.</p>
<p><strong>Cause</strong>: Common causes include:</p>
<ul>
<li>Unhandled promise rejections in the worker</li>
<li>Uncaught exceptions in handlers</li>
<li>Out of memory errors</li>
<li>Segmentation faults from native modules</li>
<li>Process killed by system (OOM killer)</li>
</ul>
<p><strong>Solution</strong>:</p>
<ol>
<li>Add error handling in your worker:</li>
</ol></div><div class="relative group my-6"><div class="
          rounded-lg overflow-hidden border border-white/10 bg-tertiary/80
          transition-all duration-300 border-glow
          shadow-neon-sm
        "><div class="px-4 py-3 bg-black/50 border-b border-white/5 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex gap-2"><span class="w-3 h-3 rounded-full bg-[#ff5f56] shadow-[0_0_6px_rgba(255,95,86,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#ffbd2e] shadow-[0_0_6px_rgba(255,189,46,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#27ca40] shadow-[0_0_6px_rgba(39,202,64,0.4)]"></span></div><span class="text-xs text-gray-500 font-mono">typescript</span></div><button class="
              text-xs flex items-center gap-1.5 px-2 py-1 rounded
              transition-all duration-200
              text-neon-cyan hover:text-neon-mint hover:bg-neon-cyan/10
            " title="Copy code"><svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>Copy</button></div><div class="overflow-x-auto bg-black/60"><div class="p-4 [&amp;_pre]:bg-transparent [&amp;_code]:bg-transparent"><div class="text-sm [&amp;_pre]:m-0 [&amp;_code]:m-0"><pre class="shiki github-dark" style="background-color:#00000000;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#E1E4E8">process.</span><span style="color:#B392F0">on</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'uncaughtException'</span><span style="color:#E1E4E8">, (</span><span style="color:#FFAB70">error</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">  console.</span><span style="color:#B392F0">error</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'Worker uncaught exception:'</span><span style="color:#E1E4E8">, error);</span></span>
<span class="line"><span style="color:#E1E4E8">  process.</span><span style="color:#B392F0">exit</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">process.</span><span style="color:#B392F0">on</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'unhandledRejection'</span><span style="color:#E1E4E8">, (</span><span style="color:#FFAB70">reason</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">  console.</span><span style="color:#B392F0">error</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'Worker unhandled rejection:'</span><span style="color:#E1E4E8">, reason);</span></span>
<span class="line"><span style="color:#E1E4E8">  process.</span><span style="color:#B392F0">exit</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0"><a href="/isolated-workers/api/start-worker-server" class="code-link" title="View startWorkerServer documentation">startWorkerServer</a></span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">Messages</span><span style="color:#E1E4E8">>({</span></span>
<span class="line"><span style="color:#E1E4E8">  handlers: {</span></span>
<span class="line"><span style="color:#6A737D">    // Wrap handlers in try/catch for better error reporting</span></span>
<span class="line"><span style="color:#B392F0">    riskyOperation</span><span style="color:#E1E4E8">: </span><span style="color:#F97583">async</span><span style="color:#E1E4E8"> (</span><span style="color:#FFAB70">payload</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">      try</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">        return</span><span style="color:#F97583"> await</span><span style="color:#B392F0"> doRiskyWork</span><span style="color:#E1E4E8">(payload);</span></span>
<span class="line"><span style="color:#E1E4E8">      } </span><span style="color:#F97583">catch</span><span style="color:#E1E4E8"> (error) {</span></span>
<span class="line"><span style="color:#E1E4E8">        console.</span><span style="color:#B392F0">error</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'Handler error:'</span><span style="color:#E1E4E8">, error);</span></span>
<span class="line"><span style="color:#F97583">        throw</span><span style="color:#E1E4E8"> error;</span></span>
<span class="line"><span style="color:#E1E4E8">      }</span></span>
<span class="line"><span style="color:#E1E4E8">    },</span></span>
<span class="line"><span style="color:#E1E4E8">  },</span></span>
<span class="line"><span style="color:#E1E4E8">});</span></span></code></pre></div></div></div></div></div><div class="docs-prose"><ol start="2">
<li>Implement worker restart logic in the host:</li>
</ol></div><div class="relative group my-6"><div class="
          rounded-lg overflow-hidden border border-white/10 bg-tertiary/80
          transition-all duration-300 border-glow
          shadow-neon-sm
        "><div class="px-4 py-3 bg-black/50 border-b border-white/5 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex gap-2"><span class="w-3 h-3 rounded-full bg-[#ff5f56] shadow-[0_0_6px_rgba(255,95,86,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#ffbd2e] shadow-[0_0_6px_rgba(255,189,46,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#27ca40] shadow-[0_0_6px_rgba(39,202,64,0.4)]"></span></div><span class="text-xs text-gray-500 font-mono">typescript</span></div><button class="
              text-xs flex items-center gap-1.5 px-2 py-1 rounded
              transition-all duration-200
              text-neon-cyan hover:text-neon-mint hover:bg-neon-cyan/10
            " title="Copy code"><svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>Copy</button></div><div class="overflow-x-auto bg-black/60"><div class="p-4 [&amp;_pre]:bg-transparent [&amp;_code]:bg-transparent"><div class="text-sm [&amp;_pre]:m-0 [&amp;_code]:m-0"><pre class="shiki github-dark" style="background-color:#00000000;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#F97583">async</span><span style="color:#F97583"> function</span><span style="color:#B392F0"> withWorker</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">T</span><span style="color:#E1E4E8">>(</span></span>
<span class="line"><span style="color:#B392F0">  fn</span><span style="color:#F97583">:</span><span style="color:#E1E4E8"> (</span><span style="color:#FFAB70">worker</span><span style="color:#F97583">:</span><span style="color:#B392F0"> <a href="/isolated-workers/api/worker-client" class="code-link" title="View WorkerClient documentation">WorkerClient</a></span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">Messages</span><span style="color:#E1E4E8">>) </span><span style="color:#F97583">=></span><span style="color:#B392F0"> Promise</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">T</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">)</span><span style="color:#F97583">:</span><span style="color:#B392F0"> Promise</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">T</span><span style="color:#E1E4E8">> {</span></span>
<span class="line"><span style="color:#F97583">  const</span><span style="color:#79B8FF"> worker</span><span style="color:#F97583"> =</span><span style="color:#F97583"> await</span><span style="color:#B392F0"> <a href="/isolated-workers/api/create-worker" class="code-link" title="View createWorker documentation">createWorker</a></span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">Messages</span><span style="color:#E1E4E8">>({ script: </span><span style="color:#9ECBFF">'./worker.js'</span><span style="color:#E1E4E8"> });</span></span>
<span class="line"><span style="color:#F97583">  try</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#F97583"> await</span><span style="color:#B392F0"> fn</span><span style="color:#E1E4E8">(worker);</span></span>
<span class="line"><span style="color:#E1E4E8">  } </span><span style="color:#F97583">catch</span><span style="color:#E1E4E8"> (error) {</span></span>
<span class="line"><span style="color:#F97583">    if</span><span style="color:#E1E4E8"> (</span><span style="color:#F97583">!</span><span style="color:#E1E4E8">worker.isActive) {</span></span>
<span class="line"><span style="color:#E1E4E8">      console.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'Worker crashed, this may need a retry'</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#F97583">    throw</span><span style="color:#E1E4E8"> error;</span></span>
<span class="line"><span style="color:#E1E4E8">  } </span><span style="color:#F97583">finally</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">    await</span><span style="color:#E1E4E8"> worker.</span><span style="color:#B392F0">close</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre></div></div></div></div></div><div class="docs-prose"><h3>"Worker is Not Active" Errors</h3>
<p><strong>Problem</strong>: Sending a message throws "Worker is not active" error.</p>
<p><strong>Cause</strong>: Attempting to send a message after the worker has been closed or crashed:</p>
<ul>
<li>Called <code class="inline-code">worker.close()</code> before sending</li>
<li>Worker process crashed</li>
<li>Worker was never started successfully</li>
</ul>
<p><strong>Solution</strong>: Check worker status before sending:</p></div><div class="relative group my-6"><div class="
          rounded-lg overflow-hidden border border-white/10 bg-tertiary/80
          transition-all duration-300 border-glow
          shadow-neon-sm
        "><div class="px-4 py-3 bg-black/50 border-b border-white/5 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex gap-2"><span class="w-3 h-3 rounded-full bg-[#ff5f56] shadow-[0_0_6px_rgba(255,95,86,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#ffbd2e] shadow-[0_0_6px_rgba(255,189,46,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#27ca40] shadow-[0_0_6px_rgba(39,202,64,0.4)]"></span></div><span class="text-xs text-gray-500 font-mono">typescript</span></div><button class="
              text-xs flex items-center gap-1.5 px-2 py-1 rounded
              transition-all duration-200
              text-neon-cyan hover:text-neon-mint hover:bg-neon-cyan/10
            " title="Copy code"><svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>Copy</button></div><div class="overflow-x-auto bg-black/60"><div class="p-4 [&amp;_pre]:bg-transparent [&amp;_code]:bg-transparent"><div class="text-sm [&amp;_pre]:m-0 [&amp;_code]:m-0"><pre class="shiki github-dark" style="background-color:#00000000;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#F97583">if</span><span style="color:#E1E4E8"> (worker.isActive </span><span style="color:#F97583">&#x26;&#x26;</span><span style="color:#E1E4E8"> worker.isConnected) {</span></span>
<span class="line"><span style="color:#F97583">  await</span><span style="color:#E1E4E8"> worker.</span><span style="color:#B392F0">send</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'message'</span><span style="color:#E1E4E8">, payload);</span></span>
<span class="line"><span style="color:#E1E4E8">} </span><span style="color:#F97583">else</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">  console.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'Worker unavailable, recreating...'</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">  worker </span><span style="color:#F97583">=</span><span style="color:#F97583"> await</span><span style="color:#B392F0"> <a href="/isolated-workers/api/create-worker" class="code-link" title="View createWorker documentation">createWorker</a></span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">Messages</span><span style="color:#E1E4E8">>({ script: </span><span style="color:#9ECBFF">'./worker.js'</span><span style="color:#E1E4E8"> });</span></span>
<span class="line"><span style="color:#F97583">  await</span><span style="color:#E1E4E8"> worker.</span><span style="color:#B392F0">send</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'message'</span><span style="color:#E1E4E8">, payload);</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre></div></div></div></div></div><div class="docs-prose"><p>Or use a wrapper that handles reconnection:</p></div><div class="relative group my-6"><div class="
          rounded-lg overflow-hidden border border-white/10 bg-tertiary/80
          transition-all duration-300 border-glow
          shadow-neon-sm
        "><div class="px-4 py-3 bg-black/50 border-b border-white/5 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex gap-2"><span class="w-3 h-3 rounded-full bg-[#ff5f56] shadow-[0_0_6px_rgba(255,95,86,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#ffbd2e] shadow-[0_0_6px_rgba(255,189,46,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#27ca40] shadow-[0_0_6px_rgba(39,202,64,0.4)]"></span></div><span class="text-xs text-gray-500 font-mono">typescript</span></div><button class="
              text-xs flex items-center gap-1.5 px-2 py-1 rounded
              transition-all duration-200
              text-neon-cyan hover:text-neon-mint hover:bg-neon-cyan/10
            " title="Copy code"><svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>Copy</button></div><div class="overflow-x-auto bg-black/60"><div class="p-4 [&amp;_pre]:bg-transparent [&amp;_code]:bg-transparent"><div class="text-sm [&amp;_pre]:m-0 [&amp;_code]:m-0"><pre class="shiki github-dark" style="background-color:#00000000;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#F97583">class</span><span style="color:#B392F0"> WorkerPool</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">T</span><span style="color:#E1E4E8">> {</span></span>
<span class="line"><span style="color:#F97583">  private</span><span style="color:#FFAB70"> worker</span><span style="color:#F97583">:</span><span style="color:#B392F0"> <a href="/isolated-workers/api/worker-client" class="code-link" title="View WorkerClient documentation">WorkerClient</a></span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">T</span><span style="color:#E1E4E8">> </span><span style="color:#F97583">|</span><span style="color:#79B8FF"> null</span><span style="color:#F97583"> =</span><span style="color:#79B8FF"> null</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">  async</span><span style="color:#B392F0"> send</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">K</span><span style="color:#F97583"> extends</span><span style="color:#F97583"> keyof</span><span style="color:#B392F0"> T</span><span style="color:#E1E4E8">>(</span></span>
<span class="line"><span style="color:#FFAB70">    type</span><span style="color:#F97583">:</span><span style="color:#B392F0"> K</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#FFAB70">    payload</span><span style="color:#F97583">:</span><span style="color:#B392F0"> <a href="/isolated-workers/api/message-of" class="code-link" title="View MessageOf documentation">MessageOf</a></span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">T</span><span style="color:#E1E4E8">, </span><span style="color:#B392F0">K</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">  )</span><span style="color:#F97583">:</span><span style="color:#B392F0"> Promise</span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0"><a href="/isolated-workers/api/result-of" class="code-link" title="View ResultOf documentation">ResultOf</a></span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">T</span><span style="color:#E1E4E8">, </span><span style="color:#B392F0">K</span><span style="color:#E1E4E8">>> {</span></span>
<span class="line"><span style="color:#F97583">    if</span><span style="color:#E1E4E8"> (</span><span style="color:#F97583">!</span><span style="color:#79B8FF">this</span><span style="color:#E1E4E8">.worker?.isActive) {</span></span>
<span class="line"><span style="color:#79B8FF">      this</span><span style="color:#E1E4E8">.worker </span><span style="color:#F97583">=</span><span style="color:#F97583"> await</span><span style="color:#B392F0"> <a href="/isolated-workers/api/create-worker" class="code-link" title="View createWorker documentation">createWorker</a></span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">T</span><span style="color:#E1E4E8">>({ script: </span><span style="color:#79B8FF">this</span><span style="color:#E1E4E8">.script });</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#79B8FF"> this</span><span style="color:#E1E4E8">.worker.</span><span style="color:#B392F0">send</span><span style="color:#E1E4E8">(type, payload);</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre></div></div></div></div></div><div class="docs-prose"><h3>Memory Leaks from Unclosed Workers</h3>
<p><strong>Problem</strong>: Memory usage grows over time, especially when creating many workers.</p>
<p><strong>Cause</strong>: Workers that aren't properly closed leave:</p>
<ul>
<li>Socket files on disk</li>
<li>Node.js process running in background</li>
<li>IPC channels open</li>
</ul>
<p><strong>Solution</strong>: Always close workers in a <code class="inline-code">finally</code> block:</p></div><div class="relative group my-6"><div class="
          rounded-lg overflow-hidden border border-white/10 bg-tertiary/80
          transition-all duration-300 border-glow
          shadow-neon-sm
        "><div class="px-4 py-3 bg-black/50 border-b border-white/5 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex gap-2"><span class="w-3 h-3 rounded-full bg-[#ff5f56] shadow-[0_0_6px_rgba(255,95,86,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#ffbd2e] shadow-[0_0_6px_rgba(255,189,46,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#27ca40] shadow-[0_0_6px_rgba(39,202,64,0.4)]"></span></div><span class="text-xs text-gray-500 font-mono">typescript</span></div><button class="
              text-xs flex items-center gap-1.5 px-2 py-1 rounded
              transition-all duration-200
              text-neon-cyan hover:text-neon-mint hover:bg-neon-cyan/10
            " title="Copy code"><svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>Copy</button></div><div class="overflow-x-auto bg-black/60"><div class="p-4 [&amp;_pre]:bg-transparent [&amp;_code]:bg-transparent"><div class="text-sm [&amp;_pre]:m-0 [&amp;_code]:m-0"><pre class="shiki github-dark" style="background-color:#00000000;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> worker</span><span style="color:#F97583"> =</span><span style="color:#F97583"> await</span><span style="color:#B392F0"> <a href="/isolated-workers/api/create-worker" class="code-link" title="View createWorker documentation">createWorker</a></span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">Messages</span><span style="color:#E1E4E8">>({ script: </span><span style="color:#9ECBFF">'./worker.js'</span><span style="color:#E1E4E8"> });</span></span>
<span class="line"><span style="color:#F97583">try</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">  await</span><span style="color:#B392F0"> doWork</span><span style="color:#E1E4E8">(worker);</span></span>
<span class="line"><span style="color:#E1E4E8">} </span><span style="color:#F97583">finally</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">  await</span><span style="color:#E1E4E8"> worker.</span><span style="color:#B392F0">close</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre></div></div></div></div></div><div class="docs-prose"><p>For long-running applications, consider pooling and reusing workers instead of creating new ones for each operation.</p>
<p>To check for orphaned worker processes:</p></div><div class="relative group my-6"><div class="
          rounded-lg overflow-hidden border border-white/10 bg-tertiary/80
          transition-all duration-300 border-glow
          shadow-neon-sm
        "><div class="px-4 py-3 bg-black/50 border-b border-white/5 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex gap-2"><span class="w-3 h-3 rounded-full bg-[#ff5f56] shadow-[0_0_6px_rgba(255,95,86,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#ffbd2e] shadow-[0_0_6px_rgba(255,189,46,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#27ca40] shadow-[0_0_6px_rgba(39,202,64,0.4)]"></span></div><span class="text-xs text-gray-500 font-mono">bash</span></div><button class="
              text-xs flex items-center gap-1.5 px-2 py-1 rounded
              transition-all duration-200
              text-neon-cyan hover:text-neon-mint hover:bg-neon-cyan/10
            " title="Copy code"><svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>Copy</button></div><div class="overflow-x-auto bg-black/60"><div class="p-4 [&amp;_pre]:bg-transparent [&amp;_code]:bg-transparent"><div class="text-sm [&amp;_pre]:m-0 [&amp;_code]:m-0"><pre class="shiki github-dark" style="background-color:#00000000;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#6A737D"># Find isolated-workers processes</span></span>
<span class="line"><span style="color:#B392F0">ps</span><span style="color:#9ECBFF"> aux</span><span style="color:#F97583"> |</span><span style="color:#B392F0"> grep</span><span style="color:#9ECBFF"> "node.*worker"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Check for stale socket files</span></span>
<span class="line"><span style="color:#B392F0">ls</span><span style="color:#79B8FF"> -la</span><span style="color:#9ECBFF"> /tmp/isolated-workers-</span><span style="color:#79B8FF">*</span></span></code></pre></div></div></div></div></div><div class="docs-prose"><h2>Debugging Tips</h2>
<h3>Enabling Debug Logging</h3>
<p>Configure logging using the <code class="inline-code">logLevel</code> parameter:</p></div><div class="relative group my-6"><div class="
          rounded-lg overflow-hidden border border-white/10 bg-tertiary/80
          transition-all duration-300 border-glow
          shadow-neon-sm
        "><div class="px-4 py-3 bg-black/50 border-b border-white/5 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex gap-2"><span class="w-3 h-3 rounded-full bg-[#ff5f56] shadow-[0_0_6px_rgba(255,95,86,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#ffbd2e] shadow-[0_0_6px_rgba(255,189,46,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#27ca40] shadow-[0_0_6px_rgba(39,202,64,0.4)]"></span></div><span class="text-xs text-gray-500 font-mono">typescript</span></div><button class="
              text-xs flex items-center gap-1.5 px-2 py-1 rounded
              transition-all duration-200
              text-neon-cyan hover:text-neon-mint hover:bg-neon-cyan/10
            " title="Copy code"><svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>Copy</button></div><div class="overflow-x-auto bg-black/60"><div class="p-4 [&amp;_pre]:bg-transparent [&amp;_code]:bg-transparent"><div class="text-sm [&amp;_pre]:m-0 [&amp;_code]:m-0"><pre class="shiki github-dark" style="background-color:#00000000;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> worker</span><span style="color:#F97583"> =</span><span style="color:#F97583"> await</span><span style="color:#B392F0"> <a href="/isolated-workers/api/create-worker" class="code-link" title="View createWorker documentation">createWorker</a></span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">Messages</span><span style="color:#E1E4E8">>({</span></span>
<span class="line"><span style="color:#E1E4E8">  script: </span><span style="color:#9ECBFF">'./worker.js'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">  logLevel: </span><span style="color:#9ECBFF">'debug'</span><span style="color:#E1E4E8">, </span><span style="color:#6A737D">// 'debug' | 'info' | 'warn' | 'error'</span></span>
<span class="line"><span style="color:#E1E4E8">});</span></span></code></pre></div></div></div></div></div><div class="docs-prose"><h3>Checking Worker stdout/stderr</h3>
<p>Worker output can be captured for debugging:</p></div><div class="relative group my-6"><div class="
          rounded-lg overflow-hidden border border-white/10 bg-tertiary/80
          transition-all duration-300 border-glow
          shadow-neon-sm
        "><div class="px-4 py-3 bg-black/50 border-b border-white/5 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex gap-2"><span class="w-3 h-3 rounded-full bg-[#ff5f56] shadow-[0_0_6px_rgba(255,95,86,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#ffbd2e] shadow-[0_0_6px_rgba(255,189,46,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#27ca40] shadow-[0_0_6px_rgba(39,202,64,0.4)]"></span></div><span class="text-xs text-gray-500 font-mono">typescript</span></div><button class="
              text-xs flex items-center gap-1.5 px-2 py-1 rounded
              transition-all duration-200
              text-neon-cyan hover:text-neon-mint hover:bg-neon-cyan/10
            " title="Copy code"><svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>Copy</button></div><div class="overflow-x-auto bg-black/60"><div class="p-4 [&amp;_pre]:bg-transparent [&amp;_code]:bg-transparent"><div class="text-sm [&amp;_pre]:m-0 [&amp;_code]:m-0"><pre class="shiki github-dark" style="background-color:#00000000;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> worker</span><span style="color:#F97583"> =</span><span style="color:#F97583"> await</span><span style="color:#B392F0"> <a href="/isolated-workers/api/create-worker" class="code-link" title="View createWorker documentation">createWorker</a></span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">Messages</span><span style="color:#E1E4E8">>({</span></span>
<span class="line"><span style="color:#E1E4E8">  script: </span><span style="color:#9ECBFF">'./worker.js'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">  spawnOptions: { stdio: [</span><span style="color:#9ECBFF">'pipe'</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">'pipe'</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">'pipe'</span><span style="color:#E1E4E8">] }, </span><span style="color:#6A737D">// Capture all streams</span></span>
<span class="line"><span style="color:#E1E4E8">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// Access worker output (if exposed by your wrapper)</span></span>
<span class="line"><span style="color:#E1E4E8">worker.process.stdout?.</span><span style="color:#B392F0">on</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'data'</span><span style="color:#E1E4E8">, (</span><span style="color:#FFAB70">data</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">  console.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'Worker stdout:'</span><span style="color:#E1E4E8">, data.</span><span style="color:#B392F0">toString</span><span style="color:#E1E4E8">());</span></span>
<span class="line"><span style="color:#E1E4E8">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">worker.process.stderr?.</span><span style="color:#B392F0">on</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'data'</span><span style="color:#E1E4E8">, (</span><span style="color:#FFAB70">data</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">  console.</span><span style="color:#B392F0">error</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'Worker stderr:'</span><span style="color:#E1E4E8">, data.</span><span style="color:#B392F0">toString</span><span style="color:#E1E4E8">());</span></span>
<span class="line"><span style="color:#E1E4E8">});</span></span></code></pre></div></div></div></div></div><div class="docs-prose"><p>Or simply add console.log statements in your worker and run with inherited stdio:</p></div><div class="relative group my-6"><div class="
          rounded-lg overflow-hidden border border-white/10 bg-tertiary/80
          transition-all duration-300 border-glow
          shadow-neon-sm
        "><div class="px-4 py-3 bg-black/50 border-b border-white/5 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex gap-2"><span class="w-3 h-3 rounded-full bg-[#ff5f56] shadow-[0_0_6px_rgba(255,95,86,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#ffbd2e] shadow-[0_0_6px_rgba(255,189,46,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#27ca40] shadow-[0_0_6px_rgba(39,202,64,0.4)]"></span></div><span class="text-xs text-gray-500 font-mono">typescript</span></div><button class="
              text-xs flex items-center gap-1.5 px-2 py-1 rounded
              transition-all duration-200
              text-neon-cyan hover:text-neon-mint hover:bg-neon-cyan/10
            " title="Copy code"><svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>Copy</button></div><div class="overflow-x-auto bg-black/60"><div class="p-4 [&amp;_pre]:bg-transparent [&amp;_code]:bg-transparent"><div class="text-sm [&amp;_pre]:m-0 [&amp;_code]:m-0"><pre class="shiki github-dark" style="background-color:#00000000;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> worker</span><span style="color:#F97583"> =</span><span style="color:#F97583"> await</span><span style="color:#B392F0"> <a href="/isolated-workers/api/create-worker" class="code-link" title="View createWorker documentation">createWorker</a></span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">Messages</span><span style="color:#E1E4E8">>({</span></span>
<span class="line"><span style="color:#E1E4E8">  script: </span><span style="color:#9ECBFF">'./worker.js'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">  spawnOptions: { stdio: </span><span style="color:#9ECBFF">'inherit'</span><span style="color:#E1E4E8"> }, </span><span style="color:#6A737D">// Worker output goes to parent console</span></span>
<span class="line"><span style="color:#E1E4E8">});</span></span></code></pre></div></div></div></div></div><div class="docs-prose"><h3>Using Middleware for Message Inspection</h3>
<p>Add middleware to log all messages for debugging:</p></div><div class="relative group my-6"><div class="
          rounded-lg overflow-hidden border border-white/10 bg-tertiary/80
          transition-all duration-300 border-glow
          shadow-neon-sm
        "><div class="px-4 py-3 bg-black/50 border-b border-white/5 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex gap-2"><span class="w-3 h-3 rounded-full bg-[#ff5f56] shadow-[0_0_6px_rgba(255,95,86,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#ffbd2e] shadow-[0_0_6px_rgba(255,189,46,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#27ca40] shadow-[0_0_6px_rgba(39,202,64,0.4)]"></span></div><span class="text-xs text-gray-500 font-mono">typescript</span></div><button class="
              text-xs flex items-center gap-1.5 px-2 py-1 rounded
              transition-all duration-200
              text-neon-cyan hover:text-neon-mint hover:bg-neon-cyan/10
            " title="Copy code"><svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>Copy</button></div><div class="overflow-x-auto bg-black/60"><div class="p-4 [&amp;_pre]:bg-transparent [&amp;_code]:bg-transparent"><div class="text-sm [&amp;_pre]:m-0 [&amp;_code]:m-0"><pre class="shiki github-dark" style="background-color:#00000000;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> worker</span><span style="color:#F97583"> =</span><span style="color:#F97583"> await</span><span style="color:#B392F0"> <a href="/isolated-workers/api/create-worker" class="code-link" title="View createWorker documentation">createWorker</a></span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">Messages</span><span style="color:#E1E4E8">>({</span></span>
<span class="line"><span style="color:#E1E4E8">  script: </span><span style="color:#9ECBFF">'./worker.js'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">  middleware: [</span></span>
<span class="line"><span style="color:#E1E4E8">    {</span></span>
<span class="line"><span style="color:#B392F0">      beforeSend</span><span style="color:#E1E4E8">: (</span><span style="color:#FFAB70">message</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">        console.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'Sending:'</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">JSON</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">stringify</span><span style="color:#E1E4E8">(message, </span><span style="color:#79B8FF">null</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">2</span><span style="color:#E1E4E8">));</span></span>
<span class="line"><span style="color:#F97583">        return</span><span style="color:#E1E4E8"> message;</span></span>
<span class="line"><span style="color:#E1E4E8">      },</span></span>
<span class="line"><span style="color:#B392F0">      afterReceive</span><span style="color:#E1E4E8">: (</span><span style="color:#FFAB70">response</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">        console.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'Received:'</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">JSON</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">stringify</span><span style="color:#E1E4E8">(response, </span><span style="color:#79B8FF">null</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">2</span><span style="color:#E1E4E8">));</span></span>
<span class="line"><span style="color:#F97583">        return</span><span style="color:#E1E4E8"> response;</span></span>
<span class="line"><span style="color:#E1E4E8">      },</span></span>
<span class="line"><span style="color:#E1E4E8">    },</span></span>
<span class="line"><span style="color:#E1E4E8">  ],</span></span>
<span class="line"><span style="color:#E1E4E8">});</span></span></code></pre></div></div></div></div></div><div class="docs-prose"><p>See <a href="/isolated-workers/docs/guides/middleware">Middleware</a> for more details on the middleware system.</p>
<h2>Platform-Specific Issues</h2>
<h3>Windows Named Pipe Considerations</h3>
<p><strong>Problem</strong>: Connection issues or errors on Windows systems.</p>
<p><strong>Cause</strong>: Windows uses named pipes instead of Unix sockets. Some considerations:</p>
<ul>
<li>Named pipe paths have different format (<code class="inline-code">\\.\pipe\name</code>)</li>
<li>Maximum path length differs from Unix</li>
<li>Pipe cleanup works differently</li>
</ul>
<p><strong>Solution</strong>: isolated-workers handles platform differences automatically, but be aware of:</p>
<ol>
<li>Pipe naming: Avoid special characters in worker identifiers</li>
<li>Permissions: Run as administrator if you encounter access issues</li>
<li>Cleanup: Named pipes are automatically cleaned up when the process exits, but stale pipes may need manual cleanup</li>
</ol></div><div class="relative group my-6"><div class="
          rounded-lg overflow-hidden border border-white/10 bg-tertiary/80
          transition-all duration-300 border-glow
          shadow-neon-sm
        "><div class="px-4 py-3 bg-black/50 border-b border-white/5 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex gap-2"><span class="w-3 h-3 rounded-full bg-[#ff5f56] shadow-[0_0_6px_rgba(255,95,86,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#ffbd2e] shadow-[0_0_6px_rgba(255,189,46,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#27ca40] shadow-[0_0_6px_rgba(39,202,64,0.4)]"></span></div><span class="text-xs text-gray-500 font-mono">powershell</span></div><button class="
              text-xs flex items-center gap-1.5 px-2 py-1 rounded
              transition-all duration-200
              text-neon-cyan hover:text-neon-mint hover:bg-neon-cyan/10
            " title="Copy code"><svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>Copy</button></div><div class="overflow-x-auto bg-black/60"><div class="p-4 [&amp;_pre]:bg-transparent [&amp;_code]:bg-transparent"><div class="text-sm [&amp;_pre]:m-0 [&amp;_code]:m-0"><pre class="shiki"><code># List named pipes (PowerShell)
Get-ChildItem \\.\pipe\ | Where-Object { $_.Name -like "*isolated-workers*" }</code></pre></div></div></div></div></div><div class="docs-prose"><h3>Unix Socket Path Length Limits</h3>
<p><strong>Problem</strong>: "ENAMETOOLONG" error when creating workers on Unix systems.</p>
<p><strong>Cause</strong>: Unix domain sockets have a maximum path length (typically 104-108 characters on macOS, 108 on Linux). Long socket paths exceed this limit.</p>
<p><strong>Solution</strong>:</p>
<ol>
<li>Use a shorter socket directory:</li>
</ol></div><div class="relative group my-6"><div class="
          rounded-lg overflow-hidden border border-white/10 bg-tertiary/80
          transition-all duration-300 border-glow
          shadow-neon-sm
        "><div class="px-4 py-3 bg-black/50 border-b border-white/5 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex gap-2"><span class="w-3 h-3 rounded-full bg-[#ff5f56] shadow-[0_0_6px_rgba(255,95,86,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#ffbd2e] shadow-[0_0_6px_rgba(255,189,46,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#27ca40] shadow-[0_0_6px_rgba(39,202,64,0.4)]"></span></div><span class="text-xs text-gray-500 font-mono">typescript</span></div><button class="
              text-xs flex items-center gap-1.5 px-2 py-1 rounded
              transition-all duration-200
              text-neon-cyan hover:text-neon-mint hover:bg-neon-cyan/10
            " title="Copy code"><svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>Copy</button></div><div class="overflow-x-auto bg-black/60"><div class="p-4 [&amp;_pre]:bg-transparent [&amp;_code]:bg-transparent"><div class="text-sm [&amp;_pre]:m-0 [&amp;_code]:m-0"><pre class="shiki github-dark" style="background-color:#00000000;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> worker</span><span style="color:#F97583"> =</span><span style="color:#F97583"> await</span><span style="color:#B392F0"> <a href="/isolated-workers/api/create-worker" class="code-link" title="View createWorker documentation">createWorker</a></span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">Messages</span><span style="color:#E1E4E8">>({</span></span>
<span class="line"><span style="color:#E1E4E8">  script: </span><span style="color:#9ECBFF">'./worker.js'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">  socketDir: </span><span style="color:#9ECBFF">'/tmp/iw'</span><span style="color:#E1E4E8">, </span><span style="color:#6A737D">// Short path</span></span>
<span class="line"><span style="color:#E1E4E8">});</span></span></code></pre></div></div></div></div></div><div class="docs-prose"><ol start="2">
<li>Use shorter worker identifiers:</li>
</ol></div><div class="relative group my-6"><div class="
          rounded-lg overflow-hidden border border-white/10 bg-tertiary/80
          transition-all duration-300 border-glow
          shadow-neon-sm
        "><div class="px-4 py-3 bg-black/50 border-b border-white/5 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex gap-2"><span class="w-3 h-3 rounded-full bg-[#ff5f56] shadow-[0_0_6px_rgba(255,95,86,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#ffbd2e] shadow-[0_0_6px_rgba(255,189,46,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#27ca40] shadow-[0_0_6px_rgba(39,202,64,0.4)]"></span></div><span class="text-xs text-gray-500 font-mono">typescript</span></div><button class="
              text-xs flex items-center gap-1.5 px-2 py-1 rounded
              transition-all duration-200
              text-neon-cyan hover:text-neon-mint hover:bg-neon-cyan/10
            " title="Copy code"><svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>Copy</button></div><div class="overflow-x-auto bg-black/60"><div class="p-4 [&amp;_pre]:bg-transparent [&amp;_code]:bg-transparent"><div class="text-sm [&amp;_pre]:m-0 [&amp;_code]:m-0"><pre class="shiki github-dark" style="background-color:#00000000;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> worker</span><span style="color:#F97583"> =</span><span style="color:#F97583"> await</span><span style="color:#B392F0"> <a href="/isolated-workers/api/create-worker" class="code-link" title="View createWorker documentation">createWorker</a></span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">Messages</span><span style="color:#E1E4E8">>({</span></span>
<span class="line"><span style="color:#E1E4E8">  script: </span><span style="color:#9ECBFF">'./worker.js'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">  id: </span><span style="color:#9ECBFF">'w1'</span><span style="color:#E1E4E8">, </span><span style="color:#6A737D">// Instead of 'my-very-long-worker-identifier'</span></span>
<span class="line"><span style="color:#E1E4E8">});</span></span></code></pre></div></div></div></div></div><div class="docs-prose"><ol start="3">
<li>Let isolated-workers choose the path automatically (it handles truncation):</li>
</ol></div><div class="relative group my-6"><div class="
          rounded-lg overflow-hidden border border-white/10 bg-tertiary/80
          transition-all duration-300 border-glow
          shadow-neon-sm
        "><div class="px-4 py-3 bg-black/50 border-b border-white/5 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex gap-2"><span class="w-3 h-3 rounded-full bg-[#ff5f56] shadow-[0_0_6px_rgba(255,95,86,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#ffbd2e] shadow-[0_0_6px_rgba(255,189,46,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#27ca40] shadow-[0_0_6px_rgba(39,202,64,0.4)]"></span></div><span class="text-xs text-gray-500 font-mono">typescript</span></div><button class="
              text-xs flex items-center gap-1.5 px-2 py-1 rounded
              transition-all duration-200
              text-neon-cyan hover:text-neon-mint hover:bg-neon-cyan/10
            " title="Copy code"><svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>Copy</button></div><div class="overflow-x-auto bg-black/60"><div class="p-4 [&amp;_pre]:bg-transparent [&amp;_code]:bg-transparent"><div class="text-sm [&amp;_pre]:m-0 [&amp;_code]:m-0"><pre class="shiki github-dark" style="background-color:#00000000;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#6A737D">// Don't specify socketDir - uses optimized default</span></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> worker</span><span style="color:#F97583"> =</span><span style="color:#F97583"> await</span><span style="color:#B392F0"> <a href="/isolated-workers/api/create-worker" class="code-link" title="View createWorker documentation">createWorker</a></span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">Messages</span><span style="color:#E1E4E8">>({</span></span>
<span class="line"><span style="color:#E1E4E8">  script: </span><span style="color:#9ECBFF">'./worker.js'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">});</span></span></code></pre></div></div></div></div></div><div class="docs-prose"><h2>Getting More Help</h2>
<p>If you're still experiencing issues:</p>
<ol>
<li>Check the <a href="https://github.com/AgentEnder/isolated-workers/issues">GitHub Issues</a> for similar problems</li>
<li>Enable debug logging and capture the output</li>
<li>Create a minimal reproduction case</li>
<li>Open a new issue with your debug output and reproduction</li>
</ol>
<h2>See Also</h2>
<ul>
<li><a href="/isolated-workers/docs/guides/error-handling">Error Handling</a> - How errors propagate from workers</li>
<li><a href="/isolated-workers/docs/guides/worker-lifecycle">Worker Lifecycle</a> - Managing worker state and shutdown</li>
<li><a href="/isolated-workers/docs/guides/timeout-configuration">Timeout Configuration</a> - Configuring operation timeouts</li>
<li><a href="/isolated-workers/docs/guides/middleware">Middleware</a> - Adding custom message processing</li>
</ul></div></div><div class="mt-12 pt-8 border-t border-tertiary/50"><a href="/isolated-workers/" class="text-neon-cyan hover:text-neon-purple transition-colors">â† Back to Home</a></div></div></div></main></div></div><div class="fixed bottom-4 right-4 z-50"><div class="relative "><button class="p-2 rounded-lg bg-tertiary/50 border border-tertiary hover:border-neon-cyan/50 transition-colors" title="Toggle visual effects" aria-label="Toggle visual effects menu"><svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"></path></svg></button></div></div></div></div>
        
        <script id="vike_pageContext" type="application/json">{"pageId":"\\/pages\\/docs","routeParams":{"splat":"guides\\/troubleshooting"},"data":{"doc":{"path":"\\/docs\\/guides\\/troubleshooting","filePath":"\\/home\\/runner\\/work\\/isolated-workers\\/isolated-workers\\/docs\\/guides\\/troubleshooting.md","title":"Troubleshooting","description":"Common issues and how to resolve them","nav":{"section":"Guides","order":7}},"segments":[{"type":"html","html":"\u003ch1>Troubleshooting\u003c\\/h1>\n\u003cp>This guide covers common issues you may encounter when using isolated-workers and how to resolve them.\u003c\\/p>\n\u003ch2>Connection Errors\u003c\\/h2>\n\u003ch3>Worker Failed to Start\u003c\\/h3>\n\u003cp>\u003cstrong>Problem\u003c\\/strong>: \u003ccode class=\"inline-code\">\u003ca class=\"code-link\" href=\"\\/isolated-workers\\/isolated-workers\\/api\\/create-worker\">createWorker\u003c\\/a>\u003c\\/code> throws an error indicating the worker failed to start.\u003c\\/p>\n\u003cp>\u003cstrong>Cause\u003c\\/strong>: This typically occurs when:\u003c\\/p>\n\u003cul>\n\u003cli>The script path is incorrect or the file doesn't exist\u003c\\/li>\n\u003cli>The worker script has syntax errors\u003c\\/li>\n\u003cli>The Node.js executable can't be found\u003c\\/li>\n\u003cli>The script file doesn't have execute permissions\u003c\\/li>\n\u003c\\/ul>\n\u003cp>\u003cstrong>Solution\u003c\\/strong>: Verify your script path and ensure the file exists and is valid JavaScript\\/TypeScript.\u003c\\/p>"},{"type":"code-block","language":"typescript","content":"import { createWorker } from 'isolated-workers';\nimport { resolve } from 'path';\n\n\\/\\/ Use absolute paths to avoid path resolution issues\nconst worker = await createWorker\u003cMessages>({\n  script: resolve(__dirname, '.\\/worker.js'),\n});","highlightedHtml":"\u003cpre class=\"shiki github-dark\" style=\"background-color:#00000000;color:#e1e4e8\" tabindex=\"0\">\u003ccode>\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">import\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> { \u003ca href=\"\\/isolated-workers\\/api\\/create-worker\" class=\"code-link\" title=\"View createWorker documentation\">createWorker\u003c\\/a> } \u003c\\/span>\u003cspan style=\"color:#F97583\">from\u003c\\/span>\u003cspan style=\"color:#9ECBFF\"> 'isolated-workers'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">;\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">import\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> { resolve } \u003c\\/span>\u003cspan style=\"color:#F97583\">from\u003c\\/span>\u003cspan style=\"color:#9ECBFF\"> 'path'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">;\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#6A737D\">\\/\\/ Use absolute paths to avoid path resolution issues\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">const\u003c\\/span>\u003cspan style=\"color:#79B8FF\"> worker\u003c\\/span>\u003cspan style=\"color:#F97583\"> =\u003c\\/span>\u003cspan style=\"color:#F97583\"> await\u003c\\/span>\u003cspan style=\"color:#B392F0\"> \u003ca href=\"\\/isolated-workers\\/api\\/create-worker\" class=\"code-link\" title=\"View createWorker documentation\">createWorker\u003c\\/a>\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">&#x3C;\u003c\\/span>\u003cspan style=\"color:#B392F0\">Messages\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">>({\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  script: \u003c\\/span>\u003cspan style=\"color:#B392F0\">resolve\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">(__dirname, \u003c\\/span>\u003cspan style=\"color:#9ECBFF\">'.\\/worker.js'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">),\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">});\u003c\\/span>\u003c\\/span>\u003c\\/code>\u003c\\/pre>"},{"type":"html","html":"\u003cp>\u003cstrong>Debugging Steps\u003c\\/strong>:\u003c\\/p>\n\u003col>\n\u003cli>Try running the worker script directly: \u003ccode class=\"inline-code\">node .\\/worker.js\u003c\\/code>\u003c\\/li>\n\u003cli>Check for syntax errors in your IDE or with \u003ccode class=\"inline-code\">node --check .\\/worker.js\u003c\\/code>\u003c\\/li>\n\u003cli>Ensure the path is absolute or correctly relative to the current working directory\u003c\\/li>\n\u003c\\/ol>\n\u003ch3>Connection Timeout\u003c\\/h3>\n\u003cp>\u003cstrong>Problem\u003c\\/strong>: Worker starts but connection times out with \"Connection timeout\" or similar error.\u003c\\/p>\n\u003cp>\u003cstrong>Cause\u003c\\/strong>: The worker process started but didn't establish an IPC connection. This usually means the worker script doesn't call \u003ccode class=\"inline-code\">\u003ca class=\"code-link\" href=\"\\/isolated-workers\\/isolated-workers\\/api\\/start-worker-server\">startWorkerServer\u003c\\/a>\u003c\\/code>.\u003c\\/p>\n\u003cp>\u003cstrong>Solution\u003c\\/strong>: Ensure your worker script calls \u003ccode class=\"inline-code\">\u003ca class=\"code-link\" href=\"\\/isolated-workers\\/isolated-workers\\/api\\/start-worker-server\">startWorkerServer\u003c\\/a>\u003c\\/code> at the top level:\u003c\\/p>"},{"type":"code-block","language":"typescript","content":"\\/\\/ worker.ts - CORRECT\nimport { startWorkerServer } from 'isolated-workers';\n\nstartWorkerServer\u003cMessages>({\n  handlers: {\n    \\/\\/ your handlers\n  },\n});","highlightedHtml":"\u003cpre class=\"shiki github-dark\" style=\"background-color:#00000000;color:#e1e4e8\" tabindex=\"0\">\u003ccode>\u003cspan class=\"line\">\u003cspan style=\"color:#6A737D\">\\/\\/ worker.ts - CORRECT\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">import\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> { \u003ca href=\"\\/isolated-workers\\/api\\/start-worker-server\" class=\"code-link\" title=\"View startWorkerServer documentation\">startWorkerServer\u003c\\/a> } \u003c\\/span>\u003cspan style=\"color:#F97583\">from\u003c\\/span>\u003cspan style=\"color:#9ECBFF\"> 'isolated-workers'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">;\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#B392F0\">\u003ca href=\"\\/isolated-workers\\/api\\/start-worker-server\" class=\"code-link\" title=\"View startWorkerServer documentation\">startWorkerServer\u003c\\/a>\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">&#x3C;\u003c\\/span>\u003cspan style=\"color:#B392F0\">Messages\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">>({\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  handlers: {\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#6A737D\">    \\/\\/ your handlers\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  },\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">});\u003c\\/span>\u003c\\/span>\u003c\\/code>\u003c\\/pre>"},{"type":"html","html":"\u003cp>Common mistakes to avoid:\u003c\\/p>"},{"type":"code-block","language":"typescript","content":"\\/\\/ WRONG - startWorkerServer inside async function that's never called\nasync function main() {\n  startWorkerServer\u003cMessages>({ handlers: {} });\n}\n\n\\/\\/ WRONG - conditional that might not execute\nif (process.env.SOME_VAR) {\n  startWorkerServer\u003cMessages>({ handlers: {} });\n}","highlightedHtml":"\u003cpre class=\"shiki github-dark\" style=\"background-color:#00000000;color:#e1e4e8\" tabindex=\"0\">\u003ccode>\u003cspan class=\"line\">\u003cspan style=\"color:#6A737D\">\\/\\/ WRONG - \u003ca href=\"\\/isolated-workers\\/api\\/start-worker-server\" class=\"code-link\" title=\"View startWorkerServer documentation\">startWorkerServer\u003c\\/a> inside async function that's never called\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">async\u003c\\/span>\u003cspan style=\"color:#F97583\"> function\u003c\\/span>\u003cspan style=\"color:#B392F0\"> main\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">() {\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#B392F0\">  \u003ca href=\"\\/isolated-workers\\/api\\/start-worker-server\" class=\"code-link\" title=\"View startWorkerServer documentation\">startWorkerServer\u003c\\/a>\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">&#x3C;\u003c\\/span>\u003cspan style=\"color:#B392F0\">Messages\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">>({ handlers: {} });\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">}\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#6A737D\">\\/\\/ WRONG - conditional that might not execute\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">if\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> (process.env.\u003c\\/span>\u003cspan style=\"color:#79B8FF\">SOME_VAR\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">) {\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#B392F0\">  \u003ca href=\"\\/isolated-workers\\/api\\/start-worker-server\" class=\"code-link\" title=\"View startWorkerServer documentation\">startWorkerServer\u003c\\/a>\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">&#x3C;\u003c\\/span>\u003cspan style=\"color:#B392F0\">Messages\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">>({ handlers: {} });\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">}\u003c\\/span>\u003c\\/span>\u003c\\/code>\u003c\\/pre>"},{"type":"html","html":"\u003ch3>Socket Permission Issues\u003c\\/h3>\n\u003cp>\u003cstrong>Problem\u003c\\/strong>: Error messages about socket permissions or \"EACCES\" errors.\u003c\\/p>\n\u003cp>\u003cstrong>Cause\u003c\\/strong>: On Unix systems, socket files are created in a temporary directory. Permission issues can occur if:\u003c\\/p>\n\u003cul>\n\u003cli>The temp directory has restrictive permissions\u003c\\/li>\n\u003cli>A previous socket file wasn't cleaned up and is owned by a different user\u003c\\/li>\n\u003cli>SELinux or AppArmor policies are blocking socket creation\u003c\\/li>\n\u003c\\/ul>\n\u003cp>\u003cstrong>Solution\u003c\\/strong>:\u003c\\/p>\n\u003col>\n\u003cli>Check temp directory permissions:\u003c\\/li>\n\u003c\\/ol>"},{"type":"code-block","language":"bash","content":"ls -la \\/tmp","highlightedHtml":"\u003cpre class=\"shiki github-dark\" style=\"background-color:#00000000;color:#e1e4e8\" tabindex=\"0\">\u003ccode>\u003cspan class=\"line\">\u003cspan style=\"color:#B392F0\">ls\u003c\\/span>\u003cspan style=\"color:#79B8FF\"> -la\u003c\\/span>\u003cspan style=\"color:#9ECBFF\"> \\/tmp\u003c\\/span>\u003c\\/span>\u003c\\/code>\u003c\\/pre>"},{"type":"html","html":"\u003col start=\"2\">\n\u003cli>Clean up stale socket files:\u003c\\/li>\n\u003c\\/ol>"},{"type":"code-block","language":"bash","content":"rm -f \\/tmp\\/isolated-workers-*","highlightedHtml":"\u003cpre class=\"shiki github-dark\" style=\"background-color:#00000000;color:#e1e4e8\" tabindex=\"0\">\u003ccode>\u003cspan class=\"line\">\u003cspan style=\"color:#B392F0\">rm\u003c\\/span>\u003cspan style=\"color:#79B8FF\"> -f\u003c\\/span>\u003cspan style=\"color:#9ECBFF\"> \\/tmp\\/isolated-workers-\u003c\\/span>\u003cspan style=\"color:#79B8FF\">*\u003c\\/span>\u003c\\/span>\u003c\\/code>\u003c\\/pre>"},{"type":"html","html":"\u003col start=\"3\">\n\u003cli>Specify a custom socket path with proper permissions:\u003c\\/li>\n\u003c\\/ol>"},{"type":"code-block","language":"typescript","content":"const worker = await createWorker\u003cMessages>({\n  script: '.\\/worker.js',\n  socketPath: '\\/path\\/to\\/socket.sock', \\/\\/ Optional - defaults to auto-generated path\n});","highlightedHtml":"\u003cpre class=\"shiki github-dark\" style=\"background-color:#00000000;color:#e1e4e8\" tabindex=\"0\">\u003ccode>\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">const\u003c\\/span>\u003cspan style=\"color:#79B8FF\"> worker\u003c\\/span>\u003cspan style=\"color:#F97583\"> =\u003c\\/span>\u003cspan style=\"color:#F97583\"> await\u003c\\/span>\u003cspan style=\"color:#B392F0\"> \u003ca href=\"\\/isolated-workers\\/api\\/create-worker\" class=\"code-link\" title=\"View createWorker documentation\">createWorker\u003c\\/a>\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">&#x3C;\u003c\\/span>\u003cspan style=\"color:#B392F0\">Messages\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">>({\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  script: \u003c\\/span>\u003cspan style=\"color:#9ECBFF\">'.\\/worker.js'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">,\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  socketPath: \u003c\\/span>\u003cspan style=\"color:#9ECBFF\">'\\/path\\/to\\/socket.sock'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">, \u003c\\/span>\u003cspan style=\"color:#6A737D\">\\/\\/ Optional - defaults to auto-generated path\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">});\u003c\\/span>\u003c\\/span>\u003c\\/code>\u003c\\/pre>"},{"type":"html","html":"\u003ch2>Message Errors\u003c\\/h2>\n\u003ch3>Message Timeout\u003c\\/h3>\n\u003cp>\u003cstrong>Problem\u003c\\/strong>: A request times out with \"Message timeout\" or similar error.\u003c\\/p>\n\u003cp>\u003cstrong>Cause\u003c\\/strong>: The worker handler is taking longer than the configured timeout. This can happen when:\u003c\\/p>\n\u003cul>\n\u003cli>The operation is legitimately slow (file I\\/O, network requests, heavy computation)\u003c\\/li>\n\u003cli>The handler is stuck in an infinite loop\u003c\\/li>\n\u003cli>The handler is waiting on a resource that's not available\u003c\\/li>\n\u003c\\/ul>\n\u003cp>\u003cstrong>Solution\u003c\\/strong>: Configure appropriate timeouts for your operations:\u003c\\/p>"},{"type":"code-block","language":"typescript","content":"import { createWorker, type TimeoutConfig } from 'isolated-workers';\n\nconst timeout: TimeoutConfig\u003cMessages> = {\n  WORKER_MESSAGE: 5000, \\/\\/ 5s default\n  processLargeFile: 120000, \\/\\/ 2 minutes for slow operations\n  quickCheck: 1000, \\/\\/ 1 second for fast operations\n};\n\nconst worker = await createWorker\u003cMessages>({\n  script: '.\\/worker.js',\n  timeout,\n});","highlightedHtml":"\u003cpre class=\"shiki github-dark\" style=\"background-color:#00000000;color:#e1e4e8\" tabindex=\"0\">\u003ccode>\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">import\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> { \u003ca href=\"\\/isolated-workers\\/api\\/create-worker\" class=\"code-link\" title=\"View createWorker documentation\">createWorker\u003c\\/a>, \u003c\\/span>\u003cspan style=\"color:#F97583\">type\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> \u003ca href=\"\\/isolated-workers\\/api\\/timeout-config\" class=\"code-link\" title=\"View TimeoutConfig documentation\">TimeoutConfig\u003c\\/a> } \u003c\\/span>\u003cspan style=\"color:#F97583\">from\u003c\\/span>\u003cspan style=\"color:#9ECBFF\"> 'isolated-workers'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">;\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">const\u003c\\/span>\u003cspan style=\"color:#79B8FF\"> timeout\u003c\\/span>\u003cspan style=\"color:#F97583\">:\u003c\\/span>\u003cspan style=\"color:#B392F0\"> \u003ca href=\"\\/isolated-workers\\/api\\/timeout-config\" class=\"code-link\" title=\"View TimeoutConfig documentation\">TimeoutConfig\u003c\\/a>\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">&#x3C;\u003c\\/span>\u003cspan style=\"color:#B392F0\">Messages\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">> \u003c\\/span>\u003cspan style=\"color:#F97583\">=\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> {\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  WORKER_MESSAGE: \u003c\\/span>\u003cspan style=\"color:#79B8FF\">5000\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">, \u003c\\/span>\u003cspan style=\"color:#6A737D\">\\/\\/ 5s default\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  processLargeFile: \u003c\\/span>\u003cspan style=\"color:#79B8FF\">120000\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">, \u003c\\/span>\u003cspan style=\"color:#6A737D\">\\/\\/ 2 minutes for slow operations\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  quickCheck: \u003c\\/span>\u003cspan style=\"color:#79B8FF\">1000\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">, \u003c\\/span>\u003cspan style=\"color:#6A737D\">\\/\\/ 1 second for fast operations\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">};\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">const\u003c\\/span>\u003cspan style=\"color:#79B8FF\"> worker\u003c\\/span>\u003cspan style=\"color:#F97583\"> =\u003c\\/span>\u003cspan style=\"color:#F97583\"> await\u003c\\/span>\u003cspan style=\"color:#B392F0\"> \u003ca href=\"\\/isolated-workers\\/api\\/create-worker\" class=\"code-link\" title=\"View createWorker documentation\">createWorker\u003c\\/a>\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">&#x3C;\u003c\\/span>\u003cspan style=\"color:#B392F0\">Messages\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">>({\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  script: \u003c\\/span>\u003cspan style=\"color:#9ECBFF\">'.\\/worker.js'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">,\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  timeout,\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">});\u003c\\/span>\u003c\\/span>\u003c\\/code>\u003c\\/pre>"},{"type":"html","html":"\u003cp>For handlers that may take variable time, implement progress reporting or break the work into smaller chunks.\u003c\\/p>\n\u003ch3>Serialization Errors\u003c\\/h3>\n\u003cp>\u003cstrong>Problem\u003c\\/strong>: Errors about \"circular structure\" or \"not JSON serializable\" when sending messages.\u003c\\/p>\n\u003cp>\u003cstrong>Cause\u003c\\/strong>: Messages between host and worker are serialized as JSON. Objects that can't be serialized cause errors:\u003c\\/p>\n\u003cul>\n\u003cli>Circular references\u003c\\/li>\n\u003cli>Functions\u003c\\/li>\n\u003cli>BigInt values\u003c\\/li>\n\u003cli>Symbols\u003c\\/li>\n\u003cli>Class instances with methods\u003c\\/li>\n\u003c\\/ul>\n\u003cp>\u003cstrong>Solution\u003c\\/strong>: Ensure all message payloads are plain JSON-serializable objects:\u003c\\/p>"},{"type":"code-block","language":"typescript","content":"\\/\\/ WRONG - contains function and circular reference\nconst message = {\n  data: myData,\n  callback: () => console.log('done'), \\/\\/ Functions can't be serialized\n  self: null as any,\n};\nmessage.self = message; \\/\\/ Circular reference\n\n\\/\\/ CORRECT - plain data only\nconst message = {\n  data: myData,\n  callbackId: 'done-callback', \\/\\/ Use IDs instead of functions\n};","highlightedHtml":"\u003cpre class=\"shiki github-dark\" style=\"background-color:#00000000;color:#e1e4e8\" tabindex=\"0\">\u003ccode>\u003cspan class=\"line\">\u003cspan style=\"color:#6A737D\">\\/\\/ WRONG - contains function and circular reference\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">const\u003c\\/span>\u003cspan style=\"color:#79B8FF\"> message\u003c\\/span>\u003cspan style=\"color:#F97583\"> =\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> {\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  data: myData,\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#B392F0\">  callback\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">: () \u003c\\/span>\u003cspan style=\"color:#F97583\">=>\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> console.\u003c\\/span>\u003cspan style=\"color:#B392F0\">log\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">(\u003c\\/span>\u003cspan style=\"color:#9ECBFF\">'done'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">), \u003c\\/span>\u003cspan style=\"color:#6A737D\">\\/\\/ Functions can't be serialized\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  self: \u003c\\/span>\u003cspan style=\"color:#79B8FF\">null\u003c\\/span>\u003cspan style=\"color:#F97583\"> as\u003c\\/span>\u003cspan style=\"color:#79B8FF\"> any\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">,\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">};\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">message.self \u003c\\/span>\u003cspan style=\"color:#F97583\">=\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> message; \u003c\\/span>\u003cspan style=\"color:#6A737D\">\\/\\/ Circular reference\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#6A737D\">\\/\\/ CORRECT - plain data only\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">const\u003c\\/span>\u003cspan style=\"color:#79B8FF\"> message\u003c\\/span>\u003cspan style=\"color:#F97583\"> =\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> {\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  data: myData,\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  callbackId: \u003c\\/span>\u003cspan style=\"color:#9ECBFF\">'done-callback'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">, \u003c\\/span>\u003cspan style=\"color:#6A737D\">\\/\\/ Use IDs instead of functions\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">};\u003c\\/span>\u003c\\/span>\u003c\\/code>\u003c\\/pre>"},{"type":"html","html":"\u003cp>For complex data, use a custom serializer. See \u003ca href=\"\\/isolated-workers\\/docs\\/guides\\/custom-serializers\">Custom Serializers\u003c\\/a> for details.\u003c\\/p>\n\u003ch3>Type Mismatches\u003c\\/h3>\n\u003cp>\u003cstrong>Problem\u003c\\/strong>: Runtime errors about unexpected message types or missing handlers.\u003c\\/p>\n\u003cp>\u003cstrong>Cause\u003c\\/strong>: The host and worker have different message type definitions. This can happen when:\u003c\\/p>\n\u003cul>\n\u003cli>Message definitions are duplicated instead of shared\u003c\\/li>\n\u003cli>The worker wasn't rebuilt after message type changes\u003c\\/li>\n\u003cli>Different versions of message definitions are used\u003c\\/li>\n\u003c\\/ul>\n\u003cp>\u003cstrong>Solution\u003c\\/strong>: Share message definitions between host and worker:\u003c\\/p>"},{"type":"code-block","language":"typescript","content":"\\/\\/ messages.ts - shared definitions\nimport { defineMessages } from 'isolated-workers';\n\nexport type Messages = defineMessages\u003c{\n  greet: { name: string } => string;\n  calculate: { a: number; b: number } => number;\n}>;","highlightedHtml":"\u003cpre class=\"shiki github-dark\" style=\"background-color:#00000000;color:#e1e4e8\" tabindex=\"0\">\u003ccode>\u003cspan class=\"line\">\u003cspan style=\"color:#6A737D\">\\/\\/ messages.ts - shared definitions\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">import\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> { defineMessages } \u003c\\/span>\u003cspan style=\"color:#F97583\">from\u003c\\/span>\u003cspan style=\"color:#9ECBFF\"> 'isolated-workers'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">;\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">export\u003c\\/span>\u003cspan style=\"color:#F97583\"> type\u003c\\/span>\u003cspan style=\"color:#B392F0\"> Messages\u003c\\/span>\u003cspan style=\"color:#F97583\"> =\u003c\\/span>\u003cspan style=\"color:#B392F0\"> defineMessages\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">&#x3C;{\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#FFAB70\">  greet\u003c\\/span>\u003cspan style=\"color:#F97583\">:\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> { \u003c\\/span>\u003cspan style=\"color:#FFAB70\">name\u003c\\/span>\u003cspan style=\"color:#F97583\">:\u003c\\/span>\u003cspan style=\"color:#79B8FF\"> string\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> } \u003c\\/span>\u003cspan style=\"color:#F97583\">=>\u003c\\/span>\u003cspan style=\"color:#79B8FF\"> string\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">;\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#FFAB70\">  calculate\u003c\\/span>\u003cspan style=\"color:#F97583\">:\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> { \u003c\\/span>\u003cspan style=\"color:#FFAB70\">a\u003c\\/span>\u003cspan style=\"color:#F97583\">:\u003c\\/span>\u003cspan style=\"color:#79B8FF\"> number\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">; \u003c\\/span>\u003cspan style=\"color:#FFAB70\">b\u003c\\/span>\u003cspan style=\"color:#F97583\">:\u003c\\/span>\u003cspan style=\"color:#79B8FF\"> number\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> } \u003c\\/span>\u003cspan style=\"color:#F97583\">=>\u003c\\/span>\u003cspan style=\"color:#79B8FF\"> number\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">;\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">}>;\u003c\\/span>\u003c\\/span>\u003c\\/code>\u003c\\/pre>"},{"type":"code-block","language":"typescript","content":"\\/\\/ host.ts\nimport { Messages } from '.\\/messages.js';\nconst worker = await createWorker\u003cMessages>({ script: '.\\/worker.js' });\n\n\\/\\/ worker.ts\nimport { Messages } from '.\\/messages.js';\nstartWorkerServer\u003cMessages>({\n  handlers: {\n    \\/* ... *\\/\n  },\n});","highlightedHtml":"\u003cpre class=\"shiki github-dark\" style=\"background-color:#00000000;color:#e1e4e8\" tabindex=\"0\">\u003ccode>\u003cspan class=\"line\">\u003cspan style=\"color:#6A737D\">\\/\\/ host.ts\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">import\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> { Messages } \u003c\\/span>\u003cspan style=\"color:#F97583\">from\u003c\\/span>\u003cspan style=\"color:#9ECBFF\"> '.\\/messages.js'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">;\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">const\u003c\\/span>\u003cspan style=\"color:#79B8FF\"> worker\u003c\\/span>\u003cspan style=\"color:#F97583\"> =\u003c\\/span>\u003cspan style=\"color:#F97583\"> await\u003c\\/span>\u003cspan style=\"color:#B392F0\"> \u003ca href=\"\\/isolated-workers\\/api\\/create-worker\" class=\"code-link\" title=\"View createWorker documentation\">createWorker\u003c\\/a>\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">&#x3C;\u003c\\/span>\u003cspan style=\"color:#B392F0\">Messages\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">>({ script: \u003c\\/span>\u003cspan style=\"color:#9ECBFF\">'.\\/worker.js'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> });\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#6A737D\">\\/\\/ worker.ts\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">import\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> { Messages } \u003c\\/span>\u003cspan style=\"color:#F97583\">from\u003c\\/span>\u003cspan style=\"color:#9ECBFF\"> '.\\/messages.js'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">;\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#B392F0\">\u003ca href=\"\\/isolated-workers\\/api\\/start-worker-server\" class=\"code-link\" title=\"View startWorkerServer documentation\">startWorkerServer\u003c\\/a>\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">&#x3C;\u003c\\/span>\u003cspan style=\"color:#B392F0\">Messages\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">>({\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  handlers: {\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#6A737D\">    \\/* ... *\\/\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  },\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">});\u003c\\/span>\u003c\\/span>\u003c\\/code>\u003c\\/pre>"},{"type":"html","html":"\u003cp>Always rebuild both host and worker after changing message definitions.\u003c\\/p>\n\u003ch2>Lifecycle Issues\u003c\\/h2>\n\u003ch3>Worker Crashes Unexpectedly\u003c\\/h3>\n\u003cp>\u003cstrong>Problem\u003c\\/strong>: Worker process terminates without an explicit \u003ccode class=\"inline-code\">close()\u003c\\/code> call.\u003c\\/p>\n\u003cp>\u003cstrong>Cause\u003c\\/strong>: Common causes include:\u003c\\/p>\n\u003cul>\n\u003cli>Unhandled promise rejections in the worker\u003c\\/li>\n\u003cli>Uncaught exceptions in handlers\u003c\\/li>\n\u003cli>Out of memory errors\u003c\\/li>\n\u003cli>Segmentation faults from native modules\u003c\\/li>\n\u003cli>Process killed by system (OOM killer)\u003c\\/li>\n\u003c\\/ul>\n\u003cp>\u003cstrong>Solution\u003c\\/strong>:\u003c\\/p>\n\u003col>\n\u003cli>Add error handling in your worker:\u003c\\/li>\n\u003c\\/ol>"},{"type":"code-block","language":"typescript","content":"process.on('uncaughtException', (error) => {\n  console.error('Worker uncaught exception:', error);\n  process.exit(1);\n});\n\nprocess.on('unhandledRejection', (reason) => {\n  console.error('Worker unhandled rejection:', reason);\n  process.exit(1);\n});\n\nstartWorkerServer\u003cMessages>({\n  handlers: {\n    \\/\\/ Wrap handlers in try\\/catch for better error reporting\n    riskyOperation: async (payload) => {\n      try {\n        return await doRiskyWork(payload);\n      } catch (error) {\n        console.error('Handler error:', error);\n        throw error;\n      }\n    },\n  },\n});","highlightedHtml":"\u003cpre class=\"shiki github-dark\" style=\"background-color:#00000000;color:#e1e4e8\" tabindex=\"0\">\u003ccode>\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">process.\u003c\\/span>\u003cspan style=\"color:#B392F0\">on\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">(\u003c\\/span>\u003cspan style=\"color:#9ECBFF\">'uncaughtException'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">, (\u003c\\/span>\u003cspan style=\"color:#FFAB70\">error\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">) \u003c\\/span>\u003cspan style=\"color:#F97583\">=>\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> {\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  console.\u003c\\/span>\u003cspan style=\"color:#B392F0\">error\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">(\u003c\\/span>\u003cspan style=\"color:#9ECBFF\">'Worker uncaught exception:'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">, error);\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  process.\u003c\\/span>\u003cspan style=\"color:#B392F0\">exit\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">(\u003c\\/span>\u003cspan style=\"color:#79B8FF\">1\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">);\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">});\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">process.\u003c\\/span>\u003cspan style=\"color:#B392F0\">on\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">(\u003c\\/span>\u003cspan style=\"color:#9ECBFF\">'unhandledRejection'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">, (\u003c\\/span>\u003cspan style=\"color:#FFAB70\">reason\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">) \u003c\\/span>\u003cspan style=\"color:#F97583\">=>\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> {\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  console.\u003c\\/span>\u003cspan style=\"color:#B392F0\">error\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">(\u003c\\/span>\u003cspan style=\"color:#9ECBFF\">'Worker unhandled rejection:'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">, reason);\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  process.\u003c\\/span>\u003cspan style=\"color:#B392F0\">exit\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">(\u003c\\/span>\u003cspan style=\"color:#79B8FF\">1\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">);\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">});\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#B392F0\">\u003ca href=\"\\/isolated-workers\\/api\\/start-worker-server\" class=\"code-link\" title=\"View startWorkerServer documentation\">startWorkerServer\u003c\\/a>\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">&#x3C;\u003c\\/span>\u003cspan style=\"color:#B392F0\">Messages\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">>({\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  handlers: {\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#6A737D\">    \\/\\/ Wrap handlers in try\\/catch for better error reporting\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#B392F0\">    riskyOperation\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">: \u003c\\/span>\u003cspan style=\"color:#F97583\">async\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> (\u003c\\/span>\u003cspan style=\"color:#FFAB70\">payload\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">) \u003c\\/span>\u003cspan style=\"color:#F97583\">=>\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> {\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">      try\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> {\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">        return\u003c\\/span>\u003cspan style=\"color:#F97583\"> await\u003c\\/span>\u003cspan style=\"color:#B392F0\"> doRiskyWork\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">(payload);\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">      } \u003c\\/span>\u003cspan style=\"color:#F97583\">catch\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> (error) {\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">        console.\u003c\\/span>\u003cspan style=\"color:#B392F0\">error\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">(\u003c\\/span>\u003cspan style=\"color:#9ECBFF\">'Handler error:'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">, error);\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">        throw\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> error;\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">      }\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">    },\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  },\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">});\u003c\\/span>\u003c\\/span>\u003c\\/code>\u003c\\/pre>"},{"type":"html","html":"\u003col start=\"2\">\n\u003cli>Implement worker restart logic in the host:\u003c\\/li>\n\u003c\\/ol>"},{"type":"code-block","language":"typescript","content":"async function withWorker\u003cT>(\n  fn: (worker: WorkerClient\u003cMessages>) => Promise\u003cT>\n): Promise\u003cT> {\n  const worker = await createWorker\u003cMessages>({ script: '.\\/worker.js' });\n  try {\n    return await fn(worker);\n  } catch (error) {\n    if (!worker.isActive) {\n      console.log('Worker crashed, this may need a retry');\n    }\n    throw error;\n  } finally {\n    await worker.close();\n  }\n}","highlightedHtml":"\u003cpre class=\"shiki github-dark\" style=\"background-color:#00000000;color:#e1e4e8\" tabindex=\"0\">\u003ccode>\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">async\u003c\\/span>\u003cspan style=\"color:#F97583\"> function\u003c\\/span>\u003cspan style=\"color:#B392F0\"> withWorker\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">&#x3C;\u003c\\/span>\u003cspan style=\"color:#B392F0\">T\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">>(\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#B392F0\">  fn\u003c\\/span>\u003cspan style=\"color:#F97583\">:\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> (\u003c\\/span>\u003cspan style=\"color:#FFAB70\">worker\u003c\\/span>\u003cspan style=\"color:#F97583\">:\u003c\\/span>\u003cspan style=\"color:#B392F0\"> \u003ca href=\"\\/isolated-workers\\/api\\/worker-client\" class=\"code-link\" title=\"View WorkerClient documentation\">WorkerClient\u003c\\/a>\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">&#x3C;\u003c\\/span>\u003cspan style=\"color:#B392F0\">Messages\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">>) \u003c\\/span>\u003cspan style=\"color:#F97583\">=>\u003c\\/span>\u003cspan style=\"color:#B392F0\"> Promise\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">&#x3C;\u003c\\/span>\u003cspan style=\"color:#B392F0\">T\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">>\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">)\u003c\\/span>\u003cspan style=\"color:#F97583\">:\u003c\\/span>\u003cspan style=\"color:#B392F0\"> Promise\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">&#x3C;\u003c\\/span>\u003cspan style=\"color:#B392F0\">T\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">> {\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">  const\u003c\\/span>\u003cspan style=\"color:#79B8FF\"> worker\u003c\\/span>\u003cspan style=\"color:#F97583\"> =\u003c\\/span>\u003cspan style=\"color:#F97583\"> await\u003c\\/span>\u003cspan style=\"color:#B392F0\"> \u003ca href=\"\\/isolated-workers\\/api\\/create-worker\" class=\"code-link\" title=\"View createWorker documentation\">createWorker\u003c\\/a>\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">&#x3C;\u003c\\/span>\u003cspan style=\"color:#B392F0\">Messages\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">>({ script: \u003c\\/span>\u003cspan style=\"color:#9ECBFF\">'.\\/worker.js'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> });\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">  try\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> {\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">    return\u003c\\/span>\u003cspan style=\"color:#F97583\"> await\u003c\\/span>\u003cspan style=\"color:#B392F0\"> fn\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">(worker);\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  } \u003c\\/span>\u003cspan style=\"color:#F97583\">catch\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> (error) {\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">    if\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> (\u003c\\/span>\u003cspan style=\"color:#F97583\">!\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">worker.isActive) {\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">      console.\u003c\\/span>\u003cspan style=\"color:#B392F0\">log\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">(\u003c\\/span>\u003cspan style=\"color:#9ECBFF\">'Worker crashed, this may need a retry'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">);\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">    }\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">    throw\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> error;\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  } \u003c\\/span>\u003cspan style=\"color:#F97583\">finally\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> {\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">    await\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> worker.\u003c\\/span>\u003cspan style=\"color:#B392F0\">close\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">();\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  }\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">}\u003c\\/span>\u003c\\/span>\u003c\\/code>\u003c\\/pre>"},{"type":"html","html":"\u003ch3>\"Worker is Not Active\" Errors\u003c\\/h3>\n\u003cp>\u003cstrong>Problem\u003c\\/strong>: Sending a message throws \"Worker is not active\" error.\u003c\\/p>\n\u003cp>\u003cstrong>Cause\u003c\\/strong>: Attempting to send a message after the worker has been closed or crashed:\u003c\\/p>\n\u003cul>\n\u003cli>Called \u003ccode class=\"inline-code\">worker.close()\u003c\\/code> before sending\u003c\\/li>\n\u003cli>Worker process crashed\u003c\\/li>\n\u003cli>Worker was never started successfully\u003c\\/li>\n\u003c\\/ul>\n\u003cp>\u003cstrong>Solution\u003c\\/strong>: Check worker status before sending:\u003c\\/p>"},{"type":"code-block","language":"typescript","content":"if (worker.isActive && worker.isConnected) {\n  await worker.send('message', payload);\n} else {\n  console.log('Worker unavailable, recreating...');\n  worker = await createWorker\u003cMessages>({ script: '.\\/worker.js' });\n  await worker.send('message', payload);\n}","highlightedHtml":"\u003cpre class=\"shiki github-dark\" style=\"background-color:#00000000;color:#e1e4e8\" tabindex=\"0\">\u003ccode>\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">if\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> (worker.isActive \u003c\\/span>\u003cspan style=\"color:#F97583\">&#x26;&#x26;\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> worker.isConnected) {\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">  await\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> worker.\u003c\\/span>\u003cspan style=\"color:#B392F0\">send\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">(\u003c\\/span>\u003cspan style=\"color:#9ECBFF\">'message'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">, payload);\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">} \u003c\\/span>\u003cspan style=\"color:#F97583\">else\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> {\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  console.\u003c\\/span>\u003cspan style=\"color:#B392F0\">log\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">(\u003c\\/span>\u003cspan style=\"color:#9ECBFF\">'Worker unavailable, recreating...'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">);\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  worker \u003c\\/span>\u003cspan style=\"color:#F97583\">=\u003c\\/span>\u003cspan style=\"color:#F97583\"> await\u003c\\/span>\u003cspan style=\"color:#B392F0\"> \u003ca href=\"\\/isolated-workers\\/api\\/create-worker\" class=\"code-link\" title=\"View createWorker documentation\">createWorker\u003c\\/a>\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">&#x3C;\u003c\\/span>\u003cspan style=\"color:#B392F0\">Messages\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">>({ script: \u003c\\/span>\u003cspan style=\"color:#9ECBFF\">'.\\/worker.js'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> });\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">  await\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> worker.\u003c\\/span>\u003cspan style=\"color:#B392F0\">send\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">(\u003c\\/span>\u003cspan style=\"color:#9ECBFF\">'message'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">, payload);\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">}\u003c\\/span>\u003c\\/span>\u003c\\/code>\u003c\\/pre>"},{"type":"html","html":"\u003cp>Or use a wrapper that handles reconnection:\u003c\\/p>"},{"type":"code-block","language":"typescript","content":"class WorkerPool\u003cT> {\n  private worker: WorkerClient\u003cT> | null = null;\n\n  async send\u003cK extends keyof T>(\n    type: K,\n    payload: MessageOf\u003cT, K>\n  ): Promise\u003cResultOf\u003cT, K>> {\n    if (!this.worker?.isActive) {\n      this.worker = await createWorker\u003cT>({ script: this.script });\n    }\n    return this.worker.send(type, payload);\n  }\n}","highlightedHtml":"\u003cpre class=\"shiki github-dark\" style=\"background-color:#00000000;color:#e1e4e8\" tabindex=\"0\">\u003ccode>\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">class\u003c\\/span>\u003cspan style=\"color:#B392F0\"> WorkerPool\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">&#x3C;\u003c\\/span>\u003cspan style=\"color:#B392F0\">T\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">> {\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">  private\u003c\\/span>\u003cspan style=\"color:#FFAB70\"> worker\u003c\\/span>\u003cspan style=\"color:#F97583\">:\u003c\\/span>\u003cspan style=\"color:#B392F0\"> \u003ca href=\"\\/isolated-workers\\/api\\/worker-client\" class=\"code-link\" title=\"View WorkerClient documentation\">WorkerClient\u003c\\/a>\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">&#x3C;\u003c\\/span>\u003cspan style=\"color:#B392F0\">T\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">> \u003c\\/span>\u003cspan style=\"color:#F97583\">|\u003c\\/span>\u003cspan style=\"color:#79B8FF\"> null\u003c\\/span>\u003cspan style=\"color:#F97583\"> =\u003c\\/span>\u003cspan style=\"color:#79B8FF\"> null\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">;\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">  async\u003c\\/span>\u003cspan style=\"color:#B392F0\"> send\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">&#x3C;\u003c\\/span>\u003cspan style=\"color:#B392F0\">K\u003c\\/span>\u003cspan style=\"color:#F97583\"> extends\u003c\\/span>\u003cspan style=\"color:#F97583\"> keyof\u003c\\/span>\u003cspan style=\"color:#B392F0\"> T\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">>(\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#FFAB70\">    type\u003c\\/span>\u003cspan style=\"color:#F97583\">:\u003c\\/span>\u003cspan style=\"color:#B392F0\"> K\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">,\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#FFAB70\">    payload\u003c\\/span>\u003cspan style=\"color:#F97583\">:\u003c\\/span>\u003cspan style=\"color:#B392F0\"> \u003ca href=\"\\/isolated-workers\\/api\\/message-of\" class=\"code-link\" title=\"View MessageOf documentation\">MessageOf\u003c\\/a>\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">&#x3C;\u003c\\/span>\u003cspan style=\"color:#B392F0\">T\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">, \u003c\\/span>\u003cspan style=\"color:#B392F0\">K\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">>\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  )\u003c\\/span>\u003cspan style=\"color:#F97583\">:\u003c\\/span>\u003cspan style=\"color:#B392F0\"> Promise\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">&#x3C;\u003c\\/span>\u003cspan style=\"color:#B392F0\">\u003ca href=\"\\/isolated-workers\\/api\\/result-of\" class=\"code-link\" title=\"View ResultOf documentation\">ResultOf\u003c\\/a>\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">&#x3C;\u003c\\/span>\u003cspan style=\"color:#B392F0\">T\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">, \u003c\\/span>\u003cspan style=\"color:#B392F0\">K\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">>> {\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">    if\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> (\u003c\\/span>\u003cspan style=\"color:#F97583\">!\u003c\\/span>\u003cspan style=\"color:#79B8FF\">this\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">.worker?.isActive) {\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#79B8FF\">      this\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">.worker \u003c\\/span>\u003cspan style=\"color:#F97583\">=\u003c\\/span>\u003cspan style=\"color:#F97583\"> await\u003c\\/span>\u003cspan style=\"color:#B392F0\"> \u003ca href=\"\\/isolated-workers\\/api\\/create-worker\" class=\"code-link\" title=\"View createWorker documentation\">createWorker\u003c\\/a>\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">&#x3C;\u003c\\/span>\u003cspan style=\"color:#B392F0\">T\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">>({ script: \u003c\\/span>\u003cspan style=\"color:#79B8FF\">this\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">.script });\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">    }\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">    return\u003c\\/span>\u003cspan style=\"color:#79B8FF\"> this\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">.worker.\u003c\\/span>\u003cspan style=\"color:#B392F0\">send\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">(type, payload);\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  }\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">}\u003c\\/span>\u003c\\/span>\u003c\\/code>\u003c\\/pre>"},{"type":"html","html":"\u003ch3>Memory Leaks from Unclosed Workers\u003c\\/h3>\n\u003cp>\u003cstrong>Problem\u003c\\/strong>: Memory usage grows over time, especially when creating many workers.\u003c\\/p>\n\u003cp>\u003cstrong>Cause\u003c\\/strong>: Workers that aren't properly closed leave:\u003c\\/p>\n\u003cul>\n\u003cli>Socket files on disk\u003c\\/li>\n\u003cli>Node.js process running in background\u003c\\/li>\n\u003cli>IPC channels open\u003c\\/li>\n\u003c\\/ul>\n\u003cp>\u003cstrong>Solution\u003c\\/strong>: Always close workers in a \u003ccode class=\"inline-code\">finally\u003c\\/code> block:\u003c\\/p>"},{"type":"code-block","language":"typescript","content":"const worker = await createWorker\u003cMessages>({ script: '.\\/worker.js' });\ntry {\n  await doWork(worker);\n} finally {\n  await worker.close();\n}","highlightedHtml":"\u003cpre class=\"shiki github-dark\" style=\"background-color:#00000000;color:#e1e4e8\" tabindex=\"0\">\u003ccode>\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">const\u003c\\/span>\u003cspan style=\"color:#79B8FF\"> worker\u003c\\/span>\u003cspan style=\"color:#F97583\"> =\u003c\\/span>\u003cspan style=\"color:#F97583\"> await\u003c\\/span>\u003cspan style=\"color:#B392F0\"> \u003ca href=\"\\/isolated-workers\\/api\\/create-worker\" class=\"code-link\" title=\"View createWorker documentation\">createWorker\u003c\\/a>\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">&#x3C;\u003c\\/span>\u003cspan style=\"color:#B392F0\">Messages\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">>({ script: \u003c\\/span>\u003cspan style=\"color:#9ECBFF\">'.\\/worker.js'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> });\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">try\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> {\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">  await\u003c\\/span>\u003cspan style=\"color:#B392F0\"> doWork\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">(worker);\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">} \u003c\\/span>\u003cspan style=\"color:#F97583\">finally\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> {\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">  await\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> worker.\u003c\\/span>\u003cspan style=\"color:#B392F0\">close\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">();\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">}\u003c\\/span>\u003c\\/span>\u003c\\/code>\u003c\\/pre>"},{"type":"html","html":"\u003cp>For long-running applications, consider pooling and reusing workers instead of creating new ones for each operation.\u003c\\/p>\n\u003cp>To check for orphaned worker processes:\u003c\\/p>"},{"type":"code-block","language":"bash","content":"# Find isolated-workers processes\nps aux | grep \"node.*worker\"\n\n# Check for stale socket files\nls -la \\/tmp\\/isolated-workers-*","highlightedHtml":"\u003cpre class=\"shiki github-dark\" style=\"background-color:#00000000;color:#e1e4e8\" tabindex=\"0\">\u003ccode>\u003cspan class=\"line\">\u003cspan style=\"color:#6A737D\"># Find isolated-workers processes\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#B392F0\">ps\u003c\\/span>\u003cspan style=\"color:#9ECBFF\"> aux\u003c\\/span>\u003cspan style=\"color:#F97583\"> |\u003c\\/span>\u003cspan style=\"color:#B392F0\"> grep\u003c\\/span>\u003cspan style=\"color:#9ECBFF\"> \"node.*worker\"\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#6A737D\"># Check for stale socket files\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#B392F0\">ls\u003c\\/span>\u003cspan style=\"color:#79B8FF\"> -la\u003c\\/span>\u003cspan style=\"color:#9ECBFF\"> \\/tmp\\/isolated-workers-\u003c\\/span>\u003cspan style=\"color:#79B8FF\">*\u003c\\/span>\u003c\\/span>\u003c\\/code>\u003c\\/pre>"},{"type":"html","html":"\u003ch2>Debugging Tips\u003c\\/h2>\n\u003ch3>Enabling Debug Logging\u003c\\/h3>\n\u003cp>Configure logging using the \u003ccode class=\"inline-code\">logLevel\u003c\\/code> parameter:\u003c\\/p>"},{"type":"code-block","language":"typescript","content":"const worker = await createWorker\u003cMessages>({\n  script: '.\\/worker.js',\n  logLevel: 'debug', \\/\\/ 'debug' | 'info' | 'warn' | 'error'\n});","highlightedHtml":"\u003cpre class=\"shiki github-dark\" style=\"background-color:#00000000;color:#e1e4e8\" tabindex=\"0\">\u003ccode>\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">const\u003c\\/span>\u003cspan style=\"color:#79B8FF\"> worker\u003c\\/span>\u003cspan style=\"color:#F97583\"> =\u003c\\/span>\u003cspan style=\"color:#F97583\"> await\u003c\\/span>\u003cspan style=\"color:#B392F0\"> \u003ca href=\"\\/isolated-workers\\/api\\/create-worker\" class=\"code-link\" title=\"View createWorker documentation\">createWorker\u003c\\/a>\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">&#x3C;\u003c\\/span>\u003cspan style=\"color:#B392F0\">Messages\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">>({\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  script: \u003c\\/span>\u003cspan style=\"color:#9ECBFF\">'.\\/worker.js'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">,\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  logLevel: \u003c\\/span>\u003cspan style=\"color:#9ECBFF\">'debug'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">, \u003c\\/span>\u003cspan style=\"color:#6A737D\">\\/\\/ 'debug' | 'info' | 'warn' | 'error'\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">});\u003c\\/span>\u003c\\/span>\u003c\\/code>\u003c\\/pre>"},{"type":"html","html":"\u003ch3>Checking Worker stdout\\/stderr\u003c\\/h3>\n\u003cp>Worker output can be captured for debugging:\u003c\\/p>"},{"type":"code-block","language":"typescript","content":"const worker = await createWorker\u003cMessages>({\n  script: '.\\/worker.js',\n  spawnOptions: { stdio: ['pipe', 'pipe', 'pipe'] }, \\/\\/ Capture all streams\n});\n\n\\/\\/ Access worker output (if exposed by your wrapper)\nworker.process.stdout?.on('data', (data) => {\n  console.log('Worker stdout:', data.toString());\n});\n\nworker.process.stderr?.on('data', (data) => {\n  console.error('Worker stderr:', data.toString());\n});","highlightedHtml":"\u003cpre class=\"shiki github-dark\" style=\"background-color:#00000000;color:#e1e4e8\" tabindex=\"0\">\u003ccode>\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">const\u003c\\/span>\u003cspan style=\"color:#79B8FF\"> worker\u003c\\/span>\u003cspan style=\"color:#F97583\"> =\u003c\\/span>\u003cspan style=\"color:#F97583\"> await\u003c\\/span>\u003cspan style=\"color:#B392F0\"> \u003ca href=\"\\/isolated-workers\\/api\\/create-worker\" class=\"code-link\" title=\"View createWorker documentation\">createWorker\u003c\\/a>\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">&#x3C;\u003c\\/span>\u003cspan style=\"color:#B392F0\">Messages\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">>({\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  script: \u003c\\/span>\u003cspan style=\"color:#9ECBFF\">'.\\/worker.js'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">,\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  spawnOptions: { stdio: [\u003c\\/span>\u003cspan style=\"color:#9ECBFF\">'pipe'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">, \u003c\\/span>\u003cspan style=\"color:#9ECBFF\">'pipe'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">, \u003c\\/span>\u003cspan style=\"color:#9ECBFF\">'pipe'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">] }, \u003c\\/span>\u003cspan style=\"color:#6A737D\">\\/\\/ Capture all streams\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">});\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#6A737D\">\\/\\/ Access worker output (if exposed by your wrapper)\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">worker.process.stdout?.\u003c\\/span>\u003cspan style=\"color:#B392F0\">on\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">(\u003c\\/span>\u003cspan style=\"color:#9ECBFF\">'data'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">, (\u003c\\/span>\u003cspan style=\"color:#FFAB70\">data\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">) \u003c\\/span>\u003cspan style=\"color:#F97583\">=>\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> {\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  console.\u003c\\/span>\u003cspan style=\"color:#B392F0\">log\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">(\u003c\\/span>\u003cspan style=\"color:#9ECBFF\">'Worker stdout:'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">, data.\u003c\\/span>\u003cspan style=\"color:#B392F0\">toString\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">());\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">});\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">worker.process.stderr?.\u003c\\/span>\u003cspan style=\"color:#B392F0\">on\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">(\u003c\\/span>\u003cspan style=\"color:#9ECBFF\">'data'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">, (\u003c\\/span>\u003cspan style=\"color:#FFAB70\">data\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">) \u003c\\/span>\u003cspan style=\"color:#F97583\">=>\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> {\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  console.\u003c\\/span>\u003cspan style=\"color:#B392F0\">error\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">(\u003c\\/span>\u003cspan style=\"color:#9ECBFF\">'Worker stderr:'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">, data.\u003c\\/span>\u003cspan style=\"color:#B392F0\">toString\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">());\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">});\u003c\\/span>\u003c\\/span>\u003c\\/code>\u003c\\/pre>"},{"type":"html","html":"\u003cp>Or simply add console.log statements in your worker and run with inherited stdio:\u003c\\/p>"},{"type":"code-block","language":"typescript","content":"const worker = await createWorker\u003cMessages>({\n  script: '.\\/worker.js',\n  spawnOptions: { stdio: 'inherit' }, \\/\\/ Worker output goes to parent console\n});","highlightedHtml":"\u003cpre class=\"shiki github-dark\" style=\"background-color:#00000000;color:#e1e4e8\" tabindex=\"0\">\u003ccode>\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">const\u003c\\/span>\u003cspan style=\"color:#79B8FF\"> worker\u003c\\/span>\u003cspan style=\"color:#F97583\"> =\u003c\\/span>\u003cspan style=\"color:#F97583\"> await\u003c\\/span>\u003cspan style=\"color:#B392F0\"> \u003ca href=\"\\/isolated-workers\\/api\\/create-worker\" class=\"code-link\" title=\"View createWorker documentation\">createWorker\u003c\\/a>\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">&#x3C;\u003c\\/span>\u003cspan style=\"color:#B392F0\">Messages\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">>({\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  script: \u003c\\/span>\u003cspan style=\"color:#9ECBFF\">'.\\/worker.js'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">,\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  spawnOptions: { stdio: \u003c\\/span>\u003cspan style=\"color:#9ECBFF\">'inherit'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> }, \u003c\\/span>\u003cspan style=\"color:#6A737D\">\\/\\/ Worker output goes to parent console\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">});\u003c\\/span>\u003c\\/span>\u003c\\/code>\u003c\\/pre>"},{"type":"html","html":"\u003ch3>Using Middleware for Message Inspection\u003c\\/h3>\n\u003cp>Add middleware to log all messages for debugging:\u003c\\/p>"},{"type":"code-block","language":"typescript","content":"const worker = await createWorker\u003cMessages>({\n  script: '.\\/worker.js',\n  middleware: [\n    {\n      beforeSend: (message) => {\n        console.log('Sending:', JSON.stringify(message, null, 2));\n        return message;\n      },\n      afterReceive: (response) => {\n        console.log('Received:', JSON.stringify(response, null, 2));\n        return response;\n      },\n    },\n  ],\n});","highlightedHtml":"\u003cpre class=\"shiki github-dark\" style=\"background-color:#00000000;color:#e1e4e8\" tabindex=\"0\">\u003ccode>\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">const\u003c\\/span>\u003cspan style=\"color:#79B8FF\"> worker\u003c\\/span>\u003cspan style=\"color:#F97583\"> =\u003c\\/span>\u003cspan style=\"color:#F97583\"> await\u003c\\/span>\u003cspan style=\"color:#B392F0\"> \u003ca href=\"\\/isolated-workers\\/api\\/create-worker\" class=\"code-link\" title=\"View createWorker documentation\">createWorker\u003c\\/a>\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">&#x3C;\u003c\\/span>\u003cspan style=\"color:#B392F0\">Messages\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">>({\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  script: \u003c\\/span>\u003cspan style=\"color:#9ECBFF\">'.\\/worker.js'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">,\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  middleware: [\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">    {\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#B392F0\">      beforeSend\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">: (\u003c\\/span>\u003cspan style=\"color:#FFAB70\">message\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">) \u003c\\/span>\u003cspan style=\"color:#F97583\">=>\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> {\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">        console.\u003c\\/span>\u003cspan style=\"color:#B392F0\">log\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">(\u003c\\/span>\u003cspan style=\"color:#9ECBFF\">'Sending:'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">, \u003c\\/span>\u003cspan style=\"color:#79B8FF\">JSON\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">.\u003c\\/span>\u003cspan style=\"color:#B392F0\">stringify\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">(message, \u003c\\/span>\u003cspan style=\"color:#79B8FF\">null\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">, \u003c\\/span>\u003cspan style=\"color:#79B8FF\">2\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">));\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">        return\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> message;\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">      },\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#B392F0\">      afterReceive\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">: (\u003c\\/span>\u003cspan style=\"color:#FFAB70\">response\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">) \u003c\\/span>\u003cspan style=\"color:#F97583\">=>\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> {\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">        console.\u003c\\/span>\u003cspan style=\"color:#B392F0\">log\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">(\u003c\\/span>\u003cspan style=\"color:#9ECBFF\">'Received:'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">, \u003c\\/span>\u003cspan style=\"color:#79B8FF\">JSON\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">.\u003c\\/span>\u003cspan style=\"color:#B392F0\">stringify\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">(response, \u003c\\/span>\u003cspan style=\"color:#79B8FF\">null\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">, \u003c\\/span>\u003cspan style=\"color:#79B8FF\">2\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">));\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">        return\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> response;\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">      },\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">    },\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  ],\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">});\u003c\\/span>\u003c\\/span>\u003c\\/code>\u003c\\/pre>"},{"type":"html","html":"\u003cp>See \u003ca href=\"\\/isolated-workers\\/docs\\/guides\\/middleware\">Middleware\u003c\\/a> for more details on the middleware system.\u003c\\/p>\n\u003ch2>Platform-Specific Issues\u003c\\/h2>\n\u003ch3>Windows Named Pipe Considerations\u003c\\/h3>\n\u003cp>\u003cstrong>Problem\u003c\\/strong>: Connection issues or errors on Windows systems.\u003c\\/p>\n\u003cp>\u003cstrong>Cause\u003c\\/strong>: Windows uses named pipes instead of Unix sockets. Some considerations:\u003c\\/p>\n\u003cul>\n\u003cli>Named pipe paths have different format (\u003ccode class=\"inline-code\">\\\\.\\pipe\\name\u003c\\/code>)\u003c\\/li>\n\u003cli>Maximum path length differs from Unix\u003c\\/li>\n\u003cli>Pipe cleanup works differently\u003c\\/li>\n\u003c\\/ul>\n\u003cp>\u003cstrong>Solution\u003c\\/strong>: isolated-workers handles platform differences automatically, but be aware of:\u003c\\/p>\n\u003col>\n\u003cli>Pipe naming: Avoid special characters in worker identifiers\u003c\\/li>\n\u003cli>Permissions: Run as administrator if you encounter access issues\u003c\\/li>\n\u003cli>Cleanup: Named pipes are automatically cleaned up when the process exits, but stale pipes may need manual cleanup\u003c\\/li>\n\u003c\\/ol>"},{"type":"code-block","language":"powershell","content":"# List named pipes (PowerShell)\nGet-ChildItem \\\\.\\pipe\\ | Where-Object { $_.Name -like \"*isolated-workers*\" }","highlightedHtml":"\u003cpre class=\"shiki\">\u003ccode># List named pipes (PowerShell)\nGet-ChildItem \\\\.\\pipe\\ | Where-Object { $_.Name -like \"*isolated-workers*\" }\u003c\\/code>\u003c\\/pre>"},{"type":"html","html":"\u003ch3>Unix Socket Path Length Limits\u003c\\/h3>\n\u003cp>\u003cstrong>Problem\u003c\\/strong>: \"ENAMETOOLONG\" error when creating workers on Unix systems.\u003c\\/p>\n\u003cp>\u003cstrong>Cause\u003c\\/strong>: Unix domain sockets have a maximum path length (typically 104-108 characters on macOS, 108 on Linux). Long socket paths exceed this limit.\u003c\\/p>\n\u003cp>\u003cstrong>Solution\u003c\\/strong>:\u003c\\/p>\n\u003col>\n\u003cli>Use a shorter socket directory:\u003c\\/li>\n\u003c\\/ol>"},{"type":"code-block","language":"typescript","content":"const worker = await createWorker\u003cMessages>({\n  script: '.\\/worker.js',\n  socketDir: '\\/tmp\\/iw', \\/\\/ Short path\n});","highlightedHtml":"\u003cpre class=\"shiki github-dark\" style=\"background-color:#00000000;color:#e1e4e8\" tabindex=\"0\">\u003ccode>\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">const\u003c\\/span>\u003cspan style=\"color:#79B8FF\"> worker\u003c\\/span>\u003cspan style=\"color:#F97583\"> =\u003c\\/span>\u003cspan style=\"color:#F97583\"> await\u003c\\/span>\u003cspan style=\"color:#B392F0\"> \u003ca href=\"\\/isolated-workers\\/api\\/create-worker\" class=\"code-link\" title=\"View createWorker documentation\">createWorker\u003c\\/a>\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">&#x3C;\u003c\\/span>\u003cspan style=\"color:#B392F0\">Messages\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">>({\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  script: \u003c\\/span>\u003cspan style=\"color:#9ECBFF\">'.\\/worker.js'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">,\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  socketDir: \u003c\\/span>\u003cspan style=\"color:#9ECBFF\">'\\/tmp\\/iw'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">, \u003c\\/span>\u003cspan style=\"color:#6A737D\">\\/\\/ Short path\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">});\u003c\\/span>\u003c\\/span>\u003c\\/code>\u003c\\/pre>"},{"type":"html","html":"\u003col start=\"2\">\n\u003cli>Use shorter worker identifiers:\u003c\\/li>\n\u003c\\/ol>"},{"type":"code-block","language":"typescript","content":"const worker = await createWorker\u003cMessages>({\n  script: '.\\/worker.js',\n  id: 'w1', \\/\\/ Instead of 'my-very-long-worker-identifier'\n});","highlightedHtml":"\u003cpre class=\"shiki github-dark\" style=\"background-color:#00000000;color:#e1e4e8\" tabindex=\"0\">\u003ccode>\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">const\u003c\\/span>\u003cspan style=\"color:#79B8FF\"> worker\u003c\\/span>\u003cspan style=\"color:#F97583\"> =\u003c\\/span>\u003cspan style=\"color:#F97583\"> await\u003c\\/span>\u003cspan style=\"color:#B392F0\"> \u003ca href=\"\\/isolated-workers\\/api\\/create-worker\" class=\"code-link\" title=\"View createWorker documentation\">createWorker\u003c\\/a>\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">&#x3C;\u003c\\/span>\u003cspan style=\"color:#B392F0\">Messages\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">>({\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  script: \u003c\\/span>\u003cspan style=\"color:#9ECBFF\">'.\\/worker.js'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">,\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  id: \u003c\\/span>\u003cspan style=\"color:#9ECBFF\">'w1'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">, \u003c\\/span>\u003cspan style=\"color:#6A737D\">\\/\\/ Instead of 'my-very-long-worker-identifier'\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">});\u003c\\/span>\u003c\\/span>\u003c\\/code>\u003c\\/pre>"},{"type":"html","html":"\u003col start=\"3\">\n\u003cli>Let isolated-workers choose the path automatically (it handles truncation):\u003c\\/li>\n\u003c\\/ol>"},{"type":"code-block","language":"typescript","content":"\\/\\/ Don't specify socketDir - uses optimized default\nconst worker = await createWorker\u003cMessages>({\n  script: '.\\/worker.js',\n});","highlightedHtml":"\u003cpre class=\"shiki github-dark\" style=\"background-color:#00000000;color:#e1e4e8\" tabindex=\"0\">\u003ccode>\u003cspan class=\"line\">\u003cspan style=\"color:#6A737D\">\\/\\/ Don't specify socketDir - uses optimized default\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">const\u003c\\/span>\u003cspan style=\"color:#79B8FF\"> worker\u003c\\/span>\u003cspan style=\"color:#F97583\"> =\u003c\\/span>\u003cspan style=\"color:#F97583\"> await\u003c\\/span>\u003cspan style=\"color:#B392F0\"> \u003ca href=\"\\/isolated-workers\\/api\\/create-worker\" class=\"code-link\" title=\"View createWorker documentation\">createWorker\u003c\\/a>\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">&#x3C;\u003c\\/span>\u003cspan style=\"color:#B392F0\">Messages\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">>({\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  script: \u003c\\/span>\u003cspan style=\"color:#9ECBFF\">'.\\/worker.js'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">,\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">});\u003c\\/span>\u003c\\/span>\u003c\\/code>\u003c\\/pre>"},{"type":"html","html":"\u003ch2>Getting More Help\u003c\\/h2>\n\u003cp>If you're still experiencing issues:\u003c\\/p>\n\u003col>\n\u003cli>Check the \u003ca href=\"https:\\/\\/github.com\\/AgentEnder\\/isolated-workers\\/issues\">GitHub Issues\u003c\\/a> for similar problems\u003c\\/li>\n\u003cli>Enable debug logging and capture the output\u003c\\/li>\n\u003cli>Create a minimal reproduction case\u003c\\/li>\n\u003cli>Open a new issue with your debug output and reproduction\u003c\\/li>\n\u003c\\/ol>\n\u003ch2>See Also\u003c\\/h2>\n\u003cul>\n\u003cli>\u003ca href=\"\\/isolated-workers\\/docs\\/guides\\/error-handling\">Error Handling\u003c\\/a> - How errors propagate from workers\u003c\\/li>\n\u003cli>\u003ca href=\"\\/isolated-workers\\/docs\\/guides\\/worker-lifecycle\">Worker Lifecycle\u003c\\/a> - Managing worker state and shutdown\u003c\\/li>\n\u003cli>\u003ca href=\"\\/isolated-workers\\/docs\\/guides\\/timeout-configuration\">Timeout Configuration\u003c\\/a> - Configuring operation timeouts\u003c\\/li>\n\u003cli>\u003ca href=\"\\/isolated-workers\\/docs\\/guides\\/middleware\">Middleware\u003c\\/a> - Adding custom message processing\u003c\\/li>\n\u003c\\/ul>"}]}}</script>
        <script id="vike_globalContext" type="application/json">{"navigation":[{"title":"Getting Started","children":[{"title":"Installation","path":"\\/docs\\/getting-started\\/installation","order":0},{"title":"Quick Start","path":"\\/docs\\/getting-started\\/quick-start","order":2},{"title":"Building Your First Worker","path":"\\/docs\\/getting-started\\/first-worker","order":3}],"order":0,"path":"\\/docs\\/getting-started"},{"title":"Concepts","children":[{"title":"Why isolated-workers?","path":"\\/docs\\/concepts\\/why-isolated-workers","order":1},{"title":"Drivers","path":"\\/docs\\/concepts\\/drivers","order":3}],"order":10,"path":"\\/docs\\/concepts"},{"title":"Guides","children":[{"title":"Error Handling","path":"\\/docs\\/guides\\/error-handling","order":1},{"title":"Middleware","path":"\\/docs\\/guides\\/middleware","order":2},{"title":"Timeout Configuration","path":"\\/docs\\/guides\\/timeout-configuration","order":3},{"title":"Custom Serializers","path":"\\/docs\\/guides\\/custom-serializers","order":4},{"title":"Worker Lifecycle","path":"\\/docs\\/guides\\/worker-lifecycle","order":5},{"title":"TypeScript Deep Dive","path":"\\/docs\\/guides\\/typescript","order":6},{"title":"Troubleshooting","path":"\\/docs\\/guides\\/troubleshooting","order":7},{"title":"Testing Workers","path":"\\/docs\\/guides\\/testing","order":8},{"title":"Security Considerations","path":"\\/docs\\/guides\\/security","order":9}],"order":20,"path":"\\/docs\\/guides"},{"title":"Examples","path":"\\/examples","children":[{"title":"Basic Ping-Pong Worker","path":"\\/examples\\/basic-ping"},{"title":"Custom Serializer","path":"\\/examples\\/custom-serializer"},{"title":"Error Handling","path":"\\/examples\\/error-handling"},{"title":"Middleware Pipeline","path":"\\/examples\\/middleware"},{"title":"Timeout Configuration","path":"\\/examples\\/timeout-config"},{"title":"Unexpected Worker Shutdown Handling","path":"\\/examples\\/shutdown-handling"},{"title":"Worker Lifecycle Management","path":"\\/examples\\/worker-lifecycle"},{"title":"Worker Threads Driver","path":"\\/examples\\/worker-threads-driver"}],"order":100},{"title":"API Reference","path":"\\/api","children":[{"title":"Configuration","path":"\\/api#configuration","children":[{"title":"Handlers","path":"\\/api\\/handlers"},{"title":"Middleware","path":"\\/api\\/middleware"}]},{"title":"Core","path":"\\/api#core","children":[{"title":"createWorker","path":"\\/api\\/create-worker"},{"title":"startWorkerServer","path":"\\/api\\/start-worker-server"}]},{"title":"Drivers","path":"\\/api#drivers","children":[{"title":"ChildProcessCapabilities","path":"\\/api\\/child-process-capabilities"},{"title":"Driver","path":"\\/api\\/driver"},{"title":"DriverCapabilities","path":"\\/api\\/driver-capabilities"},{"title":"WorkerThreadsCapabilities","path":"\\/api\\/worker-threads-capabilities"}]},{"title":"Other","path":"\\/api#other","children":[{"title":"AllMessages","path":"\\/api\\/all-messages"},{"title":"AllResults","path":"\\/api\\/all-results"},{"title":"AnyMessage","path":"\\/api\\/any-message"},{"title":"BaseMessage","path":"\\/api\\/base-message"},{"title":"BuiltInTimeoutKey","path":"\\/api\\/built-in-timeout-key"},{"title":"ChildProcessChannel","path":"\\/api\\/child-process-channel"},{"title":"ChildProcessDriver","path":"\\/api\\/child-process-driver"},{"title":"ChildProcessDriverOptions","path":"\\/api\\/child-process-driver-options"},{"title":"ChildProcessDriverOptions","path":"\\/api\\/child-process-driver-options"},{"title":"ChildProcessDriverType","path":"\\/api\\/child-process-driver-type"},{"title":"ChildProcessServerChannel","path":"\\/api\\/child-process-server-channel"},{"title":"ChildProcessStartupData","path":"\\/api\\/child-process-startup-data"},{"title":"Connection","path":"\\/api\\/connection"},{"title":"ConnectionOptions","path":"\\/api\\/connection-options"},{"title":"createServer","path":"\\/api\\/create-server"},{"title":"createServer","path":"\\/api\\/create-server"},{"title":"DEFAULT_SERVER_CONNECT_TIMEOUT","path":"\\/api\\/default-server-connect-timeout"},{"title":"defaultLogger","path":"\\/api\\/default-logger"},{"title":"DetachCapability","path":"\\/api\\/detach-capability"},{"title":"DriverChannel","path":"\\/api\\/driver-channel"},{"title":"DriverMessage","path":"\\/api\\/driver-message"},{"title":"DriverOptionsFor","path":"\\/api\\/driver-options-for"},{"title":"encodeStartupData","path":"\\/api\\/encode-startup-data"},{"title":"Logger","path":"\\/api\\/logger"},{"title":"LogLevel","path":"\\/api\\/log-level"},{"title":"MaybePromise","path":"\\/api\\/maybe-promise"},{"title":"MessageDef","path":"\\/api\\/message-def"},{"title":"MessageDefs","path":"\\/api\\/message-defs"},{"title":"MessageHandler","path":"\\/api\\/message-handler"},{"title":"MessageOf","path":"\\/api\\/message-of"},{"title":"MessageResult","path":"\\/api\\/message-result"},{"title":"MessageType","path":"\\/api\\/message-type"},{"title":"MiddlewareContext","path":"\\/api\\/middleware-context"},{"title":"MiddlewareDirection","path":"\\/api\\/middleware-direction"},{"title":"PayloadOf","path":"\\/api\\/payload-of"},{"title":"ReconnectCapability","path":"\\/api\\/reconnect-capability"},{"title":"ResponseFunction","path":"\\/api\\/response-function"},{"title":"ResponseFunction","path":"\\/api\\/response-function"},{"title":"ResultOf","path":"\\/api\\/result-of"},{"title":"ResultPayloadOf","path":"\\/api\\/result-payload-of"},{"title":"ServerChannel","path":"\\/api\\/server-channel"},{"title":"ServerDriver","path":"\\/api\\/server-driver"},{"title":"ServerOptions","path":"\\/api\\/server-options"},{"title":"ShutdownReason","path":"\\/api\\/shutdown-reason"},{"title":"spawnWorker","path":"\\/api\\/spawn-worker"},{"title":"spawnWorker","path":"\\/api\\/spawn-worker"},{"title":"STARTUP_DATA_ENV_KEY","path":"\\/api\\/startup-data-env-key"},{"title":"STARTUP_DATA_WORKER_KEY","path":"\\/api\\/startup-data-worker-key"},{"title":"TimeoutConfig","path":"\\/api\\/timeout-config"},{"title":"TransactionIdGenerator","path":"\\/api\\/transaction-id-generator"},{"title":"TypedMessage","path":"\\/api\\/typed-message"},{"title":"TypedResult","path":"\\/api\\/typed-result"},{"title":"UnexpectedShutdownConfig","path":"\\/api\\/unexpected-shutdown-config"},{"title":"UnexpectedShutdownStrategy","path":"\\/api\\/unexpected-shutdown-strategy"},{"title":"WorkerClient","path":"\\/api\\/worker-client"},{"title":"WorkerCrashedError","path":"\\/api\\/worker-crashed-error"},{"title":"WorkerHandler","path":"\\/api\\/worker-handler"},{"title":"WorkerHandlers","path":"\\/api\\/worker-handlers"},{"title":"WorkerOptions","path":"\\/api\\/worker-options"},{"title":"WorkerServer","path":"\\/api\\/worker-server"},{"title":"WorkerServerOptions","path":"\\/api\\/worker-server-options"},{"title":"WorkerThreadsChannel","path":"\\/api\\/worker-threads-channel"},{"title":"WorkerThreadsDriver","path":"\\/api\\/worker-threads-driver"},{"title":"WorkerThreadsDriverOptions","path":"\\/api\\/worker-threads-driver-options"},{"title":"WorkerThreadsDriverOptions","path":"\\/api\\/worker-threads-driver-options"},{"title":"WorkerThreadsDriverType","path":"\\/api\\/worker-threads-driver-type"},{"title":"WorkerThreadsResourceLimits","path":"\\/api\\/worker-threads-resource-limits"},{"title":"WorkerThreadsResourceLimits","path":"\\/api\\/worker-threads-resource-limits"},{"title":"WorkerThreadsServerChannel","path":"\\/api\\/worker-threads-server-channel"},{"title":"WorkerThreadsStartupData","path":"\\/api\\/worker-threads-startup-data"}]},{"title":"Serialization","path":"\\/api#serialization","children":[{"title":"JsonSerializer","path":"\\/api\\/json-serializer"},{"title":"Serializer","path":"\\/api\\/serializer"}]},{"title":"Types","path":"\\/api#types","children":[{"title":"DefineMessages","path":"\\/api\\/define-messages"},{"title":"WithResult","path":"\\/api\\/with-result"}]}],"order":200},{"title":"Configuration","children":[{"title":"Shutdown Handling","path":"\\/docs\\/guides\\/shutdown-handling","order":4}]},{"title":"Resources","children":[{"title":"FAQ","path":"\\/docs\\/faq","order":0},{"title":"Contributing","path":"\\/docs\\/contributing","order":1}]}],"examples":{"basic-ping":{"id":"basic-ping","path":"\\/home\\/runner\\/work\\/isolated-workers\\/isolated-workers\\/examples\\/basic-ping","title":"Basic Ping-Pong Worker","description":"A simple example demonstrating the basics of isolated-workers: spawning a worker process, sending messages, and receiving responses. This example shows the fundamental request\\/response pattern with type-safe message definitions.\n","entryPoint":"host.ts","fileMap":{"./messages.ts":"messages.ts","./host.ts":"host.ts","./worker.ts":"worker.ts"},"commands":[{"command":"pnpm run:basic-ping","title":"Run the example","assertions":[{"contains":"Worker spawned with PID"},{"contains":"Received response:"},{"contains":"Worker closed successfully"}]}],"hidden":false},"custom-serializer":{"id":"custom-serializer","path":"\\/home\\/runner\\/work\\/isolated-workers\\/isolated-workers\\/examples\\/custom-serializer","title":"Custom Serializer","description":"Shows how to implement and use a custom serializer for message encoding. This is useful for using binary formats like MessagePack, adding compression, or wrapping messages with metadata. Both host and worker must use the same serializer.\n","entryPoint":"host.ts","fileMap":{"./messages.ts":"messages.ts","./serializer.ts":"serializer.ts","./host.ts":"host.ts","./worker.ts":"worker.ts"},"commands":[{"command":"pnpm run:custom-serializer","title":"Run the example","assertions":[{"contains":"VerboseJsonSerializer"},{"contains":"[SERIALIZER] Message #"},{"contains":"HELLO, CUSTOM SERIALIZER!"},{"contains":"Worker closed successfully"}]}],"hidden":false},"error-handling":{"id":"error-handling","path":"\\/home\\/runner\\/work\\/isolated-workers\\/isolated-workers\\/examples\\/error-handling","title":"Error Handling","description":"Demonstrates how errors thrown in worker handlers propagate back to the host,\nincluding error messages and proper cleanup.\n","entryPoint":"host.ts","fileMap":{"./messages.ts":"messages.ts","./host.ts":"host.ts","./worker.ts":"worker.ts"},"commands":[{"command":"pnpm run:error-handling","title":"Run the example","assertions":[{"contains":"Test 1: 10 \\/ 2"},{"contains":"Result: 5"},{"contains":"Test 2: 10 \\/ 0 (should error)"},{"contains":"Division by zero"},{"contains":"All tests passed"}]}],"hidden":false},"image-processing":{"id":"image-processing","path":"\\/home\\/runner\\/work\\/isolated-workers\\/isolated-workers\\/examples\\/image-processing","title":"Image Processing Worker","description":"A complete example demonstrating how to build a production-ready worker\nfor CPU-intensive tasks like image processing. Shows type-safe messaging,\nper-operation timeouts, worker state, and batch processing.\n","entryPoint":"host.ts","fileMap":{"./messages.ts":"messages.ts","./host.ts":"host.ts","./worker.ts":"worker.ts"},"commands":[{"command":"pnpm run:image-processing","title":"Run the example","assertions":[{"contains":"Worker PID:"},{"contains":"Image metadata:"},{"contains":"Worker status:"},{"contains":"Batch result:"},{"contains":"Worker shut down gracefully"}]}],"hidden":true},"middleware":{"id":"middleware","path":"\\/home\\/runner\\/work\\/isolated-workers\\/isolated-workers\\/examples\\/middleware","title":"Middleware Pipeline","description":"Demonstrates how to use middleware to intercept and process messages. Middleware can log messages, add metadata, validate structure, or transform payloads. Both the host and worker can have their own middleware pipelines.\n","entryPoint":"host.ts","fileMap":{"./messages.ts":"messages.ts","./host.ts":"host.ts","./worker.ts":"worker.ts"},"commands":[{"command":"pnpm run:middleware","title":"Run the example","assertions":[{"contains":"[OUTGOING]"},{"contains":"[INCOMING]"},{"contains":"Hello, World!"},{"contains":"Worker closed successfully"}]}],"hidden":false},"readme-snippets":{"id":"readme-snippets","path":"\\/home\\/runner\\/work\\/isolated-workers\\/isolated-workers\\/examples\\/readme-snippets","title":"README Code Snippets","description":"Type-checked code snippets used in the package README.\nThis example is hidden from navigation.\n","entryPoint":"drivers.ts","fileMap":{"./drivers.ts":"drivers.ts","./api-overview.ts":"api-overview.ts"},"commands":"!undefined","hidden":true},"shutdown-handling":{"id":"shutdown-handling","path":"\\/home\\/runner\\/work\\/isolated-workers\\/isolated-workers\\/examples\\/shutdown-handling","title":"Unexpected Worker Shutdown Handling","description":"Demonstrates how to handle unexpected worker crashes with configurable\nretry strategies, per-message-type overrides, and detailed error context.\n","entryPoint":"host.ts","fileMap":{"./messages.ts":"messages.ts","./host.ts":"host.ts","./worker.ts":"worker.ts"},"commands":[{"command":"pnpm run:shutdown-handling","title":"Run the example","assertions":[{"contains":"Test 1: Normal operation"},{"contains":"Result: 25"},{"contains":"Test 2: Idempotent operation with crash - retry exhaustion"},{"contains":"WorkerCrashedError after retries"},{"contains":"Attempt: 3\\/3"},{"contains":"Test 3: Non-idempotent operation"},{"contains":"Attempt: 1\\/1"},{"contains":"No retries"},{"contains":"Test 4: Batch processing with retry exhaustion"},{"contains":"Test 5: Successful batch processing"},{"contains":"Processed batch of 3 items"}]}],"hidden":false},"timeout-config":{"id":"timeout-config","path":"\\/home\\/runner\\/work\\/isolated-workers\\/isolated-workers\\/examples\\/timeout-config","title":"Timeout Configuration","description":"Demonstrates the flexible timeout configuration system. You can set timeouts for worker startup, server connection, a default message timeout, and per-message-type timeouts for fine-grained control over long-running operations.\n","entryPoint":"host.ts","fileMap":{"./messages.ts":"messages.ts","./host.ts":"host.ts","./worker.ts":"worker.ts"},"commands":[{"command":"pnpm run:timeout-config","title":"Run the example","assertions":[{"contains":"Timeout configuration:"},{"contains":"Quick ping completed"},{"contains":"Slow process completed"},{"contains":"Worker closed successfully"}]}],"hidden":false},"worker-lifecycle":{"id":"worker-lifecycle","path":"\\/home\\/runner\\/work\\/isolated-workers\\/isolated-workers\\/examples\\/worker-lifecycle","title":"Worker Lifecycle Management","description":"Demonstrates worker lifecycle management including status checking (isActive, isConnected), state persistence across requests, and graceful shutdown. Shows how workers maintain state between messages and how to handle the worker after it's closed.\n","entryPoint":"host.ts","fileMap":{"./messages.ts":"messages.ts","./host.ts":"host.ts","./worker.ts":"worker.ts"},"commands":[{"command":"pnpm run:worker-lifecycle","title":"Run the example","assertions":[{"contains":"Worker Created"},{"contains":"isActive: true"},{"contains":"isConnected: true"},{"contains":"Request count:"},{"contains":"isActive: false"},{"contains":"Worker is not active"}]}],"hidden":false},"worker-threads-driver":{"id":"worker-threads-driver","path":"\\/home\\/runner\\/work\\/isolated-workers\\/isolated-workers\\/examples\\/worker-threads-driver","title":"Worker Threads Driver","description":"Use the worker_threads driver for in-process workers with shared memory support.\nWorker threads run in the same process as the host, enabling SharedArrayBuffer\nand lower overhead compared to child processes.\n","entryPoint":"host.ts","fileMap":"!undefined","commands":[{"command":"node --import tsx {filename}","title":"Run worker threads example","assertions":[{"contains":"Result:"},{"contains":"Worker threads driver"}]}],"hidden":false}}}</script>
        <script src="/isolated-workers/assets/entries/entry-client-routing.io56qHg_.js" type="module" async></script>
        <link rel="modulepreload" href="/isolated-workers/assets/entries/pages_docs.D3lD6bTo.js" as="script" type="text/javascript">
        <link rel="modulepreload" href="/isolated-workers/assets/chunks/chunk-CoIusrxJ.js" as="script" type="text/javascript">
        <link rel="modulepreload" href="/isolated-workers/assets/chunks/chunk-B01QXYmX.js" as="script" type="text/javascript">
        <link rel="modulepreload" href="/isolated-workers/assets/chunks/chunk-DApX3sgb.js" as="script" type="text/javascript">
        <link rel="modulepreload" href="/isolated-workers/assets/chunks/chunk-Dzd9oD5V.js" as="script" type="text/javascript">
        <link rel="modulepreload" href="/isolated-workers/assets/chunks/chunk-jQ2pk9iw.js" as="script" type="text/javascript">
        <link rel="modulepreload" href="/isolated-workers/assets/chunks/chunk-Y59L1pI7.js" as="script" type="text/javascript">
      </body>
    </html>