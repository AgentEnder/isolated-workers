<!DOCTYPE html>
    <html lang="en">
      <head>
        <link rel="stylesheet" type="text/css" href="/isolated-workers/assets/static/pages_tailwind-65fb2459.DWwu-Xsw.css">
        <meta charset="UTF-8" />
        
        
    <title>isolated-workers</title><meta property="og:title" content="isolated-workers" />
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="icon" href="data:image/svg+xml,%3csvg%20width=&#x27;48&#x27;%20height=&#x27;48&#x27;%20viewBox=&#x27;0%200%2048%2048&#x27;%20fill=&#x27;none&#x27;%20xmlns=&#x27;http://www.w3.org/2000/svg&#x27;%3e%3c!--%20Background%20hexagon%20representing%20the%20isolated%20container%20--%3e%3cpath%20d=&#x27;M24%204L42%2014V34L24%2044L6%2034V14L24%204Z&#x27;%20fill=&#x27;%231a1a2e&#x27;%20stroke=&#x27;%234a5568&#x27;%20stroke-width=&#x27;1.5&#x27;/%3e%3c!--%20Inner%20isolated%20worker%20cells%20--%3e%3c!--%20Top%20worker%20--%3e%3cg%20transform=&#x27;translate(24,%2012)&#x27;%3e%3crect%20x=&#x27;-6&#x27;%20y=&#x27;-4&#x27;%20width=&#x27;12&#x27;%20height=&#x27;8&#x27;%20rx=&#x27;2&#x27;%20fill=&#x27;%233b82f6&#x27;%20stroke=&#x27;%2360a5fa&#x27;%20stroke-width=&#x27;1&#x27;/%3e%3ccircle%20cx=&#x27;0&#x27;%20cy=&#x27;0&#x27;%20r=&#x27;2&#x27;%20fill=&#x27;%23fff&#x27;/%3e%3c/g%3e%3c!--%20Bottom-left%20worker%20--%3e%3cg%20transform=&#x27;translate(14,%2030)&#x27;%3e%3crect%20x=&#x27;-6&#x27;%20y=&#x27;-4&#x27;%20width=&#x27;12&#x27;%20height=&#x27;8&#x27;%20rx=&#x27;2&#x27;%20fill=&#x27;%2310b981&#x27;%20stroke=&#x27;%2334d399&#x27;%20stroke-width=&#x27;1&#x27;/%3e%3ccircle%20cx=&#x27;0&#x27;%20cy=&#x27;0&#x27;%20r=&#x27;2&#x27;%20fill=&#x27;%23fff&#x27;/%3e%3c/g%3e%3c!--%20Bottom-right%20worker%20--%3e%3cg%20transform=&#x27;translate(34,%2030)&#x27;%3e%3crect%20x=&#x27;-6&#x27;%20y=&#x27;-4&#x27;%20width=&#x27;12&#x27;%20height=&#x27;8&#x27;%20rx=&#x27;2&#x27;%20fill=&#x27;%238b5cf6&#x27;%20stroke=&#x27;%23a78bfa&#x27;%20stroke-width=&#x27;1&#x27;/%3e%3ccircle%20cx=&#x27;0&#x27;%20cy=&#x27;0&#x27;%20r=&#x27;2&#x27;%20fill=&#x27;%23fff&#x27;/%3e%3c/g%3e%3c!--%20Communication%20channels%20(dashed%20lines%20showing%20IPC)%20--%3e%3cline%20x1=&#x27;24&#x27;%20y1=&#x27;16&#x27;%20x2=&#x27;14&#x27;%20y2=&#x27;26&#x27;%20stroke=&#x27;%236b7280&#x27;%20stroke-width=&#x27;1.5&#x27;%20stroke-dasharray=&#x27;2,2&#x27;/%3e%3cline%20x1=&#x27;24&#x27;%20y1=&#x27;16&#x27;%20x2=&#x27;34&#x27;%20y2=&#x27;26&#x27;%20stroke=&#x27;%236b7280&#x27;%20stroke-width=&#x27;1.5&#x27;%20stroke-dasharray=&#x27;2,2&#x27;/%3e%3cline%20x1=&#x27;20&#x27;%20y1=&#x27;30&#x27;%20x2=&#x27;28&#x27;%20y2=&#x27;30&#x27;%20stroke=&#x27;%236b7280&#x27;%20stroke-width=&#x27;1.5&#x27;%20stroke-dasharray=&#x27;2,2&#x27;/%3e%3c!--%20Type-safe%20data%20packets%20on%20channels%20--%3e%3ccircle%20cx=&#x27;19&#x27;%20cy=&#x27;21&#x27;%20r=&#x27;1.5&#x27;%20fill=&#x27;%23fbbf24&#x27;/%3e%3ccircle%20cx=&#x27;29&#x27;%20cy=&#x27;21&#x27;%20r=&#x27;1.5&#x27;%20fill=&#x27;%23fbbf24&#x27;/%3e%3ccircle%20cx=&#x27;24&#x27;%20cy=&#x27;30&#x27;%20r=&#x27;1.5&#x27;%20fill=&#x27;%23fbbf24&#x27;/%3e%3c/svg%3e"/><meta name="theme-color" content="#131316"/><meta property="og:type" content="website"/><meta property="og:title" content="isolated-workers"/><meta property="og:description" content="Type-safe worker processes with end-to-end message contracts"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="isolated-workers"/><meta name="twitter:description" content="Type-safe worker processes with end-to-end message contracts"/>
    
    <meta name="description" content="Type-safe worker processes with end-to-end message contracts" /><meta property="og:description" content="Type-safe worker processes with end-to-end message contracts" />
    
  
        
      </head>
      <body>
        
        <div id="root"><div class="min-h-screen bg-primary text-gray-100"><div class="fixed inset-0 overflow-hidden pointer-events-none " aria-hidden="true"><div class="absolute inset-0 retro-horizon"></div><div class="absolute inset-0 retro-grid"></div><div class="absolute w-96 h-96 rounded-full blur-3xl animate-float" style="top:15%;left:20%;background:radial-gradient(circle, rgba(0, 240, 255, 0.15) 0%, transparent 70%)"></div><div class="absolute w-96 h-96 rounded-full blur-3xl animate-float" style="bottom:20%;right:15%;background:radial-gradient(circle, rgba(191, 0, 255, 0.12) 0%, transparent 70%);animation-delay:2s"></div><div class="absolute w-72 h-72 rounded-full blur-3xl animate-float" style="top:40%;left:50%;transform:translateX(-50%);background:radial-gradient(circle, rgba(255, 0, 128, 0.08) 0%, transparent 70%);animation-delay:4s"></div><div class="absolute w-64 h-64 rounded-full blur-3xl animate-pulse-slow" style="top:10%;right:25%;background:radial-gradient(circle, rgba(0, 255, 157, 0.06) 0%, transparent 70%);animation-delay:1s"></div><div class="absolute inset-0 retro-scanlines"></div></div><header class="fixed top-0 left-0 right-0 h-20 z-50 glass-enhanced border-b border-neon-cyan/10"><div class="max-w-7xl mx-auto px-4 h-full flex items-center justify-between"><a href="/isolated-workers/" class="flex items-center gap-3 group"><div class="relative neon-flicker-slow"><img src="data:image/svg+xml,%3csvg%20width=&#x27;48&#x27;%20height=&#x27;48&#x27;%20viewBox=&#x27;0%200%2048%2048&#x27;%20fill=&#x27;none&#x27;%20xmlns=&#x27;http://www.w3.org/2000/svg&#x27;%3e%3c!--%20Background%20hexagon%20representing%20the%20isolated%20container%20--%3e%3cpath%20d=&#x27;M24%204L42%2014V34L24%2044L6%2034V14L24%204Z&#x27;%20fill=&#x27;%231a1a2e&#x27;%20stroke=&#x27;%234a5568&#x27;%20stroke-width=&#x27;1.5&#x27;/%3e%3c!--%20Inner%20isolated%20worker%20cells%20--%3e%3c!--%20Top%20worker%20--%3e%3cg%20transform=&#x27;translate(24,%2012)&#x27;%3e%3crect%20x=&#x27;-6&#x27;%20y=&#x27;-4&#x27;%20width=&#x27;12&#x27;%20height=&#x27;8&#x27;%20rx=&#x27;2&#x27;%20fill=&#x27;%233b82f6&#x27;%20stroke=&#x27;%2360a5fa&#x27;%20stroke-width=&#x27;1&#x27;/%3e%3ccircle%20cx=&#x27;0&#x27;%20cy=&#x27;0&#x27;%20r=&#x27;2&#x27;%20fill=&#x27;%23fff&#x27;/%3e%3c/g%3e%3c!--%20Bottom-left%20worker%20--%3e%3cg%20transform=&#x27;translate(14,%2030)&#x27;%3e%3crect%20x=&#x27;-6&#x27;%20y=&#x27;-4&#x27;%20width=&#x27;12&#x27;%20height=&#x27;8&#x27;%20rx=&#x27;2&#x27;%20fill=&#x27;%2310b981&#x27;%20stroke=&#x27;%2334d399&#x27;%20stroke-width=&#x27;1&#x27;/%3e%3ccircle%20cx=&#x27;0&#x27;%20cy=&#x27;0&#x27;%20r=&#x27;2&#x27;%20fill=&#x27;%23fff&#x27;/%3e%3c/g%3e%3c!--%20Bottom-right%20worker%20--%3e%3cg%20transform=&#x27;translate(34,%2030)&#x27;%3e%3crect%20x=&#x27;-6&#x27;%20y=&#x27;-4&#x27;%20width=&#x27;12&#x27;%20height=&#x27;8&#x27;%20rx=&#x27;2&#x27;%20fill=&#x27;%238b5cf6&#x27;%20stroke=&#x27;%23a78bfa&#x27;%20stroke-width=&#x27;1&#x27;/%3e%3ccircle%20cx=&#x27;0&#x27;%20cy=&#x27;0&#x27;%20r=&#x27;2&#x27;%20fill=&#x27;%23fff&#x27;/%3e%3c/g%3e%3c!--%20Communication%20channels%20(dashed%20lines%20showing%20IPC)%20--%3e%3cline%20x1=&#x27;24&#x27;%20y1=&#x27;16&#x27;%20x2=&#x27;14&#x27;%20y2=&#x27;26&#x27;%20stroke=&#x27;%236b7280&#x27;%20stroke-width=&#x27;1.5&#x27;%20stroke-dasharray=&#x27;2,2&#x27;/%3e%3cline%20x1=&#x27;24&#x27;%20y1=&#x27;16&#x27;%20x2=&#x27;34&#x27;%20y2=&#x27;26&#x27;%20stroke=&#x27;%236b7280&#x27;%20stroke-width=&#x27;1.5&#x27;%20stroke-dasharray=&#x27;2,2&#x27;/%3e%3cline%20x1=&#x27;20&#x27;%20y1=&#x27;30&#x27;%20x2=&#x27;28&#x27;%20y2=&#x27;30&#x27;%20stroke=&#x27;%236b7280&#x27;%20stroke-width=&#x27;1.5&#x27;%20stroke-dasharray=&#x27;2,2&#x27;/%3e%3c!--%20Type-safe%20data%20packets%20on%20channels%20--%3e%3ccircle%20cx=&#x27;19&#x27;%20cy=&#x27;21&#x27;%20r=&#x27;1.5&#x27;%20fill=&#x27;%23fbbf24&#x27;/%3e%3ccircle%20cx=&#x27;29&#x27;%20cy=&#x27;21&#x27;%20r=&#x27;1.5&#x27;%20fill=&#x27;%23fbbf24&#x27;/%3e%3ccircle%20cx=&#x27;24&#x27;%20cy=&#x27;30&#x27;%20r=&#x27;1.5&#x27;%20fill=&#x27;%23fbbf24&#x27;/%3e%3c/svg%3e" height="40" width="40" alt="isolated-workers logo" class="transition-all duration-300 group-hover:drop-shadow-[0_0_12px_rgba(0,240,255,0.6)]"/></div><span class="text-xl font-bold bg-linear-to-r from-neon-cyan to-neon-purple bg-clip-text text-transparent neon-flicker-alt neon-flicker-delay-1">isolated-workers</span></a><nav class="hidden md:flex items-center gap-6"><a href="/isolated-workers/docs/getting-started" class="
        text-sm font-medium transition-all duration-200 relative link-underline
        text-gray-400 hover:text-gray-200
      ">Getting Started</a><a href="/isolated-workers/docs/guides" class="
        text-sm font-medium transition-all duration-200 relative link-underline
        text-neon-cyan text-glow-cyan
      ">Guides<span class="absolute -bottom-1 left-0 right-0 h-0.5 bg-linear-to-r from-neon-cyan to-neon-purple shadow-neon-sm"></span></a><a href="/isolated-workers/examples" class="
        text-sm font-medium transition-all duration-200 relative link-underline
        text-gray-400 hover:text-gray-200
      ">Examples</a><a href="/isolated-workers/api" class="
        text-sm font-medium transition-all duration-200 relative link-underline
        text-gray-400 hover:text-gray-200
      ">API Reference</a></nav><div class="hidden md:block"><div class="relative"><div class="relative"><svg class="absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500 pointer-events-none" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg><input type="text" placeholder="Search docs..." class="
            w-64 pl-10 pr-16 py-2 rounded-lg text-sm
            bg-black/40 border border-white/10
            text-gray-100 placeholder:text-gray-500
            focus:border-neon-cyan focus:ring-1 focus:ring-neon-cyan/50
            focus:outline-none transition-all duration-200
            hover:border-white/20
          " value=""/><kbd class="absolute right-3 top-1/2 -translate-y-1/2 px-1.5 py-0.5 text-xs bg-white/5 border border-white/10 rounded text-gray-500 pointer-events-none flex items-center gap-0.5"><span class="text-[10px]">âŒ˜</span>K</kbd></div></div></div></div></header><div class="pt-20"><div class="relative flex min-h-[calc(100vh-5rem)] p-4 lg:max-w-9/12 m-auto gap-4"><aside class="hidden lg:block shrink-0 p-4 sticky top-0 self-start w-72 rounded-2xl glass-enhanced border-glow"><div class="h-[calc(100vh-6rem)] overflow-y-auto"><nav class="p-4 h-full overflow-y-auto space-y-6"><div><div class="flex items-center justify-between mb-2 px-3"><a href="/isolated-workers/docs/getting-started" class="text-xs font-semibold text-gray-500 uppercase tracking-wider neon-flicker-slow neon-flicker-delay-2 hover:text-neon-cyan transition-colors duration-200">Getting Started</a><button class="shrink-0 ml-2 hover:text-neon-cyan transition-colors"><svg class="w-4 h-4 transition-transform duration-200 " fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button></div><ul class="space-y-1 list-none"><li><a href="/isolated-workers/docs/getting-started/installation" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Installation</a></li><li><a href="/isolated-workers/docs/getting-started/quick-start" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Quick Start</a></li><li><a href="/isolated-workers/docs/getting-started/first-worker" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Building Your First Worker</a></li></ul></div><div><div class="divider-glow mb-4"></div><div class="flex items-center justify-between mb-2 px-3"><a href="/isolated-workers/docs/concepts" class="text-xs font-semibold text-gray-500 uppercase tracking-wider neon-flicker-slow neon-flicker-delay-2 hover:text-neon-cyan transition-colors duration-200">Concepts</a><button class="shrink-0 ml-2 hover:text-neon-cyan transition-colors"><svg class="w-4 h-4 transition-transform duration-200 " fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button></div><ul class="space-y-1 list-none"><li><a href="/isolated-workers/docs/concepts/why-isolated-workers" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Why isolated-workers?</a></li><li><a href="/isolated-workers/docs/concepts/drivers" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Drivers</a></li></ul></div><div><div class="divider-glow mb-4"></div><div class="flex items-center justify-between mb-2 px-3"><a href="/isolated-workers/docs/guides" class="text-xs font-semibold text-gray-500 uppercase tracking-wider neon-flicker-slow neon-flicker-delay-2 hover:text-neon-cyan transition-colors duration-200">Guides</a><button class="shrink-0 ml-2 hover:text-neon-cyan transition-colors"><svg class="w-4 h-4 transition-transform duration-200 " fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button></div><ul class="space-y-1 list-none"><li><a href="/isolated-workers/docs/guides/error-handling" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Error Handling</a></li><li><a href="/isolated-workers/docs/guides/middleware" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Middleware</a></li><li><a href="/isolated-workers/docs/guides/timeout-configuration" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Timeout Configuration</a></li><li><a href="/isolated-workers/docs/guides/custom-serializers" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Custom Serializers</a></li><li><a href="/isolated-workers/docs/guides/worker-lifecycle" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Worker Lifecycle</a></li><li><a href="/isolated-workers/docs/guides/typescript" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">TypeScript Deep Dive</a></li><li><a href="/isolated-workers/docs/guides/troubleshooting" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Troubleshooting</a></li><li><a href="/isolated-workers/docs/guides/testing" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Testing Workers</a></li><li><a href="/isolated-workers/docs/guides/security" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        bg-neon-cyan/10 text-neon-cyan border-l-2 border-neon-cyan shadow-neon-sm active-pulse
      ">Security Considerations</a></li></ul></div><div><div class="divider-glow mb-4"></div><div class="flex items-center justify-between mb-2 px-3"><a href="/isolated-workers/examples" class="text-xs font-semibold text-gray-500 uppercase tracking-wider neon-flicker-slow neon-flicker-delay-2 hover:text-neon-cyan transition-colors duration-200">Examples</a><button class="shrink-0 ml-2 hover:text-neon-cyan transition-colors"><svg class="w-4 h-4 transition-transform duration-200 " fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button></div><ul class="space-y-1 list-none"><li><a href="/isolated-workers/examples/basic-ping" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Basic Ping-Pong Worker</a></li><li><a href="/isolated-workers/examples/custom-serializer" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Custom Serializer</a></li><li><a href="/isolated-workers/examples/error-handling" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Error Handling</a></li><li><a href="/isolated-workers/examples/middleware" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Middleware Pipeline</a></li><li><a href="/isolated-workers/examples/timeout-config" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Timeout Configuration</a></li><li><a href="/isolated-workers/examples/shutdown-handling" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Unexpected Worker Shutdown Handling</a></li><li><a href="/isolated-workers/examples/worker-lifecycle" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Worker Lifecycle Management</a></li><li><a href="/isolated-workers/examples/worker-threads-driver" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Worker Threads Driver</a></li></ul></div><div><div class="divider-glow mb-4"></div><div class="flex items-center justify-between mb-2 px-3"><a href="/isolated-workers/api" class="text-xs font-semibold text-gray-500 uppercase tracking-wider neon-flicker-slow neon-flicker-delay-2 hover:text-neon-cyan transition-colors duration-200">API Reference</a><button class="shrink-0 ml-2 hover:text-neon-cyan transition-colors"><svg class="w-4 h-4 transition-transform duration-200 " fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button></div><ul class="space-y-1 list-none"><li><a href="/isolated-workers/api#configuration" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Configuration</a></li><li><a href="/isolated-workers/api#core" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Core</a></li><li><a href="/isolated-workers/api#drivers" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Drivers</a></li><li><a href="/isolated-workers/api#other" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Other</a></li><li><a href="/isolated-workers/api#serialization" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Serialization</a></li><li><a href="/isolated-workers/api#types" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Types</a></li></ul></div><div><div class="divider-glow mb-4"></div><div class="flex items-center justify-between mb-2 px-3"><span class="text-xs font-semibold text-gray-500 uppercase tracking-wider neon-flicker-slow neon-flicker-delay-2">Configuration</span><button class="shrink-0 ml-2 hover:text-neon-cyan transition-colors"><svg class="w-4 h-4 transition-transform duration-200 " fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button></div><ul class="space-y-1 list-none"><li><a href="/isolated-workers/docs/guides/shutdown-handling" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Shutdown Handling</a></li></ul></div><div><div class="divider-glow mb-4"></div><div class="flex items-center justify-between mb-2 px-3"><span class="text-xs font-semibold text-gray-500 uppercase tracking-wider neon-flicker-slow neon-flicker-delay-2">Resources</span><button class="shrink-0 ml-2 hover:text-neon-cyan transition-colors"><svg class="w-4 h-4 transition-transform duration-200 " fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button></div><ul class="space-y-1 list-none"><li><a href="/isolated-workers/docs/faq" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">FAQ</a></li><li><a href="/isolated-workers/docs/contributing" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Contributing</a></li></ul></div></nav></div></aside><aside class="
                  lg:hidden left-4 bottom-4 top-24 w-72
                  glass-enhanced border-glow fixed! rounded-2xl
                  z-40 transition-transform duration-300 ease-in-out
                  -translate-x-full
                  overflow-clip
                "><div class="h-[calc(100vh-5rem)] overflow-y-auto"><nav class="p-4 h-full overflow-y-auto space-y-6"><div><div class="flex items-center justify-between mb-2 px-3"><a href="/isolated-workers/docs/getting-started" class="text-xs font-semibold text-gray-500 uppercase tracking-wider neon-flicker-slow neon-flicker-delay-2 hover:text-neon-cyan transition-colors duration-200">Getting Started</a><button class="shrink-0 ml-2 hover:text-neon-cyan transition-colors"><svg class="w-4 h-4 transition-transform duration-200 " fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button></div><ul class="space-y-1 list-none"><li><a href="/isolated-workers/docs/getting-started/installation" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Installation</a></li><li><a href="/isolated-workers/docs/getting-started/quick-start" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Quick Start</a></li><li><a href="/isolated-workers/docs/getting-started/first-worker" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Building Your First Worker</a></li></ul></div><div><div class="divider-glow mb-4"></div><div class="flex items-center justify-between mb-2 px-3"><a href="/isolated-workers/docs/concepts" class="text-xs font-semibold text-gray-500 uppercase tracking-wider neon-flicker-slow neon-flicker-delay-2 hover:text-neon-cyan transition-colors duration-200">Concepts</a><button class="shrink-0 ml-2 hover:text-neon-cyan transition-colors"><svg class="w-4 h-4 transition-transform duration-200 " fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button></div><ul class="space-y-1 list-none"><li><a href="/isolated-workers/docs/concepts/why-isolated-workers" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Why isolated-workers?</a></li><li><a href="/isolated-workers/docs/concepts/drivers" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Drivers</a></li></ul></div><div><div class="divider-glow mb-4"></div><div class="flex items-center justify-between mb-2 px-3"><a href="/isolated-workers/docs/guides" class="text-xs font-semibold text-gray-500 uppercase tracking-wider neon-flicker-slow neon-flicker-delay-2 hover:text-neon-cyan transition-colors duration-200">Guides</a><button class="shrink-0 ml-2 hover:text-neon-cyan transition-colors"><svg class="w-4 h-4 transition-transform duration-200 " fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button></div><ul class="space-y-1 list-none"><li><a href="/isolated-workers/docs/guides/error-handling" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Error Handling</a></li><li><a href="/isolated-workers/docs/guides/middleware" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Middleware</a></li><li><a href="/isolated-workers/docs/guides/timeout-configuration" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Timeout Configuration</a></li><li><a href="/isolated-workers/docs/guides/custom-serializers" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Custom Serializers</a></li><li><a href="/isolated-workers/docs/guides/worker-lifecycle" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Worker Lifecycle</a></li><li><a href="/isolated-workers/docs/guides/typescript" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">TypeScript Deep Dive</a></li><li><a href="/isolated-workers/docs/guides/troubleshooting" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Troubleshooting</a></li><li><a href="/isolated-workers/docs/guides/testing" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Testing Workers</a></li><li><a href="/isolated-workers/docs/guides/security" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        bg-neon-cyan/10 text-neon-cyan border-l-2 border-neon-cyan shadow-neon-sm active-pulse
      ">Security Considerations</a></li></ul></div><div><div class="divider-glow mb-4"></div><div class="flex items-center justify-between mb-2 px-3"><a href="/isolated-workers/examples" class="text-xs font-semibold text-gray-500 uppercase tracking-wider neon-flicker-slow neon-flicker-delay-2 hover:text-neon-cyan transition-colors duration-200">Examples</a><button class="shrink-0 ml-2 hover:text-neon-cyan transition-colors"><svg class="w-4 h-4 transition-transform duration-200 " fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button></div><ul class="space-y-1 list-none"><li><a href="/isolated-workers/examples/basic-ping" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Basic Ping-Pong Worker</a></li><li><a href="/isolated-workers/examples/custom-serializer" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Custom Serializer</a></li><li><a href="/isolated-workers/examples/error-handling" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Error Handling</a></li><li><a href="/isolated-workers/examples/middleware" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Middleware Pipeline</a></li><li><a href="/isolated-workers/examples/timeout-config" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Timeout Configuration</a></li><li><a href="/isolated-workers/examples/shutdown-handling" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Unexpected Worker Shutdown Handling</a></li><li><a href="/isolated-workers/examples/worker-lifecycle" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Worker Lifecycle Management</a></li><li><a href="/isolated-workers/examples/worker-threads-driver" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Worker Threads Driver</a></li></ul></div><div><div class="divider-glow mb-4"></div><div class="flex items-center justify-between mb-2 px-3"><a href="/isolated-workers/api" class="text-xs font-semibold text-gray-500 uppercase tracking-wider neon-flicker-slow neon-flicker-delay-2 hover:text-neon-cyan transition-colors duration-200">API Reference</a><button class="shrink-0 ml-2 hover:text-neon-cyan transition-colors"><svg class="w-4 h-4 transition-transform duration-200 " fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button></div><ul class="space-y-1 list-none"><li><a href="/isolated-workers/api#configuration" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Configuration</a></li><li><a href="/isolated-workers/api#core" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Core</a></li><li><a href="/isolated-workers/api#drivers" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Drivers</a></li><li><a href="/isolated-workers/api#other" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Other</a></li><li><a href="/isolated-workers/api#serialization" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Serialization</a></li><li><a href="/isolated-workers/api#types" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Types</a></li></ul></div><div><div class="divider-glow mb-4"></div><div class="flex items-center justify-between mb-2 px-3"><span class="text-xs font-semibold text-gray-500 uppercase tracking-wider neon-flicker-slow neon-flicker-delay-2">Configuration</span><button class="shrink-0 ml-2 hover:text-neon-cyan transition-colors"><svg class="w-4 h-4 transition-transform duration-200 " fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button></div><ul class="space-y-1 list-none"><li><a href="/isolated-workers/docs/guides/shutdown-handling" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Shutdown Handling</a></li></ul></div><div><div class="divider-glow mb-4"></div><div class="flex items-center justify-between mb-2 px-3"><span class="text-xs font-semibold text-gray-500 uppercase tracking-wider neon-flicker-slow neon-flicker-delay-2">Resources</span><button class="shrink-0 ml-2 hover:text-neon-cyan transition-colors"><svg class="w-4 h-4 transition-transform duration-200 " fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button></div><ul class="space-y-1 list-none"><li><a href="/isolated-workers/docs/faq" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">FAQ</a></li><li><a href="/isolated-workers/docs/contributing" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Contributing</a></li></ul></div></nav></div></aside><main class="flex-1 min-w-0 py-4"><div class="max-w-4xl rounded-2xl bg-secondary/60 backdrop-blur-sm border border-tertiary/30 px-8 py-8"><div><div class="flex items-center gap-2 text-sm text-gray-400 mb-6"><a href="/isolated-workers/" class="hover:text-neon-cyan">Home</a><span>/</span><span class="text-gray-100">Security Considerations</span></div><div class="prose prose-invert max-w-none space-y-8"><div class="docs-prose"><h1>Security Considerations</h1>
<p>This guide covers security aspects of using isolated-workers. It is important to understand both what protection process isolation provides and what it does NOT provide.</p>
<h2>Process Isolation</h2>
<h3>What Process Separation Provides</h3>
<p>When you spawn a worker with isolated-workers, it runs in a separate Node.js process. This provides several security benefits:</p>
<p><strong>Memory Isolation</strong>: The worker process has its own V8 heap, completely separate from the host. A worker cannot directly access variables, closures, or objects in the host process. This prevents accidental data leakage between components.</p>
<p><strong>Crash Isolation</strong>: If a worker crashes (uncaught exception, segfault, out of memory), the host process continues running. You can detect the crash and spawn a new worker:</p></div><div class="relative group my-6"><div class="
          rounded-lg overflow-hidden border border-white/10 bg-tertiary/80
          transition-all duration-300 border-glow
          shadow-neon-sm
        "><div class="px-4 py-3 bg-black/50 border-b border-white/5 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex gap-2"><span class="w-3 h-3 rounded-full bg-[#ff5f56] shadow-[0_0_6px_rgba(255,95,86,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#ffbd2e] shadow-[0_0_6px_rgba(255,189,46,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#27ca40] shadow-[0_0_6px_rgba(39,202,64,0.4)]"></span></div><span class="text-xs text-gray-500 font-mono">typescript</span></div><button class="
              text-xs flex items-center gap-1.5 px-2 py-1 rounded
              transition-all duration-200
              text-neon-cyan hover:text-neon-mint hover:bg-neon-cyan/10
            " title="Copy code"><svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>Copy</button></div><div class="overflow-x-auto bg-black/60"><div class="p-4 [&amp;_pre]:bg-transparent [&amp;_code]:bg-transparent"><div class="text-sm [&amp;_pre]:m-0 [&amp;_code]:m-0"><pre class="shiki github-dark" style="background-color:#00000000;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#F97583">try</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">  await</span><span style="color:#E1E4E8"> worker.</span><span style="color:#B392F0">send</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'riskyOperation'</span><span style="color:#E1E4E8">, data);</span></span>
<span class="line"><span style="color:#E1E4E8">} </span><span style="color:#F97583">catch</span><span style="color:#E1E4E8"> (error) {</span></span>
<span class="line"><span style="color:#F97583">  if</span><span style="color:#E1E4E8"> (</span><span style="color:#F97583">!</span><span style="color:#E1E4E8">worker.isActive) {</span></span>
<span class="line"><span style="color:#E1E4E8">    console.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'Worker crashed, spawning replacement'</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">    worker </span><span style="color:#F97583">=</span><span style="color:#F97583"> await</span><span style="color:#B392F0"> <a href="/isolated-workers/api/create-worker" class="code-link" title="View createWorker documentation">createWorker</a></span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">Messages</span><span style="color:#E1E4E8">>({ script: </span><span style="color:#9ECBFF">'./worker.js'</span><span style="color:#E1E4E8"> });</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre></div></div></div></div></div><div class="docs-prose"><p><strong>Resource Limits</strong>: Operating system process limits apply independently. A worker consuming excessive memory will be killed by the OS without affecting the host.</p>
<h3>What Process Separation Does NOT Provide</h3>
<p><strong>No Sandboxing</strong>: The worker process has full access to:</p>
<ul>
<li>The filesystem (same permissions as the parent process)</li>
<li>Network (can make HTTP requests, open sockets)</li>
<li>Environment variables</li>
<li>Child process spawning (<code class="inline-code">child_process.spawn</code>)</li>
<li>Native modules and Node.js APIs</li>
</ul>
<p><strong>No Capability Restrictions</strong>: Unlike browser workers or Deno, Node.js workers can do anything the user running the process can do. isolated-workers does not add a permission system.</p>
<p><strong>Same User Context</strong>: Workers run as the same OS user as the host. They inherit file permissions, group memberships, and access rights.</p>
<h2>Socket Security</h2>
<p>isolated-workers uses Unix domain sockets on POSIX systems and named pipes on Windows for IPC.</p>
<h3>Unix Socket Permissions</h3>
<p>Unix sockets are created with the process's umask. By default, this typically means:</p>
<ul>
<li>Owner has read/write access</li>
<li>Group and others may have read access depending on umask</li>
</ul>
<p>For sensitive applications, consider:</p></div><div class="relative group my-6"><div class="
          rounded-lg overflow-hidden border border-white/10 bg-tertiary/80
          transition-all duration-300 border-glow
          shadow-neon-sm
        "><div class="px-4 py-3 bg-black/50 border-b border-white/5 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex gap-2"><span class="w-3 h-3 rounded-full bg-[#ff5f56] shadow-[0_0_6px_rgba(255,95,86,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#ffbd2e] shadow-[0_0_6px_rgba(255,189,46,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#27ca40] shadow-[0_0_6px_rgba(39,202,64,0.4)]"></span></div><span class="text-xs text-gray-500 font-mono">typescript</span></div><button class="
              text-xs flex items-center gap-1.5 px-2 py-1 rounded
              transition-all duration-200
              text-neon-cyan hover:text-neon-mint hover:bg-neon-cyan/10
            " title="Copy code"><svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>Copy</button></div><div class="overflow-x-auto bg-black/60"><div class="p-4 [&amp;_pre]:bg-transparent [&amp;_code]:bg-transparent"><div class="text-sm [&amp;_pre]:m-0 [&amp;_code]:m-0"><pre class="shiki github-dark" style="background-color:#00000000;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#6A737D">// Set restrictive umask before creating workers</span></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> originalUmask</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> process.</span><span style="color:#B392F0">umask</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">0o077</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> worker</span><span style="color:#F97583"> =</span><span style="color:#F97583"> await</span><span style="color:#B392F0"> <a href="/isolated-workers/api/create-worker" class="code-link" title="View createWorker documentation">createWorker</a></span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">Messages</span><span style="color:#E1E4E8">>({ script: </span><span style="color:#9ECBFF">'./worker.js'</span><span style="color:#E1E4E8"> });</span></span>
<span class="line"><span style="color:#E1E4E8">process.</span><span style="color:#B392F0">umask</span><span style="color:#E1E4E8">(originalUmask);</span></span></code></pre></div></div></div></div></div><div class="docs-prose"><h3>Socket Path Location</h3>
<p>Sockets are created in a temporary directory. The path includes random components to prevent prediction:</p></div><div class="relative group my-6"><div class="
          rounded-lg overflow-hidden border border-white/10 bg-tertiary/80
          transition-all duration-300 border-glow
          shadow-neon-sm
        "><div class="px-4 py-3 bg-black/50 border-b border-white/5 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex gap-2"><span class="w-3 h-3 rounded-full bg-[#ff5f56] shadow-[0_0_6px_rgba(255,95,86,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#ffbd2e] shadow-[0_0_6px_rgba(255,189,46,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#27ca40] shadow-[0_0_6px_rgba(39,202,64,0.4)]"></span></div><span class="text-xs text-gray-500 font-mono">plaintext</span></div><button class="
              text-xs flex items-center gap-1.5 px-2 py-1 rounded
              transition-all duration-200
              text-neon-cyan hover:text-neon-mint hover:bg-neon-cyan/10
            " title="Copy code"><svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>Copy</button></div><div class="overflow-x-auto bg-black/60"><div class="p-4 [&amp;_pre]:bg-transparent [&amp;_code]:bg-transparent"><div class="text-sm [&amp;_pre]:m-0 [&amp;_code]:m-0"><pre class="shiki github-dark" style="background-color:#00000000;color:#e1e4e8" tabindex="0"><code><span class="line"><span>/tmp/isolated-workers-&#x3C;random>/worker-&#x3C;id>.sock</span></span></code></pre></div></div></div></div></div><div class="docs-prose"><p>Considerations:</p>
<ul>
<li><code class="inline-code">/tmp</code> is often world-readable on shared systems</li>
<li>Symlink attacks are possible if the temp directory is predictable</li>
<li>On shared hosting, other users might enumerate socket files</li>
</ul>
<p>For high-security environments, configure a private socket directory:</p></div><div class="relative group my-6"><div class="
          rounded-lg overflow-hidden border border-white/10 bg-tertiary/80
          transition-all duration-300 border-glow
          shadow-neon-sm
        "><div class="px-4 py-3 bg-black/50 border-b border-white/5 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex gap-2"><span class="w-3 h-3 rounded-full bg-[#ff5f56] shadow-[0_0_6px_rgba(255,95,86,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#ffbd2e] shadow-[0_0_6px_rgba(255,189,46,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#27ca40] shadow-[0_0_6px_rgba(39,202,64,0.4)]"></span></div><span class="text-xs text-gray-500 font-mono">typescript</span></div><button class="
              text-xs flex items-center gap-1.5 px-2 py-1 rounded
              transition-all duration-200
              text-neon-cyan hover:text-neon-mint hover:bg-neon-cyan/10
            " title="Copy code"><svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>Copy</button></div><div class="overflow-x-auto bg-black/60"><div class="p-4 [&amp;_pre]:bg-transparent [&amp;_code]:bg-transparent"><div class="text-sm [&amp;_pre]:m-0 [&amp;_code]:m-0"><pre class="shiki github-dark" style="background-color:#00000000;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> worker</span><span style="color:#F97583"> =</span><span style="color:#F97583"> await</span><span style="color:#B392F0"> <a href="/isolated-workers/api/create-worker" class="code-link" title="View createWorker documentation">createWorker</a></span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">Messages</span><span style="color:#E1E4E8">>({</span></span>
<span class="line"><span style="color:#E1E4E8">  script: </span><span style="color:#9ECBFF">'./worker.js'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">  socketPath: </span><span style="color:#9ECBFF">'/run/user/1000/myapp/worker.sock'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">});</span></span></code></pre></div></div></div></div></div><div class="docs-prose"><h3>Named Pipes on Windows</h3>
<p>Windows named pipes have their own ACL (Access Control List). By default, isolated-workers creates pipes accessible to the current user. Named pipes are created in the <code class="inline-code">\\.\pipe\</code> namespace which is system-managed.</p>
<h2>Message Validation</h2>
<h3>Why Validate Even with TypeScript?</h3>
<p>TypeScript types are erased at runtime. A malicious or buggy worker can send any data:</p></div><div class="relative group my-6"><div class="
          rounded-lg overflow-hidden border border-white/10 bg-tertiary/80
          transition-all duration-300 border-glow
          shadow-neon-sm
        "><div class="px-4 py-3 bg-black/50 border-b border-white/5 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex gap-2"><span class="w-3 h-3 rounded-full bg-[#ff5f56] shadow-[0_0_6px_rgba(255,95,86,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#ffbd2e] shadow-[0_0_6px_rgba(255,189,46,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#27ca40] shadow-[0_0_6px_rgba(39,202,64,0.4)]"></span></div><span class="text-xs text-gray-500 font-mono">typescript</span></div><button class="
              text-xs flex items-center gap-1.5 px-2 py-1 rounded
              transition-all duration-200
              text-neon-cyan hover:text-neon-mint hover:bg-neon-cyan/10
            " title="Copy code"><svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>Copy</button></div><div class="overflow-x-auto bg-black/60"><div class="p-4 [&amp;_pre]:bg-transparent [&amp;_code]:bg-transparent"><div class="text-sm [&amp;_pre]:m-0 [&amp;_code]:m-0"><pre class="shiki github-dark" style="background-color:#00000000;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#6A737D">// Host expects this type</span></span>
<span class="line"><span style="color:#F97583">type</span><span style="color:#B392F0"> Result</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> { </span><span style="color:#FFAB70">success</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> boolean</span><span style="color:#E1E4E8">; </span><span style="color:#FFAB70">count</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> number</span><span style="color:#E1E4E8"> };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// But worker could actually send</span></span>
<span class="line"><span style="color:#E1E4E8">{ </span><span style="color:#B392F0">success</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"maybe"</span><span style="color:#E1E4E8">, </span><span style="color:#B392F0">count</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"lots"</span><span style="color:#E1E4E8">, </span><span style="color:#B392F0">__proto__</span><span style="color:#E1E4E8">: maliciousObject }</span></span></code></pre></div></div></div></div></div><div class="docs-prose"><p>TypeScript won't catch this at runtime. Your application will proceed with incorrect data.</p>
<h3>Runtime Validation Recommendations</h3>
<p>Use a runtime validation library for messages containing user-provided or untrusted data:</p></div><div class="relative group my-6"><div class="
          rounded-lg overflow-hidden border border-white/10 bg-tertiary/80
          transition-all duration-300 border-glow
          shadow-neon-sm
        "><div class="px-4 py-3 bg-black/50 border-b border-white/5 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex gap-2"><span class="w-3 h-3 rounded-full bg-[#ff5f56] shadow-[0_0_6px_rgba(255,95,86,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#ffbd2e] shadow-[0_0_6px_rgba(255,189,46,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#27ca40] shadow-[0_0_6px_rgba(39,202,64,0.4)]"></span></div><span class="text-xs text-gray-500 font-mono">typescript</span></div><button class="
              text-xs flex items-center gap-1.5 px-2 py-1 rounded
              transition-all duration-200
              text-neon-cyan hover:text-neon-mint hover:bg-neon-cyan/10
            " title="Copy code"><svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>Copy</button></div><div class="overflow-x-auto bg-black/60"><div class="p-4 [&amp;_pre]:bg-transparent [&amp;_code]:bg-transparent"><div class="text-sm [&amp;_pre]:m-0 [&amp;_code]:m-0"><pre class="shiki github-dark" style="background-color:#00000000;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { z } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> 'zod'</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> ResultSchema</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> z.</span><span style="color:#B392F0">object</span><span style="color:#E1E4E8">({</span></span>
<span class="line"><span style="color:#E1E4E8">  success: z.</span><span style="color:#B392F0">boolean</span><span style="color:#E1E4E8">(),</span></span>
<span class="line"><span style="color:#E1E4E8">  count: z.</span><span style="color:#B392F0">number</span><span style="color:#E1E4E8">().</span><span style="color:#B392F0">int</span><span style="color:#E1E4E8">().</span><span style="color:#B392F0">nonnegative</span><span style="color:#E1E4E8">(),</span></span>
<span class="line"><span style="color:#E1E4E8">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// In message handler</span></span>
<span class="line"><span style="color:#B392F0">handlers</span><span style="color:#E1E4E8">: {</span></span>
<span class="line"><span style="color:#B392F0">  processData</span><span style="color:#E1E4E8">: </span><span style="color:#F97583">async</span><span style="color:#E1E4E8"> (</span><span style="color:#FFAB70">payload</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#79B8FF"> result</span><span style="color:#F97583"> =</span><span style="color:#F97583"> await</span><span style="color:#B392F0"> doProcessing</span><span style="color:#E1E4E8">(payload);</span></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#E1E4E8"> ResultSchema.</span><span style="color:#B392F0">parse</span><span style="color:#E1E4E8">(result); </span><span style="color:#6A737D">// Validates before sending</span></span>
<span class="line"><span style="color:#E1E4E8">  };</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// In host, after receiving</span></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> response</span><span style="color:#F97583"> =</span><span style="color:#F97583"> await</span><span style="color:#E1E4E8"> worker.</span><span style="color:#B392F0">send</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'processData'</span><span style="color:#E1E4E8">, data);</span></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> validated</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> ResultSchema.</span><span style="color:#B392F0">parse</span><span style="color:#E1E4E8">(response); </span><span style="color:#6A737D">// Validates after receiving</span></span></code></pre></div></div></div></div></div><div class="docs-prose"><h3>Protecting Against Malformed Messages</h3>
<p>Workers receive serialized JSON over the socket. Consider these attack vectors:</p>
<p><strong>Prototype Pollution</strong>: Use <code class="inline-code">JSON.parse</code> with a reviver or a safe parsing library:</p></div><div class="relative group my-6"><div class="
          rounded-lg overflow-hidden border border-white/10 bg-tertiary/80
          transition-all duration-300 border-glow
          shadow-neon-sm
        "><div class="px-4 py-3 bg-black/50 border-b border-white/5 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex gap-2"><span class="w-3 h-3 rounded-full bg-[#ff5f56] shadow-[0_0_6px_rgba(255,95,86,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#ffbd2e] shadow-[0_0_6px_rgba(255,189,46,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#27ca40] shadow-[0_0_6px_rgba(39,202,64,0.4)]"></span></div><span class="text-xs text-gray-500 font-mono">typescript</span></div><button class="
              text-xs flex items-center gap-1.5 px-2 py-1 rounded
              transition-all duration-200
              text-neon-cyan hover:text-neon-mint hover:bg-neon-cyan/10
            " title="Copy code"><svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>Copy</button></div><div class="overflow-x-auto bg-black/60"><div class="p-4 [&amp;_pre]:bg-transparent [&amp;_code]:bg-transparent"><div class="text-sm [&amp;_pre]:m-0 [&amp;_code]:m-0"><pre class="shiki github-dark" style="background-color:#00000000;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#6A737D">// If using custom serialization</span></span>
<span class="line"><span style="color:#F97583">function</span><span style="color:#B392F0"> safeParse</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">json</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> string</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#F97583">  return</span><span style="color:#79B8FF"> JSON</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">parse</span><span style="color:#E1E4E8">(json, (</span><span style="color:#FFAB70">key</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">value</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">    if</span><span style="color:#E1E4E8"> (key </span><span style="color:#F97583">===</span><span style="color:#9ECBFF"> '__proto__'</span><span style="color:#F97583"> ||</span><span style="color:#E1E4E8"> key </span><span style="color:#F97583">===</span><span style="color:#9ECBFF"> 'constructor'</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#F97583">      return</span><span style="color:#79B8FF"> undefined</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#E1E4E8"> value;</span></span>
<span class="line"><span style="color:#E1E4E8">  });</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre></div></div></div></div></div><div class="docs-prose"><p><strong>Large Payloads</strong>: A malicious sender could exhaust memory with huge messages. Consider size limits in your serializer or at the application level.</p>
<p><strong>Deeply Nested Objects</strong>: Can cause stack overflow during parsing. Limit nesting depth if accepting untrusted input.</p>
<h2>Sandboxing Considerations</h2>
<h3>When You Need Additional Sandboxing</h3>
<p>isolated-workers provides process isolation, not security sandboxing. You need additional measures when:</p>
<ul>
<li>Running untrusted code (user-submitted scripts, plugins)</li>
<li>Processing untrusted input that could exploit Node.js vulnerabilities</li>
<li>Handling sensitive data that must not reach the filesystem or network</li>
<li>Operating in multi-tenant environments</li>
</ul>
<h3>Options for Additional Sandboxing</h3>
<p><strong>vm2 or isolated-vm</strong>: For running untrusted JavaScript in a restricted context:</p></div><div class="relative group my-6"><div class="
          rounded-lg overflow-hidden border border-white/10 bg-tertiary/80
          transition-all duration-300 border-glow
          shadow-neon-sm
        "><div class="px-4 py-3 bg-black/50 border-b border-white/5 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex gap-2"><span class="w-3 h-3 rounded-full bg-[#ff5f56] shadow-[0_0_6px_rgba(255,95,86,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#ffbd2e] shadow-[0_0_6px_rgba(255,189,46,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#27ca40] shadow-[0_0_6px_rgba(39,202,64,0.4)]"></span></div><span class="text-xs text-gray-500 font-mono">typescript</span></div><button class="
              text-xs flex items-center gap-1.5 px-2 py-1 rounded
              transition-all duration-200
              text-neon-cyan hover:text-neon-mint hover:bg-neon-cyan/10
            " title="Copy code"><svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>Copy</button></div><div class="overflow-x-auto bg-black/60"><div class="p-4 [&amp;_pre]:bg-transparent [&amp;_code]:bg-transparent"><div class="text-sm [&amp;_pre]:m-0 [&amp;_code]:m-0"><pre class="shiki github-dark" style="background-color:#00000000;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#6A737D">// Worker code</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> ivm </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> 'isolated-vm'</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">handlers</span><span style="color:#E1E4E8">: {</span></span>
<span class="line"><span style="color:#B392F0">  runUntrusted</span><span style="color:#E1E4E8">: (</span><span style="color:#FFAB70">code</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> string</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#79B8FF"> isolate</span><span style="color:#F97583"> =</span><span style="color:#F97583"> new</span><span style="color:#E1E4E8"> ivm.</span><span style="color:#B392F0">Isolate</span><span style="color:#E1E4E8">({ memoryLimit: </span><span style="color:#79B8FF">128</span><span style="color:#E1E4E8"> });</span></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#79B8FF"> context</span><span style="color:#F97583"> =</span><span style="color:#F97583"> await</span><span style="color:#E1E4E8"> isolate.</span><span style="color:#B392F0">createContext</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#6A737D">    // Execute code in sandbox</span></span>
<span class="line"><span style="color:#E1E4E8">  };</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre></div></div></div></div></div><div class="docs-prose"><p><strong>Docker/Containers</strong>: Run workers in containers with restricted capabilities:</p></div><div class="relative group my-6"><div class="
          rounded-lg overflow-hidden border border-white/10 bg-tertiary/80
          transition-all duration-300 border-glow
          shadow-neon-sm
        "><div class="px-4 py-3 bg-black/50 border-b border-white/5 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex gap-2"><span class="w-3 h-3 rounded-full bg-[#ff5f56] shadow-[0_0_6px_rgba(255,95,86,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#ffbd2e] shadow-[0_0_6px_rgba(255,189,46,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#27ca40] shadow-[0_0_6px_rgba(39,202,64,0.4)]"></span></div><span class="text-xs text-gray-500 font-mono">typescript</span></div><button class="
              text-xs flex items-center gap-1.5 px-2 py-1 rounded
              transition-all duration-200
              text-neon-cyan hover:text-neon-mint hover:bg-neon-cyan/10
            " title="Copy code"><svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>Copy</button></div><div class="overflow-x-auto bg-black/60"><div class="p-4 [&amp;_pre]:bg-transparent [&amp;_code]:bg-transparent"><div class="text-sm [&amp;_pre]:m-0 [&amp;_code]:m-0"><pre class="shiki github-dark" style="background-color:#00000000;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#6A737D">// Use child_process to spawn containerized workers</span></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> worker</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> spawn</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'docker'</span><span style="color:#E1E4E8">, [</span></span>
<span class="line"><span style="color:#9ECBFF">  'run'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#9ECBFF">  '--rm'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#9ECBFF">  '--network=none'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#9ECBFF">  '--read-only'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#9ECBFF">  'worker-image'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#9ECBFF">  'node'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#9ECBFF">  '/app/worker.js'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">]);</span></span></code></pre></div></div></div></div></div><div class="docs-prose"><p><strong>Operating System Sandboxing</strong>:</p>
<ul>
<li>Linux: seccomp, AppArmor, SELinux</li>
<li>macOS: sandbox-exec</li>
<li>Windows: AppContainer</li>
</ul>
<h3>What isolated-workers Intentionally Does Not Do</h3>
<p>We do not implement sandboxing because:</p>
<ol>
<li><strong>Complexity</strong>: Proper sandboxing is extremely difficult to get right</li>
<li><strong>Platform differences</strong>: Each OS has different sandboxing mechanisms</li>
<li><strong>Performance</strong>: Sandboxing adds overhead</li>
<li><strong>Use case mismatch</strong>: Most worker use cases involve trusted code</li>
</ol>
<p>If you need sandboxing, use purpose-built tools rather than expecting it from a process communication library.</p>
<h2>Environment Variables</h2>
<h3>Passing Sensitive Data to Workers</h3>
<p>Workers inherit the parent's environment by default. This includes sensitive variables like API keys:</p></div><div class="relative group my-6"><div class="
          rounded-lg overflow-hidden border border-white/10 bg-tertiary/80
          transition-all duration-300 border-glow
          shadow-neon-sm
        "><div class="px-4 py-3 bg-black/50 border-b border-white/5 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex gap-2"><span class="w-3 h-3 rounded-full bg-[#ff5f56] shadow-[0_0_6px_rgba(255,95,86,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#ffbd2e] shadow-[0_0_6px_rgba(255,189,46,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#27ca40] shadow-[0_0_6px_rgba(39,202,64,0.4)]"></span></div><span class="text-xs text-gray-500 font-mono">typescript</span></div><button class="
              text-xs flex items-center gap-1.5 px-2 py-1 rounded
              transition-all duration-200
              text-neon-cyan hover:text-neon-mint hover:bg-neon-cyan/10
            " title="Copy code"><svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>Copy</button></div><div class="overflow-x-auto bg-black/60"><div class="p-4 [&amp;_pre]:bg-transparent [&amp;_code]:bg-transparent"><div class="text-sm [&amp;_pre]:m-0 [&amp;_code]:m-0"><pre class="shiki github-dark" style="background-color:#00000000;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#6A737D">// Worker automatically has access to process.env.API_KEY</span></span></code></pre></div></div></div></div></div><div class="docs-prose"><p>To limit exposure, explicitly pass only needed variables:</p></div><div class="relative group my-6"><div class="
          rounded-lg overflow-hidden border border-white/10 bg-tertiary/80
          transition-all duration-300 border-glow
          shadow-neon-sm
        "><div class="px-4 py-3 bg-black/50 border-b border-white/5 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex gap-2"><span class="w-3 h-3 rounded-full bg-[#ff5f56] shadow-[0_0_6px_rgba(255,95,86,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#ffbd2e] shadow-[0_0_6px_rgba(255,189,46,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#27ca40] shadow-[0_0_6px_rgba(39,202,64,0.4)]"></span></div><span class="text-xs text-gray-500 font-mono">typescript</span></div><button class="
              text-xs flex items-center gap-1.5 px-2 py-1 rounded
              transition-all duration-200
              text-neon-cyan hover:text-neon-mint hover:bg-neon-cyan/10
            " title="Copy code"><svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>Copy</button></div><div class="overflow-x-auto bg-black/60"><div class="p-4 [&amp;_pre]:bg-transparent [&amp;_code]:bg-transparent"><div class="text-sm [&amp;_pre]:m-0 [&amp;_code]:m-0"><pre class="shiki github-dark" style="background-color:#00000000;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> worker</span><span style="color:#F97583"> =</span><span style="color:#F97583"> await</span><span style="color:#B392F0"> <a href="/isolated-workers/api/create-worker" class="code-link" title="View createWorker documentation">createWorker</a></span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">Messages</span><span style="color:#E1E4E8">>({</span></span>
<span class="line"><span style="color:#E1E4E8">  script: </span><span style="color:#9ECBFF">'./worker.js'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">  env: {</span></span>
<span class="line"><span style="color:#E1E4E8">    NODE_ENV: process.env.</span><span style="color:#79B8FF">NODE_ENV</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">    DATABASE_URL: process.env.</span><span style="color:#79B8FF">DATABASE_URL</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#6A737D">    // Explicitly omit AWS_SECRET_ACCESS_KEY, etc.</span></span>
<span class="line"><span style="color:#E1E4E8">  },</span></span>
<span class="line"><span style="color:#E1E4E8">});</span></span></code></pre></div></div></div></div></div><div class="docs-prose"><h3>Avoiding Secrets in Message Payloads</h3>
<p>Message payloads may be logged, serialized, or cached. Avoid including secrets:</p></div><div class="relative group my-6"><div class="
          rounded-lg overflow-hidden border border-white/10 bg-tertiary/80
          transition-all duration-300 border-glow
          shadow-neon-sm
        "><div class="px-4 py-3 bg-black/50 border-b border-white/5 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex gap-2"><span class="w-3 h-3 rounded-full bg-[#ff5f56] shadow-[0_0_6px_rgba(255,95,86,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#ffbd2e] shadow-[0_0_6px_rgba(255,189,46,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#27ca40] shadow-[0_0_6px_rgba(39,202,64,0.4)]"></span></div><span class="text-xs text-gray-500 font-mono">typescript</span></div><button class="
              text-xs flex items-center gap-1.5 px-2 py-1 rounded
              transition-all duration-200
              text-neon-cyan hover:text-neon-mint hover:bg-neon-cyan/10
            " title="Copy code"><svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>Copy</button></div><div class="overflow-x-auto bg-black/60"><div class="p-4 [&amp;_pre]:bg-transparent [&amp;_code]:bg-transparent"><div class="text-sm [&amp;_pre]:m-0 [&amp;_code]:m-0"><pre class="shiki github-dark" style="background-color:#00000000;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#6A737D">// Bad - secret in message</span></span>
<span class="line"><span style="color:#F97583">await</span><span style="color:#E1E4E8"> worker.</span><span style="color:#B392F0">send</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'callApi'</span><span style="color:#E1E4E8">, {</span></span>
<span class="line"><span style="color:#E1E4E8">  endpoint: </span><span style="color:#9ECBFF">'/users'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">  apiKey: </span><span style="color:#9ECBFF">'sk_live_xxxxx'</span><span style="color:#E1E4E8">, </span><span style="color:#6A737D">// Could be logged</span></span>
<span class="line"><span style="color:#E1E4E8">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// Good - worker reads secret from environment</span></span>
<span class="line"><span style="color:#F97583">await</span><span style="color:#E1E4E8"> worker.</span><span style="color:#B392F0">send</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'callApi'</span><span style="color:#E1E4E8">, {</span></span>
<span class="line"><span style="color:#E1E4E8">  endpoint: </span><span style="color:#9ECBFF">'/users'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#6A737D">  // Worker uses process.env.API_KEY internally</span></span>
<span class="line"><span style="color:#E1E4E8">});</span></span></code></pre></div></div></div></div></div><div class="docs-prose"><p>If you must pass sensitive data in messages, consider:</p>
<ol>
<li>Using encrypted payloads (see <a href="/isolated-workers/docs/guides/custom-serializers">Custom Serializers</a>)</li>
<li>Implementing message redaction in logging middleware</li>
<li>Using short-lived tokens instead of long-lived secrets</li>
</ol>
<h2>Best Practices</h2>
<h3>1. Validate All Inputs</h3>
<p>Never trust data crossing the process boundary:</p></div><div class="relative group my-6"><div class="
          rounded-lg overflow-hidden border border-white/10 bg-tertiary/80
          transition-all duration-300 border-glow
          shadow-neon-sm
        "><div class="px-4 py-3 bg-black/50 border-b border-white/5 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex gap-2"><span class="w-3 h-3 rounded-full bg-[#ff5f56] shadow-[0_0_6px_rgba(255,95,86,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#ffbd2e] shadow-[0_0_6px_rgba(255,189,46,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#27ca40] shadow-[0_0_6px_rgba(39,202,64,0.4)]"></span></div><span class="text-xs text-gray-500 font-mono">typescript</span></div><button class="
              text-xs flex items-center gap-1.5 px-2 py-1 rounded
              transition-all duration-200
              text-neon-cyan hover:text-neon-mint hover:bg-neon-cyan/10
            " title="Copy code"><svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>Copy</button></div><div class="overflow-x-auto bg-black/60"><div class="p-4 [&amp;_pre]:bg-transparent [&amp;_code]:bg-transparent"><div class="text-sm [&amp;_pre]:m-0 [&amp;_code]:m-0"><pre class="shiki github-dark" style="background-color:#00000000;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#B392F0">handlers</span><span style="color:#E1E4E8">: {</span></span>
<span class="line"><span style="color:#B392F0">  processFile</span><span style="color:#E1E4E8">: </span><span style="color:#F97583">async</span><span style="color:#E1E4E8"> ({ </span><span style="color:#FFAB70">path</span><span style="color:#E1E4E8"> }) </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#6A737D">    // Validate path doesn't escape expected directory</span></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#79B8FF"> resolved</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> resolve</span><span style="color:#E1E4E8">(path);</span></span>
<span class="line"><span style="color:#F97583">    if</span><span style="color:#E1E4E8"> (</span><span style="color:#F97583">!</span><span style="color:#E1E4E8">resolved.</span><span style="color:#B392F0">startsWith</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'/app/uploads/'</span><span style="color:#E1E4E8">)) {</span></span>
<span class="line"><span style="color:#F97583">      throw</span><span style="color:#F97583"> new</span><span style="color:#B392F0"> Error</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'Invalid file path'</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#B392F0"> processFile</span><span style="color:#E1E4E8">(resolved);</span></span>
<span class="line"><span style="color:#E1E4E8">  };</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre></div></div></div></div></div><div class="docs-prose"><h3>2. Use Timeouts to Prevent DoS</h3>
<p>Always configure timeouts to prevent workers from hanging indefinitely:</p></div><div class="relative group my-6"><div class="
          rounded-lg overflow-hidden border border-white/10 bg-tertiary/80
          transition-all duration-300 border-glow
          shadow-neon-sm
        "><div class="px-4 py-3 bg-black/50 border-b border-white/5 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex gap-2"><span class="w-3 h-3 rounded-full bg-[#ff5f56] shadow-[0_0_6px_rgba(255,95,86,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#ffbd2e] shadow-[0_0_6px_rgba(255,189,46,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#27ca40] shadow-[0_0_6px_rgba(39,202,64,0.4)]"></span></div><span class="text-xs text-gray-500 font-mono">typescript</span></div><button class="
              text-xs flex items-center gap-1.5 px-2 py-1 rounded
              transition-all duration-200
              text-neon-cyan hover:text-neon-mint hover:bg-neon-cyan/10
            " title="Copy code"><svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>Copy</button></div><div class="overflow-x-auto bg-black/60"><div class="p-4 [&amp;_pre]:bg-transparent [&amp;_code]:bg-transparent"><div class="text-sm [&amp;_pre]:m-0 [&amp;_code]:m-0"><pre class="shiki github-dark" style="background-color:#00000000;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> worker</span><span style="color:#F97583"> =</span><span style="color:#F97583"> await</span><span style="color:#B392F0"> <a href="/isolated-workers/api/create-worker" class="code-link" title="View createWorker documentation">createWorker</a></span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">Messages</span><span style="color:#E1E4E8">>({</span></span>
<span class="line"><span style="color:#E1E4E8">  script: </span><span style="color:#9ECBFF">'./worker.js'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">  timeout: {</span></span>
<span class="line"><span style="color:#E1E4E8">    WORKER_STARTUP: </span><span style="color:#79B8FF">5000</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">    WORKER_MESSAGE: </span><span style="color:#79B8FF">30000</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">    expensiveOperation: </span><span style="color:#79B8FF">120000</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">  },</span></span>
<span class="line"><span style="color:#E1E4E8">});</span></span></code></pre></div></div></div></div></div><div class="docs-prose"><p>See <a href="/isolated-workers/docs/guides/timeout-configuration">Timeout Configuration</a> for details.</p>
<h3>3. Clean Up Workers Properly</h3>
<p>Leaked workers consume resources and leave socket files:</p></div><div class="relative group my-6"><div class="
          rounded-lg overflow-hidden border border-white/10 bg-tertiary/80
          transition-all duration-300 border-glow
          shadow-neon-sm
        "><div class="px-4 py-3 bg-black/50 border-b border-white/5 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex gap-2"><span class="w-3 h-3 rounded-full bg-[#ff5f56] shadow-[0_0_6px_rgba(255,95,86,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#ffbd2e] shadow-[0_0_6px_rgba(255,189,46,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#27ca40] shadow-[0_0_6px_rgba(39,202,64,0.4)]"></span></div><span class="text-xs text-gray-500 font-mono">typescript</span></div><button class="
              text-xs flex items-center gap-1.5 px-2 py-1 rounded
              transition-all duration-200
              text-neon-cyan hover:text-neon-mint hover:bg-neon-cyan/10
            " title="Copy code"><svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>Copy</button></div><div class="overflow-x-auto bg-black/60"><div class="p-4 [&amp;_pre]:bg-transparent [&amp;_code]:bg-transparent"><div class="text-sm [&amp;_pre]:m-0 [&amp;_code]:m-0"><pre class="shiki github-dark" style="background-color:#00000000;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> worker</span><span style="color:#F97583"> =</span><span style="color:#F97583"> await</span><span style="color:#B392F0"> <a href="/isolated-workers/api/create-worker" class="code-link" title="View createWorker documentation">createWorker</a></span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">Messages</span><span style="color:#E1E4E8">>({ script: </span><span style="color:#9ECBFF">'./worker.js'</span><span style="color:#E1E4E8"> });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">try</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">  await</span><span style="color:#B392F0"> doWork</span><span style="color:#E1E4E8">(worker);</span></span>
<span class="line"><span style="color:#E1E4E8">} </span><span style="color:#F97583">finally</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">  await</span><span style="color:#E1E4E8"> worker.</span><span style="color:#B392F0">close</span><span style="color:#E1E4E8">(); </span><span style="color:#6A737D">// Always clean up</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre></div></div></div></div></div><div class="docs-prose"><p>For long-lived applications, track all workers and clean up on shutdown:</p></div><div class="relative group my-6"><div class="
          rounded-lg overflow-hidden border border-white/10 bg-tertiary/80
          transition-all duration-300 border-glow
          shadow-neon-sm
        "><div class="px-4 py-3 bg-black/50 border-b border-white/5 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex gap-2"><span class="w-3 h-3 rounded-full bg-[#ff5f56] shadow-[0_0_6px_rgba(255,95,86,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#ffbd2e] shadow-[0_0_6px_rgba(255,189,46,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#27ca40] shadow-[0_0_6px_rgba(39,202,64,0.4)]"></span></div><span class="text-xs text-gray-500 font-mono">typescript</span></div><button class="
              text-xs flex items-center gap-1.5 px-2 py-1 rounded
              transition-all duration-200
              text-neon-cyan hover:text-neon-mint hover:bg-neon-cyan/10
            " title="Copy code"><svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>Copy</button></div><div class="overflow-x-auto bg-black/60"><div class="p-4 [&amp;_pre]:bg-transparent [&amp;_code]:bg-transparent"><div class="text-sm [&amp;_pre]:m-0 [&amp;_code]:m-0"><pre class="shiki github-dark" style="background-color:#00000000;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> workers</span><span style="color:#F97583">:</span><span style="color:#B392F0"> <a href="/isolated-workers/api/worker-client" class="code-link" title="View WorkerClient documentation">WorkerClient</a></span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">Messages</span><span style="color:#E1E4E8">>[] </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> [];</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">process.</span><span style="color:#B392F0">on</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'SIGTERM'</span><span style="color:#E1E4E8">, </span><span style="color:#F97583">async</span><span style="color:#E1E4E8"> () </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">  await</span><span style="color:#79B8FF"> Promise</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">all</span><span style="color:#E1E4E8">(workers.</span><span style="color:#B392F0">map</span><span style="color:#E1E4E8">((</span><span style="color:#FFAB70">w</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> w.</span><span style="color:#B392F0">close</span><span style="color:#E1E4E8">()));</span></span>
<span class="line"><span style="color:#E1E4E8">  process.</span><span style="color:#B392F0">exit</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">});</span></span></code></pre></div></div></div></div></div><div class="docs-prose"><h3>4. Limit Worker Permissions When Possible</h3>
<p>Run workers with reduced privileges:</p></div><div class="relative group my-6"><div class="
          rounded-lg overflow-hidden border border-white/10 bg-tertiary/80
          transition-all duration-300 border-glow
          shadow-neon-sm
        "><div class="px-4 py-3 bg-black/50 border-b border-white/5 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex gap-2"><span class="w-3 h-3 rounded-full bg-[#ff5f56] shadow-[0_0_6px_rgba(255,95,86,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#ffbd2e] shadow-[0_0_6px_rgba(255,189,46,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#27ca40] shadow-[0_0_6px_rgba(39,202,64,0.4)]"></span></div><span class="text-xs text-gray-500 font-mono">typescript</span></div><button class="
              text-xs flex items-center gap-1.5 px-2 py-1 rounded
              transition-all duration-200
              text-neon-cyan hover:text-neon-mint hover:bg-neon-cyan/10
            " title="Copy code"><svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>Copy</button></div><div class="overflow-x-auto bg-black/60"><div class="p-4 [&amp;_pre]:bg-transparent [&amp;_code]:bg-transparent"><div class="text-sm [&amp;_pre]:m-0 [&amp;_code]:m-0"><pre class="shiki github-dark" style="background-color:#00000000;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#6A737D">// Drop privileges in worker after startup</span></span>
<span class="line"><span style="color:#6A737D">// (Linux only, requires starting as root)</span></span>
<span class="line"><span style="color:#F97583">if</span><span style="color:#E1E4E8"> (process.</span><span style="color:#B392F0">getuid</span><span style="color:#E1E4E8">() </span><span style="color:#F97583">===</span><span style="color:#79B8FF"> 0</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#E1E4E8">  process.</span><span style="color:#B392F0">setgid</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">1000</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">  process.</span><span style="color:#B392F0">setuid</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">1000</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre></div></div></div></div></div><div class="docs-prose"><h3>5. Avoid Dynamic Script Paths</h3>
<p>Never construct worker script paths from user input:</p></div><div class="relative group my-6"><div class="
          rounded-lg overflow-hidden border border-white/10 bg-tertiary/80
          transition-all duration-300 border-glow
          shadow-neon-sm
        "><div class="px-4 py-3 bg-black/50 border-b border-white/5 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex gap-2"><span class="w-3 h-3 rounded-full bg-[#ff5f56] shadow-[0_0_6px_rgba(255,95,86,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#ffbd2e] shadow-[0_0_6px_rgba(255,189,46,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#27ca40] shadow-[0_0_6px_rgba(39,202,64,0.4)]"></span></div><span class="text-xs text-gray-500 font-mono">typescript</span></div><button class="
              text-xs flex items-center gap-1.5 px-2 py-1 rounded
              transition-all duration-200
              text-neon-cyan hover:text-neon-mint hover:bg-neon-cyan/10
            " title="Copy code"><svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>Copy</button></div><div class="overflow-x-auto bg-black/60"><div class="p-4 [&amp;_pre]:bg-transparent [&amp;_code]:bg-transparent"><div class="text-sm [&amp;_pre]:m-0 [&amp;_code]:m-0"><pre class="shiki github-dark" style="background-color:#00000000;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#6A737D">// DANGEROUS - path injection</span></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> worker</span><span style="color:#F97583"> =</span><span style="color:#F97583"> await</span><span style="color:#B392F0"> <a href="/isolated-workers/api/create-worker" class="code-link" title="View createWorker documentation">createWorker</a></span><span style="color:#E1E4E8">({</span></span>
<span class="line"><span style="color:#E1E4E8">  script: </span><span style="color:#9ECBFF">`./workers/${</span><span style="color:#E1E4E8">userInput</span><span style="color:#9ECBFF">}.js`</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// SAFE - whitelist allowed workers</span></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> allowedWorkers</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">  image: </span><span style="color:#9ECBFF">'./workers/image-processor.js'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">  pdf: </span><span style="color:#9ECBFF">'./workers/pdf-generator.js'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> script</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> allowedWorkers[userInput];</span></span>
<span class="line"><span style="color:#F97583">if</span><span style="color:#E1E4E8"> (</span><span style="color:#F97583">!</span><span style="color:#E1E4E8">script) {</span></span>
<span class="line"><span style="color:#F97583">  throw</span><span style="color:#F97583"> new</span><span style="color:#B392F0"> Error</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'Unknown worker type'</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> worker</span><span style="color:#F97583"> =</span><span style="color:#F97583"> await</span><span style="color:#B392F0"> <a href="/isolated-workers/api/create-worker" class="code-link" title="View createWorker documentation">createWorker</a></span><span style="color:#E1E4E8">({ script });</span></span></code></pre></div></div></div></div></div><div class="docs-prose"><h3>6. Monitor Worker Resource Usage</h3>
<p>In production, monitor workers for anomalies:</p></div><div class="relative group my-6"><div class="
          rounded-lg overflow-hidden border border-white/10 bg-tertiary/80
          transition-all duration-300 border-glow
          shadow-neon-sm
        "><div class="px-4 py-3 bg-black/50 border-b border-white/5 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex gap-2"><span class="w-3 h-3 rounded-full bg-[#ff5f56] shadow-[0_0_6px_rgba(255,95,86,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#ffbd2e] shadow-[0_0_6px_rgba(255,189,46,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#27ca40] shadow-[0_0_6px_rgba(39,202,64,0.4)]"></span></div><span class="text-xs text-gray-500 font-mono">typescript</span></div><button class="
              text-xs flex items-center gap-1.5 px-2 py-1 rounded
              transition-all duration-200
              text-neon-cyan hover:text-neon-mint hover:bg-neon-cyan/10
            " title="Copy code"><svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>Copy</button></div><div class="overflow-x-auto bg-black/60"><div class="p-4 [&amp;_pre]:bg-transparent [&amp;_code]:bg-transparent"><div class="text-sm [&amp;_pre]:m-0 [&amp;_code]:m-0"><pre class="shiki github-dark" style="background-color:#00000000;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#6A737D">// Periodically check worker health</span></span>
<span class="line"><span style="color:#B392F0">setInterval</span><span style="color:#E1E4E8">(</span><span style="color:#F97583">async</span><span style="color:#E1E4E8"> () </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">  if</span><span style="color:#E1E4E8"> (</span><span style="color:#F97583">!</span><span style="color:#E1E4E8">worker.isActive) {</span></span>
<span class="line"><span style="color:#E1E4E8">    metrics.</span><span style="color:#B392F0">increment</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'worker.crash'</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">    worker </span><span style="color:#F97583">=</span><span style="color:#F97583"> await</span><span style="color:#B392F0"> <a href="/isolated-workers/api/create-worker" class="code-link" title="View createWorker documentation">createWorker</a></span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">Messages</span><span style="color:#E1E4E8">>({ script: </span><span style="color:#9ECBFF">'./worker.js'</span><span style="color:#E1E4E8"> });</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">}, </span><span style="color:#79B8FF">5000</span><span style="color:#E1E4E8">);</span></span></code></pre></div></div></div></div></div><div class="docs-prose"><h2>Summary</h2>













































<table><thead><tr><th>Aspect</th><th>What isolated-workers Provides</th><th>What You Must Handle</th></tr></thead><tbody><tr><td>Memory</td><td>Complete isolation between processes</td><td>N/A</td></tr><tr><td>Crashes</td><td>Host survives worker crashes</td><td>Restart logic</td></tr><tr><td>Filesystem</td><td>N/A</td><td>Access control, path validation</td></tr><tr><td>Network</td><td>N/A</td><td>Firewall rules, if needed</td></tr><tr><td>Code execution</td><td>Process-level separation</td><td>Sandboxing for untrusted code</td></tr><tr><td>Message integrity</td><td>Type definitions</td><td>Runtime validation</td></tr><tr><td>Secrets</td><td>Environment isolation option</td><td>Avoiding secrets in payloads</td></tr></tbody></table>
<p>isolated-workers makes it easy to run code in separate processes with type-safe communication. It does not attempt to be a security sandbox. For threat models involving untrusted code or hostile input, combine isolated-workers with appropriate security tools for your platform.</p>
<h2>Driver Security Considerations</h2>
<h3>child_process vs worker_threads</h3>
<p>isolated-workers defaults to using <code class="inline-code">child_process</code> for spawning workers, but you can configure it to use <code class="inline-code">worker_threads</code>. Each driver has different security implications:</p>
<p><strong>child_process (default)</strong>:</p>
<ul>
<li>Spawns a completely separate Node.js process with its own V8 instance</li>
<li>Full OS-level process isolation and memory separation</li>
<li>Can be sandboxed using OS-level mechanisms (seccomp, AppArmor, containers)</li>
<li>Higher memory overhead per worker</li>
<li>More isolation but slower message passing</li>
</ul>
<p><strong>worker_threads</strong>:</p>
<ul>
<li>Runs workers as threads within the same Node.js process</li>
<li>Shared memory access between threads (can be both a feature and a risk)</li>
<li>No OS-level process boundary</li>
<li>Lower memory overhead and faster message passing</li>
<li>Less isolation - thread crashes can affect the main process</li>
<li>Cannot use OS-level sandboxing mechanisms</li>
</ul>
<p>When choosing a driver for security-sensitive applications:</p>
<ul>
<li>Use <code class="inline-code">child_process</code> for running untrusted code requiring strong isolation</li>
<li>Use <code class="inline-code">worker_threads</code> for trusted code where performance and shared memory are beneficial</li>
<li>Remember that <code class="inline-code">worker_threads</code> provides no security boundary beyond code-level isolation</li>
</ul>
<h3>Using Resource Limits with Worker Threads</h3>
<p>When using the <code class="inline-code">worker_threads</code> driver, you can set resource limits to constrain worker resource usage:</p></div><div class="relative group my-6"><div class="
          rounded-lg overflow-hidden border border-white/10 bg-tertiary/80
          transition-all duration-300 border-glow
          shadow-neon-sm
        "><div class="px-4 py-3 bg-black/50 border-b border-white/5 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex gap-2"><span class="w-3 h-3 rounded-full bg-[#ff5f56] shadow-[0_0_6px_rgba(255,95,86,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#ffbd2e] shadow-[0_0_6px_rgba(255,189,46,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#27ca40] shadow-[0_0_6px_rgba(39,202,64,0.4)]"></span></div><span class="text-xs text-gray-500 font-mono">typescript</span></div><button class="
              text-xs flex items-center gap-1.5 px-2 py-1 rounded
              transition-all duration-200
              text-neon-cyan hover:text-neon-mint hover:bg-neon-cyan/10
            " title="Copy code"><svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>Copy</button></div><div class="overflow-x-auto bg-black/60"><div class="p-4 [&amp;_pre]:bg-transparent [&amp;_code]:bg-transparent"><div class="text-sm [&amp;_pre]:m-0 [&amp;_code]:m-0"><pre class="shiki github-dark" style="background-color:#00000000;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> worker</span><span style="color:#F97583"> =</span><span style="color:#F97583"> await</span><span style="color:#B392F0"> <a href="/isolated-workers/api/create-worker" class="code-link" title="View createWorker documentation">createWorker</a></span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">Messages</span><span style="color:#E1E4E8">>({</span></span>
<span class="line"><span style="color:#E1E4E8">  script: </span><span style="color:#9ECBFF">'./worker.js'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">  driver: </span><span style="color:#9ECBFF">'worker_threads'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">  resourceLimits: {</span></span>
<span class="line"><span style="color:#E1E4E8">    maxOldGenerationSizeMb: </span><span style="color:#79B8FF">128</span><span style="color:#E1E4E8">, </span><span style="color:#6A737D">// Maximum size of the heap in MB</span></span>
<span class="line"><span style="color:#E1E4E8">    maxYoungGenerationSizeMb: </span><span style="color:#79B8FF">16</span><span style="color:#E1E4E8">, </span><span style="color:#6A737D">// Maximum size of the young generation in MB</span></span>
<span class="line"><span style="color:#E1E4E8">    codeRangeSizeMb: </span><span style="color:#79B8FF">16</span><span style="color:#E1E4E8">, </span><span style="color:#6A737D">// Size of pre-allocated memory for code</span></span>
<span class="line"><span style="color:#E1E4E8">    stackSizeMb: </span><span style="color:#79B8FF">4</span><span style="color:#E1E4E8">, </span><span style="color:#6A737D">// Maximum stack size in MB</span></span>
<span class="line"><span style="color:#E1E4E8">  },</span></span>
<span class="line"><span style="color:#E1E4E8">});</span></span></code></pre></div></div></div></div></div><div class="docs-prose"><p>These limits help prevent workers from consuming excessive memory:</p>
<ul>
<li>Set <code class="inline-code">maxOldGenerationSizeMb</code> based on expected memory usage</li>
<li>Use lower limits for multiple concurrent workers to share system memory</li>
<li>Monitor workers that hit limits - they may be OOM or have memory leaks</li>
<li>Limits only apply to <code class="inline-code">worker_threads</code> driver (not <code class="inline-code">child_process</code>)</li>
</ul>
<p>For <code class="inline-code">child_process</code>, use OS-level resource limits via <code class="inline-code">ulimit</code> or container constraints.</p>
<h2>See Also</h2>
<ul>
<li><a href="/isolated-workers/docs/guides/error-handling">Error Handling</a> - Handling errors across process boundaries</li>
<li><a href="/isolated-workers/docs/guides/worker-lifecycle">Worker Lifecycle</a> - Proper worker cleanup</li>
<li><a href="/isolated-workers/docs/guides/timeout-configuration">Timeout Configuration</a> - Preventing denial of service</li>
<li><a href="/isolated-workers/docs/guides/custom-serializers">Custom Serializers</a> - Encryption for sensitive data</li>
</ul></div></div><div class="mt-12 pt-8 border-t border-tertiary/50"><a href="/isolated-workers/" class="text-neon-cyan hover:text-neon-purple transition-colors">â† Back to Home</a></div></div></div></main></div></div><div class="fixed bottom-4 right-4 z-50"><div class="relative "><button class="p-2 rounded-lg bg-tertiary/50 border border-tertiary hover:border-neon-cyan/50 transition-colors" title="Toggle visual effects" aria-label="Toggle visual effects menu"><svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"></path></svg></button></div></div></div></div>
        
        <script id="vike_pageContext" type="application/json">{"pageId":"\\/pages\\/docs","routeParams":{"splat":"guides\\/security"},"data":{"doc":{"path":"\\/docs\\/guides\\/security","filePath":"\\/home\\/runner\\/work\\/isolated-workers\\/isolated-workers\\/docs\\/guides\\/security.md","title":"Security Considerations","description":"Security best practices for worker-based applications","nav":{"section":"Guides","order":9}},"segments":[{"type":"html","html":"\u003ch1>Security Considerations\u003c\\/h1>\n\u003cp>This guide covers security aspects of using isolated-workers. It is important to understand both what protection process isolation provides and what it does NOT provide.\u003c\\/p>\n\u003ch2>Process Isolation\u003c\\/h2>\n\u003ch3>What Process Separation Provides\u003c\\/h3>\n\u003cp>When you spawn a worker with isolated-workers, it runs in a separate Node.js process. This provides several security benefits:\u003c\\/p>\n\u003cp>\u003cstrong>Memory Isolation\u003c\\/strong>: The worker process has its own V8 heap, completely separate from the host. A worker cannot directly access variables, closures, or objects in the host process. This prevents accidental data leakage between components.\u003c\\/p>\n\u003cp>\u003cstrong>Crash Isolation\u003c\\/strong>: If a worker crashes (uncaught exception, segfault, out of memory), the host process continues running. You can detect the crash and spawn a new worker:\u003c\\/p>"},{"type":"code-block","language":"typescript","content":"try {\n  await worker.send('riskyOperation', data);\n} catch (error) {\n  if (!worker.isActive) {\n    console.log('Worker crashed, spawning replacement');\n    worker = await createWorker\u003cMessages>({ script: '.\\/worker.js' });\n  }\n}","highlightedHtml":"\u003cpre class=\"shiki github-dark\" style=\"background-color:#00000000;color:#e1e4e8\" tabindex=\"0\">\u003ccode>\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">try\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> {\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">  await\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> worker.\u003c\\/span>\u003cspan style=\"color:#B392F0\">send\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">(\u003c\\/span>\u003cspan style=\"color:#9ECBFF\">'riskyOperation'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">, data);\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">} \u003c\\/span>\u003cspan style=\"color:#F97583\">catch\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> (error) {\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">  if\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> (\u003c\\/span>\u003cspan style=\"color:#F97583\">!\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">worker.isActive) {\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">    console.\u003c\\/span>\u003cspan style=\"color:#B392F0\">log\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">(\u003c\\/span>\u003cspan style=\"color:#9ECBFF\">'Worker crashed, spawning replacement'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">);\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">    worker \u003c\\/span>\u003cspan style=\"color:#F97583\">=\u003c\\/span>\u003cspan style=\"color:#F97583\"> await\u003c\\/span>\u003cspan style=\"color:#B392F0\"> \u003ca href=\"\\/isolated-workers\\/api\\/create-worker\" class=\"code-link\" title=\"View createWorker documentation\">createWorker\u003c\\/a>\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">&#x3C;\u003c\\/span>\u003cspan style=\"color:#B392F0\">Messages\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">>({ script: \u003c\\/span>\u003cspan style=\"color:#9ECBFF\">'.\\/worker.js'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> });\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  }\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">}\u003c\\/span>\u003c\\/span>\u003c\\/code>\u003c\\/pre>"},{"type":"html","html":"\u003cp>\u003cstrong>Resource Limits\u003c\\/strong>: Operating system process limits apply independently. A worker consuming excessive memory will be killed by the OS without affecting the host.\u003c\\/p>\n\u003ch3>What Process Separation Does NOT Provide\u003c\\/h3>\n\u003cp>\u003cstrong>No Sandboxing\u003c\\/strong>: The worker process has full access to:\u003c\\/p>\n\u003cul>\n\u003cli>The filesystem (same permissions as the parent process)\u003c\\/li>\n\u003cli>Network (can make HTTP requests, open sockets)\u003c\\/li>\n\u003cli>Environment variables\u003c\\/li>\n\u003cli>Child process spawning (\u003ccode class=\"inline-code\">child_process.spawn\u003c\\/code>)\u003c\\/li>\n\u003cli>Native modules and Node.js APIs\u003c\\/li>\n\u003c\\/ul>\n\u003cp>\u003cstrong>No Capability Restrictions\u003c\\/strong>: Unlike browser workers or Deno, Node.js workers can do anything the user running the process can do. isolated-workers does not add a permission system.\u003c\\/p>\n\u003cp>\u003cstrong>Same User Context\u003c\\/strong>: Workers run as the same OS user as the host. They inherit file permissions, group memberships, and access rights.\u003c\\/p>\n\u003ch2>Socket Security\u003c\\/h2>\n\u003cp>isolated-workers uses Unix domain sockets on POSIX systems and named pipes on Windows for IPC.\u003c\\/p>\n\u003ch3>Unix Socket Permissions\u003c\\/h3>\n\u003cp>Unix sockets are created with the process's umask. By default, this typically means:\u003c\\/p>\n\u003cul>\n\u003cli>Owner has read\\/write access\u003c\\/li>\n\u003cli>Group and others may have read access depending on umask\u003c\\/li>\n\u003c\\/ul>\n\u003cp>For sensitive applications, consider:\u003c\\/p>"},{"type":"code-block","language":"typescript","content":"\\/\\/ Set restrictive umask before creating workers\nconst originalUmask = process.umask(0o077);\nconst worker = await createWorker\u003cMessages>({ script: '.\\/worker.js' });\nprocess.umask(originalUmask);","highlightedHtml":"\u003cpre class=\"shiki github-dark\" style=\"background-color:#00000000;color:#e1e4e8\" tabindex=\"0\">\u003ccode>\u003cspan class=\"line\">\u003cspan style=\"color:#6A737D\">\\/\\/ Set restrictive umask before creating workers\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">const\u003c\\/span>\u003cspan style=\"color:#79B8FF\"> originalUmask\u003c\\/span>\u003cspan style=\"color:#F97583\"> =\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> process.\u003c\\/span>\u003cspan style=\"color:#B392F0\">umask\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">(\u003c\\/span>\u003cspan style=\"color:#79B8FF\">0o077\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">);\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">const\u003c\\/span>\u003cspan style=\"color:#79B8FF\"> worker\u003c\\/span>\u003cspan style=\"color:#F97583\"> =\u003c\\/span>\u003cspan style=\"color:#F97583\"> await\u003c\\/span>\u003cspan style=\"color:#B392F0\"> \u003ca href=\"\\/isolated-workers\\/api\\/create-worker\" class=\"code-link\" title=\"View createWorker documentation\">createWorker\u003c\\/a>\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">&#x3C;\u003c\\/span>\u003cspan style=\"color:#B392F0\">Messages\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">>({ script: \u003c\\/span>\u003cspan style=\"color:#9ECBFF\">'.\\/worker.js'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> });\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">process.\u003c\\/span>\u003cspan style=\"color:#B392F0\">umask\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">(originalUmask);\u003c\\/span>\u003c\\/span>\u003c\\/code>\u003c\\/pre>"},{"type":"html","html":"\u003ch3>Socket Path Location\u003c\\/h3>\n\u003cp>Sockets are created in a temporary directory. The path includes random components to prevent prediction:\u003c\\/p>"},{"type":"code-block","language":"text","content":"\\/tmp\\/isolated-workers-\u003crandom>\\/worker-\u003cid>.sock","highlightedHtml":"\u003cpre class=\"shiki github-dark\" style=\"background-color:#00000000;color:#e1e4e8\" tabindex=\"0\">\u003ccode>\u003cspan class=\"line\">\u003cspan>\\/tmp\\/isolated-workers-&#x3C;random>\\/worker-&#x3C;id>.sock\u003c\\/span>\u003c\\/span>\u003c\\/code>\u003c\\/pre>"},{"type":"html","html":"\u003cp>Considerations:\u003c\\/p>\n\u003cul>\n\u003cli>\u003ccode class=\"inline-code\">\\/tmp\u003c\\/code> is often world-readable on shared systems\u003c\\/li>\n\u003cli>Symlink attacks are possible if the temp directory is predictable\u003c\\/li>\n\u003cli>On shared hosting, other users might enumerate socket files\u003c\\/li>\n\u003c\\/ul>\n\u003cp>For high-security environments, configure a private socket directory:\u003c\\/p>"},{"type":"code-block","language":"typescript","content":"const worker = await createWorker\u003cMessages>({\n  script: '.\\/worker.js',\n  socketPath: '\\/run\\/user\\/1000\\/myapp\\/worker.sock',\n});","highlightedHtml":"\u003cpre class=\"shiki github-dark\" style=\"background-color:#00000000;color:#e1e4e8\" tabindex=\"0\">\u003ccode>\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">const\u003c\\/span>\u003cspan style=\"color:#79B8FF\"> worker\u003c\\/span>\u003cspan style=\"color:#F97583\"> =\u003c\\/span>\u003cspan style=\"color:#F97583\"> await\u003c\\/span>\u003cspan style=\"color:#B392F0\"> \u003ca href=\"\\/isolated-workers\\/api\\/create-worker\" class=\"code-link\" title=\"View createWorker documentation\">createWorker\u003c\\/a>\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">&#x3C;\u003c\\/span>\u003cspan style=\"color:#B392F0\">Messages\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">>({\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  script: \u003c\\/span>\u003cspan style=\"color:#9ECBFF\">'.\\/worker.js'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">,\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  socketPath: \u003c\\/span>\u003cspan style=\"color:#9ECBFF\">'\\/run\\/user\\/1000\\/myapp\\/worker.sock'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">,\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">});\u003c\\/span>\u003c\\/span>\u003c\\/code>\u003c\\/pre>"},{"type":"html","html":"\u003ch3>Named Pipes on Windows\u003c\\/h3>\n\u003cp>Windows named pipes have their own ACL (Access Control List). By default, isolated-workers creates pipes accessible to the current user. Named pipes are created in the \u003ccode class=\"inline-code\">\\\\.\\pipe\\\u003c\\/code> namespace which is system-managed.\u003c\\/p>\n\u003ch2>Message Validation\u003c\\/h2>\n\u003ch3>Why Validate Even with TypeScript?\u003c\\/h3>\n\u003cp>TypeScript types are erased at runtime. A malicious or buggy worker can send any data:\u003c\\/p>"},{"type":"code-block","language":"typescript","content":"\\/\\/ Host expects this type\ntype Result = { success: boolean; count: number };\n\n\\/\\/ But worker could actually send\n{ success: \"maybe\", count: \"lots\", __proto__: maliciousObject }","highlightedHtml":"\u003cpre class=\"shiki github-dark\" style=\"background-color:#00000000;color:#e1e4e8\" tabindex=\"0\">\u003ccode>\u003cspan class=\"line\">\u003cspan style=\"color:#6A737D\">\\/\\/ Host expects this type\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">type\u003c\\/span>\u003cspan style=\"color:#B392F0\"> Result\u003c\\/span>\u003cspan style=\"color:#F97583\"> =\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> { \u003c\\/span>\u003cspan style=\"color:#FFAB70\">success\u003c\\/span>\u003cspan style=\"color:#F97583\">:\u003c\\/span>\u003cspan style=\"color:#79B8FF\"> boolean\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">; \u003c\\/span>\u003cspan style=\"color:#FFAB70\">count\u003c\\/span>\u003cspan style=\"color:#F97583\">:\u003c\\/span>\u003cspan style=\"color:#79B8FF\"> number\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> };\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#6A737D\">\\/\\/ But worker could actually send\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">{ \u003c\\/span>\u003cspan style=\"color:#B392F0\">success\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">: \u003c\\/span>\u003cspan style=\"color:#9ECBFF\">\"maybe\"\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">, \u003c\\/span>\u003cspan style=\"color:#B392F0\">count\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">: \u003c\\/span>\u003cspan style=\"color:#9ECBFF\">\"lots\"\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">, \u003c\\/span>\u003cspan style=\"color:#B392F0\">__proto__\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">: maliciousObject }\u003c\\/span>\u003c\\/span>\u003c\\/code>\u003c\\/pre>"},{"type":"html","html":"\u003cp>TypeScript won't catch this at runtime. Your application will proceed with incorrect data.\u003c\\/p>\n\u003ch3>Runtime Validation Recommendations\u003c\\/h3>\n\u003cp>Use a runtime validation library for messages containing user-provided or untrusted data:\u003c\\/p>"},{"type":"code-block","language":"typescript","content":"import { z } from 'zod';\n\nconst ResultSchema = z.object({\n  success: z.boolean(),\n  count: z.number().int().nonnegative(),\n});\n\n\\/\\/ In message handler\nhandlers: {\n  processData: async (payload) => {\n    const result = await doProcessing(payload);\n    return ResultSchema.parse(result); \\/\\/ Validates before sending\n  };\n}\n\n\\/\\/ In host, after receiving\nconst response = await worker.send('processData', data);\nconst validated = ResultSchema.parse(response); \\/\\/ Validates after receiving","highlightedHtml":"\u003cpre class=\"shiki github-dark\" style=\"background-color:#00000000;color:#e1e4e8\" tabindex=\"0\">\u003ccode>\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">import\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> { z } \u003c\\/span>\u003cspan style=\"color:#F97583\">from\u003c\\/span>\u003cspan style=\"color:#9ECBFF\"> 'zod'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">;\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">const\u003c\\/span>\u003cspan style=\"color:#79B8FF\"> ResultSchema\u003c\\/span>\u003cspan style=\"color:#F97583\"> =\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> z.\u003c\\/span>\u003cspan style=\"color:#B392F0\">object\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">({\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  success: z.\u003c\\/span>\u003cspan style=\"color:#B392F0\">boolean\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">(),\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  count: z.\u003c\\/span>\u003cspan style=\"color:#B392F0\">number\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">().\u003c\\/span>\u003cspan style=\"color:#B392F0\">int\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">().\u003c\\/span>\u003cspan style=\"color:#B392F0\">nonnegative\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">(),\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">});\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#6A737D\">\\/\\/ In message handler\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#B392F0\">handlers\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">: {\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#B392F0\">  processData\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">: \u003c\\/span>\u003cspan style=\"color:#F97583\">async\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> (\u003c\\/span>\u003cspan style=\"color:#FFAB70\">payload\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">) \u003c\\/span>\u003cspan style=\"color:#F97583\">=>\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> {\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">    const\u003c\\/span>\u003cspan style=\"color:#79B8FF\"> result\u003c\\/span>\u003cspan style=\"color:#F97583\"> =\u003c\\/span>\u003cspan style=\"color:#F97583\"> await\u003c\\/span>\u003cspan style=\"color:#B392F0\"> doProcessing\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">(payload);\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">    return\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> ResultSchema.\u003c\\/span>\u003cspan style=\"color:#B392F0\">parse\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">(result); \u003c\\/span>\u003cspan style=\"color:#6A737D\">\\/\\/ Validates before sending\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  };\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">}\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#6A737D\">\\/\\/ In host, after receiving\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">const\u003c\\/span>\u003cspan style=\"color:#79B8FF\"> response\u003c\\/span>\u003cspan style=\"color:#F97583\"> =\u003c\\/span>\u003cspan style=\"color:#F97583\"> await\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> worker.\u003c\\/span>\u003cspan style=\"color:#B392F0\">send\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">(\u003c\\/span>\u003cspan style=\"color:#9ECBFF\">'processData'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">, data);\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">const\u003c\\/span>\u003cspan style=\"color:#79B8FF\"> validated\u003c\\/span>\u003cspan style=\"color:#F97583\"> =\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> ResultSchema.\u003c\\/span>\u003cspan style=\"color:#B392F0\">parse\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">(response); \u003c\\/span>\u003cspan style=\"color:#6A737D\">\\/\\/ Validates after receiving\u003c\\/span>\u003c\\/span>\u003c\\/code>\u003c\\/pre>"},{"type":"html","html":"\u003ch3>Protecting Against Malformed Messages\u003c\\/h3>\n\u003cp>Workers receive serialized JSON over the socket. Consider these attack vectors:\u003c\\/p>\n\u003cp>\u003cstrong>Prototype Pollution\u003c\\/strong>: Use \u003ccode class=\"inline-code\">JSON.parse\u003c\\/code> with a reviver or a safe parsing library:\u003c\\/p>"},{"type":"code-block","language":"typescript","content":"\\/\\/ If using custom serialization\nfunction safeParse(json: string) {\n  return JSON.parse(json, (key, value) => {\n    if (key === '__proto__' || key === 'constructor') {\n      return undefined;\n    }\n    return value;\n  });\n}","highlightedHtml":"\u003cpre class=\"shiki github-dark\" style=\"background-color:#00000000;color:#e1e4e8\" tabindex=\"0\">\u003ccode>\u003cspan class=\"line\">\u003cspan style=\"color:#6A737D\">\\/\\/ If using custom serialization\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">function\u003c\\/span>\u003cspan style=\"color:#B392F0\"> safeParse\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">(\u003c\\/span>\u003cspan style=\"color:#FFAB70\">json\u003c\\/span>\u003cspan style=\"color:#F97583\">:\u003c\\/span>\u003cspan style=\"color:#79B8FF\"> string\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">) {\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">  return\u003c\\/span>\u003cspan style=\"color:#79B8FF\"> JSON\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">.\u003c\\/span>\u003cspan style=\"color:#B392F0\">parse\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">(json, (\u003c\\/span>\u003cspan style=\"color:#FFAB70\">key\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">, \u003c\\/span>\u003cspan style=\"color:#FFAB70\">value\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">) \u003c\\/span>\u003cspan style=\"color:#F97583\">=>\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> {\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">    if\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> (key \u003c\\/span>\u003cspan style=\"color:#F97583\">===\u003c\\/span>\u003cspan style=\"color:#9ECBFF\"> '__proto__'\u003c\\/span>\u003cspan style=\"color:#F97583\"> ||\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> key \u003c\\/span>\u003cspan style=\"color:#F97583\">===\u003c\\/span>\u003cspan style=\"color:#9ECBFF\"> 'constructor'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">) {\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">      return\u003c\\/span>\u003cspan style=\"color:#79B8FF\"> undefined\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">;\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">    }\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">    return\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> value;\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  });\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">}\u003c\\/span>\u003c\\/span>\u003c\\/code>\u003c\\/pre>"},{"type":"html","html":"\u003cp>\u003cstrong>Large Payloads\u003c\\/strong>: A malicious sender could exhaust memory with huge messages. Consider size limits in your serializer or at the application level.\u003c\\/p>\n\u003cp>\u003cstrong>Deeply Nested Objects\u003c\\/strong>: Can cause stack overflow during parsing. Limit nesting depth if accepting untrusted input.\u003c\\/p>\n\u003ch2>Sandboxing Considerations\u003c\\/h2>\n\u003ch3>When You Need Additional Sandboxing\u003c\\/h3>\n\u003cp>isolated-workers provides process isolation, not security sandboxing. You need additional measures when:\u003c\\/p>\n\u003cul>\n\u003cli>Running untrusted code (user-submitted scripts, plugins)\u003c\\/li>\n\u003cli>Processing untrusted input that could exploit Node.js vulnerabilities\u003c\\/li>\n\u003cli>Handling sensitive data that must not reach the filesystem or network\u003c\\/li>\n\u003cli>Operating in multi-tenant environments\u003c\\/li>\n\u003c\\/ul>\n\u003ch3>Options for Additional Sandboxing\u003c\\/h3>\n\u003cp>\u003cstrong>vm2 or isolated-vm\u003c\\/strong>: For running untrusted JavaScript in a restricted context:\u003c\\/p>"},{"type":"code-block","language":"typescript","content":"\\/\\/ Worker code\nimport ivm from 'isolated-vm';\n\nhandlers: {\n  runUntrusted: (code: string) => {\n    const isolate = new ivm.Isolate({ memoryLimit: 128 });\n    const context = await isolate.createContext();\n    \\/\\/ Execute code in sandbox\n  };\n}","highlightedHtml":"\u003cpre class=\"shiki github-dark\" style=\"background-color:#00000000;color:#e1e4e8\" tabindex=\"0\">\u003ccode>\u003cspan class=\"line\">\u003cspan style=\"color:#6A737D\">\\/\\/ Worker code\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">import\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> ivm \u003c\\/span>\u003cspan style=\"color:#F97583\">from\u003c\\/span>\u003cspan style=\"color:#9ECBFF\"> 'isolated-vm'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">;\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#B392F0\">handlers\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">: {\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#B392F0\">  runUntrusted\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">: (\u003c\\/span>\u003cspan style=\"color:#FFAB70\">code\u003c\\/span>\u003cspan style=\"color:#F97583\">:\u003c\\/span>\u003cspan style=\"color:#79B8FF\"> string\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">) \u003c\\/span>\u003cspan style=\"color:#F97583\">=>\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> {\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">    const\u003c\\/span>\u003cspan style=\"color:#79B8FF\"> isolate\u003c\\/span>\u003cspan style=\"color:#F97583\"> =\u003c\\/span>\u003cspan style=\"color:#F97583\"> new\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> ivm.\u003c\\/span>\u003cspan style=\"color:#B392F0\">Isolate\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">({ memoryLimit: \u003c\\/span>\u003cspan style=\"color:#79B8FF\">128\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> });\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">    const\u003c\\/span>\u003cspan style=\"color:#79B8FF\"> context\u003c\\/span>\u003cspan style=\"color:#F97583\"> =\u003c\\/span>\u003cspan style=\"color:#F97583\"> await\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> isolate.\u003c\\/span>\u003cspan style=\"color:#B392F0\">createContext\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">();\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#6A737D\">    \\/\\/ Execute code in sandbox\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  };\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">}\u003c\\/span>\u003c\\/span>\u003c\\/code>\u003c\\/pre>"},{"type":"html","html":"\u003cp>\u003cstrong>Docker\\/Containers\u003c\\/strong>: Run workers in containers with restricted capabilities:\u003c\\/p>"},{"type":"code-block","language":"typescript","content":"\\/\\/ Use child_process to spawn containerized workers\nconst worker = spawn('docker', [\n  'run',\n  '--rm',\n  '--network=none',\n  '--read-only',\n  'worker-image',\n  'node',\n  '\\/app\\/worker.js',\n]);","highlightedHtml":"\u003cpre class=\"shiki github-dark\" style=\"background-color:#00000000;color:#e1e4e8\" tabindex=\"0\">\u003ccode>\u003cspan class=\"line\">\u003cspan style=\"color:#6A737D\">\\/\\/ Use child_process to spawn containerized workers\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">const\u003c\\/span>\u003cspan style=\"color:#79B8FF\"> worker\u003c\\/span>\u003cspan style=\"color:#F97583\"> =\u003c\\/span>\u003cspan style=\"color:#B392F0\"> spawn\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">(\u003c\\/span>\u003cspan style=\"color:#9ECBFF\">'docker'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">, [\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#9ECBFF\">  'run'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">,\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#9ECBFF\">  '--rm'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">,\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#9ECBFF\">  '--network=none'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">,\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#9ECBFF\">  '--read-only'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">,\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#9ECBFF\">  'worker-image'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">,\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#9ECBFF\">  'node'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">,\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#9ECBFF\">  '\\/app\\/worker.js'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">,\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">]);\u003c\\/span>\u003c\\/span>\u003c\\/code>\u003c\\/pre>"},{"type":"html","html":"\u003cp>\u003cstrong>Operating System Sandboxing\u003c\\/strong>:\u003c\\/p>\n\u003cul>\n\u003cli>Linux: seccomp, AppArmor, SELinux\u003c\\/li>\n\u003cli>macOS: sandbox-exec\u003c\\/li>\n\u003cli>Windows: AppContainer\u003c\\/li>\n\u003c\\/ul>\n\u003ch3>What isolated-workers Intentionally Does Not Do\u003c\\/h3>\n\u003cp>We do not implement sandboxing because:\u003c\\/p>\n\u003col>\n\u003cli>\u003cstrong>Complexity\u003c\\/strong>: Proper sandboxing is extremely difficult to get right\u003c\\/li>\n\u003cli>\u003cstrong>Platform differences\u003c\\/strong>: Each OS has different sandboxing mechanisms\u003c\\/li>\n\u003cli>\u003cstrong>Performance\u003c\\/strong>: Sandboxing adds overhead\u003c\\/li>\n\u003cli>\u003cstrong>Use case mismatch\u003c\\/strong>: Most worker use cases involve trusted code\u003c\\/li>\n\u003c\\/ol>\n\u003cp>If you need sandboxing, use purpose-built tools rather than expecting it from a process communication library.\u003c\\/p>\n\u003ch2>Environment Variables\u003c\\/h2>\n\u003ch3>Passing Sensitive Data to Workers\u003c\\/h3>\n\u003cp>Workers inherit the parent's environment by default. This includes sensitive variables like API keys:\u003c\\/p>"},{"type":"code-block","language":"typescript","content":"\\/\\/ Worker automatically has access to process.env.API_KEY","highlightedHtml":"\u003cpre class=\"shiki github-dark\" style=\"background-color:#00000000;color:#e1e4e8\" tabindex=\"0\">\u003ccode>\u003cspan class=\"line\">\u003cspan style=\"color:#6A737D\">\\/\\/ Worker automatically has access to process.env.API_KEY\u003c\\/span>\u003c\\/span>\u003c\\/code>\u003c\\/pre>"},{"type":"html","html":"\u003cp>To limit exposure, explicitly pass only needed variables:\u003c\\/p>"},{"type":"code-block","language":"typescript","content":"const worker = await createWorker\u003cMessages>({\n  script: '.\\/worker.js',\n  env: {\n    NODE_ENV: process.env.NODE_ENV,\n    DATABASE_URL: process.env.DATABASE_URL,\n    \\/\\/ Explicitly omit AWS_SECRET_ACCESS_KEY, etc.\n  },\n});","highlightedHtml":"\u003cpre class=\"shiki github-dark\" style=\"background-color:#00000000;color:#e1e4e8\" tabindex=\"0\">\u003ccode>\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">const\u003c\\/span>\u003cspan style=\"color:#79B8FF\"> worker\u003c\\/span>\u003cspan style=\"color:#F97583\"> =\u003c\\/span>\u003cspan style=\"color:#F97583\"> await\u003c\\/span>\u003cspan style=\"color:#B392F0\"> \u003ca href=\"\\/isolated-workers\\/api\\/create-worker\" class=\"code-link\" title=\"View createWorker documentation\">createWorker\u003c\\/a>\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">&#x3C;\u003c\\/span>\u003cspan style=\"color:#B392F0\">Messages\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">>({\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  script: \u003c\\/span>\u003cspan style=\"color:#9ECBFF\">'.\\/worker.js'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">,\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  env: {\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">    NODE_ENV: process.env.\u003c\\/span>\u003cspan style=\"color:#79B8FF\">NODE_ENV\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">,\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">    DATABASE_URL: process.env.\u003c\\/span>\u003cspan style=\"color:#79B8FF\">DATABASE_URL\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">,\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#6A737D\">    \\/\\/ Explicitly omit AWS_SECRET_ACCESS_KEY, etc.\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  },\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">});\u003c\\/span>\u003c\\/span>\u003c\\/code>\u003c\\/pre>"},{"type":"html","html":"\u003ch3>Avoiding Secrets in Message Payloads\u003c\\/h3>\n\u003cp>Message payloads may be logged, serialized, or cached. Avoid including secrets:\u003c\\/p>"},{"type":"code-block","language":"typescript","content":"\\/\\/ Bad - secret in message\nawait worker.send('callApi', {\n  endpoint: '\\/users',\n  apiKey: 'sk_live_xxxxx', \\/\\/ Could be logged\n});\n\n\\/\\/ Good - worker reads secret from environment\nawait worker.send('callApi', {\n  endpoint: '\\/users',\n  \\/\\/ Worker uses process.env.API_KEY internally\n});","highlightedHtml":"\u003cpre class=\"shiki github-dark\" style=\"background-color:#00000000;color:#e1e4e8\" tabindex=\"0\">\u003ccode>\u003cspan class=\"line\">\u003cspan style=\"color:#6A737D\">\\/\\/ Bad - secret in message\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">await\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> worker.\u003c\\/span>\u003cspan style=\"color:#B392F0\">send\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">(\u003c\\/span>\u003cspan style=\"color:#9ECBFF\">'callApi'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">, {\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  endpoint: \u003c\\/span>\u003cspan style=\"color:#9ECBFF\">'\\/users'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">,\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  apiKey: \u003c\\/span>\u003cspan style=\"color:#9ECBFF\">'sk_live_xxxxx'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">, \u003c\\/span>\u003cspan style=\"color:#6A737D\">\\/\\/ Could be logged\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">});\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#6A737D\">\\/\\/ Good - worker reads secret from environment\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">await\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> worker.\u003c\\/span>\u003cspan style=\"color:#B392F0\">send\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">(\u003c\\/span>\u003cspan style=\"color:#9ECBFF\">'callApi'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">, {\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  endpoint: \u003c\\/span>\u003cspan style=\"color:#9ECBFF\">'\\/users'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">,\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#6A737D\">  \\/\\/ Worker uses process.env.API_KEY internally\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">});\u003c\\/span>\u003c\\/span>\u003c\\/code>\u003c\\/pre>"},{"type":"html","html":"\u003cp>If you must pass sensitive data in messages, consider:\u003c\\/p>\n\u003col>\n\u003cli>Using encrypted payloads (see \u003ca href=\"\\/isolated-workers\\/docs\\/guides\\/custom-serializers\">Custom Serializers\u003c\\/a>)\u003c\\/li>\n\u003cli>Implementing message redaction in logging middleware\u003c\\/li>\n\u003cli>Using short-lived tokens instead of long-lived secrets\u003c\\/li>\n\u003c\\/ol>\n\u003ch2>Best Practices\u003c\\/h2>\n\u003ch3>1. Validate All Inputs\u003c\\/h3>\n\u003cp>Never trust data crossing the process boundary:\u003c\\/p>"},{"type":"code-block","language":"typescript","content":"handlers: {\n  processFile: async ({ path }) => {\n    \\/\\/ Validate path doesn't escape expected directory\n    const resolved = resolve(path);\n    if (!resolved.startsWith('\\/app\\/uploads\\/')) {\n      throw new Error('Invalid file path');\n    }\n    return processFile(resolved);\n  };\n}","highlightedHtml":"\u003cpre class=\"shiki github-dark\" style=\"background-color:#00000000;color:#e1e4e8\" tabindex=\"0\">\u003ccode>\u003cspan class=\"line\">\u003cspan style=\"color:#B392F0\">handlers\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">: {\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#B392F0\">  processFile\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">: \u003c\\/span>\u003cspan style=\"color:#F97583\">async\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> ({ \u003c\\/span>\u003cspan style=\"color:#FFAB70\">path\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> }) \u003c\\/span>\u003cspan style=\"color:#F97583\">=>\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> {\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#6A737D\">    \\/\\/ Validate path doesn't escape expected directory\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">    const\u003c\\/span>\u003cspan style=\"color:#79B8FF\"> resolved\u003c\\/span>\u003cspan style=\"color:#F97583\"> =\u003c\\/span>\u003cspan style=\"color:#B392F0\"> resolve\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">(path);\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">    if\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> (\u003c\\/span>\u003cspan style=\"color:#F97583\">!\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">resolved.\u003c\\/span>\u003cspan style=\"color:#B392F0\">startsWith\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">(\u003c\\/span>\u003cspan style=\"color:#9ECBFF\">'\\/app\\/uploads\\/'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">)) {\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">      throw\u003c\\/span>\u003cspan style=\"color:#F97583\"> new\u003c\\/span>\u003cspan style=\"color:#B392F0\"> Error\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">(\u003c\\/span>\u003cspan style=\"color:#9ECBFF\">'Invalid file path'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">);\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">    }\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">    return\u003c\\/span>\u003cspan style=\"color:#B392F0\"> processFile\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">(resolved);\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  };\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">}\u003c\\/span>\u003c\\/span>\u003c\\/code>\u003c\\/pre>"},{"type":"html","html":"\u003ch3>2. Use Timeouts to Prevent DoS\u003c\\/h3>\n\u003cp>Always configure timeouts to prevent workers from hanging indefinitely:\u003c\\/p>"},{"type":"code-block","language":"typescript","content":"const worker = await createWorker\u003cMessages>({\n  script: '.\\/worker.js',\n  timeout: {\n    WORKER_STARTUP: 5000,\n    WORKER_MESSAGE: 30000,\n    expensiveOperation: 120000,\n  },\n});","highlightedHtml":"\u003cpre class=\"shiki github-dark\" style=\"background-color:#00000000;color:#e1e4e8\" tabindex=\"0\">\u003ccode>\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">const\u003c\\/span>\u003cspan style=\"color:#79B8FF\"> worker\u003c\\/span>\u003cspan style=\"color:#F97583\"> =\u003c\\/span>\u003cspan style=\"color:#F97583\"> await\u003c\\/span>\u003cspan style=\"color:#B392F0\"> \u003ca href=\"\\/isolated-workers\\/api\\/create-worker\" class=\"code-link\" title=\"View createWorker documentation\">createWorker\u003c\\/a>\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">&#x3C;\u003c\\/span>\u003cspan style=\"color:#B392F0\">Messages\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">>({\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  script: \u003c\\/span>\u003cspan style=\"color:#9ECBFF\">'.\\/worker.js'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">,\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  timeout: {\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">    WORKER_STARTUP: \u003c\\/span>\u003cspan style=\"color:#79B8FF\">5000\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">,\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">    WORKER_MESSAGE: \u003c\\/span>\u003cspan style=\"color:#79B8FF\">30000\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">,\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">    expensiveOperation: \u003c\\/span>\u003cspan style=\"color:#79B8FF\">120000\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">,\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  },\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">});\u003c\\/span>\u003c\\/span>\u003c\\/code>\u003c\\/pre>"},{"type":"html","html":"\u003cp>See \u003ca href=\"\\/isolated-workers\\/docs\\/guides\\/timeout-configuration\">Timeout Configuration\u003c\\/a> for details.\u003c\\/p>\n\u003ch3>3. Clean Up Workers Properly\u003c\\/h3>\n\u003cp>Leaked workers consume resources and leave socket files:\u003c\\/p>"},{"type":"code-block","language":"typescript","content":"const worker = await createWorker\u003cMessages>({ script: '.\\/worker.js' });\n\ntry {\n  await doWork(worker);\n} finally {\n  await worker.close(); \\/\\/ Always clean up\n}","highlightedHtml":"\u003cpre class=\"shiki github-dark\" style=\"background-color:#00000000;color:#e1e4e8\" tabindex=\"0\">\u003ccode>\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">const\u003c\\/span>\u003cspan style=\"color:#79B8FF\"> worker\u003c\\/span>\u003cspan style=\"color:#F97583\"> =\u003c\\/span>\u003cspan style=\"color:#F97583\"> await\u003c\\/span>\u003cspan style=\"color:#B392F0\"> \u003ca href=\"\\/isolated-workers\\/api\\/create-worker\" class=\"code-link\" title=\"View createWorker documentation\">createWorker\u003c\\/a>\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">&#x3C;\u003c\\/span>\u003cspan style=\"color:#B392F0\">Messages\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">>({ script: \u003c\\/span>\u003cspan style=\"color:#9ECBFF\">'.\\/worker.js'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> });\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">try\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> {\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">  await\u003c\\/span>\u003cspan style=\"color:#B392F0\"> doWork\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">(worker);\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">} \u003c\\/span>\u003cspan style=\"color:#F97583\">finally\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> {\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">  await\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> worker.\u003c\\/span>\u003cspan style=\"color:#B392F0\">close\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">(); \u003c\\/span>\u003cspan style=\"color:#6A737D\">\\/\\/ Always clean up\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">}\u003c\\/span>\u003c\\/span>\u003c\\/code>\u003c\\/pre>"},{"type":"html","html":"\u003cp>For long-lived applications, track all workers and clean up on shutdown:\u003c\\/p>"},{"type":"code-block","language":"typescript","content":"const workers: WorkerClient\u003cMessages>[] = [];\n\nprocess.on('SIGTERM', async () => {\n  await Promise.all(workers.map((w) => w.close()));\n  process.exit(0);\n});","highlightedHtml":"\u003cpre class=\"shiki github-dark\" style=\"background-color:#00000000;color:#e1e4e8\" tabindex=\"0\">\u003ccode>\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">const\u003c\\/span>\u003cspan style=\"color:#79B8FF\"> workers\u003c\\/span>\u003cspan style=\"color:#F97583\">:\u003c\\/span>\u003cspan style=\"color:#B392F0\"> \u003ca href=\"\\/isolated-workers\\/api\\/worker-client\" class=\"code-link\" title=\"View WorkerClient documentation\">WorkerClient\u003c\\/a>\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">&#x3C;\u003c\\/span>\u003cspan style=\"color:#B392F0\">Messages\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">>[] \u003c\\/span>\u003cspan style=\"color:#F97583\">=\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> [];\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">process.\u003c\\/span>\u003cspan style=\"color:#B392F0\">on\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">(\u003c\\/span>\u003cspan style=\"color:#9ECBFF\">'SIGTERM'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">, \u003c\\/span>\u003cspan style=\"color:#F97583\">async\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> () \u003c\\/span>\u003cspan style=\"color:#F97583\">=>\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> {\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">  await\u003c\\/span>\u003cspan style=\"color:#79B8FF\"> Promise\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">.\u003c\\/span>\u003cspan style=\"color:#B392F0\">all\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">(workers.\u003c\\/span>\u003cspan style=\"color:#B392F0\">map\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">((\u003c\\/span>\u003cspan style=\"color:#FFAB70\">w\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">) \u003c\\/span>\u003cspan style=\"color:#F97583\">=>\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> w.\u003c\\/span>\u003cspan style=\"color:#B392F0\">close\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">()));\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  process.\u003c\\/span>\u003cspan style=\"color:#B392F0\">exit\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">(\u003c\\/span>\u003cspan style=\"color:#79B8FF\">0\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">);\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">});\u003c\\/span>\u003c\\/span>\u003c\\/code>\u003c\\/pre>"},{"type":"html","html":"\u003ch3>4. Limit Worker Permissions When Possible\u003c\\/h3>\n\u003cp>Run workers with reduced privileges:\u003c\\/p>"},{"type":"code-block","language":"typescript","content":"\\/\\/ Drop privileges in worker after startup\n\\/\\/ (Linux only, requires starting as root)\nif (process.getuid() === 0) {\n  process.setgid(1000);\n  process.setuid(1000);\n}","highlightedHtml":"\u003cpre class=\"shiki github-dark\" style=\"background-color:#00000000;color:#e1e4e8\" tabindex=\"0\">\u003ccode>\u003cspan class=\"line\">\u003cspan style=\"color:#6A737D\">\\/\\/ Drop privileges in worker after startup\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#6A737D\">\\/\\/ (Linux only, requires starting as root)\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">if\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> (process.\u003c\\/span>\u003cspan style=\"color:#B392F0\">getuid\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">() \u003c\\/span>\u003cspan style=\"color:#F97583\">===\u003c\\/span>\u003cspan style=\"color:#79B8FF\"> 0\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">) {\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  process.\u003c\\/span>\u003cspan style=\"color:#B392F0\">setgid\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">(\u003c\\/span>\u003cspan style=\"color:#79B8FF\">1000\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">);\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  process.\u003c\\/span>\u003cspan style=\"color:#B392F0\">setuid\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">(\u003c\\/span>\u003cspan style=\"color:#79B8FF\">1000\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">);\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">}\u003c\\/span>\u003c\\/span>\u003c\\/code>\u003c\\/pre>"},{"type":"html","html":"\u003ch3>5. Avoid Dynamic Script Paths\u003c\\/h3>\n\u003cp>Never construct worker script paths from user input:\u003c\\/p>"},{"type":"code-block","language":"typescript","content":"\\/\\/ DANGEROUS - path injection\nconst worker = await createWorker({\n  script: `.\\/workers\\/${userInput}.js`,\n});\n\n\\/\\/ SAFE - whitelist allowed workers\nconst allowedWorkers = {\n  image: '.\\/workers\\/image-processor.js',\n  pdf: '.\\/workers\\/pdf-generator.js',\n};\n\nconst script = allowedWorkers[userInput];\nif (!script) {\n  throw new Error('Unknown worker type');\n}\nconst worker = await createWorker({ script });","highlightedHtml":"\u003cpre class=\"shiki github-dark\" style=\"background-color:#00000000;color:#e1e4e8\" tabindex=\"0\">\u003ccode>\u003cspan class=\"line\">\u003cspan style=\"color:#6A737D\">\\/\\/ DANGEROUS - path injection\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">const\u003c\\/span>\u003cspan style=\"color:#79B8FF\"> worker\u003c\\/span>\u003cspan style=\"color:#F97583\"> =\u003c\\/span>\u003cspan style=\"color:#F97583\"> await\u003c\\/span>\u003cspan style=\"color:#B392F0\"> \u003ca href=\"\\/isolated-workers\\/api\\/create-worker\" class=\"code-link\" title=\"View createWorker documentation\">createWorker\u003c\\/a>\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">({\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  script: \u003c\\/span>\u003cspan style=\"color:#9ECBFF\">`.\\/workers\\/${\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">userInput\u003c\\/span>\u003cspan style=\"color:#9ECBFF\">}.js`\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">,\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">});\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#6A737D\">\\/\\/ SAFE - whitelist allowed workers\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">const\u003c\\/span>\u003cspan style=\"color:#79B8FF\"> allowedWorkers\u003c\\/span>\u003cspan style=\"color:#F97583\"> =\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> {\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  image: \u003c\\/span>\u003cspan style=\"color:#9ECBFF\">'.\\/workers\\/image-processor.js'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">,\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  pdf: \u003c\\/span>\u003cspan style=\"color:#9ECBFF\">'.\\/workers\\/pdf-generator.js'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">,\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">};\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">const\u003c\\/span>\u003cspan style=\"color:#79B8FF\"> script\u003c\\/span>\u003cspan style=\"color:#F97583\"> =\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> allowedWorkers[userInput];\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">if\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> (\u003c\\/span>\u003cspan style=\"color:#F97583\">!\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">script) {\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">  throw\u003c\\/span>\u003cspan style=\"color:#F97583\"> new\u003c\\/span>\u003cspan style=\"color:#B392F0\"> Error\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">(\u003c\\/span>\u003cspan style=\"color:#9ECBFF\">'Unknown worker type'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">);\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">}\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">const\u003c\\/span>\u003cspan style=\"color:#79B8FF\"> worker\u003c\\/span>\u003cspan style=\"color:#F97583\"> =\u003c\\/span>\u003cspan style=\"color:#F97583\"> await\u003c\\/span>\u003cspan style=\"color:#B392F0\"> \u003ca href=\"\\/isolated-workers\\/api\\/create-worker\" class=\"code-link\" title=\"View createWorker documentation\">createWorker\u003c\\/a>\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">({ script });\u003c\\/span>\u003c\\/span>\u003c\\/code>\u003c\\/pre>"},{"type":"html","html":"\u003ch3>6. Monitor Worker Resource Usage\u003c\\/h3>\n\u003cp>In production, monitor workers for anomalies:\u003c\\/p>"},{"type":"code-block","language":"typescript","content":"\\/\\/ Periodically check worker health\nsetInterval(async () => {\n  if (!worker.isActive) {\n    metrics.increment('worker.crash');\n    worker = await createWorker\u003cMessages>({ script: '.\\/worker.js' });\n  }\n}, 5000);","highlightedHtml":"\u003cpre class=\"shiki github-dark\" style=\"background-color:#00000000;color:#e1e4e8\" tabindex=\"0\">\u003ccode>\u003cspan class=\"line\">\u003cspan style=\"color:#6A737D\">\\/\\/ Periodically check worker health\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#B392F0\">setInterval\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">(\u003c\\/span>\u003cspan style=\"color:#F97583\">async\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> () \u003c\\/span>\u003cspan style=\"color:#F97583\">=>\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> {\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">  if\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> (\u003c\\/span>\u003cspan style=\"color:#F97583\">!\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">worker.isActive) {\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">    metrics.\u003c\\/span>\u003cspan style=\"color:#B392F0\">increment\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">(\u003c\\/span>\u003cspan style=\"color:#9ECBFF\">'worker.crash'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">);\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">    worker \u003c\\/span>\u003cspan style=\"color:#F97583\">=\u003c\\/span>\u003cspan style=\"color:#F97583\"> await\u003c\\/span>\u003cspan style=\"color:#B392F0\"> \u003ca href=\"\\/isolated-workers\\/api\\/create-worker\" class=\"code-link\" title=\"View createWorker documentation\">createWorker\u003c\\/a>\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">&#x3C;\u003c\\/span>\u003cspan style=\"color:#B392F0\">Messages\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">>({ script: \u003c\\/span>\u003cspan style=\"color:#9ECBFF\">'.\\/worker.js'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> });\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  }\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">}, \u003c\\/span>\u003cspan style=\"color:#79B8FF\">5000\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">);\u003c\\/span>\u003c\\/span>\u003c\\/code>\u003c\\/pre>"},{"type":"html","html":"\u003ch2>Summary\u003c\\/h2>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003ctable>\u003cthead>\u003ctr>\u003cth>Aspect\u003c\\/th>\u003cth>What isolated-workers Provides\u003c\\/th>\u003cth>What You Must Handle\u003c\\/th>\u003c\\/tr>\u003c\\/thead>\u003ctbody>\u003ctr>\u003ctd>Memory\u003c\\/td>\u003ctd>Complete isolation between processes\u003c\\/td>\u003ctd>N\\/A\u003c\\/td>\u003c\\/tr>\u003ctr>\u003ctd>Crashes\u003c\\/td>\u003ctd>Host survives worker crashes\u003c\\/td>\u003ctd>Restart logic\u003c\\/td>\u003c\\/tr>\u003ctr>\u003ctd>Filesystem\u003c\\/td>\u003ctd>N\\/A\u003c\\/td>\u003ctd>Access control, path validation\u003c\\/td>\u003c\\/tr>\u003ctr>\u003ctd>Network\u003c\\/td>\u003ctd>N\\/A\u003c\\/td>\u003ctd>Firewall rules, if needed\u003c\\/td>\u003c\\/tr>\u003ctr>\u003ctd>Code execution\u003c\\/td>\u003ctd>Process-level separation\u003c\\/td>\u003ctd>Sandboxing for untrusted code\u003c\\/td>\u003c\\/tr>\u003ctr>\u003ctd>Message integrity\u003c\\/td>\u003ctd>Type definitions\u003c\\/td>\u003ctd>Runtime validation\u003c\\/td>\u003c\\/tr>\u003ctr>\u003ctd>Secrets\u003c\\/td>\u003ctd>Environment isolation option\u003c\\/td>\u003ctd>Avoiding secrets in payloads\u003c\\/td>\u003c\\/tr>\u003c\\/tbody>\u003c\\/table>\n\u003cp>isolated-workers makes it easy to run code in separate processes with type-safe communication. It does not attempt to be a security sandbox. For threat models involving untrusted code or hostile input, combine isolated-workers with appropriate security tools for your platform.\u003c\\/p>\n\u003ch2>Driver Security Considerations\u003c\\/h2>\n\u003ch3>child_process vs worker_threads\u003c\\/h3>\n\u003cp>isolated-workers defaults to using \u003ccode class=\"inline-code\">child_process\u003c\\/code> for spawning workers, but you can configure it to use \u003ccode class=\"inline-code\">worker_threads\u003c\\/code>. Each driver has different security implications:\u003c\\/p>\n\u003cp>\u003cstrong>child_process (default)\u003c\\/strong>:\u003c\\/p>\n\u003cul>\n\u003cli>Spawns a completely separate Node.js process with its own V8 instance\u003c\\/li>\n\u003cli>Full OS-level process isolation and memory separation\u003c\\/li>\n\u003cli>Can be sandboxed using OS-level mechanisms (seccomp, AppArmor, containers)\u003c\\/li>\n\u003cli>Higher memory overhead per worker\u003c\\/li>\n\u003cli>More isolation but slower message passing\u003c\\/li>\n\u003c\\/ul>\n\u003cp>\u003cstrong>worker_threads\u003c\\/strong>:\u003c\\/p>\n\u003cul>\n\u003cli>Runs workers as threads within the same Node.js process\u003c\\/li>\n\u003cli>Shared memory access between threads (can be both a feature and a risk)\u003c\\/li>\n\u003cli>No OS-level process boundary\u003c\\/li>\n\u003cli>Lower memory overhead and faster message passing\u003c\\/li>\n\u003cli>Less isolation - thread crashes can affect the main process\u003c\\/li>\n\u003cli>Cannot use OS-level sandboxing mechanisms\u003c\\/li>\n\u003c\\/ul>\n\u003cp>When choosing a driver for security-sensitive applications:\u003c\\/p>\n\u003cul>\n\u003cli>Use \u003ccode class=\"inline-code\">child_process\u003c\\/code> for running untrusted code requiring strong isolation\u003c\\/li>\n\u003cli>Use \u003ccode class=\"inline-code\">worker_threads\u003c\\/code> for trusted code where performance and shared memory are beneficial\u003c\\/li>\n\u003cli>Remember that \u003ccode class=\"inline-code\">worker_threads\u003c\\/code> provides no security boundary beyond code-level isolation\u003c\\/li>\n\u003c\\/ul>\n\u003ch3>Using Resource Limits with Worker Threads\u003c\\/h3>\n\u003cp>When using the \u003ccode class=\"inline-code\">worker_threads\u003c\\/code> driver, you can set resource limits to constrain worker resource usage:\u003c\\/p>"},{"type":"code-block","language":"typescript","content":"const worker = await createWorker\u003cMessages>({\n  script: '.\\/worker.js',\n  driver: 'worker_threads',\n  resourceLimits: {\n    maxOldGenerationSizeMb: 128, \\/\\/ Maximum size of the heap in MB\n    maxYoungGenerationSizeMb: 16, \\/\\/ Maximum size of the young generation in MB\n    codeRangeSizeMb: 16, \\/\\/ Size of pre-allocated memory for code\n    stackSizeMb: 4, \\/\\/ Maximum stack size in MB\n  },\n});","highlightedHtml":"\u003cpre class=\"shiki github-dark\" style=\"background-color:#00000000;color:#e1e4e8\" tabindex=\"0\">\u003ccode>\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">const\u003c\\/span>\u003cspan style=\"color:#79B8FF\"> worker\u003c\\/span>\u003cspan style=\"color:#F97583\"> =\u003c\\/span>\u003cspan style=\"color:#F97583\"> await\u003c\\/span>\u003cspan style=\"color:#B392F0\"> \u003ca href=\"\\/isolated-workers\\/api\\/create-worker\" class=\"code-link\" title=\"View createWorker documentation\">createWorker\u003c\\/a>\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">&#x3C;\u003c\\/span>\u003cspan style=\"color:#B392F0\">Messages\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">>({\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  script: \u003c\\/span>\u003cspan style=\"color:#9ECBFF\">'.\\/worker.js'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">,\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  driver: \u003c\\/span>\u003cspan style=\"color:#9ECBFF\">'worker_threads'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">,\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  resourceLimits: {\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">    maxOldGenerationSizeMb: \u003c\\/span>\u003cspan style=\"color:#79B8FF\">128\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">, \u003c\\/span>\u003cspan style=\"color:#6A737D\">\\/\\/ Maximum size of the heap in MB\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">    maxYoungGenerationSizeMb: \u003c\\/span>\u003cspan style=\"color:#79B8FF\">16\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">, \u003c\\/span>\u003cspan style=\"color:#6A737D\">\\/\\/ Maximum size of the young generation in MB\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">    codeRangeSizeMb: \u003c\\/span>\u003cspan style=\"color:#79B8FF\">16\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">, \u003c\\/span>\u003cspan style=\"color:#6A737D\">\\/\\/ Size of pre-allocated memory for code\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">    stackSizeMb: \u003c\\/span>\u003cspan style=\"color:#79B8FF\">4\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">, \u003c\\/span>\u003cspan style=\"color:#6A737D\">\\/\\/ Maximum stack size in MB\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  },\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">});\u003c\\/span>\u003c\\/span>\u003c\\/code>\u003c\\/pre>"},{"type":"html","html":"\u003cp>These limits help prevent workers from consuming excessive memory:\u003c\\/p>\n\u003cul>\n\u003cli>Set \u003ccode class=\"inline-code\">maxOldGenerationSizeMb\u003c\\/code> based on expected memory usage\u003c\\/li>\n\u003cli>Use lower limits for multiple concurrent workers to share system memory\u003c\\/li>\n\u003cli>Monitor workers that hit limits - they may be OOM or have memory leaks\u003c\\/li>\n\u003cli>Limits only apply to \u003ccode class=\"inline-code\">worker_threads\u003c\\/code> driver (not \u003ccode class=\"inline-code\">child_process\u003c\\/code>)\u003c\\/li>\n\u003c\\/ul>\n\u003cp>For \u003ccode class=\"inline-code\">child_process\u003c\\/code>, use OS-level resource limits via \u003ccode class=\"inline-code\">ulimit\u003c\\/code> or container constraints.\u003c\\/p>\n\u003ch2>See Also\u003c\\/h2>\n\u003cul>\n\u003cli>\u003ca href=\"\\/isolated-workers\\/docs\\/guides\\/error-handling\">Error Handling\u003c\\/a> - Handling errors across process boundaries\u003c\\/li>\n\u003cli>\u003ca href=\"\\/isolated-workers\\/docs\\/guides\\/worker-lifecycle\">Worker Lifecycle\u003c\\/a> - Proper worker cleanup\u003c\\/li>\n\u003cli>\u003ca href=\"\\/isolated-workers\\/docs\\/guides\\/timeout-configuration\">Timeout Configuration\u003c\\/a> - Preventing denial of service\u003c\\/li>\n\u003cli>\u003ca href=\"\\/isolated-workers\\/docs\\/guides\\/custom-serializers\">Custom Serializers\u003c\\/a> - Encryption for sensitive data\u003c\\/li>\n\u003c\\/ul>"}]}}</script>
        <script id="vike_globalContext" type="application/json">{"navigation":[{"title":"Getting Started","children":[{"title":"Installation","path":"\\/docs\\/getting-started\\/installation","order":0},{"title":"Quick Start","path":"\\/docs\\/getting-started\\/quick-start","order":2},{"title":"Building Your First Worker","path":"\\/docs\\/getting-started\\/first-worker","order":3}],"order":0,"path":"\\/docs\\/getting-started"},{"title":"Concepts","children":[{"title":"Why isolated-workers?","path":"\\/docs\\/concepts\\/why-isolated-workers","order":1},{"title":"Drivers","path":"\\/docs\\/concepts\\/drivers","order":3}],"order":10,"path":"\\/docs\\/concepts"},{"title":"Guides","children":[{"title":"Error Handling","path":"\\/docs\\/guides\\/error-handling","order":1},{"title":"Middleware","path":"\\/docs\\/guides\\/middleware","order":2},{"title":"Timeout Configuration","path":"\\/docs\\/guides\\/timeout-configuration","order":3},{"title":"Custom Serializers","path":"\\/docs\\/guides\\/custom-serializers","order":4},{"title":"Worker Lifecycle","path":"\\/docs\\/guides\\/worker-lifecycle","order":5},{"title":"TypeScript Deep Dive","path":"\\/docs\\/guides\\/typescript","order":6},{"title":"Troubleshooting","path":"\\/docs\\/guides\\/troubleshooting","order":7},{"title":"Testing Workers","path":"\\/docs\\/guides\\/testing","order":8},{"title":"Security Considerations","path":"\\/docs\\/guides\\/security","order":9}],"order":20,"path":"\\/docs\\/guides"},{"title":"Examples","path":"\\/examples","children":[{"title":"Basic Ping-Pong Worker","path":"\\/examples\\/basic-ping"},{"title":"Custom Serializer","path":"\\/examples\\/custom-serializer"},{"title":"Error Handling","path":"\\/examples\\/error-handling"},{"title":"Middleware Pipeline","path":"\\/examples\\/middleware"},{"title":"Timeout Configuration","path":"\\/examples\\/timeout-config"},{"title":"Unexpected Worker Shutdown Handling","path":"\\/examples\\/shutdown-handling"},{"title":"Worker Lifecycle Management","path":"\\/examples\\/worker-lifecycle"},{"title":"Worker Threads Driver","path":"\\/examples\\/worker-threads-driver"}],"order":100},{"title":"API Reference","path":"\\/api","children":[{"title":"Configuration","path":"\\/api#configuration","children":[{"title":"Handlers","path":"\\/api\\/handlers"},{"title":"Middleware","path":"\\/api\\/middleware"}]},{"title":"Core","path":"\\/api#core","children":[{"title":"createWorker","path":"\\/api\\/create-worker"},{"title":"startWorkerServer","path":"\\/api\\/start-worker-server"}]},{"title":"Drivers","path":"\\/api#drivers","children":[{"title":"ChildProcessCapabilities","path":"\\/api\\/child-process-capabilities"},{"title":"Driver","path":"\\/api\\/driver"},{"title":"DriverCapabilities","path":"\\/api\\/driver-capabilities"},{"title":"WorkerThreadsCapabilities","path":"\\/api\\/worker-threads-capabilities"}]},{"title":"Other","path":"\\/api#other","children":[{"title":"AllMessages","path":"\\/api\\/all-messages"},{"title":"AllResults","path":"\\/api\\/all-results"},{"title":"AnyMessage","path":"\\/api\\/any-message"},{"title":"BaseMessage","path":"\\/api\\/base-message"},{"title":"BuiltInTimeoutKey","path":"\\/api\\/built-in-timeout-key"},{"title":"ChildProcessChannel","path":"\\/api\\/child-process-channel"},{"title":"ChildProcessDriver","path":"\\/api\\/child-process-driver"},{"title":"ChildProcessDriverOptions","path":"\\/api\\/child-process-driver-options"},{"title":"ChildProcessDriverOptions","path":"\\/api\\/child-process-driver-options"},{"title":"ChildProcessDriverType","path":"\\/api\\/child-process-driver-type"},{"title":"ChildProcessServerChannel","path":"\\/api\\/child-process-server-channel"},{"title":"ChildProcessStartupData","path":"\\/api\\/child-process-startup-data"},{"title":"Connection","path":"\\/api\\/connection"},{"title":"ConnectionOptions","path":"\\/api\\/connection-options"},{"title":"createServer","path":"\\/api\\/create-server"},{"title":"createServer","path":"\\/api\\/create-server"},{"title":"DEFAULT_SERVER_CONNECT_TIMEOUT","path":"\\/api\\/default-server-connect-timeout"},{"title":"defaultLogger","path":"\\/api\\/default-logger"},{"title":"DetachCapability","path":"\\/api\\/detach-capability"},{"title":"DriverChannel","path":"\\/api\\/driver-channel"},{"title":"DriverMessage","path":"\\/api\\/driver-message"},{"title":"DriverOptionsFor","path":"\\/api\\/driver-options-for"},{"title":"encodeStartupData","path":"\\/api\\/encode-startup-data"},{"title":"Logger","path":"\\/api\\/logger"},{"title":"LogLevel","path":"\\/api\\/log-level"},{"title":"MaybePromise","path":"\\/api\\/maybe-promise"},{"title":"MessageDef","path":"\\/api\\/message-def"},{"title":"MessageDefs","path":"\\/api\\/message-defs"},{"title":"MessageHandler","path":"\\/api\\/message-handler"},{"title":"MessageOf","path":"\\/api\\/message-of"},{"title":"MessageResult","path":"\\/api\\/message-result"},{"title":"MessageType","path":"\\/api\\/message-type"},{"title":"MiddlewareContext","path":"\\/api\\/middleware-context"},{"title":"MiddlewareDirection","path":"\\/api\\/middleware-direction"},{"title":"PayloadOf","path":"\\/api\\/payload-of"},{"title":"ReconnectCapability","path":"\\/api\\/reconnect-capability"},{"title":"ResponseFunction","path":"\\/api\\/response-function"},{"title":"ResponseFunction","path":"\\/api\\/response-function"},{"title":"ResultOf","path":"\\/api\\/result-of"},{"title":"ResultPayloadOf","path":"\\/api\\/result-payload-of"},{"title":"ServerChannel","path":"\\/api\\/server-channel"},{"title":"ServerDriver","path":"\\/api\\/server-driver"},{"title":"ServerOptions","path":"\\/api\\/server-options"},{"title":"ShutdownReason","path":"\\/api\\/shutdown-reason"},{"title":"spawnWorker","path":"\\/api\\/spawn-worker"},{"title":"spawnWorker","path":"\\/api\\/spawn-worker"},{"title":"STARTUP_DATA_ENV_KEY","path":"\\/api\\/startup-data-env-key"},{"title":"STARTUP_DATA_WORKER_KEY","path":"\\/api\\/startup-data-worker-key"},{"title":"TimeoutConfig","path":"\\/api\\/timeout-config"},{"title":"TransactionIdGenerator","path":"\\/api\\/transaction-id-generator"},{"title":"TypedMessage","path":"\\/api\\/typed-message"},{"title":"TypedResult","path":"\\/api\\/typed-result"},{"title":"UnexpectedShutdownConfig","path":"\\/api\\/unexpected-shutdown-config"},{"title":"UnexpectedShutdownStrategy","path":"\\/api\\/unexpected-shutdown-strategy"},{"title":"WorkerClient","path":"\\/api\\/worker-client"},{"title":"WorkerCrashedError","path":"\\/api\\/worker-crashed-error"},{"title":"WorkerHandler","path":"\\/api\\/worker-handler"},{"title":"WorkerHandlers","path":"\\/api\\/worker-handlers"},{"title":"WorkerOptions","path":"\\/api\\/worker-options"},{"title":"WorkerServer","path":"\\/api\\/worker-server"},{"title":"WorkerServerOptions","path":"\\/api\\/worker-server-options"},{"title":"WorkerThreadsChannel","path":"\\/api\\/worker-threads-channel"},{"title":"WorkerThreadsDriver","path":"\\/api\\/worker-threads-driver"},{"title":"WorkerThreadsDriverOptions","path":"\\/api\\/worker-threads-driver-options"},{"title":"WorkerThreadsDriverOptions","path":"\\/api\\/worker-threads-driver-options"},{"title":"WorkerThreadsDriverType","path":"\\/api\\/worker-threads-driver-type"},{"title":"WorkerThreadsResourceLimits","path":"\\/api\\/worker-threads-resource-limits"},{"title":"WorkerThreadsResourceLimits","path":"\\/api\\/worker-threads-resource-limits"},{"title":"WorkerThreadsServerChannel","path":"\\/api\\/worker-threads-server-channel"},{"title":"WorkerThreadsStartupData","path":"\\/api\\/worker-threads-startup-data"}]},{"title":"Serialization","path":"\\/api#serialization","children":[{"title":"JsonSerializer","path":"\\/api\\/json-serializer"},{"title":"Serializer","path":"\\/api\\/serializer"}]},{"title":"Types","path":"\\/api#types","children":[{"title":"DefineMessages","path":"\\/api\\/define-messages"},{"title":"WithResult","path":"\\/api\\/with-result"}]}],"order":200},{"title":"Configuration","children":[{"title":"Shutdown Handling","path":"\\/docs\\/guides\\/shutdown-handling","order":4}]},{"title":"Resources","children":[{"title":"FAQ","path":"\\/docs\\/faq","order":0},{"title":"Contributing","path":"\\/docs\\/contributing","order":1}]}],"examples":{"basic-ping":{"id":"basic-ping","path":"\\/home\\/runner\\/work\\/isolated-workers\\/isolated-workers\\/examples\\/basic-ping","title":"Basic Ping-Pong Worker","description":"A simple example demonstrating the basics of isolated-workers: spawning a worker process, sending messages, and receiving responses. This example shows the fundamental request\\/response pattern with type-safe message definitions.\n","entryPoint":"host.ts","fileMap":{"./messages.ts":"messages.ts","./host.ts":"host.ts","./worker.ts":"worker.ts"},"commands":[{"command":"pnpm run:basic-ping","title":"Run the example","assertions":[{"contains":"Worker spawned with PID"},{"contains":"Received response:"},{"contains":"Worker closed successfully"}]}],"hidden":false},"custom-serializer":{"id":"custom-serializer","path":"\\/home\\/runner\\/work\\/isolated-workers\\/isolated-workers\\/examples\\/custom-serializer","title":"Custom Serializer","description":"Shows how to implement and use a custom serializer for message encoding. This is useful for using binary formats like MessagePack, adding compression, or wrapping messages with metadata. Both host and worker must use the same serializer.\n","entryPoint":"host.ts","fileMap":{"./messages.ts":"messages.ts","./serializer.ts":"serializer.ts","./host.ts":"host.ts","./worker.ts":"worker.ts"},"commands":[{"command":"pnpm run:custom-serializer","title":"Run the example","assertions":[{"contains":"VerboseJsonSerializer"},{"contains":"[SERIALIZER] Message #"},{"contains":"HELLO, CUSTOM SERIALIZER!"},{"contains":"Worker closed successfully"}]}],"hidden":false},"error-handling":{"id":"error-handling","path":"\\/home\\/runner\\/work\\/isolated-workers\\/isolated-workers\\/examples\\/error-handling","title":"Error Handling","description":"Demonstrates how errors thrown in worker handlers propagate back to the host,\nincluding error messages and proper cleanup.\n","entryPoint":"host.ts","fileMap":{"./messages.ts":"messages.ts","./host.ts":"host.ts","./worker.ts":"worker.ts"},"commands":[{"command":"pnpm run:error-handling","title":"Run the example","assertions":[{"contains":"Test 1: 10 \\/ 2"},{"contains":"Result: 5"},{"contains":"Test 2: 10 \\/ 0 (should error)"},{"contains":"Division by zero"},{"contains":"All tests passed"}]}],"hidden":false},"image-processing":{"id":"image-processing","path":"\\/home\\/runner\\/work\\/isolated-workers\\/isolated-workers\\/examples\\/image-processing","title":"Image Processing Worker","description":"A complete example demonstrating how to build a production-ready worker\nfor CPU-intensive tasks like image processing. Shows type-safe messaging,\nper-operation timeouts, worker state, and batch processing.\n","entryPoint":"host.ts","fileMap":{"./messages.ts":"messages.ts","./host.ts":"host.ts","./worker.ts":"worker.ts"},"commands":[{"command":"pnpm run:image-processing","title":"Run the example","assertions":[{"contains":"Worker PID:"},{"contains":"Image metadata:"},{"contains":"Worker status:"},{"contains":"Batch result:"},{"contains":"Worker shut down gracefully"}]}],"hidden":true},"middleware":{"id":"middleware","path":"\\/home\\/runner\\/work\\/isolated-workers\\/isolated-workers\\/examples\\/middleware","title":"Middleware Pipeline","description":"Demonstrates how to use middleware to intercept and process messages. Middleware can log messages, add metadata, validate structure, or transform payloads. Both the host and worker can have their own middleware pipelines.\n","entryPoint":"host.ts","fileMap":{"./messages.ts":"messages.ts","./host.ts":"host.ts","./worker.ts":"worker.ts"},"commands":[{"command":"pnpm run:middleware","title":"Run the example","assertions":[{"contains":"[OUTGOING]"},{"contains":"[INCOMING]"},{"contains":"Hello, World!"},{"contains":"Worker closed successfully"}]}],"hidden":false},"readme-snippets":{"id":"readme-snippets","path":"\\/home\\/runner\\/work\\/isolated-workers\\/isolated-workers\\/examples\\/readme-snippets","title":"README Code Snippets","description":"Type-checked code snippets used in the package README.\nThis example is hidden from navigation.\n","entryPoint":"drivers.ts","fileMap":{"./drivers.ts":"drivers.ts","./api-overview.ts":"api-overview.ts"},"commands":"!undefined","hidden":true},"shutdown-handling":{"id":"shutdown-handling","path":"\\/home\\/runner\\/work\\/isolated-workers\\/isolated-workers\\/examples\\/shutdown-handling","title":"Unexpected Worker Shutdown Handling","description":"Demonstrates how to handle unexpected worker crashes with configurable\nretry strategies, per-message-type overrides, and detailed error context.\n","entryPoint":"host.ts","fileMap":{"./messages.ts":"messages.ts","./host.ts":"host.ts","./worker.ts":"worker.ts"},"commands":[{"command":"pnpm run:shutdown-handling","title":"Run the example","assertions":[{"contains":"Test 1: Normal operation"},{"contains":"Result: 25"},{"contains":"Test 2: Idempotent operation with crash - retry exhaustion"},{"contains":"WorkerCrashedError after retries"},{"contains":"Attempt: 3\\/3"},{"contains":"Test 3: Non-idempotent operation"},{"contains":"Attempt: 1\\/1"},{"contains":"No retries"},{"contains":"Test 4: Batch processing with retry exhaustion"},{"contains":"Test 5: Successful batch processing"},{"contains":"Processed batch of 3 items"}]}],"hidden":false},"timeout-config":{"id":"timeout-config","path":"\\/home\\/runner\\/work\\/isolated-workers\\/isolated-workers\\/examples\\/timeout-config","title":"Timeout Configuration","description":"Demonstrates the flexible timeout configuration system. You can set timeouts for worker startup, server connection, a default message timeout, and per-message-type timeouts for fine-grained control over long-running operations.\n","entryPoint":"host.ts","fileMap":{"./messages.ts":"messages.ts","./host.ts":"host.ts","./worker.ts":"worker.ts"},"commands":[{"command":"pnpm run:timeout-config","title":"Run the example","assertions":[{"contains":"Timeout configuration:"},{"contains":"Quick ping completed"},{"contains":"Slow process completed"},{"contains":"Worker closed successfully"}]}],"hidden":false},"worker-lifecycle":{"id":"worker-lifecycle","path":"\\/home\\/runner\\/work\\/isolated-workers\\/isolated-workers\\/examples\\/worker-lifecycle","title":"Worker Lifecycle Management","description":"Demonstrates worker lifecycle management including status checking (isActive, isConnected), state persistence across requests, and graceful shutdown. Shows how workers maintain state between messages and how to handle the worker after it's closed.\n","entryPoint":"host.ts","fileMap":{"./messages.ts":"messages.ts","./host.ts":"host.ts","./worker.ts":"worker.ts"},"commands":[{"command":"pnpm run:worker-lifecycle","title":"Run the example","assertions":[{"contains":"Worker Created"},{"contains":"isActive: true"},{"contains":"isConnected: true"},{"contains":"Request count:"},{"contains":"isActive: false"},{"contains":"Worker is not active"}]}],"hidden":false},"worker-threads-driver":{"id":"worker-threads-driver","path":"\\/home\\/runner\\/work\\/isolated-workers\\/isolated-workers\\/examples\\/worker-threads-driver","title":"Worker Threads Driver","description":"Use the worker_threads driver for in-process workers with shared memory support.\nWorker threads run in the same process as the host, enabling SharedArrayBuffer\nand lower overhead compared to child processes.\n","entryPoint":"host.ts","fileMap":"!undefined","commands":[{"command":"node --import tsx {filename}","title":"Run worker threads example","assertions":[{"contains":"Result:"},{"contains":"Worker threads driver"}]}],"hidden":false}}}</script>
        <script src="/isolated-workers/assets/entries/entry-client-routing.io56qHg_.js" type="module" async></script>
        <link rel="modulepreload" href="/isolated-workers/assets/entries/pages_docs.D3lD6bTo.js" as="script" type="text/javascript">
        <link rel="modulepreload" href="/isolated-workers/assets/chunks/chunk-CoIusrxJ.js" as="script" type="text/javascript">
        <link rel="modulepreload" href="/isolated-workers/assets/chunks/chunk-B01QXYmX.js" as="script" type="text/javascript">
        <link rel="modulepreload" href="/isolated-workers/assets/chunks/chunk-DApX3sgb.js" as="script" type="text/javascript">
        <link rel="modulepreload" href="/isolated-workers/assets/chunks/chunk-Dzd9oD5V.js" as="script" type="text/javascript">
        <link rel="modulepreload" href="/isolated-workers/assets/chunks/chunk-jQ2pk9iw.js" as="script" type="text/javascript">
        <link rel="modulepreload" href="/isolated-workers/assets/chunks/chunk-Y59L1pI7.js" as="script" type="text/javascript">
      </body>
    </html>