<!DOCTYPE html>
    <html lang="en">
      <head>
        <link rel="stylesheet" type="text/css" href="/isolated-workers/assets/static/pages_tailwind-65fb2459.DWwu-Xsw.css">
        <meta charset="UTF-8" />
        
        
    <title>isolated-workers</title><meta property="og:title" content="isolated-workers" />
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="icon" href="data:image/svg+xml,%3csvg%20width=&#x27;48&#x27;%20height=&#x27;48&#x27;%20viewBox=&#x27;0%200%2048%2048&#x27;%20fill=&#x27;none&#x27;%20xmlns=&#x27;http://www.w3.org/2000/svg&#x27;%3e%3c!--%20Background%20hexagon%20representing%20the%20isolated%20container%20--%3e%3cpath%20d=&#x27;M24%204L42%2014V34L24%2044L6%2034V14L24%204Z&#x27;%20fill=&#x27;%231a1a2e&#x27;%20stroke=&#x27;%234a5568&#x27;%20stroke-width=&#x27;1.5&#x27;/%3e%3c!--%20Inner%20isolated%20worker%20cells%20--%3e%3c!--%20Top%20worker%20--%3e%3cg%20transform=&#x27;translate(24,%2012)&#x27;%3e%3crect%20x=&#x27;-6&#x27;%20y=&#x27;-4&#x27;%20width=&#x27;12&#x27;%20height=&#x27;8&#x27;%20rx=&#x27;2&#x27;%20fill=&#x27;%233b82f6&#x27;%20stroke=&#x27;%2360a5fa&#x27;%20stroke-width=&#x27;1&#x27;/%3e%3ccircle%20cx=&#x27;0&#x27;%20cy=&#x27;0&#x27;%20r=&#x27;2&#x27;%20fill=&#x27;%23fff&#x27;/%3e%3c/g%3e%3c!--%20Bottom-left%20worker%20--%3e%3cg%20transform=&#x27;translate(14,%2030)&#x27;%3e%3crect%20x=&#x27;-6&#x27;%20y=&#x27;-4&#x27;%20width=&#x27;12&#x27;%20height=&#x27;8&#x27;%20rx=&#x27;2&#x27;%20fill=&#x27;%2310b981&#x27;%20stroke=&#x27;%2334d399&#x27;%20stroke-width=&#x27;1&#x27;/%3e%3ccircle%20cx=&#x27;0&#x27;%20cy=&#x27;0&#x27;%20r=&#x27;2&#x27;%20fill=&#x27;%23fff&#x27;/%3e%3c/g%3e%3c!--%20Bottom-right%20worker%20--%3e%3cg%20transform=&#x27;translate(34,%2030)&#x27;%3e%3crect%20x=&#x27;-6&#x27;%20y=&#x27;-4&#x27;%20width=&#x27;12&#x27;%20height=&#x27;8&#x27;%20rx=&#x27;2&#x27;%20fill=&#x27;%238b5cf6&#x27;%20stroke=&#x27;%23a78bfa&#x27;%20stroke-width=&#x27;1&#x27;/%3e%3ccircle%20cx=&#x27;0&#x27;%20cy=&#x27;0&#x27;%20r=&#x27;2&#x27;%20fill=&#x27;%23fff&#x27;/%3e%3c/g%3e%3c!--%20Communication%20channels%20(dashed%20lines%20showing%20IPC)%20--%3e%3cline%20x1=&#x27;24&#x27;%20y1=&#x27;16&#x27;%20x2=&#x27;14&#x27;%20y2=&#x27;26&#x27;%20stroke=&#x27;%236b7280&#x27;%20stroke-width=&#x27;1.5&#x27;%20stroke-dasharray=&#x27;2,2&#x27;/%3e%3cline%20x1=&#x27;24&#x27;%20y1=&#x27;16&#x27;%20x2=&#x27;34&#x27;%20y2=&#x27;26&#x27;%20stroke=&#x27;%236b7280&#x27;%20stroke-width=&#x27;1.5&#x27;%20stroke-dasharray=&#x27;2,2&#x27;/%3e%3cline%20x1=&#x27;20&#x27;%20y1=&#x27;30&#x27;%20x2=&#x27;28&#x27;%20y2=&#x27;30&#x27;%20stroke=&#x27;%236b7280&#x27;%20stroke-width=&#x27;1.5&#x27;%20stroke-dasharray=&#x27;2,2&#x27;/%3e%3c!--%20Type-safe%20data%20packets%20on%20channels%20--%3e%3ccircle%20cx=&#x27;19&#x27;%20cy=&#x27;21&#x27;%20r=&#x27;1.5&#x27;%20fill=&#x27;%23fbbf24&#x27;/%3e%3ccircle%20cx=&#x27;29&#x27;%20cy=&#x27;21&#x27;%20r=&#x27;1.5&#x27;%20fill=&#x27;%23fbbf24&#x27;/%3e%3ccircle%20cx=&#x27;24&#x27;%20cy=&#x27;30&#x27;%20r=&#x27;1.5&#x27;%20fill=&#x27;%23fbbf24&#x27;/%3e%3c/svg%3e"/><meta name="theme-color" content="#131316"/><meta property="og:type" content="website"/><meta property="og:title" content="isolated-workers"/><meta property="og:description" content="Type-safe worker processes with end-to-end message contracts"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="isolated-workers"/><meta name="twitter:description" content="Type-safe worker processes with end-to-end message contracts"/>
    
    <meta name="description" content="Type-safe worker processes with end-to-end message contracts" /><meta property="og:description" content="Type-safe worker processes with end-to-end message contracts" />
    
  
        
      </head>
      <body>
        
        <div id="root"><div class="min-h-screen bg-primary text-gray-100"><div class="fixed inset-0 overflow-hidden pointer-events-none " aria-hidden="true"><div class="absolute inset-0 retro-horizon"></div><div class="absolute inset-0 retro-grid"></div><div class="absolute w-96 h-96 rounded-full blur-3xl animate-float" style="top:15%;left:20%;background:radial-gradient(circle, rgba(0, 240, 255, 0.15) 0%, transparent 70%)"></div><div class="absolute w-96 h-96 rounded-full blur-3xl animate-float" style="bottom:20%;right:15%;background:radial-gradient(circle, rgba(191, 0, 255, 0.12) 0%, transparent 70%);animation-delay:2s"></div><div class="absolute w-72 h-72 rounded-full blur-3xl animate-float" style="top:40%;left:50%;transform:translateX(-50%);background:radial-gradient(circle, rgba(255, 0, 128, 0.08) 0%, transparent 70%);animation-delay:4s"></div><div class="absolute w-64 h-64 rounded-full blur-3xl animate-pulse-slow" style="top:10%;right:25%;background:radial-gradient(circle, rgba(0, 255, 157, 0.06) 0%, transparent 70%);animation-delay:1s"></div><div class="absolute inset-0 retro-scanlines"></div></div><header class="fixed top-0 left-0 right-0 h-20 z-50 glass-enhanced border-b border-neon-cyan/10"><div class="max-w-7xl mx-auto px-4 h-full flex items-center justify-between"><a href="/isolated-workers/" class="flex items-center gap-3 group"><div class="relative neon-flicker-slow"><img src="data:image/svg+xml,%3csvg%20width=&#x27;48&#x27;%20height=&#x27;48&#x27;%20viewBox=&#x27;0%200%2048%2048&#x27;%20fill=&#x27;none&#x27;%20xmlns=&#x27;http://www.w3.org/2000/svg&#x27;%3e%3c!--%20Background%20hexagon%20representing%20the%20isolated%20container%20--%3e%3cpath%20d=&#x27;M24%204L42%2014V34L24%2044L6%2034V14L24%204Z&#x27;%20fill=&#x27;%231a1a2e&#x27;%20stroke=&#x27;%234a5568&#x27;%20stroke-width=&#x27;1.5&#x27;/%3e%3c!--%20Inner%20isolated%20worker%20cells%20--%3e%3c!--%20Top%20worker%20--%3e%3cg%20transform=&#x27;translate(24,%2012)&#x27;%3e%3crect%20x=&#x27;-6&#x27;%20y=&#x27;-4&#x27;%20width=&#x27;12&#x27;%20height=&#x27;8&#x27;%20rx=&#x27;2&#x27;%20fill=&#x27;%233b82f6&#x27;%20stroke=&#x27;%2360a5fa&#x27;%20stroke-width=&#x27;1&#x27;/%3e%3ccircle%20cx=&#x27;0&#x27;%20cy=&#x27;0&#x27;%20r=&#x27;2&#x27;%20fill=&#x27;%23fff&#x27;/%3e%3c/g%3e%3c!--%20Bottom-left%20worker%20--%3e%3cg%20transform=&#x27;translate(14,%2030)&#x27;%3e%3crect%20x=&#x27;-6&#x27;%20y=&#x27;-4&#x27;%20width=&#x27;12&#x27;%20height=&#x27;8&#x27;%20rx=&#x27;2&#x27;%20fill=&#x27;%2310b981&#x27;%20stroke=&#x27;%2334d399&#x27;%20stroke-width=&#x27;1&#x27;/%3e%3ccircle%20cx=&#x27;0&#x27;%20cy=&#x27;0&#x27;%20r=&#x27;2&#x27;%20fill=&#x27;%23fff&#x27;/%3e%3c/g%3e%3c!--%20Bottom-right%20worker%20--%3e%3cg%20transform=&#x27;translate(34,%2030)&#x27;%3e%3crect%20x=&#x27;-6&#x27;%20y=&#x27;-4&#x27;%20width=&#x27;12&#x27;%20height=&#x27;8&#x27;%20rx=&#x27;2&#x27;%20fill=&#x27;%238b5cf6&#x27;%20stroke=&#x27;%23a78bfa&#x27;%20stroke-width=&#x27;1&#x27;/%3e%3ccircle%20cx=&#x27;0&#x27;%20cy=&#x27;0&#x27;%20r=&#x27;2&#x27;%20fill=&#x27;%23fff&#x27;/%3e%3c/g%3e%3c!--%20Communication%20channels%20(dashed%20lines%20showing%20IPC)%20--%3e%3cline%20x1=&#x27;24&#x27;%20y1=&#x27;16&#x27;%20x2=&#x27;14&#x27;%20y2=&#x27;26&#x27;%20stroke=&#x27;%236b7280&#x27;%20stroke-width=&#x27;1.5&#x27;%20stroke-dasharray=&#x27;2,2&#x27;/%3e%3cline%20x1=&#x27;24&#x27;%20y1=&#x27;16&#x27;%20x2=&#x27;34&#x27;%20y2=&#x27;26&#x27;%20stroke=&#x27;%236b7280&#x27;%20stroke-width=&#x27;1.5&#x27;%20stroke-dasharray=&#x27;2,2&#x27;/%3e%3cline%20x1=&#x27;20&#x27;%20y1=&#x27;30&#x27;%20x2=&#x27;28&#x27;%20y2=&#x27;30&#x27;%20stroke=&#x27;%236b7280&#x27;%20stroke-width=&#x27;1.5&#x27;%20stroke-dasharray=&#x27;2,2&#x27;/%3e%3c!--%20Type-safe%20data%20packets%20on%20channels%20--%3e%3ccircle%20cx=&#x27;19&#x27;%20cy=&#x27;21&#x27;%20r=&#x27;1.5&#x27;%20fill=&#x27;%23fbbf24&#x27;/%3e%3ccircle%20cx=&#x27;29&#x27;%20cy=&#x27;21&#x27;%20r=&#x27;1.5&#x27;%20fill=&#x27;%23fbbf24&#x27;/%3e%3ccircle%20cx=&#x27;24&#x27;%20cy=&#x27;30&#x27;%20r=&#x27;1.5&#x27;%20fill=&#x27;%23fbbf24&#x27;/%3e%3c/svg%3e" height="40" width="40" alt="isolated-workers logo" class="transition-all duration-300 group-hover:drop-shadow-[0_0_12px_rgba(0,240,255,0.6)]"/></div><span class="text-xl font-bold bg-linear-to-r from-neon-cyan to-neon-purple bg-clip-text text-transparent neon-flicker-alt neon-flicker-delay-1">isolated-workers</span></a><nav class="hidden md:flex items-center gap-6"><a href="/isolated-workers/docs/getting-started" class="
        text-sm font-medium transition-all duration-200 relative link-underline
        text-gray-400 hover:text-gray-200
      ">Getting Started</a><a href="/isolated-workers/docs/guides" class="
        text-sm font-medium transition-all duration-200 relative link-underline
        text-gray-400 hover:text-gray-200
      ">Guides</a><a href="/isolated-workers/examples" class="
        text-sm font-medium transition-all duration-200 relative link-underline
        text-gray-400 hover:text-gray-200
      ">Examples</a><a href="/isolated-workers/api" class="
        text-sm font-medium transition-all duration-200 relative link-underline
        text-gray-400 hover:text-gray-200
      ">API Reference</a></nav><div class="hidden md:block"><div class="relative"><div class="relative"><svg class="absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500 pointer-events-none" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg><input type="text" placeholder="Search docs..." class="
            w-64 pl-10 pr-16 py-2 rounded-lg text-sm
            bg-black/40 border border-white/10
            text-gray-100 placeholder:text-gray-500
            focus:border-neon-cyan focus:ring-1 focus:ring-neon-cyan/50
            focus:outline-none transition-all duration-200
            hover:border-white/20
          " value=""/><kbd class="absolute right-3 top-1/2 -translate-y-1/2 px-1.5 py-0.5 text-xs bg-white/5 border border-white/10 rounded text-gray-500 pointer-events-none flex items-center gap-0.5"><span class="text-[10px]">⌘</span>K</kbd></div></div></div></div></header><div class="pt-20"><div class="relative flex min-h-[calc(100vh-5rem)] p-4 lg:max-w-9/12 m-auto gap-4"><aside class="hidden lg:block shrink-0 p-4 sticky top-0 self-start w-72 rounded-2xl glass-enhanced border-glow"><div class="h-[calc(100vh-6rem)] overflow-y-auto"><nav class="p-4 h-full overflow-y-auto space-y-6"><div><div class="flex items-center justify-between mb-2 px-3"><a href="/isolated-workers/docs/getting-started" class="text-xs font-semibold text-gray-500 uppercase tracking-wider neon-flicker-slow neon-flicker-delay-2 hover:text-neon-cyan transition-colors duration-200">Getting Started</a><button class="shrink-0 ml-2 hover:text-neon-cyan transition-colors"><svg class="w-4 h-4 transition-transform duration-200 " fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button></div><ul class="space-y-1 list-none"><li><a href="/isolated-workers/docs/getting-started/installation" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Installation</a></li><li><a href="/isolated-workers/docs/getting-started/quick-start" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Quick Start</a></li><li><a href="/isolated-workers/docs/getting-started/first-worker" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Building Your First Worker</a></li></ul></div><div><div class="divider-glow mb-4"></div><div class="flex items-center justify-between mb-2 px-3"><a href="/isolated-workers/docs/concepts" class="text-xs font-semibold text-gray-500 uppercase tracking-wider neon-flicker-slow neon-flicker-delay-2 hover:text-neon-cyan transition-colors duration-200">Concepts</a><button class="shrink-0 ml-2 hover:text-neon-cyan transition-colors"><svg class="w-4 h-4 transition-transform duration-200 " fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button></div><ul class="space-y-1 list-none"><li><a href="/isolated-workers/docs/concepts/why-isolated-workers" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Why isolated-workers?</a></li><li><a href="/isolated-workers/docs/concepts/drivers" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Drivers</a></li></ul></div><div><div class="divider-glow mb-4"></div><div class="flex items-center justify-between mb-2 px-3"><a href="/isolated-workers/docs/guides" class="text-xs font-semibold text-gray-500 uppercase tracking-wider neon-flicker-slow neon-flicker-delay-2 hover:text-neon-cyan transition-colors duration-200">Guides</a><button class="shrink-0 ml-2 hover:text-neon-cyan transition-colors"><svg class="w-4 h-4 transition-transform duration-200 " fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button></div><ul class="space-y-1 list-none"><li><a href="/isolated-workers/docs/guides/error-handling" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Error Handling</a></li><li><a href="/isolated-workers/docs/guides/middleware" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Middleware</a></li><li><a href="/isolated-workers/docs/guides/timeout-configuration" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Timeout Configuration</a></li><li><a href="/isolated-workers/docs/guides/custom-serializers" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Custom Serializers</a></li><li><a href="/isolated-workers/docs/guides/worker-lifecycle" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Worker Lifecycle</a></li><li><a href="/isolated-workers/docs/guides/typescript" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">TypeScript Deep Dive</a></li><li><a href="/isolated-workers/docs/guides/troubleshooting" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Troubleshooting</a></li><li><a href="/isolated-workers/docs/guides/testing" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Testing Workers</a></li><li><a href="/isolated-workers/docs/guides/security" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Security Considerations</a></li></ul></div><div><div class="divider-glow mb-4"></div><div class="flex items-center justify-between mb-2 px-3"><a href="/isolated-workers/examples" class="text-xs font-semibold text-gray-500 uppercase tracking-wider neon-flicker-slow neon-flicker-delay-2 hover:text-neon-cyan transition-colors duration-200">Examples</a><button class="shrink-0 ml-2 hover:text-neon-cyan transition-colors"><svg class="w-4 h-4 transition-transform duration-200 " fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button></div><ul class="space-y-1 list-none"><li><a href="/isolated-workers/examples/basic-ping" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Basic Ping-Pong Worker</a></li><li><a href="/isolated-workers/examples/custom-serializer" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Custom Serializer</a></li><li><a href="/isolated-workers/examples/error-handling" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Error Handling</a></li><li><a href="/isolated-workers/examples/middleware" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Middleware Pipeline</a></li><li><a href="/isolated-workers/examples/timeout-config" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Timeout Configuration</a></li><li><a href="/isolated-workers/examples/shutdown-handling" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Unexpected Worker Shutdown Handling</a></li><li><a href="/isolated-workers/examples/worker-lifecycle" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Worker Lifecycle Management</a></li><li><a href="/isolated-workers/examples/worker-threads-driver" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Worker Threads Driver</a></li></ul></div><div><div class="divider-glow mb-4"></div><div class="flex items-center justify-between mb-2 px-3"><a href="/isolated-workers/api" class="text-xs font-semibold text-gray-500 uppercase tracking-wider neon-flicker-slow neon-flicker-delay-2 hover:text-neon-cyan transition-colors duration-200">API Reference</a><button class="shrink-0 ml-2 hover:text-neon-cyan transition-colors"><svg class="w-4 h-4 transition-transform duration-200 " fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button></div><ul class="space-y-1 list-none"><li><a href="/isolated-workers/api#configuration" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Configuration</a></li><li><a href="/isolated-workers/api#core" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Core</a></li><li><a href="/isolated-workers/api#drivers" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Drivers</a></li><li><a href="/isolated-workers/api#other" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Other</a></li><li><a href="/isolated-workers/api#serialization" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Serialization</a></li><li><a href="/isolated-workers/api#types" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Types</a></li></ul></div><div><div class="divider-glow mb-4"></div><div class="flex items-center justify-between mb-2 px-3"><span class="text-xs font-semibold text-gray-500 uppercase tracking-wider neon-flicker-slow neon-flicker-delay-2">Configuration</span><button class="shrink-0 ml-2 hover:text-neon-cyan transition-colors"><svg class="w-4 h-4 transition-transform duration-200 " fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button></div><ul class="space-y-1 list-none"><li><a href="/isolated-workers/docs/guides/shutdown-handling" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Shutdown Handling</a></li></ul></div><div><div class="divider-glow mb-4"></div><div class="flex items-center justify-between mb-2 px-3"><span class="text-xs font-semibold text-gray-500 uppercase tracking-wider neon-flicker-slow neon-flicker-delay-2">Resources</span><button class="shrink-0 ml-2 hover:text-neon-cyan transition-colors"><svg class="w-4 h-4 transition-transform duration-200 " fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button></div><ul class="space-y-1 list-none"><li><a href="/isolated-workers/docs/faq" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">FAQ</a></li><li><a href="/isolated-workers/docs/contributing" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Contributing</a></li></ul></div></nav></div></aside><aside class="
                  lg:hidden left-4 bottom-4 top-24 w-72
                  glass-enhanced border-glow fixed! rounded-2xl
                  z-40 transition-transform duration-300 ease-in-out
                  -translate-x-full
                  overflow-clip
                "><div class="h-[calc(100vh-5rem)] overflow-y-auto"><nav class="p-4 h-full overflow-y-auto space-y-6"><div><div class="flex items-center justify-between mb-2 px-3"><a href="/isolated-workers/docs/getting-started" class="text-xs font-semibold text-gray-500 uppercase tracking-wider neon-flicker-slow neon-flicker-delay-2 hover:text-neon-cyan transition-colors duration-200">Getting Started</a><button class="shrink-0 ml-2 hover:text-neon-cyan transition-colors"><svg class="w-4 h-4 transition-transform duration-200 " fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button></div><ul class="space-y-1 list-none"><li><a href="/isolated-workers/docs/getting-started/installation" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Installation</a></li><li><a href="/isolated-workers/docs/getting-started/quick-start" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Quick Start</a></li><li><a href="/isolated-workers/docs/getting-started/first-worker" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Building Your First Worker</a></li></ul></div><div><div class="divider-glow mb-4"></div><div class="flex items-center justify-between mb-2 px-3"><a href="/isolated-workers/docs/concepts" class="text-xs font-semibold text-gray-500 uppercase tracking-wider neon-flicker-slow neon-flicker-delay-2 hover:text-neon-cyan transition-colors duration-200">Concepts</a><button class="shrink-0 ml-2 hover:text-neon-cyan transition-colors"><svg class="w-4 h-4 transition-transform duration-200 " fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button></div><ul class="space-y-1 list-none"><li><a href="/isolated-workers/docs/concepts/why-isolated-workers" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Why isolated-workers?</a></li><li><a href="/isolated-workers/docs/concepts/drivers" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Drivers</a></li></ul></div><div><div class="divider-glow mb-4"></div><div class="flex items-center justify-between mb-2 px-3"><a href="/isolated-workers/docs/guides" class="text-xs font-semibold text-gray-500 uppercase tracking-wider neon-flicker-slow neon-flicker-delay-2 hover:text-neon-cyan transition-colors duration-200">Guides</a><button class="shrink-0 ml-2 hover:text-neon-cyan transition-colors"><svg class="w-4 h-4 transition-transform duration-200 " fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button></div><ul class="space-y-1 list-none"><li><a href="/isolated-workers/docs/guides/error-handling" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Error Handling</a></li><li><a href="/isolated-workers/docs/guides/middleware" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Middleware</a></li><li><a href="/isolated-workers/docs/guides/timeout-configuration" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Timeout Configuration</a></li><li><a href="/isolated-workers/docs/guides/custom-serializers" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Custom Serializers</a></li><li><a href="/isolated-workers/docs/guides/worker-lifecycle" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Worker Lifecycle</a></li><li><a href="/isolated-workers/docs/guides/typescript" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">TypeScript Deep Dive</a></li><li><a href="/isolated-workers/docs/guides/troubleshooting" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Troubleshooting</a></li><li><a href="/isolated-workers/docs/guides/testing" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Testing Workers</a></li><li><a href="/isolated-workers/docs/guides/security" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Security Considerations</a></li></ul></div><div><div class="divider-glow mb-4"></div><div class="flex items-center justify-between mb-2 px-3"><a href="/isolated-workers/examples" class="text-xs font-semibold text-gray-500 uppercase tracking-wider neon-flicker-slow neon-flicker-delay-2 hover:text-neon-cyan transition-colors duration-200">Examples</a><button class="shrink-0 ml-2 hover:text-neon-cyan transition-colors"><svg class="w-4 h-4 transition-transform duration-200 " fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button></div><ul class="space-y-1 list-none"><li><a href="/isolated-workers/examples/basic-ping" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Basic Ping-Pong Worker</a></li><li><a href="/isolated-workers/examples/custom-serializer" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Custom Serializer</a></li><li><a href="/isolated-workers/examples/error-handling" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Error Handling</a></li><li><a href="/isolated-workers/examples/middleware" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Middleware Pipeline</a></li><li><a href="/isolated-workers/examples/timeout-config" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Timeout Configuration</a></li><li><a href="/isolated-workers/examples/shutdown-handling" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Unexpected Worker Shutdown Handling</a></li><li><a href="/isolated-workers/examples/worker-lifecycle" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Worker Lifecycle Management</a></li><li><a href="/isolated-workers/examples/worker-threads-driver" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Worker Threads Driver</a></li></ul></div><div><div class="divider-glow mb-4"></div><div class="flex items-center justify-between mb-2 px-3"><a href="/isolated-workers/api" class="text-xs font-semibold text-gray-500 uppercase tracking-wider neon-flicker-slow neon-flicker-delay-2 hover:text-neon-cyan transition-colors duration-200">API Reference</a><button class="shrink-0 ml-2 hover:text-neon-cyan transition-colors"><svg class="w-4 h-4 transition-transform duration-200 " fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button></div><ul class="space-y-1 list-none"><li><a href="/isolated-workers/api#configuration" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Configuration</a></li><li><a href="/isolated-workers/api#core" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Core</a></li><li><a href="/isolated-workers/api#drivers" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Drivers</a></li><li><a href="/isolated-workers/api#other" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Other</a></li><li><a href="/isolated-workers/api#serialization" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Serialization</a></li><li><a href="/isolated-workers/api#types" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Types</a></li></ul></div><div><div class="divider-glow mb-4"></div><div class="flex items-center justify-between mb-2 px-3"><span class="text-xs font-semibold text-gray-500 uppercase tracking-wider neon-flicker-slow neon-flicker-delay-2">Configuration</span><button class="shrink-0 ml-2 hover:text-neon-cyan transition-colors"><svg class="w-4 h-4 transition-transform duration-200 " fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button></div><ul class="space-y-1 list-none"><li><a href="/isolated-workers/docs/guides/shutdown-handling" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Shutdown Handling</a></li></ul></div><div><div class="divider-glow mb-4"></div><div class="flex items-center justify-between mb-2 px-3"><span class="text-xs font-semibold text-gray-500 uppercase tracking-wider neon-flicker-slow neon-flicker-delay-2">Resources</span><button class="shrink-0 ml-2 hover:text-neon-cyan transition-colors"><svg class="w-4 h-4 transition-transform duration-200 " fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button></div><ul class="space-y-1 list-none"><li><a href="/isolated-workers/docs/faq" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">FAQ</a></li><li><a href="/isolated-workers/docs/contributing" class="
        block px-3 py-2 rounded-lg text-sm transition-all duration-200
        text-gray-400 hover:text-gray-200 hover:bg-tertiary/30 hover:border-l-2 hover:border-neon-cyan/30
      ">Contributing</a></li></ul></div></nav></div></aside><main class="flex-1 min-w-0 py-4"><div class="max-w-4xl rounded-2xl bg-secondary/60 backdrop-blur-sm border border-tertiary/30 px-8 py-8"><div><div class="flex items-center gap-2 text-sm text-gray-400 mb-6"><a href="/isolated-workers/" class="hover:text-neon-cyan">Home</a><span>/</span><span class="text-gray-100">Core Concepts</span></div><div class="prose prose-invert max-w-none space-y-8"><div class="docs-prose"><h1>Core Concepts</h1>
<p>This guide explains the fundamental concepts and architecture of isolated-workers. Understanding these concepts will help you design effective worker-based systems and troubleshoot issues when they arise.</p>
<h2>What is isolated-workers?</h2>
<p>isolated-workers is a type-safe library for spawning and managing worker processes in Node.js. It provides a clean abstraction for running code in separate processes while maintaining full TypeScript type safety for the messages exchanged between them.</p>
<p>The library extracts proven patterns from Nx's isolated plugin architecture, bringing battle-tested solutions for:</p>
<ul>
<li><strong>Process Isolation</strong>: Run untrusted or resource-intensive code in separate processes</li>
<li><strong>Type-Safe IPC</strong>: Full TypeScript inference for messages crossing process boundaries</li>
<li><strong>Lifecycle Management</strong>: Spawn, connect, monitor, and gracefully shutdown workers</li>
<li><strong>Cross-Platform Support</strong>: Works on Unix (domain sockets) and Windows (named pipes)</li>
</ul>
<h2>The Worker Pattern</h2>
<h3>Host and Worker Architecture</h3>
<p>isolated-workers uses a host/worker architecture where two Node.js processes communicate over a socket connection:</p></div><div class="relative group my-6"><div class="
          rounded-lg overflow-hidden border border-white/10 bg-tertiary/80
          transition-all duration-300 border-glow
          shadow-neon-sm
        "><div class="px-4 py-3 bg-black/50 border-b border-white/5 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex gap-2"><span class="w-3 h-3 rounded-full bg-[#ff5f56] shadow-[0_0_6px_rgba(255,95,86,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#ffbd2e] shadow-[0_0_6px_rgba(255,189,46,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#27ca40] shadow-[0_0_6px_rgba(39,202,64,0.4)]"></span></div><span class="text-xs text-gray-500 font-mono">plaintext</span></div><button class="
              text-xs flex items-center gap-1.5 px-2 py-1 rounded
              transition-all duration-200
              text-neon-cyan hover:text-neon-mint hover:bg-neon-cyan/10
            " title="Copy code"><svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>Copy</button></div><div class="overflow-x-auto bg-black/60"><div class="p-4 [&amp;_pre]:bg-transparent [&amp;_code]:bg-transparent"><div class="text-sm [&amp;_pre]:m-0 [&amp;_code]:m-0"><pre class="shiki github-dark" style="background-color:#00000000;color:#e1e4e8" tabindex="0"><code><span class="line"><span>┌─────────────────────┐          ┌─────────────────────┐</span></span>
<span class="line"><span>│                     │          │                     │</span></span>
<span class="line"><span>│        HOST         │  socket  │       WORKER        │</span></span>
<span class="line"><span>│    (main process)   │◄────────►│   (child process)   │</span></span>
<span class="line"><span>│                     │          │                     │</span></span>
<span class="line"><span>└─────────────────────┘          └─────────────────────┘</span></span></code></pre></div></div></div></div></div><div class="docs-prose"><p><strong>Host Process</strong>: Your main application that spawns and controls workers. The host sends requests and receives results.</p>
<p><strong>Worker Process</strong>: A separate Node.js process that handles requests independently. Workers have their own memory space, event loop, and can crash without affecting the host.</p>
<h3>Why Process Isolation Matters</h3>
<p>Process isolation provides several important benefits:</p>
<ol>
<li>
<p><strong>Fault Isolation</strong>: If a worker crashes due to unhandled exceptions or out-of-memory errors, the host process continues running. You can restart workers as needed.</p>
</li>
<li>
<p><strong>Resource Isolation</strong>: Workers have their own memory heap. Memory-intensive operations in a worker do not affect the host's memory usage or garbage collection.</p>
</li>
<li>
<p><strong>Security Boundaries</strong>: Workers run in separate processes with their own context. This provides a natural boundary for running less-trusted code.</p>
</li>
<li>
<p><strong>Parallel Execution</strong>: Unlike Node.js worker threads, separate processes can fully utilize multiple CPU cores for CPU-bound work without sharing the event loop.</p>
</li>
<li>
<p><strong>Clean State</strong>: Each worker starts fresh. There is no shared mutable state between workers, eliminating entire categories of concurrency bugs.</p>
</li>
</ol>
<h2>How IPC Works</h2>
<h3>Communication Channels</h3>
<p>isolated-workers uses OS-native communication primitives for inter-process communication (IPC):</p>
<p><strong>On Unix-like Systems (Linux, macOS)</strong>:</p>
<ul>
<li>Uses Unix domain sockets</li>
<li>Socket file created in the filesystem (typically in <code class="inline-code">/tmp</code>)</li>
<li>Provides bidirectional, stream-based communication</li>
<li>Highest performance for local IPC</li>
</ul>
<p><strong>On Windows</strong>:</p>
<ul>
<li>Uses named pipes (<code class="inline-code">\\.\pipe\...</code>)</li>
<li>Native Windows IPC mechanism</li>
<li>Same bidirectional semantics as Unix sockets</li>
</ul>
<p>The library automatically detects the platform and uses the appropriate mechanism. Your code remains unchanged across platforms.</p>
<h3>Message Serialization</h3>
<p>Messages between host and worker must be serialized since they cross process boundaries. By default, isolated-workers uses JSON serialization, which handles:</p>
<ul>
<li>Primitive types (strings, numbers, booleans, null)</li>
<li>Arrays and plain objects</li>
<li>Nested structures</li>
</ul>
<p>Messages are delimited with a terminator character (default: '\n') for streaming.</p>
<p>For special requirements, you can provide custom serializers that support binary formats, compression, or encryption.</p>
<p><strong>Error Serialization</strong>: Errors receive special handling. When an error is thrown in a worker, isolated-workers serializes the error message, name, stack trace, and common properties like <code class="inline-code">code</code>. The error is then reconstructed on the host side, preserving debugging information.</p>
<h3>Transaction IDs</h3>
<p>Every request/response pair is linked by a transaction ID. This enables:</p>
<ul>
<li><strong>Multiple In-Flight Requests</strong>: Send several requests to a worker without waiting for each response</li>
<li><strong>Response Correlation</strong>: The host matches each response to its original request</li>
<li><strong>Timeout Tracking</strong>: Each transaction can have its own timeout</li>
</ul>
<p>When you call a method on a worker, the library generates a unique transaction ID (using <code class="inline-code">crypto.randomUUID()</code>), attaches it to the message, and stores a promise resolver. When the worker responds with the same transaction ID, the promise resolves.</p>
<h2>Type-Safe Messaging</h2>
<h3>The DefineMessages Pattern</h3>
<p>The core of isolated-workers' type safety is the <code class="inline-code"><a class="code-link" href="/isolated-workers/isolated-workers/api/define-messages">DefineMessages</a></code> pattern. Instead of defining messages as loose types, you define them in a single structured definition:</p></div><div class="relative group my-6"><div class="
          rounded-lg overflow-hidden border border-white/10 bg-tertiary/80
          transition-all duration-300 border-glow
          shadow-neon-sm
        "><div class="px-4 py-3 bg-black/50 border-b border-white/5 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex gap-2"><span class="w-3 h-3 rounded-full bg-[#ff5f56] shadow-[0_0_6px_rgba(255,95,86,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#ffbd2e] shadow-[0_0_6px_rgba(255,189,46,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#27ca40] shadow-[0_0_6px_rgba(39,202,64,0.4)]"></span></div><span class="text-xs text-gray-500 font-mono">plaintext</span></div><button class="
              text-xs flex items-center gap-1.5 px-2 py-1 rounded
              transition-all duration-200
              text-neon-cyan hover:text-neon-mint hover:bg-neon-cyan/10
            " title="Copy code"><svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>Copy</button></div><div class="overflow-x-auto bg-black/60"><div class="p-4 [&amp;_pre]:bg-transparent [&amp;_code]:bg-transparent"><div class="text-sm [&amp;_pre]:m-0 [&amp;_code]:m-0"><pre class="shiki github-dark" style="background-color:#00000000;color:#e1e4e8" tabindex="0"><code><span class="line"><span><a href="/isolated-workers/api/define-messages" class="code-link" title="View DefineMessages documentation">DefineMessages</a>&#x3C;{</span></span>
<span class="line"><span>  [messageType]: {</span></span>
<span class="line"><span>    payload: [what you send];</span></span>
<span class="line"><span>    result?: [what you receive back];</span></span>
<span class="line"><span>  };</span></span>
<span class="line"><span>}></span></span></code></pre></div></div></div></div></div><div class="docs-prose"><p>This pattern provides:</p>
<ul>
<li><strong>Compile-Time Checking</strong>: TypeScript verifies that you send the correct payload type and expect the correct result type</li>
<li><strong>Exhaustive Handlers</strong>: The worker must implement a handler for every message type</li>
<li><strong>Automatic Inference</strong>: The library infers types throughout - no manual type annotations needed</li>
</ul>
<h3>Message and Result Types</h3>
<p>Each message type can have:</p>
<ul>
<li><strong>payload</strong>: The data sent with the message (required)</li>
<li><strong>result</strong>: The data returned in response (optional)</li>
</ul>
<p>Messages without a <code class="inline-code">result</code> are "fire-and-forget" - the host sends them but does not wait for or expect a response. Messages with a <code class="inline-code">result</code> are request/response pairs where the host awaits a typed response.</p>
<h3>Type Extraction Helpers</h3>
<p>The library provides helper types to extract specific parts of your message definitions:</p>
<ul>
<li><strong>MessageOf</strong>: Extract the full message type for a specific message name</li>
<li><strong>ResultOf</strong>: Extract the result type for a specific message name</li>
<li><strong>WithResult</strong>: Filter to only message types that have results</li>
<li><strong>AllMessages</strong>: Union of all message types</li>
<li><strong>AllResults</strong>: Union of all result types</li>
</ul>
<p>These helpers are used internally and are also available for advanced use cases where you need to reference specific message types.</p>
<h3>PayloadOf and ResultPayloadOf</h3>
<p>Extract just the payload or result payload types without the wrapper:</p></div><div class="relative group my-6"><div class="
          rounded-lg overflow-hidden border border-white/10 bg-tertiary/80
          transition-all duration-300 border-glow
          shadow-neon-sm
        "><div class="px-4 py-3 bg-black/50 border-b border-white/5 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex gap-2"><span class="w-3 h-3 rounded-full bg-[#ff5f56] shadow-[0_0_6px_rgba(255,95,86,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#ffbd2e] shadow-[0_0_6px_rgba(255,189,46,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#27ca40] shadow-[0_0_6px_rgba(39,202,64,0.4)]"></span></div><span class="text-xs text-gray-500 font-mono">typescript</span></div><button class="
              text-xs flex items-center gap-1.5 px-2 py-1 rounded
              transition-all duration-200
              text-neon-cyan hover:text-neon-mint hover:bg-neon-cyan/10
            " title="Copy code"><svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>Copy</button></div><div class="overflow-x-auto bg-black/60"><div class="p-4 [&amp;_pre]:bg-transparent [&amp;_code]:bg-transparent"><div class="text-sm [&amp;_pre]:m-0 [&amp;_code]:m-0"><pre class="shiki github-dark" style="background-color:#00000000;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { <a href="/isolated-workers/api/payload-of" class="code-link" title="View PayloadOf documentation">PayloadOf</a>, <a href="/isolated-workers/api/result-payload-of" class="code-link" title="View ResultPayloadOf documentation">ResultPayloadOf</a> } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> 'isolated-workers'</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">type</span><span style="color:#B392F0"> LoadPayload</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> <a href="/isolated-workers/api/payload-of" class="code-link" title="View PayloadOf documentation">PayloadOf</a></span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">Messages</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">'load'</span><span style="color:#E1E4E8">>;</span></span>
<span class="line"><span style="color:#6A737D">// { config: string }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">type</span><span style="color:#B392F0"> LoadResultPayload</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> <a href="/isolated-workers/api/result-payload-of" class="code-link" title="View ResultPayloadOf documentation">ResultPayloadOf</a></span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">Messages</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">'load'</span><span style="color:#E1E4E8">>;</span></span>
<span class="line"><span style="color:#6A737D">// { loaded: true }</span></span></code></pre></div></div></div></div></div><div class="docs-prose"><h3>MessageResult</h3>
<p>Map a message type to its corresponding result type:</p></div><div class="relative group my-6"><div class="
          rounded-lg overflow-hidden border border-white/10 bg-tertiary/80
          transition-all duration-300 border-glow
          shadow-neon-sm
        "><div class="px-4 py-3 bg-black/50 border-b border-white/5 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex gap-2"><span class="w-3 h-3 rounded-full bg-[#ff5f56] shadow-[0_0_6px_rgba(255,95,86,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#ffbd2e] shadow-[0_0_6px_rgba(255,189,46,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#27ca40] shadow-[0_0_6px_rgba(39,202,64,0.4)]"></span></div><span class="text-xs text-gray-500 font-mono">typescript</span></div><button class="
              text-xs flex items-center gap-1.5 px-2 py-1 rounded
              transition-all duration-200
              text-neon-cyan hover:text-neon-mint hover:bg-neon-cyan/10
            " title="Copy code"><svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>Copy</button></div><div class="overflow-x-auto bg-black/60"><div class="p-4 [&amp;_pre]:bg-transparent [&amp;_code]:bg-transparent"><div class="text-sm [&amp;_pre]:m-0 [&amp;_code]:m-0"><pre class="shiki github-dark" style="background-color:#00000000;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { <a href="/isolated-workers/api/message-result" class="code-link" title="View MessageResult documentation">MessageResult</a> } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> 'isolated-workers'</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">type</span><span style="color:#B392F0"> LoadResultType</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> <a href="/isolated-workers/api/message-result" class="code-link" title="View MessageResult documentation">MessageResult</a></span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">Messages</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">'load'</span><span style="color:#E1E4E8">>;</span></span>
<span class="line"><span style="color:#6A737D">// { type: 'loadResult', tx: string, payload: { loaded: true } }</span></span></code></pre></div></div></div></div></div><div class="docs-prose"><h3>Middleware Type</h3>
<p>Middleware function type for intercepting messages:</p></div><div class="relative group my-6"><div class="
          rounded-lg overflow-hidden border border-white/10 bg-tertiary/80
          transition-all duration-300 border-glow
          shadow-neon-sm
        "><div class="px-4 py-3 bg-black/50 border-b border-white/5 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex gap-2"><span class="w-3 h-3 rounded-full bg-[#ff5f56] shadow-[0_0_6px_rgba(255,95,86,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#ffbd2e] shadow-[0_0_6px_rgba(255,189,46,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#27ca40] shadow-[0_0_6px_rgba(39,202,64,0.4)]"></span></div><span class="text-xs text-gray-500 font-mono">typescript</span></div><button class="
              text-xs flex items-center gap-1.5 px-2 py-1 rounded
              transition-all duration-200
              text-neon-cyan hover:text-neon-mint hover:bg-neon-cyan/10
            " title="Copy code"><svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>Copy</button></div><div class="overflow-x-auto bg-black/60"><div class="p-4 [&amp;_pre]:bg-transparent [&amp;_code]:bg-transparent"><div class="text-sm [&amp;_pre]:m-0 [&amp;_code]:m-0"><pre class="shiki github-dark" style="background-color:#00000000;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { <a href="/isolated-workers/api/middleware" class="code-link" title="View Middleware documentation">Middleware</a> } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> 'isolated-workers'</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#B392F0"> logger</span><span style="color:#F97583">:</span><span style="color:#B392F0"> <a href="/isolated-workers/api/middleware" class="code-link" title="View Middleware documentation">Middleware</a></span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">Messages</span><span style="color:#E1E4E8">> </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> (</span><span style="color:#FFAB70">message</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">direction</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">  console.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">`[${</span><span style="color:#E1E4E8">direction</span><span style="color:#9ECBFF">}] ${</span><span style="color:#E1E4E8">message</span><span style="color:#9ECBFF">.</span><span style="color:#E1E4E8">type</span><span style="color:#9ECBFF">}`</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#F97583">  return</span><span style="color:#E1E4E8"> message;</span></span>
<span class="line"><span style="color:#E1E4E8">};</span></span></code></pre></div></div></div></div></div><div class="docs-prose"><h3>TransactionIdGenerator Type</h3>
<p>Type for custom transaction ID generation:</p></div><div class="relative group my-6"><div class="
          rounded-lg overflow-hidden border border-white/10 bg-tertiary/80
          transition-all duration-300 border-glow
          shadow-neon-sm
        "><div class="px-4 py-3 bg-black/50 border-b border-white/5 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex gap-2"><span class="w-3 h-3 rounded-full bg-[#ff5f56] shadow-[0_0_6px_rgba(255,95,86,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#ffbd2e] shadow-[0_0_6px_rgba(255,189,46,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#27ca40] shadow-[0_0_6px_rgba(39,202,64,0.4)]"></span></div><span class="text-xs text-gray-500 font-mono">typescript</span></div><button class="
              text-xs flex items-center gap-1.5 px-2 py-1 rounded
              transition-all duration-200
              text-neon-cyan hover:text-neon-mint hover:bg-neon-cyan/10
            " title="Copy code"><svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>Copy</button></div><div class="overflow-x-auto bg-black/60"><div class="p-4 [&amp;_pre]:bg-transparent [&amp;_code]:bg-transparent"><div class="text-sm [&amp;_pre]:m-0 [&amp;_code]:m-0"><pre class="shiki github-dark" style="background-color:#00000000;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { <a href="/isolated-workers/api/transaction-id-generator" class="code-link" title="View TransactionIdGenerator documentation">TransactionIdGenerator</a> } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> 'isolated-workers'</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#B392F0"> customTxGen</span><span style="color:#F97583">:</span><span style="color:#B392F0"> <a href="/isolated-workers/api/transaction-id-generator" class="code-link" title="View TransactionIdGenerator documentation">TransactionIdGenerator</a></span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">Messages</span><span style="color:#E1E4E8">> </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> (</span><span style="color:#FFAB70">message</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">  return</span><span style="color:#9ECBFF"> `${</span><span style="color:#E1E4E8">message</span><span style="color:#9ECBFF">.</span><span style="color:#E1E4E8">type</span><span style="color:#9ECBFF">}-${</span><span style="color:#E1E4E8">Date</span><span style="color:#9ECBFF">.</span><span style="color:#B392F0">now</span><span style="color:#9ECBFF">()</span><span style="color:#9ECBFF">}-${</span><span style="color:#E1E4E8">Math</span><span style="color:#9ECBFF">.</span><span style="color:#B392F0">random</span><span style="color:#9ECBFF">()</span><span style="color:#9ECBFF">}`</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">};</span></span></code></pre></div></div></div></div></div><div class="docs-prose"><h2>Request/Response Flow</h2>
<p>Here is how a typical request flows through the system:</p></div><div class="relative group my-6"><div class="
          rounded-lg overflow-hidden border border-white/10 bg-tertiary/80
          transition-all duration-300 border-glow
          shadow-neon-sm
        "><div class="px-4 py-3 bg-black/50 border-b border-white/5 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex gap-2"><span class="w-3 h-3 rounded-full bg-[#ff5f56] shadow-[0_0_6px_rgba(255,95,86,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#ffbd2e] shadow-[0_0_6px_rgba(255,189,46,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#27ca40] shadow-[0_0_6px_rgba(39,202,64,0.4)]"></span></div><span class="text-xs text-gray-500 font-mono">plaintext</span></div><button class="
              text-xs flex items-center gap-1.5 px-2 py-1 rounded
              transition-all duration-200
              text-neon-cyan hover:text-neon-mint hover:bg-neon-cyan/10
            " title="Copy code"><svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>Copy</button></div><div class="overflow-x-auto bg-black/60"><div class="p-4 [&amp;_pre]:bg-transparent [&amp;_code]:bg-transparent"><div class="text-sm [&amp;_pre]:m-0 [&amp;_code]:m-0"><pre class="shiki github-dark" style="background-color:#00000000;color:#e1e4e8" tabindex="0"><code><span class="line"><span>HOST                                          WORKER</span></span>
<span class="line"><span>────                                          ──────</span></span>
<span class="line"><span>  │                                              │</span></span>
<span class="line"><span>  │  1. Call worker.send('compute', data)        │</span></span>
<span class="line"><span>  │                                              │</span></span>
<span class="line"><span>  │  2. Generate transaction ID (tx: "abc123")   │</span></span>
<span class="line"><span>  │                                              │</span></span>
<span class="line"><span>  │  3. Create pending promise for tx            │</span></span>
<span class="line"><span>  │                                              │</span></span>
<span class="line"><span>  │  4. Serialize message                        │</span></span>
<span class="line"><span>  │     { type: 'compute',                       │</span></span>
<span class="line"><span>  │       payload: data,                         │</span></span>
<span class="line"><span>  │       tx: 'abc123' }                         │</span></span>
<span class="line"><span>  │                                              │</span></span>
<span class="line"><span>  │  5. Send over socket ──────────────────────► │</span></span>
<span class="line"><span>  │                                              │</span></span>
<span class="line"><span>  │                        6. Deserialize message│</span></span>
<span class="line"><span>  │                                              │</span></span>
<span class="line"><span>  │                        7. Lookup handler for │</span></span>
<span class="line"><span>  │                           type 'compute'     │</span></span>
<span class="line"><span>  │                                              │</span></span>
<span class="line"><span>  │                        8. Execute handler    │</span></span>
<span class="line"><span>  │                           with payload       │</span></span>
<span class="line"><span>  │                                              │</span></span>
<span class="line"><span>  │                        9. Handler returns    │</span></span>
<span class="line"><span>  │                           result payload     │</span></span>
<span class="line"><span>  │                                              │</span></span>
<span class="line"><span>  │                       10. Wrap result:       │</span></span>
<span class="line"><span>  │                           { type: 'computeResult',</span></span>
<span class="line"><span>  │                             payload: result, │</span></span>
<span class="line"><span>  │                             tx: 'abc123' }   │</span></span>
<span class="line"><span>  │                                              │</span></span>
<span class="line"><span>  │ ◄──────────────────── 11. Send over socket   │</span></span>
<span class="line"><span>  │                                              │</span></span>
<span class="line"><span>  │ 12. Deserialize message                      │</span></span>
<span class="line"><span>  │                                              │</span></span>
<span class="line"><span>  │ 13. Match tx to pending promise              │</span></span>
<span class="line"><span>  │                                              │</span></span>
<span class="line"><span>  │ 14. Resolve promise with result              │</span></span>
<span class="line"><span>  │                                              │</span></span>
<span class="line"><span>  │ 15. Return result to caller                  │</span></span>
<span class="line"><span>  │                                              │</span></span>
<span class="line"><span>  ▼                                              ▼</span></span></code></pre></div></div></div></div></div><div class="docs-prose"><h3>Timeout Handling</h3>
<p>Each pending transaction has an associated timeout. If the worker does not respond within the timeout period:</p>
<ol>
<li>The pending promise is rejected with a timeout error</li>
<li>The transaction is removed from the pending map</li>
<li>The worker continues running (it may still process the request)</li>
</ol>
<p>This prevents indefinite hangs when workers become unresponsive.</p>
<p>The default timeout is 5 minutes.</p>
<h2>Server-Side Startup Data</h2>
<p>When a worker starts, it can receive startup data from the host to initialize its state. This is useful for passing configuration, database connections, or other initialization data:</p></div><div class="relative group my-6"><div class="
          rounded-lg overflow-hidden border border-white/10 bg-tertiary/80
          transition-all duration-300 border-glow
          shadow-neon-sm
        "><div class="px-4 py-3 bg-black/50 border-b border-white/5 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex gap-2"><span class="w-3 h-3 rounded-full bg-[#ff5f56] shadow-[0_0_6px_rgba(255,95,86,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#ffbd2e] shadow-[0_0_6px_rgba(255,189,46,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#27ca40] shadow-[0_0_6px_rgba(39,202,64,0.4)]"></span></div><span class="text-xs text-gray-500 font-mono">typescript</span></div><button class="
              text-xs flex items-center gap-1.5 px-2 py-1 rounded
              transition-all duration-200
              text-neon-cyan hover:text-neon-mint hover:bg-neon-cyan/10
            " title="Copy code"><svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>Copy</button></div><div class="overflow-x-auto bg-black/60"><div class="p-4 [&amp;_pre]:bg-transparent [&amp;_code]:bg-transparent"><div class="text-sm [&amp;_pre]:m-0 [&amp;_code]:m-0"><pre class="shiki github-dark" style="background-color:#00000000;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#6A737D">// Host side</span></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> worker</span><span style="color:#F97583"> =</span><span style="color:#F97583"> await</span><span style="color:#B392F0"> <a href="/isolated-workers/api/create-worker" class="code-link" title="View createWorker documentation">createWorker</a></span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">Messages</span><span style="color:#E1E4E8">>({</span></span>
<span class="line"><span style="color:#E1E4E8">  script: </span><span style="color:#9ECBFF">'./worker.js'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">  startupData: {</span></span>
<span class="line"><span style="color:#E1E4E8">    config: { apiEndpoint: </span><span style="color:#9ECBFF">'https://api.example.com'</span><span style="color:#E1E4E8"> },</span></span>
<span class="line"><span style="color:#E1E4E8">    dbConnectionString: </span><span style="color:#9ECBFF">'postgresql://localhost/mydb'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">  },</span></span>
<span class="line"><span style="color:#E1E4E8">});</span></span></code></pre></div></div></div></div></div><div class="relative group my-6"><div class="
          rounded-lg overflow-hidden border border-white/10 bg-tertiary/80
          transition-all duration-300 border-glow
          shadow-neon-sm
        "><div class="px-4 py-3 bg-black/50 border-b border-white/5 flex items-center justify-between"><div class="flex items-center gap-3"><div class="flex gap-2"><span class="w-3 h-3 rounded-full bg-[#ff5f56] shadow-[0_0_6px_rgba(255,95,86,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#ffbd2e] shadow-[0_0_6px_rgba(255,189,46,0.4)]"></span><span class="w-3 h-3 rounded-full bg-[#27ca40] shadow-[0_0_6px_rgba(39,202,64,0.4)]"></span></div><span class="text-xs text-gray-500 font-mono">typescript</span></div><button class="
              text-xs flex items-center gap-1.5 px-2 py-1 rounded
              transition-all duration-200
              text-neon-cyan hover:text-neon-mint hover:bg-neon-cyan/10
            " title="Copy code"><svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>Copy</button></div><div class="overflow-x-auto bg-black/60"><div class="p-4 [&amp;_pre]:bg-transparent [&amp;_code]:bg-transparent"><div class="text-sm [&amp;_pre]:m-0 [&amp;_code]:m-0"><pre class="shiki github-dark" style="background-color:#00000000;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#6A737D">// Worker side</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { <a href="/isolated-workers/api/start-worker-server" class="code-link" title="View startWorkerServer documentation">startWorkerServer</a> } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> 'isolated-workers'</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// Access startup data via getStartupData()</span></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> startupData</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> getStartupData</span><span style="color:#E1E4E8">&#x3C;{ </span><span style="color:#FFAB70">config</span><span style="color:#F97583">:</span><span style="color:#E1E4E8"> { </span><span style="color:#FFAB70">apiEndpoint</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> string</span><span style="color:#E1E4E8"> } }>();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">console.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'Starting with config:'</span><span style="color:#E1E4E8">, startupData.config.apiEndpoint);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0"><a href="/isolated-workers/api/start-worker-server" class="code-link" title="View startWorkerServer documentation">startWorkerServer</a></span><span style="color:#E1E4E8">&#x3C;</span><span style="color:#B392F0">Messages</span><span style="color:#E1E4E8">>({</span></span>
<span class="line"><span style="color:#E1E4E8">  handlers: {</span></span>
<span class="line"><span style="color:#B392F0">    fetchData</span><span style="color:#E1E4E8">: </span><span style="color:#F97583">async</span><span style="color:#E1E4E8"> () </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#6A737D">      // Use configuration from startup data</span></span>
<span class="line"><span style="color:#F97583">      const</span><span style="color:#79B8FF"> response</span><span style="color:#F97583"> =</span><span style="color:#F97583"> await</span><span style="color:#B392F0"> fetch</span><span style="color:#E1E4E8">(startupData.config.apiEndpoint);</span></span>
<span class="line"><span style="color:#F97583">      return</span><span style="color:#E1E4E8"> response.</span><span style="color:#B392F0">json</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#E1E4E8">    },</span></span>
<span class="line"><span style="color:#E1E4E8">  },</span></span>
<span class="line"><span style="color:#E1E4E8">});</span></span></code></pre></div></div></div></div></div><div class="docs-prose"><p><strong>Key points about startup data</strong>:</p>
<ul>
<li>Sent during the initial handshake, before any messages</li>
<li>Available immediately when the worker server starts</li>
<li>Serialized and deserialized like regular messages</li>
<li>Useful for one-time initialization that doesn't need to be in every message</li>
</ul>
<h2>Key Terminology</h2>
<h3>Host</h3>
<p>The main Node.js process that spawns and manages workers. The host sends requests to workers and receives results.</p>
<h3>Worker</h3>
<p>A child Node.js process spawned by the host. Workers register handlers for message types and process incoming requests independently.</p>
<h3>Handler</h3>
<p>A function in the worker that processes a specific message type. Handlers receive the message payload and return a result payload (or nothing for fire-and-forget messages).</p>
<h3>Payload</h3>
<p>The data portion of a message. Request payloads are sent from host to worker; result payloads are returned from worker to host.</p>
<h3>Result</h3>
<p>The response data returned by a handler. Results are automatically wrapped in a result message and sent back to the host.</p>
<h3>Transaction ID (tx)</h3>
<p>A unique identifier linking a request to its response. Generated for each send operation and included in both the request and response messages.</p>
<h3>Message Type</h3>
<p>The string identifier for a category of messages (e.g., 'compute', 'load', 'shutdown'). Each message type has a corresponding handler in the worker.</p>
<h3>Socket</h3>
<p>The communication channel between host and worker. Uses Unix domain sockets on Unix-like systems and named pipes on Windows.</p>
<h3>Middleware</h3>
<p>An optional function that can intercept and transform messages in either direction (sending or receiving). Useful for logging, validation, or adding metadata.</p>
<h3>Serializer</h3>
<p>The component responsible for converting messages to a transmittable format (and back). Default is JSON, but can be customized for binary formats or compression.</p>
<h3>Lifecycle</h3>
<p>The stages a worker goes through: spawn (create process), connect (establish socket), message (exchange data), and shutdown (cleanup and exit).</p>
<h2>Next Steps</h2>
<p>Now that you understand the core concepts, explore:</p>
<ul>
<li><a href="/isolated-workers/docs/concepts/why-isolated-workers">Why isolated-workers?</a> - When and why to use this library</li>
<li><a href="/isolated-workers/docs/getting-started">Getting Started</a> - Create your first worker</li>
<li><a href="/isolated-workers/docs/guides">Guides</a> - Deep dives into specific topics</li>
<li><a href="/isolated-workers/examples">Examples</a> - Working code examples</li>
</ul></div></div><div class="mt-12 pt-8 border-t border-tertiary/50"><a href="/isolated-workers/" class="text-neon-cyan hover:text-neon-purple transition-colors">← Back to Home</a></div></div></div></main></div></div><div class="fixed bottom-4 right-4 z-50"><div class="relative "><button class="p-2 rounded-lg bg-tertiary/50 border border-tertiary hover:border-neon-cyan/50 transition-colors" title="Toggle visual effects" aria-label="Toggle visual effects menu"><svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"></path></svg></button></div></div></div></div>
        
        <script id="vike_pageContext" type="application/json">{"pageId":"\\/pages\\/docs","routeParams":{"splat":"concepts"},"data":{"doc":{"path":"\\/docs\\/concepts","filePath":"\\/home\\/runner\\/work\\/isolated-workers\\/isolated-workers\\/docs\\/concepts\\/index.md","title":"Core Concepts","description":"Understanding the architecture and mental model of isolated-workers","nav":{"section":"Concepts","order":0}},"segments":[{"type":"html","html":"\u003ch1>Core Concepts\u003c\\/h1>\n\u003cp>This guide explains the fundamental concepts and architecture of isolated-workers. Understanding these concepts will help you design effective worker-based systems and troubleshoot issues when they arise.\u003c\\/p>\n\u003ch2>What is isolated-workers?\u003c\\/h2>\n\u003cp>isolated-workers is a type-safe library for spawning and managing worker processes in Node.js. It provides a clean abstraction for running code in separate processes while maintaining full TypeScript type safety for the messages exchanged between them.\u003c\\/p>\n\u003cp>The library extracts proven patterns from Nx's isolated plugin architecture, bringing battle-tested solutions for:\u003c\\/p>\n\u003cul>\n\u003cli>\u003cstrong>Process Isolation\u003c\\/strong>: Run untrusted or resource-intensive code in separate processes\u003c\\/li>\n\u003cli>\u003cstrong>Type-Safe IPC\u003c\\/strong>: Full TypeScript inference for messages crossing process boundaries\u003c\\/li>\n\u003cli>\u003cstrong>Lifecycle Management\u003c\\/strong>: Spawn, connect, monitor, and gracefully shutdown workers\u003c\\/li>\n\u003cli>\u003cstrong>Cross-Platform Support\u003c\\/strong>: Works on Unix (domain sockets) and Windows (named pipes)\u003c\\/li>\n\u003c\\/ul>\n\u003ch2>The Worker Pattern\u003c\\/h2>\n\u003ch3>Host and Worker Architecture\u003c\\/h3>\n\u003cp>isolated-workers uses a host\\/worker architecture where two Node.js processes communicate over a socket connection:\u003c\\/p>"},{"type":"code-block","language":"text","content":"┌─────────────────────┐          ┌─────────────────────┐\n│                     │          │                     │\n│        HOST         │  socket  │       WORKER        │\n│    (main process)   │◄────────►│   (child process)   │\n│                     │          │                     │\n└─────────────────────┘          └─────────────────────┘","highlightedHtml":"\u003cpre class=\"shiki github-dark\" style=\"background-color:#00000000;color:#e1e4e8\" tabindex=\"0\">\u003ccode>\u003cspan class=\"line\">\u003cspan>┌─────────────────────┐          ┌─────────────────────┐\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan>│                     │          │                     │\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan>│        HOST         │  socket  │       WORKER        │\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan>│    (main process)   │◄────────►│   (child process)   │\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan>│                     │          │                     │\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan>└─────────────────────┘          └─────────────────────┘\u003c\\/span>\u003c\\/span>\u003c\\/code>\u003c\\/pre>"},{"type":"html","html":"\u003cp>\u003cstrong>Host Process\u003c\\/strong>: Your main application that spawns and controls workers. The host sends requests and receives results.\u003c\\/p>\n\u003cp>\u003cstrong>Worker Process\u003c\\/strong>: A separate Node.js process that handles requests independently. Workers have their own memory space, event loop, and can crash without affecting the host.\u003c\\/p>\n\u003ch3>Why Process Isolation Matters\u003c\\/h3>\n\u003cp>Process isolation provides several important benefits:\u003c\\/p>\n\u003col>\n\u003cli>\n\u003cp>\u003cstrong>Fault Isolation\u003c\\/strong>: If a worker crashes due to unhandled exceptions or out-of-memory errors, the host process continues running. You can restart workers as needed.\u003c\\/p>\n\u003c\\/li>\n\u003cli>\n\u003cp>\u003cstrong>Resource Isolation\u003c\\/strong>: Workers have their own memory heap. Memory-intensive operations in a worker do not affect the host's memory usage or garbage collection.\u003c\\/p>\n\u003c\\/li>\n\u003cli>\n\u003cp>\u003cstrong>Security Boundaries\u003c\\/strong>: Workers run in separate processes with their own context. This provides a natural boundary for running less-trusted code.\u003c\\/p>\n\u003c\\/li>\n\u003cli>\n\u003cp>\u003cstrong>Parallel Execution\u003c\\/strong>: Unlike Node.js worker threads, separate processes can fully utilize multiple CPU cores for CPU-bound work without sharing the event loop.\u003c\\/p>\n\u003c\\/li>\n\u003cli>\n\u003cp>\u003cstrong>Clean State\u003c\\/strong>: Each worker starts fresh. There is no shared mutable state between workers, eliminating entire categories of concurrency bugs.\u003c\\/p>\n\u003c\\/li>\n\u003c\\/ol>\n\u003ch2>How IPC Works\u003c\\/h2>\n\u003ch3>Communication Channels\u003c\\/h3>\n\u003cp>isolated-workers uses OS-native communication primitives for inter-process communication (IPC):\u003c\\/p>\n\u003cp>\u003cstrong>On Unix-like Systems (Linux, macOS)\u003c\\/strong>:\u003c\\/p>\n\u003cul>\n\u003cli>Uses Unix domain sockets\u003c\\/li>\n\u003cli>Socket file created in the filesystem (typically in \u003ccode class=\"inline-code\">\\/tmp\u003c\\/code>)\u003c\\/li>\n\u003cli>Provides bidirectional, stream-based communication\u003c\\/li>\n\u003cli>Highest performance for local IPC\u003c\\/li>\n\u003c\\/ul>\n\u003cp>\u003cstrong>On Windows\u003c\\/strong>:\u003c\\/p>\n\u003cul>\n\u003cli>Uses named pipes (\u003ccode class=\"inline-code\">\\\\.\\pipe\\...\u003c\\/code>)\u003c\\/li>\n\u003cli>Native Windows IPC mechanism\u003c\\/li>\n\u003cli>Same bidirectional semantics as Unix sockets\u003c\\/li>\n\u003c\\/ul>\n\u003cp>The library automatically detects the platform and uses the appropriate mechanism. Your code remains unchanged across platforms.\u003c\\/p>\n\u003ch3>Message Serialization\u003c\\/h3>\n\u003cp>Messages between host and worker must be serialized since they cross process boundaries. By default, isolated-workers uses JSON serialization, which handles:\u003c\\/p>\n\u003cul>\n\u003cli>Primitive types (strings, numbers, booleans, null)\u003c\\/li>\n\u003cli>Arrays and plain objects\u003c\\/li>\n\u003cli>Nested structures\u003c\\/li>\n\u003c\\/ul>\n\u003cp>Messages are delimited with a terminator character (default: '\\n') for streaming.\u003c\\/p>\n\u003cp>For special requirements, you can provide custom serializers that support binary formats, compression, or encryption.\u003c\\/p>\n\u003cp>\u003cstrong>Error Serialization\u003c\\/strong>: Errors receive special handling. When an error is thrown in a worker, isolated-workers serializes the error message, name, stack trace, and common properties like \u003ccode class=\"inline-code\">code\u003c\\/code>. The error is then reconstructed on the host side, preserving debugging information.\u003c\\/p>\n\u003ch3>Transaction IDs\u003c\\/h3>\n\u003cp>Every request\\/response pair is linked by a transaction ID. This enables:\u003c\\/p>\n\u003cul>\n\u003cli>\u003cstrong>Multiple In-Flight Requests\u003c\\/strong>: Send several requests to a worker without waiting for each response\u003c\\/li>\n\u003cli>\u003cstrong>Response Correlation\u003c\\/strong>: The host matches each response to its original request\u003c\\/li>\n\u003cli>\u003cstrong>Timeout Tracking\u003c\\/strong>: Each transaction can have its own timeout\u003c\\/li>\n\u003c\\/ul>\n\u003cp>When you call a method on a worker, the library generates a unique transaction ID (using \u003ccode class=\"inline-code\">crypto.randomUUID()\u003c\\/code>), attaches it to the message, and stores a promise resolver. When the worker responds with the same transaction ID, the promise resolves.\u003c\\/p>\n\u003ch2>Type-Safe Messaging\u003c\\/h2>\n\u003ch3>The DefineMessages Pattern\u003c\\/h3>\n\u003cp>The core of isolated-workers' type safety is the \u003ccode class=\"inline-code\">\u003ca class=\"code-link\" href=\"\\/isolated-workers\\/isolated-workers\\/api\\/define-messages\">DefineMessages\u003c\\/a>\u003c\\/code> pattern. Instead of defining messages as loose types, you define them in a single structured definition:\u003c\\/p>"},{"type":"code-block","language":"text","content":"DefineMessages\u003c{\n  [messageType]: {\n    payload: [what you send];\n    result?: [what you receive back];\n  };\n}>","highlightedHtml":"\u003cpre class=\"shiki github-dark\" style=\"background-color:#00000000;color:#e1e4e8\" tabindex=\"0\">\u003ccode>\u003cspan class=\"line\">\u003cspan>\u003ca href=\"\\/isolated-workers\\/api\\/define-messages\" class=\"code-link\" title=\"View DefineMessages documentation\">DefineMessages\u003c\\/a>&#x3C;{\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan>  [messageType]: {\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan>    payload: [what you send];\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan>    result?: [what you receive back];\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan>  };\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan>}>\u003c\\/span>\u003c\\/span>\u003c\\/code>\u003c\\/pre>"},{"type":"html","html":"\u003cp>This pattern provides:\u003c\\/p>\n\u003cul>\n\u003cli>\u003cstrong>Compile-Time Checking\u003c\\/strong>: TypeScript verifies that you send the correct payload type and expect the correct result type\u003c\\/li>\n\u003cli>\u003cstrong>Exhaustive Handlers\u003c\\/strong>: The worker must implement a handler for every message type\u003c\\/li>\n\u003cli>\u003cstrong>Automatic Inference\u003c\\/strong>: The library infers types throughout - no manual type annotations needed\u003c\\/li>\n\u003c\\/ul>\n\u003ch3>Message and Result Types\u003c\\/h3>\n\u003cp>Each message type can have:\u003c\\/p>\n\u003cul>\n\u003cli>\u003cstrong>payload\u003c\\/strong>: The data sent with the message (required)\u003c\\/li>\n\u003cli>\u003cstrong>result\u003c\\/strong>: The data returned in response (optional)\u003c\\/li>\n\u003c\\/ul>\n\u003cp>Messages without a \u003ccode class=\"inline-code\">result\u003c\\/code> are \"fire-and-forget\" - the host sends them but does not wait for or expect a response. Messages with a \u003ccode class=\"inline-code\">result\u003c\\/code> are request\\/response pairs where the host awaits a typed response.\u003c\\/p>\n\u003ch3>Type Extraction Helpers\u003c\\/h3>\n\u003cp>The library provides helper types to extract specific parts of your message definitions:\u003c\\/p>\n\u003cul>\n\u003cli>\u003cstrong>MessageOf\u003c\\/strong>: Extract the full message type for a specific message name\u003c\\/li>\n\u003cli>\u003cstrong>ResultOf\u003c\\/strong>: Extract the result type for a specific message name\u003c\\/li>\n\u003cli>\u003cstrong>WithResult\u003c\\/strong>: Filter to only message types that have results\u003c\\/li>\n\u003cli>\u003cstrong>AllMessages\u003c\\/strong>: Union of all message types\u003c\\/li>\n\u003cli>\u003cstrong>AllResults\u003c\\/strong>: Union of all result types\u003c\\/li>\n\u003c\\/ul>\n\u003cp>These helpers are used internally and are also available for advanced use cases where you need to reference specific message types.\u003c\\/p>\n\u003ch3>PayloadOf and ResultPayloadOf\u003c\\/h3>\n\u003cp>Extract just the payload or result payload types without the wrapper:\u003c\\/p>"},{"type":"code-block","language":"typescript","content":"import { PayloadOf, ResultPayloadOf } from 'isolated-workers';\n\ntype LoadPayload = PayloadOf\u003cMessages, 'load'>;\n\\/\\/ { config: string }\n\ntype LoadResultPayload = ResultPayloadOf\u003cMessages, 'load'>;\n\\/\\/ { loaded: true }","highlightedHtml":"\u003cpre class=\"shiki github-dark\" style=\"background-color:#00000000;color:#e1e4e8\" tabindex=\"0\">\u003ccode>\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">import\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> { \u003ca href=\"\\/isolated-workers\\/api\\/payload-of\" class=\"code-link\" title=\"View PayloadOf documentation\">PayloadOf\u003c\\/a>, \u003ca href=\"\\/isolated-workers\\/api\\/result-payload-of\" class=\"code-link\" title=\"View ResultPayloadOf documentation\">ResultPayloadOf\u003c\\/a> } \u003c\\/span>\u003cspan style=\"color:#F97583\">from\u003c\\/span>\u003cspan style=\"color:#9ECBFF\"> 'isolated-workers'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">;\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">type\u003c\\/span>\u003cspan style=\"color:#B392F0\"> LoadPayload\u003c\\/span>\u003cspan style=\"color:#F97583\"> =\u003c\\/span>\u003cspan style=\"color:#B392F0\"> \u003ca href=\"\\/isolated-workers\\/api\\/payload-of\" class=\"code-link\" title=\"View PayloadOf documentation\">PayloadOf\u003c\\/a>\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">&#x3C;\u003c\\/span>\u003cspan style=\"color:#B392F0\">Messages\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">, \u003c\\/span>\u003cspan style=\"color:#9ECBFF\">'load'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">>;\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#6A737D\">\\/\\/ { config: string }\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">type\u003c\\/span>\u003cspan style=\"color:#B392F0\"> LoadResultPayload\u003c\\/span>\u003cspan style=\"color:#F97583\"> =\u003c\\/span>\u003cspan style=\"color:#B392F0\"> \u003ca href=\"\\/isolated-workers\\/api\\/result-payload-of\" class=\"code-link\" title=\"View ResultPayloadOf documentation\">ResultPayloadOf\u003c\\/a>\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">&#x3C;\u003c\\/span>\u003cspan style=\"color:#B392F0\">Messages\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">, \u003c\\/span>\u003cspan style=\"color:#9ECBFF\">'load'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">>;\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#6A737D\">\\/\\/ { loaded: true }\u003c\\/span>\u003c\\/span>\u003c\\/code>\u003c\\/pre>"},{"type":"html","html":"\u003ch3>MessageResult\u003c\\/h3>\n\u003cp>Map a message type to its corresponding result type:\u003c\\/p>"},{"type":"code-block","language":"typescript","content":"import { MessageResult } from 'isolated-workers';\n\ntype LoadResultType = MessageResult\u003cMessages, 'load'>;\n\\/\\/ { type: 'loadResult', tx: string, payload: { loaded: true } }","highlightedHtml":"\u003cpre class=\"shiki github-dark\" style=\"background-color:#00000000;color:#e1e4e8\" tabindex=\"0\">\u003ccode>\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">import\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> { \u003ca href=\"\\/isolated-workers\\/api\\/message-result\" class=\"code-link\" title=\"View MessageResult documentation\">MessageResult\u003c\\/a> } \u003c\\/span>\u003cspan style=\"color:#F97583\">from\u003c\\/span>\u003cspan style=\"color:#9ECBFF\"> 'isolated-workers'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">;\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">type\u003c\\/span>\u003cspan style=\"color:#B392F0\"> LoadResultType\u003c\\/span>\u003cspan style=\"color:#F97583\"> =\u003c\\/span>\u003cspan style=\"color:#B392F0\"> \u003ca href=\"\\/isolated-workers\\/api\\/message-result\" class=\"code-link\" title=\"View MessageResult documentation\">MessageResult\u003c\\/a>\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">&#x3C;\u003c\\/span>\u003cspan style=\"color:#B392F0\">Messages\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">, \u003c\\/span>\u003cspan style=\"color:#9ECBFF\">'load'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">>;\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#6A737D\">\\/\\/ { type: 'loadResult', tx: string, payload: { loaded: true } }\u003c\\/span>\u003c\\/span>\u003c\\/code>\u003c\\/pre>"},{"type":"html","html":"\u003ch3>Middleware Type\u003c\\/h3>\n\u003cp>Middleware function type for intercepting messages:\u003c\\/p>"},{"type":"code-block","language":"typescript","content":"import { Middleware } from 'isolated-workers';\n\nconst logger: Middleware\u003cMessages> = (message, direction) => {\n  console.log(`[${direction}] ${message.type}`);\n  return message;\n};","highlightedHtml":"\u003cpre class=\"shiki github-dark\" style=\"background-color:#00000000;color:#e1e4e8\" tabindex=\"0\">\u003ccode>\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">import\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> { \u003ca href=\"\\/isolated-workers\\/api\\/middleware\" class=\"code-link\" title=\"View Middleware documentation\">Middleware\u003c\\/a> } \u003c\\/span>\u003cspan style=\"color:#F97583\">from\u003c\\/span>\u003cspan style=\"color:#9ECBFF\"> 'isolated-workers'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">;\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">const\u003c\\/span>\u003cspan style=\"color:#B392F0\"> logger\u003c\\/span>\u003cspan style=\"color:#F97583\">:\u003c\\/span>\u003cspan style=\"color:#B392F0\"> \u003ca href=\"\\/isolated-workers\\/api\\/middleware\" class=\"code-link\" title=\"View Middleware documentation\">Middleware\u003c\\/a>\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">&#x3C;\u003c\\/span>\u003cspan style=\"color:#B392F0\">Messages\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">> \u003c\\/span>\u003cspan style=\"color:#F97583\">=\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> (\u003c\\/span>\u003cspan style=\"color:#FFAB70\">message\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">, \u003c\\/span>\u003cspan style=\"color:#FFAB70\">direction\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">) \u003c\\/span>\u003cspan style=\"color:#F97583\">=>\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> {\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  console.\u003c\\/span>\u003cspan style=\"color:#B392F0\">log\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">(\u003c\\/span>\u003cspan style=\"color:#9ECBFF\">`[${\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">direction\u003c\\/span>\u003cspan style=\"color:#9ECBFF\">}] ${\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">message\u003c\\/span>\u003cspan style=\"color:#9ECBFF\">.\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">type\u003c\\/span>\u003cspan style=\"color:#9ECBFF\">}`\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">);\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">  return\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> message;\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">};\u003c\\/span>\u003c\\/span>\u003c\\/code>\u003c\\/pre>"},{"type":"html","html":"\u003ch3>TransactionIdGenerator Type\u003c\\/h3>\n\u003cp>Type for custom transaction ID generation:\u003c\\/p>"},{"type":"code-block","language":"typescript","content":"import { TransactionIdGenerator } from 'isolated-workers';\n\nconst customTxGen: TransactionIdGenerator\u003cMessages> = (message) => {\n  return `${message.type}-${Date.now()}-${Math.random()}`;\n};","highlightedHtml":"\u003cpre class=\"shiki github-dark\" style=\"background-color:#00000000;color:#e1e4e8\" tabindex=\"0\">\u003ccode>\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">import\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> { \u003ca href=\"\\/isolated-workers\\/api\\/transaction-id-generator\" class=\"code-link\" title=\"View TransactionIdGenerator documentation\">TransactionIdGenerator\u003c\\/a> } \u003c\\/span>\u003cspan style=\"color:#F97583\">from\u003c\\/span>\u003cspan style=\"color:#9ECBFF\"> 'isolated-workers'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">;\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">const\u003c\\/span>\u003cspan style=\"color:#B392F0\"> customTxGen\u003c\\/span>\u003cspan style=\"color:#F97583\">:\u003c\\/span>\u003cspan style=\"color:#B392F0\"> \u003ca href=\"\\/isolated-workers\\/api\\/transaction-id-generator\" class=\"code-link\" title=\"View TransactionIdGenerator documentation\">TransactionIdGenerator\u003c\\/a>\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">&#x3C;\u003c\\/span>\u003cspan style=\"color:#B392F0\">Messages\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">> \u003c\\/span>\u003cspan style=\"color:#F97583\">=\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> (\u003c\\/span>\u003cspan style=\"color:#FFAB70\">message\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">) \u003c\\/span>\u003cspan style=\"color:#F97583\">=>\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> {\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">  return\u003c\\/span>\u003cspan style=\"color:#9ECBFF\"> `${\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">message\u003c\\/span>\u003cspan style=\"color:#9ECBFF\">.\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">type\u003c\\/span>\u003cspan style=\"color:#9ECBFF\">}-${\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">Date\u003c\\/span>\u003cspan style=\"color:#9ECBFF\">.\u003c\\/span>\u003cspan style=\"color:#B392F0\">now\u003c\\/span>\u003cspan style=\"color:#9ECBFF\">()\u003c\\/span>\u003cspan style=\"color:#9ECBFF\">}-${\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">Math\u003c\\/span>\u003cspan style=\"color:#9ECBFF\">.\u003c\\/span>\u003cspan style=\"color:#B392F0\">random\u003c\\/span>\u003cspan style=\"color:#9ECBFF\">()\u003c\\/span>\u003cspan style=\"color:#9ECBFF\">}`\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">;\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">};\u003c\\/span>\u003c\\/span>\u003c\\/code>\u003c\\/pre>"},{"type":"html","html":"\u003ch2>Request\\/Response Flow\u003c\\/h2>\n\u003cp>Here is how a typical request flows through the system:\u003c\\/p>"},{"type":"code-block","language":"text","content":"HOST                                          WORKER\n────                                          ──────\n  │                                              │\n  │  1. Call worker.send('compute', data)        │\n  │                                              │\n  │  2. Generate transaction ID (tx: \"abc123\")   │\n  │                                              │\n  │  3. Create pending promise for tx            │\n  │                                              │\n  │  4. Serialize message                        │\n  │     { type: 'compute',                       │\n  │       payload: data,                         │\n  │       tx: 'abc123' }                         │\n  │                                              │\n  │  5. Send over socket ──────────────────────► │\n  │                                              │\n  │                        6. Deserialize message│\n  │                                              │\n  │                        7. Lookup handler for │\n  │                           type 'compute'     │\n  │                                              │\n  │                        8. Execute handler    │\n  │                           with payload       │\n  │                                              │\n  │                        9. Handler returns    │\n  │                           result payload     │\n  │                                              │\n  │                       10. Wrap result:       │\n  │                           { type: 'computeResult',\n  │                             payload: result, │\n  │                             tx: 'abc123' }   │\n  │                                              │\n  │ ◄──────────────────── 11. Send over socket   │\n  │                                              │\n  │ 12. Deserialize message                      │\n  │                                              │\n  │ 13. Match tx to pending promise              │\n  │                                              │\n  │ 14. Resolve promise with result              │\n  │                                              │\n  │ 15. Return result to caller                  │\n  │                                              │\n  ▼                                              ▼","highlightedHtml":"\u003cpre class=\"shiki github-dark\" style=\"background-color:#00000000;color:#e1e4e8\" tabindex=\"0\">\u003ccode>\u003cspan class=\"line\">\u003cspan>HOST                                          WORKER\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan>────                                          ──────\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan>  │                                              │\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan>  │  1. Call worker.send('compute', data)        │\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan>  │                                              │\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan>  │  2. Generate transaction ID (tx: \"abc123\")   │\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan>  │                                              │\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan>  │  3. Create pending promise for tx            │\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan>  │                                              │\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan>  │  4. Serialize message                        │\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan>  │     { type: 'compute',                       │\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan>  │       payload: data,                         │\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan>  │       tx: 'abc123' }                         │\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan>  │                                              │\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan>  │  5. Send over socket ──────────────────────► │\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan>  │                                              │\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan>  │                        6. Deserialize message│\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan>  │                                              │\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan>  │                        7. Lookup handler for │\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan>  │                           type 'compute'     │\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan>  │                                              │\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan>  │                        8. Execute handler    │\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan>  │                           with payload       │\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan>  │                                              │\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan>  │                        9. Handler returns    │\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan>  │                           result payload     │\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan>  │                                              │\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan>  │                       10. Wrap result:       │\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan>  │                           { type: 'computeResult',\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan>  │                             payload: result, │\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan>  │                             tx: 'abc123' }   │\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan>  │                                              │\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan>  │ ◄──────────────────── 11. Send over socket   │\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan>  │                                              │\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan>  │ 12. Deserialize message                      │\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan>  │                                              │\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan>  │ 13. Match tx to pending promise              │\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan>  │                                              │\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan>  │ 14. Resolve promise with result              │\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan>  │                                              │\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan>  │ 15. Return result to caller                  │\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan>  │                                              │\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan>  ▼                                              ▼\u003c\\/span>\u003c\\/span>\u003c\\/code>\u003c\\/pre>"},{"type":"html","html":"\u003ch3>Timeout Handling\u003c\\/h3>\n\u003cp>Each pending transaction has an associated timeout. If the worker does not respond within the timeout period:\u003c\\/p>\n\u003col>\n\u003cli>The pending promise is rejected with a timeout error\u003c\\/li>\n\u003cli>The transaction is removed from the pending map\u003c\\/li>\n\u003cli>The worker continues running (it may still process the request)\u003c\\/li>\n\u003c\\/ol>\n\u003cp>This prevents indefinite hangs when workers become unresponsive.\u003c\\/p>\n\u003cp>The default timeout is 5 minutes.\u003c\\/p>\n\u003ch2>Server-Side Startup Data\u003c\\/h2>\n\u003cp>When a worker starts, it can receive startup data from the host to initialize its state. This is useful for passing configuration, database connections, or other initialization data:\u003c\\/p>"},{"type":"code-block","language":"typescript","content":"\\/\\/ Host side\nconst worker = await createWorker\u003cMessages>({\n  script: '.\\/worker.js',\n  startupData: {\n    config: { apiEndpoint: 'https:\\/\\/api.example.com' },\n    dbConnectionString: 'postgresql:\\/\\/localhost\\/mydb',\n  },\n});","highlightedHtml":"\u003cpre class=\"shiki github-dark\" style=\"background-color:#00000000;color:#e1e4e8\" tabindex=\"0\">\u003ccode>\u003cspan class=\"line\">\u003cspan style=\"color:#6A737D\">\\/\\/ Host side\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">const\u003c\\/span>\u003cspan style=\"color:#79B8FF\"> worker\u003c\\/span>\u003cspan style=\"color:#F97583\"> =\u003c\\/span>\u003cspan style=\"color:#F97583\"> await\u003c\\/span>\u003cspan style=\"color:#B392F0\"> \u003ca href=\"\\/isolated-workers\\/api\\/create-worker\" class=\"code-link\" title=\"View createWorker documentation\">createWorker\u003c\\/a>\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">&#x3C;\u003c\\/span>\u003cspan style=\"color:#B392F0\">Messages\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">>({\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  script: \u003c\\/span>\u003cspan style=\"color:#9ECBFF\">'.\\/worker.js'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">,\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  startupData: {\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">    config: { apiEndpoint: \u003c\\/span>\u003cspan style=\"color:#9ECBFF\">'https:\\/\\/api.example.com'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> },\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">    dbConnectionString: \u003c\\/span>\u003cspan style=\"color:#9ECBFF\">'postgresql:\\/\\/localhost\\/mydb'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">,\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  },\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">});\u003c\\/span>\u003c\\/span>\u003c\\/code>\u003c\\/pre>"},{"type":"code-block","language":"typescript","content":"\\/\\/ Worker side\nimport { startWorkerServer } from 'isolated-workers';\n\n\\/\\/ Access startup data via getStartupData()\nconst startupData = getStartupData\u003c{ config: { apiEndpoint: string } }>();\n\nconsole.log('Starting with config:', startupData.config.apiEndpoint);\n\nstartWorkerServer\u003cMessages>({\n  handlers: {\n    fetchData: async () => {\n      \\/\\/ Use configuration from startup data\n      const response = await fetch(startupData.config.apiEndpoint);\n      return response.json();\n    },\n  },\n});","highlightedHtml":"\u003cpre class=\"shiki github-dark\" style=\"background-color:#00000000;color:#e1e4e8\" tabindex=\"0\">\u003ccode>\u003cspan class=\"line\">\u003cspan style=\"color:#6A737D\">\\/\\/ Worker side\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">import\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> { \u003ca href=\"\\/isolated-workers\\/api\\/start-worker-server\" class=\"code-link\" title=\"View startWorkerServer documentation\">startWorkerServer\u003c\\/a> } \u003c\\/span>\u003cspan style=\"color:#F97583\">from\u003c\\/span>\u003cspan style=\"color:#9ECBFF\"> 'isolated-workers'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">;\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#6A737D\">\\/\\/ Access startup data via getStartupData()\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">const\u003c\\/span>\u003cspan style=\"color:#79B8FF\"> startupData\u003c\\/span>\u003cspan style=\"color:#F97583\"> =\u003c\\/span>\u003cspan style=\"color:#B392F0\"> getStartupData\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">&#x3C;{ \u003c\\/span>\u003cspan style=\"color:#FFAB70\">config\u003c\\/span>\u003cspan style=\"color:#F97583\">:\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> { \u003c\\/span>\u003cspan style=\"color:#FFAB70\">apiEndpoint\u003c\\/span>\u003cspan style=\"color:#F97583\">:\u003c\\/span>\u003cspan style=\"color:#79B8FF\"> string\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> } }>();\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">console.\u003c\\/span>\u003cspan style=\"color:#B392F0\">log\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">(\u003c\\/span>\u003cspan style=\"color:#9ECBFF\">'Starting with config:'\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">, startupData.config.apiEndpoint);\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#B392F0\">\u003ca href=\"\\/isolated-workers\\/api\\/start-worker-server\" class=\"code-link\" title=\"View startWorkerServer documentation\">startWorkerServer\u003c\\/a>\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">&#x3C;\u003c\\/span>\u003cspan style=\"color:#B392F0\">Messages\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">>({\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  handlers: {\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#B392F0\">    fetchData\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">: \u003c\\/span>\u003cspan style=\"color:#F97583\">async\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> () \u003c\\/span>\u003cspan style=\"color:#F97583\">=>\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> {\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#6A737D\">      \\/\\/ Use configuration from startup data\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">      const\u003c\\/span>\u003cspan style=\"color:#79B8FF\"> response\u003c\\/span>\u003cspan style=\"color:#F97583\"> =\u003c\\/span>\u003cspan style=\"color:#F97583\"> await\u003c\\/span>\u003cspan style=\"color:#B392F0\"> fetch\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">(startupData.config.apiEndpoint);\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#F97583\">      return\u003c\\/span>\u003cspan style=\"color:#E1E4E8\"> response.\u003c\\/span>\u003cspan style=\"color:#B392F0\">json\u003c\\/span>\u003cspan style=\"color:#E1E4E8\">();\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">    },\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">  },\u003c\\/span>\u003c\\/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#E1E4E8\">});\u003c\\/span>\u003c\\/span>\u003c\\/code>\u003c\\/pre>"},{"type":"html","html":"\u003cp>\u003cstrong>Key points about startup data\u003c\\/strong>:\u003c\\/p>\n\u003cul>\n\u003cli>Sent during the initial handshake, before any messages\u003c\\/li>\n\u003cli>Available immediately when the worker server starts\u003c\\/li>\n\u003cli>Serialized and deserialized like regular messages\u003c\\/li>\n\u003cli>Useful for one-time initialization that doesn't need to be in every message\u003c\\/li>\n\u003c\\/ul>\n\u003ch2>Key Terminology\u003c\\/h2>\n\u003ch3>Host\u003c\\/h3>\n\u003cp>The main Node.js process that spawns and manages workers. The host sends requests to workers and receives results.\u003c\\/p>\n\u003ch3>Worker\u003c\\/h3>\n\u003cp>A child Node.js process spawned by the host. Workers register handlers for message types and process incoming requests independently.\u003c\\/p>\n\u003ch3>Handler\u003c\\/h3>\n\u003cp>A function in the worker that processes a specific message type. Handlers receive the message payload and return a result payload (or nothing for fire-and-forget messages).\u003c\\/p>\n\u003ch3>Payload\u003c\\/h3>\n\u003cp>The data portion of a message. Request payloads are sent from host to worker; result payloads are returned from worker to host.\u003c\\/p>\n\u003ch3>Result\u003c\\/h3>\n\u003cp>The response data returned by a handler. Results are automatically wrapped in a result message and sent back to the host.\u003c\\/p>\n\u003ch3>Transaction ID (tx)\u003c\\/h3>\n\u003cp>A unique identifier linking a request to its response. Generated for each send operation and included in both the request and response messages.\u003c\\/p>\n\u003ch3>Message Type\u003c\\/h3>\n\u003cp>The string identifier for a category of messages (e.g., 'compute', 'load', 'shutdown'). Each message type has a corresponding handler in the worker.\u003c\\/p>\n\u003ch3>Socket\u003c\\/h3>\n\u003cp>The communication channel between host and worker. Uses Unix domain sockets on Unix-like systems and named pipes on Windows.\u003c\\/p>\n\u003ch3>Middleware\u003c\\/h3>\n\u003cp>An optional function that can intercept and transform messages in either direction (sending or receiving). Useful for logging, validation, or adding metadata.\u003c\\/p>\n\u003ch3>Serializer\u003c\\/h3>\n\u003cp>The component responsible for converting messages to a transmittable format (and back). Default is JSON, but can be customized for binary formats or compression.\u003c\\/p>\n\u003ch3>Lifecycle\u003c\\/h3>\n\u003cp>The stages a worker goes through: spawn (create process), connect (establish socket), message (exchange data), and shutdown (cleanup and exit).\u003c\\/p>\n\u003ch2>Next Steps\u003c\\/h2>\n\u003cp>Now that you understand the core concepts, explore:\u003c\\/p>\n\u003cul>\n\u003cli>\u003ca href=\"\\/isolated-workers\\/docs\\/concepts\\/why-isolated-workers\">Why isolated-workers?\u003c\\/a> - When and why to use this library\u003c\\/li>\n\u003cli>\u003ca href=\"\\/isolated-workers\\/docs\\/getting-started\">Getting Started\u003c\\/a> - Create your first worker\u003c\\/li>\n\u003cli>\u003ca href=\"\\/isolated-workers\\/docs\\/guides\">Guides\u003c\\/a> - Deep dives into specific topics\u003c\\/li>\n\u003cli>\u003ca href=\"\\/isolated-workers\\/examples\">Examples\u003c\\/a> - Working code examples\u003c\\/li>\n\u003c\\/ul>"}]}}</script>
        <script id="vike_globalContext" type="application/json">{"navigation":[{"title":"Getting Started","children":[{"title":"Installation","path":"\\/docs\\/getting-started\\/installation","order":0},{"title":"Quick Start","path":"\\/docs\\/getting-started\\/quick-start","order":2},{"title":"Building Your First Worker","path":"\\/docs\\/getting-started\\/first-worker","order":3}],"order":0,"path":"\\/docs\\/getting-started"},{"title":"Concepts","children":[{"title":"Why isolated-workers?","path":"\\/docs\\/concepts\\/why-isolated-workers","order":1},{"title":"Drivers","path":"\\/docs\\/concepts\\/drivers","order":3}],"order":10,"path":"\\/docs\\/concepts"},{"title":"Guides","children":[{"title":"Error Handling","path":"\\/docs\\/guides\\/error-handling","order":1},{"title":"Middleware","path":"\\/docs\\/guides\\/middleware","order":2},{"title":"Timeout Configuration","path":"\\/docs\\/guides\\/timeout-configuration","order":3},{"title":"Custom Serializers","path":"\\/docs\\/guides\\/custom-serializers","order":4},{"title":"Worker Lifecycle","path":"\\/docs\\/guides\\/worker-lifecycle","order":5},{"title":"TypeScript Deep Dive","path":"\\/docs\\/guides\\/typescript","order":6},{"title":"Troubleshooting","path":"\\/docs\\/guides\\/troubleshooting","order":7},{"title":"Testing Workers","path":"\\/docs\\/guides\\/testing","order":8},{"title":"Security Considerations","path":"\\/docs\\/guides\\/security","order":9}],"order":20,"path":"\\/docs\\/guides"},{"title":"Examples","path":"\\/examples","children":[{"title":"Basic Ping-Pong Worker","path":"\\/examples\\/basic-ping"},{"title":"Custom Serializer","path":"\\/examples\\/custom-serializer"},{"title":"Error Handling","path":"\\/examples\\/error-handling"},{"title":"Middleware Pipeline","path":"\\/examples\\/middleware"},{"title":"Timeout Configuration","path":"\\/examples\\/timeout-config"},{"title":"Unexpected Worker Shutdown Handling","path":"\\/examples\\/shutdown-handling"},{"title":"Worker Lifecycle Management","path":"\\/examples\\/worker-lifecycle"},{"title":"Worker Threads Driver","path":"\\/examples\\/worker-threads-driver"}],"order":100},{"title":"API Reference","path":"\\/api","children":[{"title":"Configuration","path":"\\/api#configuration","children":[{"title":"Handlers","path":"\\/api\\/handlers"},{"title":"Middleware","path":"\\/api\\/middleware"}]},{"title":"Core","path":"\\/api#core","children":[{"title":"createWorker","path":"\\/api\\/create-worker"},{"title":"startWorkerServer","path":"\\/api\\/start-worker-server"}]},{"title":"Drivers","path":"\\/api#drivers","children":[{"title":"ChildProcessCapabilities","path":"\\/api\\/child-process-capabilities"},{"title":"Driver","path":"\\/api\\/driver"},{"title":"DriverCapabilities","path":"\\/api\\/driver-capabilities"},{"title":"WorkerThreadsCapabilities","path":"\\/api\\/worker-threads-capabilities"}]},{"title":"Other","path":"\\/api#other","children":[{"title":"AllMessages","path":"\\/api\\/all-messages"},{"title":"AllResults","path":"\\/api\\/all-results"},{"title":"AnyMessage","path":"\\/api\\/any-message"},{"title":"BaseMessage","path":"\\/api\\/base-message"},{"title":"BuiltInTimeoutKey","path":"\\/api\\/built-in-timeout-key"},{"title":"ChildProcessChannel","path":"\\/api\\/child-process-channel"},{"title":"ChildProcessDriver","path":"\\/api\\/child-process-driver"},{"title":"ChildProcessDriverOptions","path":"\\/api\\/child-process-driver-options"},{"title":"ChildProcessDriverOptions","path":"\\/api\\/child-process-driver-options"},{"title":"ChildProcessDriverType","path":"\\/api\\/child-process-driver-type"},{"title":"ChildProcessServerChannel","path":"\\/api\\/child-process-server-channel"},{"title":"ChildProcessStartupData","path":"\\/api\\/child-process-startup-data"},{"title":"Connection","path":"\\/api\\/connection"},{"title":"ConnectionOptions","path":"\\/api\\/connection-options"},{"title":"createServer","path":"\\/api\\/create-server"},{"title":"createServer","path":"\\/api\\/create-server"},{"title":"DEFAULT_SERVER_CONNECT_TIMEOUT","path":"\\/api\\/default-server-connect-timeout"},{"title":"defaultLogger","path":"\\/api\\/default-logger"},{"title":"DetachCapability","path":"\\/api\\/detach-capability"},{"title":"DriverChannel","path":"\\/api\\/driver-channel"},{"title":"DriverMessage","path":"\\/api\\/driver-message"},{"title":"DriverOptionsFor","path":"\\/api\\/driver-options-for"},{"title":"encodeStartupData","path":"\\/api\\/encode-startup-data"},{"title":"Logger","path":"\\/api\\/logger"},{"title":"LogLevel","path":"\\/api\\/log-level"},{"title":"MaybePromise","path":"\\/api\\/maybe-promise"},{"title":"MessageDef","path":"\\/api\\/message-def"},{"title":"MessageDefs","path":"\\/api\\/message-defs"},{"title":"MessageHandler","path":"\\/api\\/message-handler"},{"title":"MessageOf","path":"\\/api\\/message-of"},{"title":"MessageResult","path":"\\/api\\/message-result"},{"title":"MessageType","path":"\\/api\\/message-type"},{"title":"MiddlewareContext","path":"\\/api\\/middleware-context"},{"title":"MiddlewareDirection","path":"\\/api\\/middleware-direction"},{"title":"PayloadOf","path":"\\/api\\/payload-of"},{"title":"ReconnectCapability","path":"\\/api\\/reconnect-capability"},{"title":"ResponseFunction","path":"\\/api\\/response-function"},{"title":"ResponseFunction","path":"\\/api\\/response-function"},{"title":"ResultOf","path":"\\/api\\/result-of"},{"title":"ResultPayloadOf","path":"\\/api\\/result-payload-of"},{"title":"ServerChannel","path":"\\/api\\/server-channel"},{"title":"ServerDriver","path":"\\/api\\/server-driver"},{"title":"ServerOptions","path":"\\/api\\/server-options"},{"title":"ShutdownReason","path":"\\/api\\/shutdown-reason"},{"title":"spawnWorker","path":"\\/api\\/spawn-worker"},{"title":"spawnWorker","path":"\\/api\\/spawn-worker"},{"title":"STARTUP_DATA_ENV_KEY","path":"\\/api\\/startup-data-env-key"},{"title":"STARTUP_DATA_WORKER_KEY","path":"\\/api\\/startup-data-worker-key"},{"title":"TimeoutConfig","path":"\\/api\\/timeout-config"},{"title":"TransactionIdGenerator","path":"\\/api\\/transaction-id-generator"},{"title":"TypedMessage","path":"\\/api\\/typed-message"},{"title":"TypedResult","path":"\\/api\\/typed-result"},{"title":"UnexpectedShutdownConfig","path":"\\/api\\/unexpected-shutdown-config"},{"title":"UnexpectedShutdownStrategy","path":"\\/api\\/unexpected-shutdown-strategy"},{"title":"WorkerClient","path":"\\/api\\/worker-client"},{"title":"WorkerCrashedError","path":"\\/api\\/worker-crashed-error"},{"title":"WorkerHandler","path":"\\/api\\/worker-handler"},{"title":"WorkerHandlers","path":"\\/api\\/worker-handlers"},{"title":"WorkerOptions","path":"\\/api\\/worker-options"},{"title":"WorkerServer","path":"\\/api\\/worker-server"},{"title":"WorkerServerOptions","path":"\\/api\\/worker-server-options"},{"title":"WorkerThreadsChannel","path":"\\/api\\/worker-threads-channel"},{"title":"WorkerThreadsDriver","path":"\\/api\\/worker-threads-driver"},{"title":"WorkerThreadsDriverOptions","path":"\\/api\\/worker-threads-driver-options"},{"title":"WorkerThreadsDriverOptions","path":"\\/api\\/worker-threads-driver-options"},{"title":"WorkerThreadsDriverType","path":"\\/api\\/worker-threads-driver-type"},{"title":"WorkerThreadsResourceLimits","path":"\\/api\\/worker-threads-resource-limits"},{"title":"WorkerThreadsResourceLimits","path":"\\/api\\/worker-threads-resource-limits"},{"title":"WorkerThreadsServerChannel","path":"\\/api\\/worker-threads-server-channel"},{"title":"WorkerThreadsStartupData","path":"\\/api\\/worker-threads-startup-data"}]},{"title":"Serialization","path":"\\/api#serialization","children":[{"title":"JsonSerializer","path":"\\/api\\/json-serializer"},{"title":"Serializer","path":"\\/api\\/serializer"}]},{"title":"Types","path":"\\/api#types","children":[{"title":"DefineMessages","path":"\\/api\\/define-messages"},{"title":"WithResult","path":"\\/api\\/with-result"}]}],"order":200},{"title":"Configuration","children":[{"title":"Shutdown Handling","path":"\\/docs\\/guides\\/shutdown-handling","order":4}]},{"title":"Resources","children":[{"title":"FAQ","path":"\\/docs\\/faq","order":0},{"title":"Contributing","path":"\\/docs\\/contributing","order":1}]}],"examples":{"basic-ping":{"id":"basic-ping","path":"\\/home\\/runner\\/work\\/isolated-workers\\/isolated-workers\\/examples\\/basic-ping","title":"Basic Ping-Pong Worker","description":"A simple example demonstrating the basics of isolated-workers: spawning a worker process, sending messages, and receiving responses. This example shows the fundamental request\\/response pattern with type-safe message definitions.\n","entryPoint":"host.ts","fileMap":{"./messages.ts":"messages.ts","./host.ts":"host.ts","./worker.ts":"worker.ts"},"commands":[{"command":"pnpm run:basic-ping","title":"Run the example","assertions":[{"contains":"Worker spawned with PID"},{"contains":"Received response:"},{"contains":"Worker closed successfully"}]}],"hidden":false},"custom-serializer":{"id":"custom-serializer","path":"\\/home\\/runner\\/work\\/isolated-workers\\/isolated-workers\\/examples\\/custom-serializer","title":"Custom Serializer","description":"Shows how to implement and use a custom serializer for message encoding. This is useful for using binary formats like MessagePack, adding compression, or wrapping messages with metadata. Both host and worker must use the same serializer.\n","entryPoint":"host.ts","fileMap":{"./messages.ts":"messages.ts","./serializer.ts":"serializer.ts","./host.ts":"host.ts","./worker.ts":"worker.ts"},"commands":[{"command":"pnpm run:custom-serializer","title":"Run the example","assertions":[{"contains":"VerboseJsonSerializer"},{"contains":"[SERIALIZER] Message #"},{"contains":"HELLO, CUSTOM SERIALIZER!"},{"contains":"Worker closed successfully"}]}],"hidden":false},"error-handling":{"id":"error-handling","path":"\\/home\\/runner\\/work\\/isolated-workers\\/isolated-workers\\/examples\\/error-handling","title":"Error Handling","description":"Demonstrates how errors thrown in worker handlers propagate back to the host,\nincluding error messages and proper cleanup.\n","entryPoint":"host.ts","fileMap":{"./messages.ts":"messages.ts","./host.ts":"host.ts","./worker.ts":"worker.ts"},"commands":[{"command":"pnpm run:error-handling","title":"Run the example","assertions":[{"contains":"Test 1: 10 \\/ 2"},{"contains":"Result: 5"},{"contains":"Test 2: 10 \\/ 0 (should error)"},{"contains":"Division by zero"},{"contains":"All tests passed"}]}],"hidden":false},"image-processing":{"id":"image-processing","path":"\\/home\\/runner\\/work\\/isolated-workers\\/isolated-workers\\/examples\\/image-processing","title":"Image Processing Worker","description":"A complete example demonstrating how to build a production-ready worker\nfor CPU-intensive tasks like image processing. Shows type-safe messaging,\nper-operation timeouts, worker state, and batch processing.\n","entryPoint":"host.ts","fileMap":{"./messages.ts":"messages.ts","./host.ts":"host.ts","./worker.ts":"worker.ts"},"commands":[{"command":"pnpm run:image-processing","title":"Run the example","assertions":[{"contains":"Worker PID:"},{"contains":"Image metadata:"},{"contains":"Worker status:"},{"contains":"Batch result:"},{"contains":"Worker shut down gracefully"}]}],"hidden":true},"middleware":{"id":"middleware","path":"\\/home\\/runner\\/work\\/isolated-workers\\/isolated-workers\\/examples\\/middleware","title":"Middleware Pipeline","description":"Demonstrates how to use middleware to intercept and process messages. Middleware can log messages, add metadata, validate structure, or transform payloads. Both the host and worker can have their own middleware pipelines.\n","entryPoint":"host.ts","fileMap":{"./messages.ts":"messages.ts","./host.ts":"host.ts","./worker.ts":"worker.ts"},"commands":[{"command":"pnpm run:middleware","title":"Run the example","assertions":[{"contains":"[OUTGOING]"},{"contains":"[INCOMING]"},{"contains":"Hello, World!"},{"contains":"Worker closed successfully"}]}],"hidden":false},"readme-snippets":{"id":"readme-snippets","path":"\\/home\\/runner\\/work\\/isolated-workers\\/isolated-workers\\/examples\\/readme-snippets","title":"README Code Snippets","description":"Type-checked code snippets used in the package README.\nThis example is hidden from navigation.\n","entryPoint":"drivers.ts","fileMap":{"./drivers.ts":"drivers.ts","./api-overview.ts":"api-overview.ts"},"commands":"!undefined","hidden":true},"shutdown-handling":{"id":"shutdown-handling","path":"\\/home\\/runner\\/work\\/isolated-workers\\/isolated-workers\\/examples\\/shutdown-handling","title":"Unexpected Worker Shutdown Handling","description":"Demonstrates how to handle unexpected worker crashes with configurable\nretry strategies, per-message-type overrides, and detailed error context.\n","entryPoint":"host.ts","fileMap":{"./messages.ts":"messages.ts","./host.ts":"host.ts","./worker.ts":"worker.ts"},"commands":[{"command":"pnpm run:shutdown-handling","title":"Run the example","assertions":[{"contains":"Test 1: Normal operation"},{"contains":"Result: 25"},{"contains":"Test 2: Idempotent operation with crash - retry exhaustion"},{"contains":"WorkerCrashedError after retries"},{"contains":"Attempt: 3\\/3"},{"contains":"Test 3: Non-idempotent operation"},{"contains":"Attempt: 1\\/1"},{"contains":"No retries"},{"contains":"Test 4: Batch processing with retry exhaustion"},{"contains":"Test 5: Successful batch processing"},{"contains":"Processed batch of 3 items"}]}],"hidden":false},"timeout-config":{"id":"timeout-config","path":"\\/home\\/runner\\/work\\/isolated-workers\\/isolated-workers\\/examples\\/timeout-config","title":"Timeout Configuration","description":"Demonstrates the flexible timeout configuration system. You can set timeouts for worker startup, server connection, a default message timeout, and per-message-type timeouts for fine-grained control over long-running operations.\n","entryPoint":"host.ts","fileMap":{"./messages.ts":"messages.ts","./host.ts":"host.ts","./worker.ts":"worker.ts"},"commands":[{"command":"pnpm run:timeout-config","title":"Run the example","assertions":[{"contains":"Timeout configuration:"},{"contains":"Quick ping completed"},{"contains":"Slow process completed"},{"contains":"Worker closed successfully"}]}],"hidden":false},"worker-lifecycle":{"id":"worker-lifecycle","path":"\\/home\\/runner\\/work\\/isolated-workers\\/isolated-workers\\/examples\\/worker-lifecycle","title":"Worker Lifecycle Management","description":"Demonstrates worker lifecycle management including status checking (isActive, isConnected), state persistence across requests, and graceful shutdown. Shows how workers maintain state between messages and how to handle the worker after it's closed.\n","entryPoint":"host.ts","fileMap":{"./messages.ts":"messages.ts","./host.ts":"host.ts","./worker.ts":"worker.ts"},"commands":[{"command":"pnpm run:worker-lifecycle","title":"Run the example","assertions":[{"contains":"Worker Created"},{"contains":"isActive: true"},{"contains":"isConnected: true"},{"contains":"Request count:"},{"contains":"isActive: false"},{"contains":"Worker is not active"}]}],"hidden":false},"worker-threads-driver":{"id":"worker-threads-driver","path":"\\/home\\/runner\\/work\\/isolated-workers\\/isolated-workers\\/examples\\/worker-threads-driver","title":"Worker Threads Driver","description":"Use the worker_threads driver for in-process workers with shared memory support.\nWorker threads run in the same process as the host, enabling SharedArrayBuffer\nand lower overhead compared to child processes.\n","entryPoint":"host.ts","fileMap":"!undefined","commands":[{"command":"node --import tsx {filename}","title":"Run worker threads example","assertions":[{"contains":"Result:"},{"contains":"Worker threads driver"}]}],"hidden":false}}}</script>
        <script src="/isolated-workers/assets/entries/entry-client-routing.io56qHg_.js" type="module" async></script>
        <link rel="modulepreload" href="/isolated-workers/assets/entries/pages_docs.D3lD6bTo.js" as="script" type="text/javascript">
        <link rel="modulepreload" href="/isolated-workers/assets/chunks/chunk-CoIusrxJ.js" as="script" type="text/javascript">
        <link rel="modulepreload" href="/isolated-workers/assets/chunks/chunk-B01QXYmX.js" as="script" type="text/javascript">
        <link rel="modulepreload" href="/isolated-workers/assets/chunks/chunk-DApX3sgb.js" as="script" type="text/javascript">
        <link rel="modulepreload" href="/isolated-workers/assets/chunks/chunk-Dzd9oD5V.js" as="script" type="text/javascript">
        <link rel="modulepreload" href="/isolated-workers/assets/chunks/chunk-jQ2pk9iw.js" as="script" type="text/javascript">
        <link rel="modulepreload" href="/isolated-workers/assets/chunks/chunk-Y59L1pI7.js" as="script" type="text/javascript">
      </body>
    </html>