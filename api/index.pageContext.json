{"pageId":"/pages/api","routeParams":{},"data":{"type":"landing","api":{"modules":{"core":{"name":"core","slug":"core","path":"/api/core","exports":[{"name":"BuiltInTimeoutKey","slug":"built-in-timeout-key","path":"/api/built-in-timeout-key","module":"core","kind":"type","comment":{"summary":"Built-in timeout keys for worker lifecycle events"},"description":"Built-in timeout keys for worker lifecycle events","category":"!undefined","signature":"type BuiltInTimeoutKey = \"WORKER_STARTUP\" | \"WORKER_MESSAGE\" | \"SERVER_CONNECT\""},{"name":"ChildProcessCapabilities","slug":"child-process-capabilities","path":"/api/child-process-capabilities","module":"core","kind":"interface","comment":{"summary":"Capability type for child_process driver.\n\nChild process workers support reconnection and detaching,\nbut cannot use SharedArrayBuffer across the IPC boundary."},"description":"Capability type for child_process driver.\n\nChild process workers support reconnection and detaching,\nbut cannot use SharedArrayBuffer across the IPC boundary.","category":"Drivers","properties":[{"name":"detach","type":"true","description":"Worker can outlive parent process","optional":"!undefined","readonly":"!undefined"},{"name":"reconnect","type":"true","description":"Can disconnect/reconnect to running worker","optional":"!undefined","readonly":"!undefined"},{"name":"sharedMemory","type":"false","description":"Supports SharedArrayBuffer","optional":"!undefined","readonly":"!undefined"}],"signature":"interface ChildProcessCapabilities extends DriverCapabilities"},{"name":"ChildProcessChannel","slug":"child-process-channel","path":"/api/child-process-channel","module":"core","kind":"class","comment":{"summary":"Channel implementation for child process driver.\n\nWraps a Connection and ChildProcess, providing the DriverChannel interface\nwith optional reconnect and detach capabilities."},"description":"Channel implementation for child process driver.\n\nWraps a Connection and ChildProcess, providing the DriverChannel interface\nwith optional reconnect and detach capabilities.","category":"!undefined","methods":[{"name":"close","signature":"close(): Promise<void>","description":"Close the channel","parameters":"!undefined","returnType":"Promise<void>"},{"name":"disconnect","signature":"disconnect(): Promise<void>","description":"Disconnect from worker but keep process alive","parameters":"!undefined","returnType":"Promise<void>"},{"name":"onClose","signature":"onClose(handler: () => void): void","description":"Register a close handler","parameters":[{"name":"handler","type":"() => void","description":"!undefined","optional":"!undefined"}],"returnType":"void"},{"name":"onError","signature":"onError(handler: (error: Error) => void): void","description":"Register an error handler","parameters":[{"name":"handler","type":"(error: Error) => void","description":"!undefined","optional":"!undefined"}],"returnType":"void"},{"name":"onMessage","signature":"onMessage(handler: (message: DriverMessage) => void): void","description":"Register a message handler","parameters":[{"name":"handler","type":"(message: DriverMessage) => void","description":"!undefined","optional":"!undefined"}],"returnType":"void"},{"name":"onShutdown","signature":"onShutdown(handler: (reason: ShutdownReason) => void): void","description":"Register a shutdown handler","parameters":[{"name":"handler","type":"(reason: ShutdownReason) => void","description":"!undefined","optional":"!undefined"}],"returnType":"void"},{"name":"reconnect","signature":"reconnect(): Promise<void>","description":"Reconnect to existing worker","parameters":"!undefined","returnType":"Promise<void>"},{"name":"send","signature":"send(message: DriverMessage): Promise<void>","description":"Send a message through the channel","parameters":[{"name":"message","type":"DriverMessage","description":"!undefined","optional":"!undefined"}],"returnType":"Promise<void>"}],"signature":"class ChildProcessChannel"},{"name":"ChildProcessDriver","slug":"child-process-driver","path":"/api/child-process-driver","module":"core","kind":"variable","comment":{"summary":"Child process driver.\n\nUses child_process.fork() with Unix domain sockets for IPC.\nSupports disconnect/reconnect and detached workers.","examples":["import { ChildProcessDriver } from 'isolated-workers/drivers/child-process';\n\n// Host side: spawn a worker\nconst channel = await ChildProcessDriver.spawn('./worker.js', {\n  detached: false,\n  timeout: 10000,\n});\n\n// Worker side: create server\nconst server = await ChildProcessDriver.createServer();"]},"description":"Child process driver.\n\nUses child_process.fork() with Unix domain sockets for IPC.\nSupports disconnect/reconnect and detached workers.","category":"!undefined","signature":"type ChildProcessDriver = { detached: false; name: \"child_process\"; createServer: unknown; disconnect: unknown; getStartupData: unknown; reconnect: unknown; spawn: unknown } & { capabilities: InferCapabilities<{ detached: false; name: \"child_process\"; createServer: unknown; disconnect: unknown; getStartupData: unknown; reconnect: unknown; spawn: unknown }> }"},{"name":"ChildProcessDriverOptions","slug":"child-process-driver-options","path":"/api/child-process-driver-options","module":"core","kind":"variable","comment":"!undefined","description":"!undefined","category":"!undefined"},{"name":"ChildProcessDriverOptions","slug":"child-process-driver-options","path":"/api/child-process-driver-options","module":"core","kind":"interface","comment":{"summary":"Options for child process driver spawn"},"description":"Options for child process driver spawn","category":"!undefined","properties":[{"name":"detached","type":"boolean","description":"Whether to detach the worker process","optional":true,"readonly":"!undefined"},{"name":"env","type":"Record<string, string>","description":"Environment variables to pass to worker","optional":true,"readonly":"!undefined"},{"name":"logger","type":"Logger","description":"Custom logger instance","optional":true,"readonly":"!undefined"},{"name":"logLevel","type":"LogLevel","description":"Log level for driver operations","optional":true,"readonly":"!undefined"},{"name":"maxDelay","type":"number","description":"Maximum retry delay cap (default: 5000)","optional":true,"readonly":"!undefined"},{"name":"maxRetries","type":"number","description":"Maximum connection retry attempts (default: 5)","optional":true,"readonly":"!undefined"},{"name":"onShutdown","type":"(reason: ShutdownReason) => void","description":"Shutdown handler callback","optional":true,"readonly":"!undefined"},{"name":"retryDelay","type":"number","description":"Retry delay in ms (default: 100)","optional":true,"readonly":"!undefined"},{"name":"serializer","type":"Serializer","description":"Custom serializer (must match worker side)","optional":true,"readonly":"!undefined"},{"name":"serverConnectTimeout","type":"number","description":"Server connect timeout passed to worker (default: 30000)","optional":true,"readonly":"!undefined"},{"name":"socketPath","type":"string","description":"Override socket path (auto-generated if not provided)","optional":true,"readonly":"!undefined"},{"name":"spawnOptions","type":"SpawnOptions","description":"Additional spawn options","optional":true,"readonly":"!undefined"},{"name":"timeout","type":"number","description":"Connection timeout in ms (default: 10000)","optional":true,"readonly":"!undefined"}],"signature":"interface ChildProcessDriverOptions"},{"name":"ChildProcessDriverType","slug":"child-process-driver-type","path":"/api/child-process-driver-type","module":"core","kind":"type","comment":{"summary":"Type of the ChildProcessDriver"},"description":"Type of the ChildProcessDriver","category":"!undefined","signature":"type ChildProcessDriverType = typeof unknown"},{"name":"ChildProcessServerChannel","slug":"child-process-server-channel","path":"/api/child-process-server-channel","module":"core","kind":"class","comment":{"summary":"Child process server channel implementation.\n\nWraps a net.Server and provides the ServerChannel interface."},"description":"Child process server channel implementation.\n\nWraps a net.Server and provides the ServerChannel interface.","category":"!undefined","methods":[{"name":"onError","signature":"onError(handler: (error: Error) => void): void","description":"Register an error handler","parameters":[{"name":"handler","type":"(error: Error) => void","description":"!undefined","optional":"!undefined"}],"returnType":"void"},{"name":"onMessage","signature":"onMessage(handler: (message: DriverMessage, respond: ResponseFunction) => void): void","description":"Register a message handler","parameters":[{"name":"handler","type":"(message: DriverMessage, respond: ResponseFunction) => void","description":"!undefined","optional":"!undefined"}],"returnType":"void"},{"name":"start","signature":"start(hostConnectTimeout: number): Promise<void>","description":"Start listening for connections from the host","parameters":[{"name":"hostConnectTimeout","type":"number","description":"!undefined","optional":"!undefined"}],"returnType":"Promise<void>"},{"name":"stop","signature":"stop(): Promise<void>","description":"Stop the server and cleanup","parameters":"!undefined","returnType":"Promise<void>"}],"signature":"class ChildProcessServerChannel"},{"name":"ChildProcessStartupData","slug":"child-process-startup-data","path":"/api/child-process-startup-data","module":"core","kind":"interface","comment":{"summary":"Startup data specific to child_process driver.\n\nExtends the base StartupData with child_process-specific fields."},"description":"Startup data specific to child_process driver.\n\nExtends the base StartupData with child_process-specific fields.","category":"!undefined","properties":[{"name":"driver","type":"\"child_process\"","description":"Driver identifier - always 'child_process' for this driver","optional":"!undefined","readonly":"!undefined"},{"name":"socketPath","type":"string","description":"Socket path for IPC communication (required for child_process)","optional":"!undefined","readonly":"!undefined"}],"signature":"interface ChildProcessStartupData extends StartupData"},{"name":"Connection","slug":"connection","path":"/api/connection","module":"core","kind":"interface","comment":{"summary":"Active connection interface"},"description":"Active connection interface","category":"!undefined","properties":[{"name":"isConnected","type":"boolean","description":"Whether the connection is active","optional":"!undefined","readonly":"!undefined"},{"name":"socket","type":"Socket","description":"Underlying socket","optional":"!undefined","readonly":"!undefined"}],"methods":[{"name":"close","signature":"close(): Promise<void>","description":"Close the connection","parameters":"!undefined","returnType":"Promise<void>"},{"name":"onClose","signature":"onClose(handler: () => void): void","description":"Register a close handler","parameters":[{"name":"handler","type":"() => void","description":"!undefined","optional":"!undefined"}],"returnType":"void"},{"name":"onError","signature":"onError(handler: (error: Error) => void): void","description":"Register an error handler","parameters":[{"name":"handler","type":"(error: Error) => void","description":"!undefined","optional":"!undefined"}],"returnType":"void"},{"name":"onMessage","signature":"onMessage(handler: (message: TypedResult) => void): void","description":"Register a message handler","parameters":[{"name":"handler","type":"(message: TypedResult) => void","description":"!undefined","optional":"!undefined"}],"returnType":"void"},{"name":"send","signature":"send(message: TypedMessage<T>): Promise<void>","description":"Send a message through the connection","parameters":[{"name":"message","type":"TypedMessage<T>","description":"!undefined","optional":"!undefined"}],"returnType":"Promise<void>"}],"signature":"interface Connection"},{"name":"ConnectionOptions","slug":"connection-options","path":"/api/connection-options","module":"core","kind":"interface","comment":{"summary":"Connection options"},"description":"Connection options","category":"!undefined","properties":[{"name":"logger","type":"Logger","description":"Custom logger","optional":true,"readonly":"!undefined"},{"name":"maxDelay","type":"number","description":"Maximum delay cap in ms (default: 5000)","optional":true,"readonly":"!undefined"},{"name":"maxRetries","type":"number","description":"Maximum number of retry attempts (default: 5)","optional":true,"readonly":"!undefined"},{"name":"middleware","type":"Middleware<TDefs>[]","description":"Per-instance middleware pipeline","optional":true,"readonly":"!undefined"},{"name":"reconnect","type":"boolean","description":"Whether to enable reconnection (default: false)","optional":true,"readonly":"!undefined"},{"name":"retryDelay","type":"number | (attempt: number) => number","description":"Base delay in ms between retries, or custom delay function (default: 100)","optional":true,"readonly":"!undefined"},{"name":"serializer","type":"Serializer","description":"Custom serializer","optional":true,"readonly":"!undefined"},{"name":"socketPath","type":"string","description":"Socket path to connect to","optional":"!undefined","readonly":"!undefined"},{"name":"timeout","type":"number","description":"Connection timeout in ms (default: 10000)","optional":true,"readonly":"!undefined"}],"signature":"interface ConnectionOptions<TDefs>"},{"name":"createServer","slug":"create-server","path":"/api/create-server","module":"core","kind":"function","comment":{"summary":"Create a child process server for worker-side communication.\n\nThis function takes startup data to determine the socket path and configuration,\nthen creates a server listening for host connections.","examples":["import { getStartupData } from '../startup.js';\nimport { createServer } from './child-process/server.js';\n\nconst startupData = getStartupData();\nconst server = await createServer(startupData);\n\nserver.onMessage(async (message, respond) => {\n  console.log('Received:', message);\n  await respond({\n    tx: message.tx,\n    type: message.type,\n    payload: { result: 'ok' },\n  });\n});"]},"description":"Create a child process server for worker-side communication.\n\nThis function takes startup data to determine the socket path and configuration,\nthen creates a server listening for host connections.","category":"!undefined","parameters":[{"name":"startupData","type":"ChildProcessStartupData","description":"Startup data from the host process","optional":"!undefined","defaultValue":"!undefined"},{"name":"options","type":"ServerOptions","description":"Server options (overrides startup data if provided)","optional":"!undefined","defaultValue":"{}"}],"returnType":"Promise<ChildProcessServerChannel>","signature":"function createServer(startupData: ChildProcessStartupData, options: ServerOptions): Promise<ChildProcessServerChannel>"},{"name":"createServer","slug":"create-server","path":"/api/create-server","module":"core","kind":"function","comment":{"summary":"Create a worker threads server for worker-side communication.\n\nThis function uses parentPort from worker_threads to establish\ncommunication with the host process.","examples":["import { WorkerThreadsDriver } from 'isolated-workers/drivers/worker-threads';\n\nconst startupData = WorkerThreadsDriver.getStartupData();\nconst server = createServer(startupData);\n\nserver.onMessage(async (message, respond) => {\n  console.log('Received:', message);\n  await respond({\n    tx: message.tx,\n    type: message.type,\n    payload: { result: 'ok' },\n  });\n});\n\nserver.start();"]},"description":"Create a worker threads server for worker-side communication.\n\nThis function uses parentPort from worker_threads to establish\ncommunication with the host process.","category":"!undefined","parameters":[{"name":"startupData","type":"WorkerThreadsStartupData","description":"Startup data from the host process","optional":"!undefined","defaultValue":"!undefined"},{"name":"options","type":"ServerOptions","description":"Server options","optional":"!undefined","defaultValue":"{}"}],"returnType":"Promise<WorkerThreadsServerChannel>","signature":"function createServer(startupData: WorkerThreadsStartupData, options: ServerOptions): Promise<WorkerThreadsServerChannel>"},{"name":"createWorker","slug":"create-worker","path":"/api/create-worker","module":"core","kind":"function","comment":{"summary":"Create a worker process with type-safe messaging.\n\nBy default, uses the child_process driver which spawns a separate Node.js process\nand communicates via Unix domain sockets (or named pipes on Windows).\n\nYou can pass a different driver for alternative backends:\n- `WorkerThreadsDriver`: Uses worker_threads with MessagePort (shared memory capable)","examples":["const worker = await createWorker<MyMessages>({\n  script: './worker.js',\n});","import { WorkerThreadsDriver } from 'isolated-workers/drivers/worker-threads';\n\nconst worker = await createWorker<MyMessages>({\n  script: './worker.js',\n  driver: new WorkerThreadsDriver(),\n});"]},"description":"Create a worker process with type-safe messaging.\n\nBy default, uses the child_process driver which spawns a separate Node.js process\nand communicates via Unix domain sockets (or named pipes on Windows).\n\nYou can pass a different driver for alternative backends:\n- `WorkerThreadsDriver`: Uses worker_threads with MessagePort (shared memory capable)","category":"Core","parameters":[{"name":"options","type":"WorkerOptions<TMessages, TDriver>","description":"Worker options including script path and optional driver","optional":"!undefined","defaultValue":"!undefined"}],"returnType":"Promise<WorkerClient<TMessages, TDriver extends Driver<C, unknown> ? C : DriverCapabilities>>","signature":"function createWorker(options: WorkerOptions<TMessages, TDriver>): Promise<WorkerClient<TMessages, TDriver extends Driver<C, unknown> ? C : DriverCapabilities>>"},{"name":"DEFAULT_SERVER_CONNECT_TIMEOUT","slug":"default-server-connect-timeout","path":"/api/default-server-connect-timeout","module":"core","kind":"variable","comment":{"summary":"Default server connect timeout (30 seconds)"},"description":"Default server connect timeout (30 seconds)","category":"!undefined","signature":"type DEFAULT_SERVER_CONNECT_TIMEOUT = 30000"},{"name":"DetachCapability","slug":"detach-capability","path":"/api/detach-capability","module":"core","kind":"interface","comment":{"summary":"Detach capability mixin.\n\nChannels that support detaching expose this to indicate\nwhether the worker is running detached from the parent."},"description":"Detach capability mixin.\n\nChannels that support detaching expose this to indicate\nwhether the worker is running detached from the parent.","category":"!undefined","properties":[{"name":"detached","type":"boolean","description":"Whether the worker is detached","optional":"!undefined","readonly":true}],"signature":"interface DetachCapability"},{"name":"Driver","slug":"driver","path":"/api/driver","module":"core","kind":"interface","comment":{"summary":"Driver interface for spawning workers.\n\nDrivers implement this interface to provide different worker\ncommunication backends.","examples":["const childProcessDriver: Driver<ChildProcessCapabilities, ChildProcessOptions> = {\n  name: 'child_process',\n  capabilities: { reconnect: true, detach: true, sharedMemory: false },\n  spawn: async (script, options) => { ... }\n};"]},"description":"Driver interface for spawning workers.\n\nDrivers implement this interface to provide different worker\ncommunication backends.","category":"Drivers","properties":[{"name":"capabilities","type":"TCapabilities","description":"Driver capabilities","optional":"!undefined","readonly":true},{"name":"name","type":"string","description":"Driver identifier","optional":"!undefined","readonly":true}],"methods":[{"name":"spawn","signature":"spawn(script: string, options: TOptions): Promise<DriverChannel>","description":"Spawn a worker and return communication channel","parameters":[{"name":"script","type":"string","description":"!undefined","optional":"!undefined"},{"name":"options","type":"TOptions","description":"!undefined","optional":"!undefined"}],"returnType":"Promise<DriverChannel>"}],"signature":"interface Driver<TCapabilities, TOptions>"},{"name":"DriverCapabilities","slug":"driver-capabilities","path":"/api/driver-capabilities","module":"core","kind":"interface","comment":{"summary":"Driver capability flags.\n\nThese flags indicate what features a driver supports,\nallowing higher-level code to make decisions based on\navailable capabilities."},"description":"Driver capability flags.\n\nThese flags indicate what features a driver supports,\nallowing higher-level code to make decisions based on\navailable capabilities.","category":"Drivers","properties":[{"name":"detach","type":"boolean","description":"Worker can outlive parent process","optional":"!undefined","readonly":"!undefined"},{"name":"reconnect","type":"boolean","description":"Can disconnect/reconnect to running worker","optional":"!undefined","readonly":"!undefined"},{"name":"sharedMemory","type":"boolean","description":"Supports SharedArrayBuffer","optional":"!undefined","readonly":"!undefined"}],"signature":"interface DriverCapabilities"},{"name":"DriverChannel","slug":"driver-channel","path":"/api/driver-channel","module":"core","kind":"interface","comment":{"summary":"Communication channel returned by driver spawn.\n\nThe channel provides a unified interface for sending messages,\nhandling events, and managing the connection lifecycle."},"description":"Communication channel returned by driver spawn.\n\nThe channel provides a unified interface for sending messages,\nhandling events, and managing the connection lifecycle.","category":"!undefined","properties":[{"name":"isConnected","type":"boolean","description":"Whether the channel is connected","optional":"!undefined","readonly":true},{"name":"pid","type":"number","description":"Process ID (undefined for worker_threads)","optional":"!undefined","readonly":true}],"methods":[{"name":"close","signature":"close(): Promise<void>","description":"Close the channel","parameters":"!undefined","returnType":"Promise<void>"},{"name":"onClose","signature":"onClose(handler: () => void): void","description":"Register a close handler","parameters":[{"name":"handler","type":"() => void","description":"!undefined","optional":"!undefined"}],"returnType":"void"},{"name":"onError","signature":"onError(handler: (error: Error) => void): void","description":"Register an error handler","parameters":[{"name":"handler","type":"(error: Error) => void","description":"!undefined","optional":"!undefined"}],"returnType":"void"},{"name":"onMessage","signature":"onMessage(handler: (message: DriverMessage) => void): void","description":"Register a message handler","parameters":[{"name":"handler","type":"(message: DriverMessage) => void","description":"!undefined","optional":"!undefined"}],"returnType":"void"},{"name":"onShutdown","signature":"onShutdown(handler: (reason: ShutdownReason) => void): void","description":"Register a shutdown handler","parameters":[{"name":"handler","type":"(reason: ShutdownReason) => void","description":"!undefined","optional":"!undefined"}],"returnType":"void"},{"name":"send","signature":"send(message: DriverMessage): Promise<void>","description":"Send a message through the channel","parameters":[{"name":"message","type":"DriverMessage","description":"!undefined","optional":"!undefined"}],"returnType":"Promise<void>"}],"signature":"interface DriverChannel"},{"name":"DriverMessage","slug":"driver-message","path":"/api/driver-message","module":"core","kind":"interface","comment":{"summary":"Message structure for driver communication.\n\nAll messages sent through the driver layer follow this structure,\nenabling type-safe messaging with transaction tracking."},"description":"Message structure for driver communication.\n\nAll messages sent through the driver layer follow this structure,\nenabling type-safe messaging with transaction tracking.","category":"!undefined","properties":[{"name":"payload","type":"unknown","description":"Message payload data","optional":"!undefined","readonly":"!undefined"},{"name":"tx","type":"string","description":"Transaction ID for request/response correlation","optional":"!undefined","readonly":"!undefined"},{"name":"type","type":"string","description":"Message type identifier","optional":"!undefined","readonly":"!undefined"}],"signature":"interface DriverMessage"},{"name":"DriverOptionsFor","slug":"driver-options-for","path":"/api/driver-options-for","module":"core","kind":"type","comment":{"summary":"Driver-specific options mapping"},"description":"Driver-specific options mapping","category":"!undefined","signature":"type DriverOptionsFor = TDriver extends Driver<ChildProcessCapabilities> ? ChildProcessDriverOptions : TDriver extends Driver<WorkerThreadsCapabilities> ? WorkerThreadsDriverOptions : Record<string, unknown>"},{"name":"encodeStartupData","slug":"encode-startup-data","path":"/api/encode-startup-data","module":"core","kind":"function","comment":{"summary":"Encode startup data for passing to child_process via environment variable."},"description":"Encode startup data for passing to child_process via environment variable.","category":"!undefined","parameters":[{"name":"data","type":"StartupData","description":"The startup data to encode","optional":"!undefined","defaultValue":"!undefined"}],"returnType":"string","signature":"function encodeStartupData(data: StartupData): string"},{"name":"MessageHandler","slug":"message-handler","path":"/api/message-handler","module":"core","kind":"type","comment":{"summary":"Handler function type for message processing"},"description":"Handler function type for message processing","category":"!undefined","signature":"type MessageHandler = (payload: unknown) => unknown | Promise<unknown>"},{"name":"MiddlewareContext","slug":"middleware-context","path":"/api/middleware-context","module":"core","kind":"interface","comment":{"summary":"Context passed to middleware functions","deprecated":"Use Middleware<TDefs> from types instead"},"description":"Context passed to middleware functions","category":"!undefined","properties":[{"name":"direction","type":"MiddlewareDirection","description":"Direction of message flow","optional":"!undefined","readonly":"!undefined"},{"name":"message","type":"unknown","description":"The message being sent or received","optional":"!undefined","readonly":"!undefined"}],"signature":"interface MiddlewareContext"},{"name":"MiddlewareDirection","slug":"middleware-direction","path":"/api/middleware-direction","module":"core","kind":"type","comment":{"summary":"Direction for middleware context","deprecated":"Use 'incoming' | 'outgoing' directly"},"description":"Direction for middleware context","category":"!undefined","signature":"type MiddlewareDirection = \"send\" | \"receive\""},{"name":"ReconnectCapability","slug":"reconnect-capability","path":"/api/reconnect-capability","module":"core","kind":"interface","comment":{"summary":"Reconnect capability mixin.\n\nChannels that support reconnection implement this interface\nto allow disconnecting while keeping the worker alive."},"description":"Reconnect capability mixin.\n\nChannels that support reconnection implement this interface\nto allow disconnecting while keeping the worker alive.","category":"!undefined","methods":[{"name":"disconnect","signature":"disconnect(): Promise<void>","description":"Disconnect from worker but keep process alive","parameters":"!undefined","returnType":"Promise<void>"},{"name":"reconnect","signature":"reconnect(): Promise<void>","description":"Reconnect to existing worker","parameters":"!undefined","returnType":"Promise<void>"}],"signature":"interface ReconnectCapability"},{"name":"ResponseFunction","slug":"response-function","path":"/api/response-function","module":"core","kind":"type","comment":{"summary":"Function to send a response back to the host"},"description":"Function to send a response back to the host","category":"!undefined","signature":"type ResponseFunction = (response: DriverMessage) => Promise<void>"},{"name":"ResponseFunction","slug":"response-function","path":"/api/response-function","module":"core","kind":"type","comment":{"summary":"Function to send a response back to the host"},"description":"Function to send a response back to the host","category":"!undefined","signature":"type ResponseFunction = (response: DriverMessage) => Promise<void>"},{"name":"ServerChannel","slug":"server-channel","path":"/api/server-channel","module":"core","kind":"interface","comment":{"summary":"Server channel interface for worker-side communication."},"description":"Server channel interface for worker-side communication.","category":"!undefined","properties":[{"name":"isRunning","type":"boolean","description":"Whether the server is running","optional":"!undefined","readonly":true},{"name":"socketPath","type":"string","description":"Socket path the server is listening on (empty for worker_threads)","optional":"!undefined","readonly":true}],"methods":[{"name":"onError","signature":"onError(handler: (error: Error) => void): void","description":"Register an error handler","parameters":[{"name":"handler","type":"(error: Error) => void","description":"!undefined","optional":"!undefined"}],"returnType":"void"},{"name":"onMessage","signature":"onMessage(handler: (message: DriverMessage, respond: (response: DriverMessage) => Promise<void>) => void): void","description":"Register a message handler","parameters":[{"name":"handler","type":"(message: DriverMessage, respond: (response: DriverMessage) => Promise<void>) => void","description":"!undefined","optional":"!undefined"}],"returnType":"void"},{"name":"stop","signature":"stop(): Promise<void>","description":"Stop the server and cleanup","parameters":"!undefined","returnType":"Promise<void>"}],"signature":"interface ServerChannel"},{"name":"ServerDriver","slug":"server-driver","path":"/api/server-driver","module":"core","kind":"interface","comment":{"summary":"Driver interface for server-side usage.\n\nThis is a minimal interface that drivers must satisfy for use with\nstartWorkerServer. Both ChildProcessDriver and WorkerThreadsDriver\nsatisfy this interface."},"description":"Driver interface for server-side usage.\n\nThis is a minimal interface that drivers must satisfy for use with\nstartWorkerServer. Both ChildProcessDriver and WorkerThreadsDriver\nsatisfy this interface.","category":"!undefined","properties":[{"name":"name","type":"string","description":"Driver identifier","optional":"!undefined","readonly":true}],"methods":[{"name":"createServer","signature":"createServer(options: ServerOptions): ServerChannel | Promise<ServerChannel>","description":"Create server channel","parameters":[{"name":"options","type":"ServerOptions","description":"!undefined","optional":"!undefined"}],"returnType":"ServerChannel | Promise<ServerChannel>"},{"name":"getStartupData","signature":"getStartupData(): unknown","description":"Get startup data (throws if not in correct context)","parameters":"!undefined","returnType":"unknown"}],"signature":"interface ServerDriver"},{"name":"ServerOptions","slug":"server-options","path":"/api/server-options","module":"core","kind":"interface","comment":{"summary":"Options for creating a server channel"},"description":"Options for creating a server channel","category":"!undefined","properties":[{"name":"logger","type":"Logger","description":"Custom logger","optional":true,"readonly":"!undefined"},{"name":"logLevel","type":"LogLevel","description":"Log level","optional":true,"readonly":"!undefined"},{"name":"serializer","type":"Serializer","description":"Custom serializer (must match host!)","optional":true,"readonly":"!undefined"}],"signature":"interface ServerOptions"},{"name":"spawnWorker","slug":"spawn-worker","path":"/api/spawn-worker","module":"core","kind":"function","comment":{"summary":"Spawn a worker process and establish communication channel."},"description":"Spawn a worker process and establish communication channel.","category":"!undefined","parameters":[{"name":"script","type":"string","description":"Path to the worker script","optional":"!undefined","defaultValue":"!undefined"},{"name":"options","type":"ChildProcessDriverOptions","description":"Spawn options","optional":"!undefined","defaultValue":"{}"}],"returnType":"Promise<ChildProcessChannel>","signature":"function spawnWorker(script: string, options: ChildProcessDriverOptions): Promise<ChildProcessChannel>"},{"name":"spawnWorker","slug":"spawn-worker","path":"/api/spawn-worker","module":"core","kind":"function","comment":{"summary":"Spawn a worker thread and establish communication channel."},"description":"Spawn a worker thread and establish communication channel.","category":"!undefined","parameters":[{"name":"script","type":"string","description":"Path to the worker script (or code if eval is true)","optional":"!undefined","defaultValue":"!undefined"},{"name":"options","type":"WorkerThreadsDriverOptions","description":"Spawn options","optional":"!undefined","defaultValue":"{}"}],"returnType":"Promise<WorkerThreadsChannel>","signature":"function spawnWorker(script: string, options: WorkerThreadsDriverOptions): Promise<WorkerThreadsChannel>"},{"name":"STARTUP_DATA_ENV_KEY","slug":"startup-data-env-key","path":"/api/startup-data-env-key","module":"core","kind":"variable","comment":{"summary":"Environment variable key for startup data"},"description":"Environment variable key for startup data","category":"!undefined","signature":"type STARTUP_DATA_ENV_KEY = \"ISOLATED_WORKERS_STARTUP_DATA\""},{"name":"STARTUP_DATA_WORKER_KEY","slug":"startup-data-worker-key","path":"/api/startup-data-worker-key","module":"core","kind":"variable","comment":{"summary":"workerData key for startup data"},"description":"workerData key for startup data","category":"!undefined","signature":"type STARTUP_DATA_WORKER_KEY = \"__isolatedWorkers\""},{"name":"startWorkerServer","slug":"start-worker-server","path":"/api/start-worker-server","module":"core","kind":"function","comment":{"summary":"Start a worker server that listens for messages (type-safe version)"},"description":"Start a worker server that listens for messages (type-safe version)","category":"Core","parameters":[{"name":"handlers","type":"Handlers<TDefs>","description":"Map of typed message handlers","optional":"!undefined","defaultValue":"!undefined"},{"name":"options","type":"WorkerServerOptions<TDefs>","description":"Server options","optional":true,"defaultValue":"!undefined"}],"returnType":"Promise<WorkerServer>","signature":"function startWorkerServer(handlers: Handlers<TDefs>, options?: WorkerServerOptions<TDefs>): Promise<WorkerServer>"},{"name":"TimeoutConfig","slug":"timeout-config","path":"/api/timeout-config","module":"core","kind":"type","comment":{"summary":"Timeout configuration allowing per-message-type timeouts.\n\nBuilt-in keys:\n- `WORKER_STARTUP`: Time to wait for worker to start (default: 10s)\n- `SERVER_CONNECT`: Time for server to wait for host connection (default: 30s)\n- `WORKER_MESSAGE`: Default timeout for all messages (default: 5min)\n\nYou can also specify timeouts for specific message types by their key name.\nMessage-specific timeouts take precedence over WORKER_MESSAGE.","examples":["const worker = await createWorker<MyMessages>({\n  script: './worker.js',\n  timeout: {\n    WORKER_STARTUP: 5000,        // 5s startup\n    SERVER_CONNECT: 10000,       // 10s for server to wait for host\n    WORKER_MESSAGE: 60000,       // 1min default for messages\n    'slowOperation': 600000,     // 10min for specific message type\n  }\n});"]},"description":"Timeout configuration allowing per-message-type timeouts.\n\nBuilt-in keys:\n- `WORKER_STARTUP`: Time to wait for worker to start (default: 10s)\n- `SERVER_CONNECT`: Time for server to wait for host connection (default: 30s)\n- `WORKER_MESSAGE`: Default timeout for all messages (default: 5min)\n\nYou can also specify timeouts for specific message types by their key name.\nMessage-specific timeouts take precedence over WORKER_MESSAGE.","category":"!undefined","signature":"type TimeoutConfig = Partial<Record<BuiltInTimeoutKey | keyof TDefs, number>>"},{"name":"TypedMessage","slug":"typed-message","path":"/api/typed-message","module":"core","kind":"interface","comment":{"summary":"Message with type discriminator"},"description":"Message with type discriminator","category":"!undefined","properties":[{"name":"payload","type":"T","description":"!undefined","optional":"!undefined","readonly":"!undefined"},{"name":"type","type":"string","description":"!undefined","optional":"!undefined","readonly":"!undefined"}],"signature":"interface TypedMessage<T> extends BaseMessage"},{"name":"TypedResult","slug":"typed-result","path":"/api/typed-result","module":"core","kind":"interface","comment":{"summary":"Result message with type discriminator"},"description":"Result message with type discriminator","category":"!undefined","properties":[{"name":"payload","type":"T","description":"!undefined","optional":"!undefined","readonly":"!undefined"},{"name":"type","type":"string","description":"!undefined","optional":"!undefined","readonly":"!undefined"}],"signature":"interface TypedResult<T> extends BaseMessage"},{"name":"WorkerClient","slug":"worker-client","path":"/api/worker-client","module":"core","kind":"interface","comment":{"summary":"Base worker client interface for type-safe messaging.\n\nThe availability of certain methods depends on the driver's capabilities:\n- `disconnect()` / `reconnect()`: Only available with child_process driver\n- `pid`: Returns number for child_process, undefined for worker_threads"},"description":"Base worker client interface for type-safe messaging.\n\nThe availability of certain methods depends on the driver's capabilities:\n- `disconnect()` / `reconnect()`: Only available with child_process driver\n- `pid`: Returns number for child_process, undefined for worker_threads","category":"!undefined","properties":[{"name":"capabilities","type":"TCapabilities","description":"The driver capabilities for this worker","optional":"!undefined","readonly":true},{"name":"disconnect","type":"TCapabilities[\"reconnect\"] extends true ? () => Promise<void> : never","description":"Disconnect from worker but keep process alive.\nOnly available when driver supports reconnect capability.","optional":"!undefined","readonly":"!undefined"},{"name":"isActive","type":"boolean","description":"Whether the worker process is active","optional":"!undefined","readonly":"!undefined"},{"name":"isConnected","type":"boolean","description":"Whether connection to worker is active","optional":"!undefined","readonly":"!undefined"},{"name":"pid","type":"number","description":"Process ID of the worker.\nReturns undefined for worker_threads (they share the parent's PID).","optional":"!undefined","readonly":"!undefined"},{"name":"reconnect","type":"TCapabilities[\"reconnect\"] extends true ? () => Promise<void> : never","description":"Reconnect to existing worker.\nOnly available when driver supports reconnect capability.","optional":"!undefined","readonly":"!undefined"}],"methods":[{"name":"close","signature":"close(): Promise<void>","description":"Close the worker gracefully","parameters":"!undefined","returnType":"Promise<void>"},{"name":"send","signature":"send(type: K, payload: TMessages[K][\"payload\"]): Promise<TMessages[K] extends { result: R } ? R : void>","description":"Send a message and await response","parameters":[{"name":"type","type":"K","description":"!undefined","optional":"!undefined"},{"name":"payload","type":"TMessages[K][\"payload\"]","description":"!undefined","optional":"!undefined"}],"returnType":"Promise<TMessages[K] extends { result: R } ? R : void>"}],"signature":"interface WorkerClient<TMessages, TCapabilities>"},{"name":"WorkerHandler","slug":"worker-handler","path":"/api/worker-handler","module":"core","kind":"type","comment":{"summary":"Handler function type for worker messages"},"description":"Handler function type for worker messages","category":"!undefined","signature":"type WorkerHandler = (payload: TPayload) => TResult | Promise<TResult>"},{"name":"WorkerHandlers","slug":"worker-handlers","path":"/api/worker-handlers","module":"core","kind":"type","comment":{"summary":"Collection of handlers for different message types"},"description":"Collection of handlers for different message types","category":"!undefined","signature":"type WorkerHandlers = Record<string, WorkerHandler>"},{"name":"WorkerOptions","slug":"worker-options","path":"/api/worker-options","module":"core","kind":"interface","comment":{"summary":"Worker options for spawning"},"description":"Worker options for spawning","category":"!undefined","properties":[{"name":"connection","type":"{ attempts: number; delay: number | (attempt: number) => number; maxDelay: number }","description":"Connection options (child_process driver only).","optional":true,"readonly":"!undefined"},{"name":"debug","type":"boolean","description":"!undefined","optional":true,"readonly":"!undefined"},{"name":"detached","type":"boolean","description":"Worker lifecycle options","optional":true,"readonly":"!undefined"},{"name":"driver","type":"TDriver","description":"Driver to use for spawning the worker.\n\nIf not provided, the child_process driver is dynamically loaded.\nPass a driver instance for explicit control over the communication backend.","optional":true,"readonly":"!undefined"},{"name":"driverOptions","type":"Partial<DriverOptionsFor<TDriver>>","description":"Driver-specific options.\n\nThese options are passed directly to the driver's spawn method.\nAvailable options depend on the driver being used.","optional":true,"readonly":"!undefined"},{"name":"env","type":"Record<string, string>","description":"Environment variables to pass to worker","optional":true,"readonly":"!undefined"},{"name":"logger","type":"Logger","description":"!undefined","optional":true,"readonly":"!undefined"},{"name":"logLevel","type":"LogLevel","description":"Logging options","optional":true,"readonly":"!undefined"},{"name":"middleware","type":"Middleware<TDefs>[]","description":"Messaging options","optional":true,"readonly":"!undefined"},{"name":"script","type":"string","description":"Path to worker script","optional":"!undefined","readonly":"!undefined"},{"name":"serializer","type":"Serializer","description":"!undefined","optional":true,"readonly":"!undefined"},{"name":"socketPath","type":"string","description":"Advanced options","optional":true,"readonly":"!undefined"},{"name":"spawnOptions","type":"SpawnOptions","description":"!undefined","optional":true,"readonly":"!undefined"},{"name":"timeout","type":"number | Partial<Record<BuiltInTimeoutKey | keyof TDefs, number>>","description":"Timeout configuration for worker operations.\n\nCan be a number (applies to all operations) or an object with per-operation timeouts:\n- `WORKER_STARTUP`: Time to wait for worker to start (default: 10s)\n- `WORKER_MESSAGE`: Default timeout for all messages (default: 5min)\n- `[messageType]`: Timeout for specific message type (overrides WORKER_MESSAGE)","optional":true,"readonly":"!undefined"},{"name":"txIdGenerator","type":"TransactionIdGenerator<TDefs>","description":"!undefined","optional":true,"readonly":"!undefined"},{"name":"unexpectedShutdown","type":"UnexpectedShutdownConfig<TDefs>","description":"Unexpected shutdown configuration","optional":true,"readonly":"!undefined"}],"signature":"interface WorkerOptions<TDefs, TDriver>"},{"name":"WorkerServer","slug":"worker-server","path":"/api/worker-server","module":"core","kind":"interface","comment":{"summary":"Active worker server"},"description":"Active worker server","category":"!undefined","properties":[{"name":"isRunning","type":"boolean","description":"Whether the server is running","optional":"!undefined","readonly":"!undefined"}],"methods":[{"name":"stop","signature":"stop(): Promise<void>","description":"Stop the server and cleanup","parameters":"!undefined","returnType":"Promise<void>"}],"signature":"interface WorkerServer"},{"name":"WorkerServerOptions","slug":"worker-server-options","path":"/api/worker-server-options","module":"core","kind":"interface","comment":{"summary":"Server configuration options"},"description":"Server configuration options","category":"!undefined","properties":[{"name":"driver","type":"ServerDriver","description":"Driver to use for server communication.\nDefaults to ChildProcessDriver if not specified.\nMust match the driver used on the host side.","optional":true,"readonly":"!undefined"},{"name":"logger","type":"Logger","description":"Custom logger instance","optional":true,"readonly":"!undefined"},{"name":"logLevel","type":"LogLevel","description":"Log level for server operations","optional":true,"readonly":"!undefined"},{"name":"middleware","type":"Middleware<TDefs>[]","description":"Middleware pipeline for message processing","optional":true,"readonly":"!undefined"},{"name":"serializer","type":"Serializer","description":"Custom serializer (must match host!)","optional":true,"readonly":"!undefined"},{"name":"txIdGenerator","type":"TransactionIdGenerator<TDefs>","description":"Custom transaction ID generator","optional":true,"readonly":"!undefined"}],"signature":"interface WorkerServerOptions<TDefs>"},{"name":"WorkerThreadsCapabilities","slug":"worker-threads-capabilities","path":"/api/worker-threads-capabilities","module":"core","kind":"interface","comment":{"summary":"Capability type for worker_threads driver.\n\nWorker thread workers support SharedArrayBuffer but cannot\nbe reconnected or detached from the parent."},"description":"Capability type for worker_threads driver.\n\nWorker thread workers support SharedArrayBuffer but cannot\nbe reconnected or detached from the parent.","category":"Drivers","properties":[{"name":"detach","type":"false","description":"Worker can outlive parent process","optional":"!undefined","readonly":"!undefined"},{"name":"reconnect","type":"false","description":"Can disconnect/reconnect to running worker","optional":"!undefined","readonly":"!undefined"},{"name":"sharedMemory","type":"true","description":"Supports SharedArrayBuffer","optional":"!undefined","readonly":"!undefined"}],"signature":"interface WorkerThreadsCapabilities extends DriverCapabilities"},{"name":"WorkerThreadsChannel","slug":"worker-threads-channel","path":"/api/worker-threads-channel","module":"core","kind":"class","comment":{"summary":"Channel implementation for worker threads driver.\n\nWraps a Worker and provides the DriverChannel interface\nusing MessagePort-based communication."},"description":"Channel implementation for worker threads driver.\n\nWraps a Worker and provides the DriverChannel interface\nusing MessagePort-based communication.","category":"!undefined","methods":[{"name":"close","signature":"close(): Promise<void>","description":"Close the channel","parameters":"!undefined","returnType":"Promise<void>"},{"name":"onClose","signature":"onClose(handler: () => void): void","description":"Register a close handler","parameters":[{"name":"handler","type":"() => void","description":"!undefined","optional":"!undefined"}],"returnType":"void"},{"name":"onError","signature":"onError(handler: (error: Error) => void): void","description":"Register an error handler","parameters":[{"name":"handler","type":"(error: Error) => void","description":"!undefined","optional":"!undefined"}],"returnType":"void"},{"name":"onMessage","signature":"onMessage(handler: (message: DriverMessage) => void): void","description":"Register a message handler","parameters":[{"name":"handler","type":"(message: DriverMessage) => void","description":"!undefined","optional":"!undefined"}],"returnType":"void"},{"name":"onShutdown","signature":"onShutdown(handler: (reason: ShutdownReason) => void): void","description":"Register a shutdown handler","parameters":[{"name":"handler","type":"(reason: ShutdownReason) => void","description":"!undefined","optional":"!undefined"}],"returnType":"void"},{"name":"send","signature":"send(message: DriverMessage): Promise<void>","description":"Send a message through the channel","parameters":[{"name":"message","type":"DriverMessage","description":"!undefined","optional":"!undefined"}],"returnType":"Promise<void>"}],"signature":"class WorkerThreadsChannel"},{"name":"WorkerThreadsDriver","slug":"worker-threads-driver","path":"/api/worker-threads-driver","module":"core","kind":"variable","comment":{"summary":"Worker threads driver.\n\nUses worker_threads module with MessagePort for IPC.\nSupports SharedArrayBuffer for shared memory.","examples":["import { WorkerThreadsDriver } from 'isolated-workers/drivers/worker-threads';\n\n// Host side: spawn a worker\nconst channel = await WorkerThreadsDriver.spawn('./worker.js', {\n  resourceLimits: { maxOldGenerationSizeMb: 128 },\n});\n\n// Worker side: create server\nconst server = WorkerThreadsDriver.createServer();"]},"description":"Worker threads driver.\n\nUses worker_threads module with MessagePort for IPC.\nSupports SharedArrayBuffer for shared memory.","category":"!undefined","signature":"type WorkerThreadsDriver = { name: \"worker_threads\"; createServer: unknown; getStartupData: unknown; spawn: unknown; transferSharedMemory: unknown } & { capabilities: InferCapabilities<{ name: \"worker_threads\"; createServer: unknown; getStartupData: unknown; spawn: unknown; transferSharedMemory: unknown }> }"},{"name":"WorkerThreadsDriverOptions","slug":"worker-threads-driver-options","path":"/api/worker-threads-driver-options","module":"core","kind":"variable","comment":"!undefined","description":"!undefined","category":"!undefined"},{"name":"WorkerThreadsDriverOptions","slug":"worker-threads-driver-options","path":"/api/worker-threads-driver-options","module":"core","kind":"interface","comment":{"summary":"Options for worker threads driver spawn"},"description":"Options for worker threads driver spawn","category":"!undefined","properties":[{"name":"argv","type":"string[]","description":"Arguments to pass to the worker script","optional":true,"readonly":"!undefined"},{"name":"eval","type":"boolean","description":"If true, script is treated as JavaScript code instead of a path","optional":true,"readonly":"!undefined"},{"name":"execArgv","type":"string[]","description":"List of node CLI options passed to the worker.\nUseful for loading TypeScript files via tsx:","optional":true,"readonly":"!undefined"},{"name":"logger","type":"Logger","description":"Custom logger instance","optional":true,"readonly":"!undefined"},{"name":"logLevel","type":"LogLevel","description":"Log level for driver operations","optional":true,"readonly":"!undefined"},{"name":"resourceLimits","type":"WorkerThreadsResourceLimits","description":"Resource limits for the worker thread","optional":true,"readonly":"!undefined"},{"name":"serializer","type":"Serializer","description":"Custom serializer (must match worker side)","optional":true,"readonly":"!undefined"},{"name":"transferList","type":"ArrayBuffer[]","description":"List of transferable objects to transfer to worker","optional":true,"readonly":"!undefined"},{"name":"workerData","type":"unknown","description":"Additional data to pass to worker via workerData","optional":true,"readonly":"!undefined"}],"signature":"interface WorkerThreadsDriverOptions"},{"name":"WorkerThreadsDriverType","slug":"worker-threads-driver-type","path":"/api/worker-threads-driver-type","module":"core","kind":"type","comment":{"summary":"Type of the WorkerThreadsDriver"},"description":"Type of the WorkerThreadsDriver","category":"!undefined","signature":"type WorkerThreadsDriverType = typeof unknown"},{"name":"WorkerThreadsResourceLimits","slug":"worker-threads-resource-limits","path":"/api/worker-threads-resource-limits","module":"core","kind":"variable","comment":"!undefined","description":"!undefined","category":"!undefined"},{"name":"WorkerThreadsResourceLimits","slug":"worker-threads-resource-limits","path":"/api/worker-threads-resource-limits","module":"core","kind":"interface","comment":{"summary":"Resource limits for worker threads"},"description":"Resource limits for worker threads","category":"!undefined","properties":[{"name":"codeRangeSizeMb","type":"number","description":"Size of the pre-allocated code range in MB","optional":true,"readonly":"!undefined"},{"name":"maxOldGenerationSizeMb","type":"number","description":"Maximum size of the old generation heap in MB","optional":true,"readonly":"!undefined"},{"name":"maxYoungGenerationSizeMb","type":"number","description":"Maximum size of the young generation heap in MB","optional":true,"readonly":"!undefined"},{"name":"stackSizeMb","type":"number","description":"Default stack size for the worker thread in KB","optional":true,"readonly":"!undefined"}],"signature":"interface WorkerThreadsResourceLimits"},{"name":"WorkerThreadsServerChannel","slug":"worker-threads-server-channel","path":"/api/worker-threads-server-channel","module":"core","kind":"class","comment":{"summary":"Worker threads server channel implementation.\n\nWraps parentPort and provides the ServerChannel interface."},"description":"Worker threads server channel implementation.\n\nWraps parentPort and provides the ServerChannel interface.","category":"!undefined","methods":[{"name":"onError","signature":"onError(handler: (error: Error) => void): void","description":"Register an error handler","parameters":[{"name":"handler","type":"(error: Error) => void","description":"!undefined","optional":"!undefined"}],"returnType":"void"},{"name":"onMessage","signature":"onMessage(handler: (message: DriverMessage, respond: ResponseFunction) => void): void","description":"Register a message handler","parameters":[{"name":"handler","type":"(message: DriverMessage, respond: ResponseFunction) => void","description":"!undefined","optional":"!undefined"}],"returnType":"void"},{"name":"start","signature":"start(): void","description":"Start listening for messages from the host","parameters":"!undefined","returnType":"void"},{"name":"stop","signature":"stop(): Promise<void>","description":"Stop the server and cleanup","parameters":"!undefined","returnType":"Promise<void>"}],"signature":"class WorkerThreadsServerChannel"},{"name":"WorkerThreadsStartupData","slug":"worker-threads-startup-data","path":"/api/worker-threads-startup-data","module":"core","kind":"interface","comment":{"summary":"Startup data specific to worker_threads driver.\n\nExtends the base StartupData with worker_threads-specific fields."},"description":"Startup data specific to worker_threads driver.\n\nExtends the base StartupData with worker_threads-specific fields.","category":"!undefined","properties":[{"name":"driver","type":"\"worker_threads\"","description":"Driver identifier - always 'worker_threads' for this driver","optional":"!undefined","readonly":"!undefined"}],"signature":"interface WorkerThreadsStartupData extends StartupData"}]},"utils":{"name":"utils","slug":"utils","path":"/api/utils","exports":[{"name":"defaultLogger","slug":"default-logger","path":"/api/default-logger","module":"utils","kind":"variable","comment":{"summary":"Default console-based logger"},"description":"Default console-based logger","category":"!undefined","signature":"type defaultLogger = Logger"},{"name":"JsonSerializer","slug":"json-serializer","path":"/api/json-serializer","module":"utils","kind":"class","comment":{"summary":"Default JSON serializer with newline terminator"},"description":"Default JSON serializer with newline terminator","category":"Serialization","properties":[{"name":"terminator","type":"string","description":"Terminator sequence used to delimit messages in the stream.\nMust be the same on both client and server.","optional":"!undefined","readonly":"!undefined"}],"methods":[{"name":"deserialize","signature":"deserialize(data: string | Uint8Array<ArrayBufferLike>): T","description":"Deserialize string or Uint8Array back to data","parameters":[{"name":"data","type":"string | Uint8Array<ArrayBufferLike>","description":"!undefined","optional":"!undefined"}],"returnType":"T"},{"name":"serialize","signature":"serialize(data: T): string","description":"Serialize data to string or Uint8Array","parameters":[{"name":"data","type":"T","description":"!undefined","optional":"!undefined"}],"returnType":"string"}],"signature":"class JsonSerializer extends Serializer"},{"name":"Logger","slug":"logger","path":"/api/logger","module":"utils","kind":"interface","comment":{"summary":"Logger interface - must implement all log level methods"},"description":"Logger interface - must implement all log level methods","category":"!undefined","methods":[{"name":"debug","signature":"debug(parts: unknown[]): void","description":"!undefined","parameters":[{"name":"parts","type":"unknown[]","description":"!undefined","optional":"!undefined"}],"returnType":"void"},{"name":"error","signature":"error(parts: unknown[]): void","description":"!undefined","parameters":[{"name":"parts","type":"unknown[]","description":"!undefined","optional":"!undefined"}],"returnType":"void"},{"name":"info","signature":"info(parts: unknown[]): void","description":"!undefined","parameters":[{"name":"parts","type":"unknown[]","description":"!undefined","optional":"!undefined"}],"returnType":"void"},{"name":"warn","signature":"warn(parts: unknown[]): void","description":"!undefined","parameters":[{"name":"parts","type":"unknown[]","description":"!undefined","optional":"!undefined"}],"returnType":"void"}],"signature":"interface Logger"},{"name":"LogLevel","slug":"log-level","path":"/api/log-level","module":"utils","kind":"type","comment":{"summary":"Log level enum"},"description":"Log level enum","category":"!undefined","signature":"type LogLevel = \"debug\" | \"info\" | \"warn\" | \"error\""},{"name":"Serializer","slug":"serializer","path":"/api/serializer","module":"utils","kind":"class","comment":{"summary":"Abstract serializer class for custom message serialization.\nIncludes terminator sequence to delimit messages in the stream.\n\nIMPORTANT: Must be a named class (not anonymous) for mismatch detection."},"description":"Abstract serializer class for custom message serialization.\nIncludes terminator sequence to delimit messages in the stream.\n\nIMPORTANT: Must be a named class (not anonymous) for mismatch detection.","category":"Serialization","properties":[{"name":"terminator","type":"string | Uint8Array<ArrayBufferLike>","description":"Terminator sequence used to delimit messages in the stream.\nMust be the same on both client and server.","optional":"!undefined","readonly":"!undefined"}],"methods":[{"name":"deserialize","signature":"deserialize(data: string | Uint8Array<ArrayBufferLike>): T","description":"Deserialize string or Uint8Array back to data","parameters":[{"name":"data","type":"string | Uint8Array<ArrayBufferLike>","description":"!undefined","optional":"!undefined"}],"returnType":"T"},{"name":"serialize","signature":"serialize(data: T): string | Uint8Array<ArrayBufferLike>","description":"Serialize data to string or Uint8Array","parameters":[{"name":"data","type":"T","description":"!undefined","optional":"!undefined"}],"returnType":"string | Uint8Array<ArrayBufferLike>"}],"signature":"class Serializer"}]},"types":{"name":"types","slug":"types","path":"/api/types","exports":[{"name":"AllMessages","slug":"all-messages","path":"/api/all-messages","module":"types","kind":"type","comment":{"summary":"Union of all message types in the definition.","examples":["type AllMsgs = AllMessages<MyMessages>;\n// MessageOf<MyMessages, 'load'> | MessageOf<MyMessages, 'compute'> | ..."]},"description":"Union of all message types in the definition.","category":"!undefined","signature":"type AllMessages = { [key: string]: ... }[keyof TDefs & string]"},{"name":"AllResults","slug":"all-results","path":"/api/all-results","module":"types","kind":"type","comment":{"summary":"Union of all result types in the definition.","examples":["type AllRes = AllResults<MyMessages>;\n// ResultOf<MyMessages, 'load'> | ResultOf<MyMessages, 'compute'> | ..."]},"description":"Union of all result types in the definition.","category":"!undefined","signature":"type AllResults = { [key: string]: ... }[WithResult<TDefs> & string]"},{"name":"AnyMessage","slug":"any-message","path":"/api/any-message","module":"types","kind":"type","comment":{"summary":"Union of all message types (requests and responses).\nUse this for middleware, transaction ID generators, and other\nfunctions that handle any message type.","examples":["type MyMessages = DefineMessages<{\n  load: { payload: { config: string }; result: { loaded: true } };\n}>;\n\nfunction middleware(msg: AnyMessage<MyMessages>) {\n  console.log('Handling:', msg.type);\n}"]},"description":"Union of all message types (requests and responses).\nUse this for middleware, transaction ID generators, and other\nfunctions that handle any message type.","category":"!undefined","signature":"type AnyMessage = AllMessages<TDefs> | AllResults<TDefs>"},{"name":"BaseMessage","slug":"base-message","path":"/api/base-message","module":"types","kind":"interface","comment":{"summary":"Base message with transaction ID for request/response pairing"},"description":"Base message with transaction ID for request/response pairing","category":"!undefined","properties":[{"name":"tx","type":"string","description":"Transaction ID","optional":"!undefined","readonly":"!undefined"}],"signature":"interface BaseMessage"},{"name":"DefineMessages","slug":"define-messages","path":"/api/define-messages","module":"types","kind":"type","comment":{"summary":"Type constructor for defining message sets.\n\nUse this to define your worker's message contract with full type safety.","examples":["type MyMessages = DefineMessages<{\n  load: { payload: { config: string }; result: { loaded: true } };\n  compute: { payload: { data: number }; result: { value: number } };\n  shutdown: { payload: void };\n}>;"]},"description":"Type constructor for defining message sets.\n\nUse this to define your worker's message contract with full type safety.","category":"Types","signature":"type DefineMessages = TDefs"},{"name":"Handlers","slug":"handlers","path":"/api/handlers","module":"types","kind":"type","comment":{"summary":"Handler function type for a message definition.\n\nHandlers receive the payload and return the result (or void if no result).","examples":["const handlers: Handlers<MyMessages> = {\n  load: async (payload) => ({ loaded: true }),\n  shutdown: () => { console.log('bye'); }\n};"]},"description":"Handler function type for a message definition.\n\nHandlers receive the payload and return the result (or void if no result).","category":"Configuration","signature":"type Handlers = { [key: string]: ... }"},{"name":"MaybePromise","slug":"maybe-promise","path":"/api/maybe-promise","module":"types","kind":"type","comment":{"summary":"Utility type for values that may be promises"},"description":"Utility type for values that may be promises","category":"!undefined","signature":"type MaybePromise = T | Promise<T>"},{"name":"MessageDef","slug":"message-def","path":"/api/message-def","module":"types","kind":"interface","comment":{"summary":"Message definition shape - each message has a payload and optional result"},"description":"Message definition shape - each message has a payload and optional result","category":"!undefined","properties":[{"name":"payload","type":"unknown","description":"Payload type for the message","optional":"!undefined","readonly":"!undefined"},{"name":"result","type":"unknown","description":"Optional result type (if message expects a response)","optional":true,"readonly":"!undefined"}],"signature":"interface MessageDef"},{"name":"MessageDefs","slug":"message-defs","path":"/api/message-defs","module":"types","kind":"type","comment":{"summary":"Collection of message definitions"},"description":"Collection of message definitions","category":"!undefined","signature":"type MessageDefs = Record<string, MessageDef>"},{"name":"MessageOf","slug":"message-of","path":"/api/message-of","module":"types","kind":"type","comment":{"summary":"Extract the full message type for a given key.","examples":["type LoadMessage = MessageOf<MyMessages, 'load'>;\n// { tx: string; type: 'load'; payload: { config: string } }"]},"description":"Extract the full message type for a given key.","category":"!undefined","signature":"type MessageOf = BaseMessage & { payload: TDefs[K][\"payload\"]; type: K }"},{"name":"MessageResult","slug":"message-result","path":"/api/message-result","module":"types","kind":"type","comment":{"summary":"Map a message type to its corresponding result type.","examples":["type LoadResponse = MessageResult<'load', MyMessages>;\n// ResultOf<MyMessages, 'load'>"]},"description":"Map a message type to its corresponding result type.","category":"!undefined","signature":"type MessageResult = TMessageType extends WithResult<TDefs> ? ResultOf<TDefs, TMessageType> : never"},{"name":"MessageType","slug":"message-type","path":"/api/message-type","module":"types","kind":"type","comment":"!undefined","description":"!undefined","category":"!undefined","signature":"type MessageType = keyof TDefs & string"},{"name":"Middleware","slug":"middleware","path":"/api/middleware","module":"types","kind":"type","comment":{"summary":"Middleware function type for message inspection/transformation.\nApplied sequentially in the order provided.\n\nMessages are sealed before being passed to middleware, so you can\nmodify existing properties but cannot add new ones.","examples":["const logMiddleware: Middleware<MyMessages> = (msg, direction) => {\n  console.log(`${direction}:`, msg.type);\n  return msg;\n};"]},"description":"Middleware function type for message inspection/transformation.\nApplied sequentially in the order provided.\n\nMessages are sealed before being passed to middleware, so you can\nmodify existing properties but cannot add new ones.","category":"Configuration","signature":"type Middleware = (message: AnyMessage<TDefs>, direction: \"incoming\" | \"outgoing\") => AnyMessage<TDefs> | void | Promise<AnyMessage<TDefs> | void>"},{"name":"PayloadOf","slug":"payload-of","path":"/api/payload-of","module":"types","kind":"type","comment":{"summary":"Extract the payload type for a given message key."},"description":"Extract the payload type for a given message key.","category":"!undefined","signature":"type PayloadOf = TDefs[K][\"payload\"]"},{"name":"ResultOf","slug":"result-of","path":"/api/result-of","module":"types","kind":"type","comment":{"summary":"Extract the full result type for a given key.","examples":["type LoadResult = ResultOf<MyMessages, 'load'>;\n// { tx: string; type: 'loadResult'; payload: { loaded: true } }"]},"description":"Extract the full result type for a given key.","category":"!undefined","signature":"type ResultOf = BaseMessage & { payload: TDefs[K] extends { result: unknown } ? TDefs[K][\"result\"] : never; type: string }"},{"name":"ResultPayloadOf","slug":"result-payload-of","path":"/api/result-payload-of","module":"types","kind":"type","comment":{"summary":"Extract the result type for a given message key."},"description":"Extract the result type for a given message key.","category":"!undefined","signature":"type ResultPayloadOf = TDefs[K] extends { result: unknown } ? TDefs[K][\"result\"] : never"},{"name":"ShutdownReason","slug":"shutdown-reason","path":"/api/shutdown-reason","module":"types","kind":"type","comment":"!undefined","description":"!undefined","category":"!undefined","signature":"type ShutdownReason = { code: number | null; signal: string | null; type: \"exit\" } | { error: Error; type: \"error\" } | { type: \"close\" }"},{"name":"TransactionIdGenerator","slug":"transaction-id-generator","path":"/api/transaction-id-generator","module":"types","kind":"type","comment":{"summary":"Transaction ID generator function type.\nReceives a message and returns a unique transaction ID string.","examples":["const customGen: TransactionIdGenerator<MyMessages> = (msg) => {\n  return `${msg.type}-${Date.now()}`;\n};"]},"description":"Transaction ID generator function type.\nReceives a message and returns a unique transaction ID string.","category":"!undefined","signature":"type TransactionIdGenerator = (message: AnyMessage<TDefs>) => string"},{"name":"UnexpectedShutdownConfig","slug":"unexpected-shutdown-config","path":"/api/unexpected-shutdown-config","module":"types","kind":"type","comment":"!undefined","description":"!undefined","category":"!undefined","signature":"type UnexpectedShutdownConfig = UnexpectedShutdownStrategy & { [key: string]: ... }"},{"name":"UnexpectedShutdownStrategy","slug":"unexpected-shutdown-strategy","path":"/api/unexpected-shutdown-strategy","module":"types","kind":"type","comment":"!undefined","description":"!undefined","category":"!undefined","signature":"type UnexpectedShutdownStrategy = { strategy: \"reject\" } | { attempts: number; strategy: \"retry\" }"},{"name":"WithResult","slug":"with-result","path":"/api/with-result","module":"types","kind":"type","comment":{"summary":"Extract keys that have a result defined.","examples":["type Messages = DefineMessages<{\n  load: { payload: {}; result: {} };  // Has result\n  shutdown: { payload: {} };          // No result\n}>;\ntype WithRes = WithResult<Messages>; // 'load'"]},"description":"Extract keys that have a result defined.","category":"Types","signature":"type WithResult = { [key: string]: ... }[keyof TDefs]"},{"name":"WorkerCrashedError","slug":"worker-crashed-error","path":"/api/worker-crashed-error","module":"types","kind":"class","comment":"!undefined","description":"!undefined","category":"!undefined","properties":[{"name":"attempt","type":"number","description":"!undefined","optional":"!undefined","readonly":true},{"name":"maxAttempts","type":"number","description":"!undefined","optional":"!undefined","readonly":true},{"name":"messageType","type":"string","description":"!undefined","optional":"!undefined","readonly":true},{"name":"name","type":"string","description":"!undefined","optional":"!undefined","readonly":"!undefined"},{"name":"reason","type":"ShutdownReason","description":"!undefined","optional":"!undefined","readonly":true}],"signature":"class WorkerCrashedError extends Error"}]}},"exports":{"child-process-channel":{"name":"ChildProcessChannel","slug":"child-process-channel","path":"/api/child-process-channel","module":"core","kind":"class","comment":{"summary":"Channel implementation for child process driver.\n\nWraps a Connection and ChildProcess, providing the DriverChannel interface\nwith optional reconnect and detach capabilities."},"description":"Channel implementation for child process driver.\n\nWraps a Connection and ChildProcess, providing the DriverChannel interface\nwith optional reconnect and detach capabilities.","category":"!undefined","methods":[{"name":"close","signature":"close(): Promise<void>","description":"Close the channel","parameters":"!undefined","returnType":"Promise<void>"},{"name":"disconnect","signature":"disconnect(): Promise<void>","description":"Disconnect from worker but keep process alive","parameters":"!undefined","returnType":"Promise<void>"},{"name":"onClose","signature":"onClose(handler: () => void): void","description":"Register a close handler","parameters":[{"name":"handler","type":"() => void","description":"!undefined","optional":"!undefined"}],"returnType":"void"},{"name":"onError","signature":"onError(handler: (error: Error) => void): void","description":"Register an error handler","parameters":[{"name":"handler","type":"(error: Error) => void","description":"!undefined","optional":"!undefined"}],"returnType":"void"},{"name":"onMessage","signature":"onMessage(handler: (message: DriverMessage) => void): void","description":"Register a message handler","parameters":[{"name":"handler","type":"(message: DriverMessage) => void","description":"!undefined","optional":"!undefined"}],"returnType":"void"},{"name":"onShutdown","signature":"onShutdown(handler: (reason: ShutdownReason) => void): void","description":"Register a shutdown handler","parameters":[{"name":"handler","type":"(reason: ShutdownReason) => void","description":"!undefined","optional":"!undefined"}],"returnType":"void"},{"name":"reconnect","signature":"reconnect(): Promise<void>","description":"Reconnect to existing worker","parameters":"!undefined","returnType":"Promise<void>"},{"name":"send","signature":"send(message: DriverMessage): Promise<void>","description":"Send a message through the channel","parameters":[{"name":"message","type":"DriverMessage","description":"!undefined","optional":"!undefined"}],"returnType":"Promise<void>"}],"signature":"class ChildProcessChannel"},"child-process-server-channel":{"name":"ChildProcessServerChannel","slug":"child-process-server-channel","path":"/api/child-process-server-channel","module":"core","kind":"class","comment":{"summary":"Child process server channel implementation.\n\nWraps a net.Server and provides the ServerChannel interface."},"description":"Child process server channel implementation.\n\nWraps a net.Server and provides the ServerChannel interface.","category":"!undefined","methods":[{"name":"onError","signature":"onError(handler: (error: Error) => void): void","description":"Register an error handler","parameters":[{"name":"handler","type":"(error: Error) => void","description":"!undefined","optional":"!undefined"}],"returnType":"void"},{"name":"onMessage","signature":"onMessage(handler: (message: DriverMessage, respond: ResponseFunction) => void): void","description":"Register a message handler","parameters":[{"name":"handler","type":"(message: DriverMessage, respond: ResponseFunction) => void","description":"!undefined","optional":"!undefined"}],"returnType":"void"},{"name":"start","signature":"start(hostConnectTimeout: number): Promise<void>","description":"Start listening for connections from the host","parameters":[{"name":"hostConnectTimeout","type":"number","description":"!undefined","optional":"!undefined"}],"returnType":"Promise<void>"},{"name":"stop","signature":"stop(): Promise<void>","description":"Stop the server and cleanup","parameters":"!undefined","returnType":"Promise<void>"}],"signature":"class ChildProcessServerChannel"},"child-process-startup-data":{"name":"ChildProcessStartupData","slug":"child-process-startup-data","path":"/api/child-process-startup-data","module":"core","kind":"interface","comment":{"summary":"Startup data specific to child_process driver.\n\nExtends the base StartupData with child_process-specific fields."},"description":"Startup data specific to child_process driver.\n\nExtends the base StartupData with child_process-specific fields.","category":"!undefined","properties":[{"name":"driver","type":"\"child_process\"","description":"Driver identifier - always 'child_process' for this driver","optional":"!undefined","readonly":"!undefined"},{"name":"socketPath","type":"string","description":"Socket path for IPC communication (required for child_process)","optional":"!undefined","readonly":"!undefined"}],"signature":"interface ChildProcessStartupData extends StartupData"},"child-process-driver-type":{"name":"ChildProcessDriverType","slug":"child-process-driver-type","path":"/api/child-process-driver-type","module":"core","kind":"type","comment":{"summary":"Type of the ChildProcessDriver"},"description":"Type of the ChildProcessDriver","category":"!undefined","signature":"type ChildProcessDriverType = typeof unknown"},"response-function":{"name":"ResponseFunction","slug":"response-function","path":"/api/response-function","module":"core","kind":"type","comment":{"summary":"Function to send a response back to the host"},"description":"Function to send a response back to the host","category":"!undefined","signature":"type ResponseFunction = (response: DriverMessage) => Promise<void>"},"child-process-driver":{"name":"ChildProcessDriver","slug":"child-process-driver","path":"/api/child-process-driver","module":"core","kind":"variable","comment":{"summary":"Child process driver.\n\nUses child_process.fork() with Unix domain sockets for IPC.\nSupports disconnect/reconnect and detached workers.","examples":["import { ChildProcessDriver } from 'isolated-workers/drivers/child-process';\n\n// Host side: spawn a worker\nconst channel = await ChildProcessDriver.spawn('./worker.js', {\n  detached: false,\n  timeout: 10000,\n});\n\n// Worker side: create server\nconst server = await ChildProcessDriver.createServer();"]},"description":"Child process driver.\n\nUses child_process.fork() with Unix domain sockets for IPC.\nSupports disconnect/reconnect and detached workers.","category":"!undefined","signature":"type ChildProcessDriver = { detached: false; name: \"child_process\"; createServer: unknown; disconnect: unknown; getStartupData: unknown; reconnect: unknown; spawn: unknown } & { capabilities: InferCapabilities<{ detached: false; name: \"child_process\"; createServer: unknown; disconnect: unknown; getStartupData: unknown; reconnect: unknown; spawn: unknown }> }"},"default-server-connect-timeout":{"name":"DEFAULT_SERVER_CONNECT_TIMEOUT","slug":"default-server-connect-timeout","path":"/api/default-server-connect-timeout","module":"core","kind":"variable","comment":{"summary":"Default server connect timeout (30 seconds)"},"description":"Default server connect timeout (30 seconds)","category":"!undefined","signature":"type DEFAULT_SERVER_CONNECT_TIMEOUT = 30000"},"startup-data-env-key":{"name":"STARTUP_DATA_ENV_KEY","slug":"startup-data-env-key","path":"/api/startup-data-env-key","module":"core","kind":"variable","comment":{"summary":"Environment variable key for startup data"},"description":"Environment variable key for startup data","category":"!undefined","signature":"type STARTUP_DATA_ENV_KEY = \"ISOLATED_WORKERS_STARTUP_DATA\""},"create-server":{"name":"createServer","slug":"create-server","path":"/api/create-server","module":"core","kind":"function","comment":{"summary":"Create a worker threads server for worker-side communication.\n\nThis function uses parentPort from worker_threads to establish\ncommunication with the host process.","examples":["import { WorkerThreadsDriver } from 'isolated-workers/drivers/worker-threads';\n\nconst startupData = WorkerThreadsDriver.getStartupData();\nconst server = createServer(startupData);\n\nserver.onMessage(async (message, respond) => {\n  console.log('Received:', message);\n  await respond({\n    tx: message.tx,\n    type: message.type,\n    payload: { result: 'ok' },\n  });\n});\n\nserver.start();"]},"description":"Create a worker threads server for worker-side communication.\n\nThis function uses parentPort from worker_threads to establish\ncommunication with the host process.","category":"!undefined","parameters":[{"name":"startupData","type":"WorkerThreadsStartupData","description":"Startup data from the host process","optional":"!undefined","defaultValue":"!undefined"},{"name":"options","type":"ServerOptions","description":"Server options","optional":"!undefined","defaultValue":"{}"}],"returnType":"Promise<WorkerThreadsServerChannel>","signature":"function createServer(startupData: WorkerThreadsStartupData, options: ServerOptions): Promise<WorkerThreadsServerChannel>"},"encode-startup-data":{"name":"encodeStartupData","slug":"encode-startup-data","path":"/api/encode-startup-data","module":"core","kind":"function","comment":{"summary":"Encode startup data for passing to child_process via environment variable."},"description":"Encode startup data for passing to child_process via environment variable.","category":"!undefined","parameters":[{"name":"data","type":"StartupData","description":"The startup data to encode","optional":"!undefined","defaultValue":"!undefined"}],"returnType":"string","signature":"function encodeStartupData(data: StartupData): string"},"spawn-worker":{"name":"spawnWorker","slug":"spawn-worker","path":"/api/spawn-worker","module":"core","kind":"function","comment":{"summary":"Spawn a worker thread and establish communication channel."},"description":"Spawn a worker thread and establish communication channel.","category":"!undefined","parameters":[{"name":"script","type":"string","description":"Path to the worker script (or code if eval is true)","optional":"!undefined","defaultValue":"!undefined"},{"name":"options","type":"WorkerThreadsDriverOptions","description":"Spawn options","optional":"!undefined","defaultValue":"{}"}],"returnType":"Promise<WorkerThreadsChannel>","signature":"function spawnWorker(script: string, options: WorkerThreadsDriverOptions): Promise<WorkerThreadsChannel>"},"child-process-driver-options":{"name":"ChildProcessDriverOptions","slug":"child-process-driver-options","path":"/api/child-process-driver-options","module":"core","kind":"interface","comment":{"summary":"Options for child process driver spawn"},"description":"Options for child process driver spawn","category":"!undefined","properties":[{"name":"detached","type":"boolean","description":"Whether to detach the worker process","optional":true,"readonly":"!undefined"},{"name":"env","type":"Record<string, string>","description":"Environment variables to pass to worker","optional":true,"readonly":"!undefined"},{"name":"logger","type":"Logger","description":"Custom logger instance","optional":true,"readonly":"!undefined"},{"name":"logLevel","type":"LogLevel","description":"Log level for driver operations","optional":true,"readonly":"!undefined"},{"name":"maxDelay","type":"number","description":"Maximum retry delay cap (default: 5000)","optional":true,"readonly":"!undefined"},{"name":"maxRetries","type":"number","description":"Maximum connection retry attempts (default: 5)","optional":true,"readonly":"!undefined"},{"name":"onShutdown","type":"(reason: ShutdownReason) => void","description":"Shutdown handler callback","optional":true,"readonly":"!undefined"},{"name":"retryDelay","type":"number","description":"Retry delay in ms (default: 100)","optional":true,"readonly":"!undefined"},{"name":"serializer","type":"Serializer","description":"Custom serializer (must match worker side)","optional":true,"readonly":"!undefined"},{"name":"serverConnectTimeout","type":"number","description":"Server connect timeout passed to worker (default: 30000)","optional":true,"readonly":"!undefined"},{"name":"socketPath","type":"string","description":"Override socket path (auto-generated if not provided)","optional":true,"readonly":"!undefined"},{"name":"spawnOptions","type":"SpawnOptions","description":"Additional spawn options","optional":true,"readonly":"!undefined"},{"name":"timeout","type":"number","description":"Connection timeout in ms (default: 10000)","optional":true,"readonly":"!undefined"}],"signature":"interface ChildProcessDriverOptions"},"worker-threads-channel":{"name":"WorkerThreadsChannel","slug":"worker-threads-channel","path":"/api/worker-threads-channel","module":"core","kind":"class","comment":{"summary":"Channel implementation for worker threads driver.\n\nWraps a Worker and provides the DriverChannel interface\nusing MessagePort-based communication."},"description":"Channel implementation for worker threads driver.\n\nWraps a Worker and provides the DriverChannel interface\nusing MessagePort-based communication.","category":"!undefined","methods":[{"name":"close","signature":"close(): Promise<void>","description":"Close the channel","parameters":"!undefined","returnType":"Promise<void>"},{"name":"onClose","signature":"onClose(handler: () => void): void","description":"Register a close handler","parameters":[{"name":"handler","type":"() => void","description":"!undefined","optional":"!undefined"}],"returnType":"void"},{"name":"onError","signature":"onError(handler: (error: Error) => void): void","description":"Register an error handler","parameters":[{"name":"handler","type":"(error: Error) => void","description":"!undefined","optional":"!undefined"}],"returnType":"void"},{"name":"onMessage","signature":"onMessage(handler: (message: DriverMessage) => void): void","description":"Register a message handler","parameters":[{"name":"handler","type":"(message: DriverMessage) => void","description":"!undefined","optional":"!undefined"}],"returnType":"void"},{"name":"onShutdown","signature":"onShutdown(handler: (reason: ShutdownReason) => void): void","description":"Register a shutdown handler","parameters":[{"name":"handler","type":"(reason: ShutdownReason) => void","description":"!undefined","optional":"!undefined"}],"returnType":"void"},{"name":"send","signature":"send(message: DriverMessage): Promise<void>","description":"Send a message through the channel","parameters":[{"name":"message","type":"DriverMessage","description":"!undefined","optional":"!undefined"}],"returnType":"Promise<void>"}],"signature":"class WorkerThreadsChannel"},"worker-threads-server-channel":{"name":"WorkerThreadsServerChannel","slug":"worker-threads-server-channel","path":"/api/worker-threads-server-channel","module":"core","kind":"class","comment":{"summary":"Worker threads server channel implementation.\n\nWraps parentPort and provides the ServerChannel interface."},"description":"Worker threads server channel implementation.\n\nWraps parentPort and provides the ServerChannel interface.","category":"!undefined","methods":[{"name":"onError","signature":"onError(handler: (error: Error) => void): void","description":"Register an error handler","parameters":[{"name":"handler","type":"(error: Error) => void","description":"!undefined","optional":"!undefined"}],"returnType":"void"},{"name":"onMessage","signature":"onMessage(handler: (message: DriverMessage, respond: ResponseFunction) => void): void","description":"Register a message handler","parameters":[{"name":"handler","type":"(message: DriverMessage, respond: ResponseFunction) => void","description":"!undefined","optional":"!undefined"}],"returnType":"void"},{"name":"start","signature":"start(): void","description":"Start listening for messages from the host","parameters":"!undefined","returnType":"void"},{"name":"stop","signature":"stop(): Promise<void>","description":"Stop the server and cleanup","parameters":"!undefined","returnType":"Promise<void>"}],"signature":"class WorkerThreadsServerChannel"},"worker-threads-startup-data":{"name":"WorkerThreadsStartupData","slug":"worker-threads-startup-data","path":"/api/worker-threads-startup-data","module":"core","kind":"interface","comment":{"summary":"Startup data specific to worker_threads driver.\n\nExtends the base StartupData with worker_threads-specific fields."},"description":"Startup data specific to worker_threads driver.\n\nExtends the base StartupData with worker_threads-specific fields.","category":"!undefined","properties":[{"name":"driver","type":"\"worker_threads\"","description":"Driver identifier - always 'worker_threads' for this driver","optional":"!undefined","readonly":"!undefined"}],"signature":"interface WorkerThreadsStartupData extends StartupData"},"worker-threads-driver-type":{"name":"WorkerThreadsDriverType","slug":"worker-threads-driver-type","path":"/api/worker-threads-driver-type","module":"core","kind":"type","comment":{"summary":"Type of the WorkerThreadsDriver"},"description":"Type of the WorkerThreadsDriver","category":"!undefined","signature":"type WorkerThreadsDriverType = typeof unknown"},"startup-data-worker-key":{"name":"STARTUP_DATA_WORKER_KEY","slug":"startup-data-worker-key","path":"/api/startup-data-worker-key","module":"core","kind":"variable","comment":{"summary":"workerData key for startup data"},"description":"workerData key for startup data","category":"!undefined","signature":"type STARTUP_DATA_WORKER_KEY = \"__isolatedWorkers\""},"worker-threads-driver":{"name":"WorkerThreadsDriver","slug":"worker-threads-driver","path":"/api/worker-threads-driver","module":"core","kind":"variable","comment":{"summary":"Worker threads driver.\n\nUses worker_threads module with MessagePort for IPC.\nSupports SharedArrayBuffer for shared memory.","examples":["import { WorkerThreadsDriver } from 'isolated-workers/drivers/worker-threads';\n\n// Host side: spawn a worker\nconst channel = await WorkerThreadsDriver.spawn('./worker.js', {\n  resourceLimits: { maxOldGenerationSizeMb: 128 },\n});\n\n// Worker side: create server\nconst server = WorkerThreadsDriver.createServer();"]},"description":"Worker threads driver.\n\nUses worker_threads module with MessagePort for IPC.\nSupports SharedArrayBuffer for shared memory.","category":"!undefined","signature":"type WorkerThreadsDriver = { name: \"worker_threads\"; createServer: unknown; getStartupData: unknown; spawn: unknown; transferSharedMemory: unknown } & { capabilities: InferCapabilities<{ name: \"worker_threads\"; createServer: unknown; getStartupData: unknown; spawn: unknown; transferSharedMemory: unknown }> }"},"worker-threads-driver-options":{"name":"WorkerThreadsDriverOptions","slug":"worker-threads-driver-options","path":"/api/worker-threads-driver-options","module":"core","kind":"interface","comment":{"summary":"Options for worker threads driver spawn"},"description":"Options for worker threads driver spawn","category":"!undefined","properties":[{"name":"argv","type":"string[]","description":"Arguments to pass to the worker script","optional":true,"readonly":"!undefined"},{"name":"eval","type":"boolean","description":"If true, script is treated as JavaScript code instead of a path","optional":true,"readonly":"!undefined"},{"name":"execArgv","type":"string[]","description":"List of node CLI options passed to the worker.\nUseful for loading TypeScript files via tsx:","optional":true,"readonly":"!undefined"},{"name":"logger","type":"Logger","description":"Custom logger instance","optional":true,"readonly":"!undefined"},{"name":"logLevel","type":"LogLevel","description":"Log level for driver operations","optional":true,"readonly":"!undefined"},{"name":"resourceLimits","type":"WorkerThreadsResourceLimits","description":"Resource limits for the worker thread","optional":true,"readonly":"!undefined"},{"name":"serializer","type":"Serializer","description":"Custom serializer (must match worker side)","optional":true,"readonly":"!undefined"},{"name":"transferList","type":"ArrayBuffer[]","description":"List of transferable objects to transfer to worker","optional":true,"readonly":"!undefined"},{"name":"workerData","type":"unknown","description":"Additional data to pass to worker via workerData","optional":true,"readonly":"!undefined"}],"signature":"interface WorkerThreadsDriverOptions"},"worker-threads-resource-limits":{"name":"WorkerThreadsResourceLimits","slug":"worker-threads-resource-limits","path":"/api/worker-threads-resource-limits","module":"core","kind":"interface","comment":{"summary":"Resource limits for worker threads"},"description":"Resource limits for worker threads","category":"!undefined","properties":[{"name":"codeRangeSizeMb","type":"number","description":"Size of the pre-allocated code range in MB","optional":true,"readonly":"!undefined"},{"name":"maxOldGenerationSizeMb","type":"number","description":"Maximum size of the old generation heap in MB","optional":true,"readonly":"!undefined"},{"name":"maxYoungGenerationSizeMb","type":"number","description":"Maximum size of the young generation heap in MB","optional":true,"readonly":"!undefined"},{"name":"stackSizeMb","type":"number","description":"Default stack size for the worker thread in KB","optional":true,"readonly":"!undefined"}],"signature":"interface WorkerThreadsResourceLimits"},"child-process-capabilities":{"name":"ChildProcessCapabilities","slug":"child-process-capabilities","path":"/api/child-process-capabilities","module":"core","kind":"interface","comment":{"summary":"Capability type for child_process driver.\n\nChild process workers support reconnection and detaching,\nbut cannot use SharedArrayBuffer across the IPC boundary."},"description":"Capability type for child_process driver.\n\nChild process workers support reconnection and detaching,\nbut cannot use SharedArrayBuffer across the IPC boundary.","category":"Drivers","properties":[{"name":"detach","type":"true","description":"Worker can outlive parent process","optional":"!undefined","readonly":"!undefined"},{"name":"reconnect","type":"true","description":"Can disconnect/reconnect to running worker","optional":"!undefined","readonly":"!undefined"},{"name":"sharedMemory","type":"false","description":"Supports SharedArrayBuffer","optional":"!undefined","readonly":"!undefined"}],"signature":"interface ChildProcessCapabilities extends DriverCapabilities"},"connection":{"name":"Connection","slug":"connection","path":"/api/connection","module":"core","kind":"interface","comment":{"summary":"Active connection interface"},"description":"Active connection interface","category":"!undefined","properties":[{"name":"isConnected","type":"boolean","description":"Whether the connection is active","optional":"!undefined","readonly":"!undefined"},{"name":"socket","type":"Socket","description":"Underlying socket","optional":"!undefined","readonly":"!undefined"}],"methods":[{"name":"close","signature":"close(): Promise<void>","description":"Close the connection","parameters":"!undefined","returnType":"Promise<void>"},{"name":"onClose","signature":"onClose(handler: () => void): void","description":"Register a close handler","parameters":[{"name":"handler","type":"() => void","description":"!undefined","optional":"!undefined"}],"returnType":"void"},{"name":"onError","signature":"onError(handler: (error: Error) => void): void","description":"Register an error handler","parameters":[{"name":"handler","type":"(error: Error) => void","description":"!undefined","optional":"!undefined"}],"returnType":"void"},{"name":"onMessage","signature":"onMessage(handler: (message: TypedResult) => void): void","description":"Register a message handler","parameters":[{"name":"handler","type":"(message: TypedResult) => void","description":"!undefined","optional":"!undefined"}],"returnType":"void"},{"name":"send","signature":"send(message: TypedMessage<T>): Promise<void>","description":"Send a message through the connection","parameters":[{"name":"message","type":"TypedMessage<T>","description":"!undefined","optional":"!undefined"}],"returnType":"Promise<void>"}],"signature":"interface Connection"},"connection-options":{"name":"ConnectionOptions","slug":"connection-options","path":"/api/connection-options","module":"core","kind":"interface","comment":{"summary":"Connection options"},"description":"Connection options","category":"!undefined","properties":[{"name":"logger","type":"Logger","description":"Custom logger","optional":true,"readonly":"!undefined"},{"name":"maxDelay","type":"number","description":"Maximum delay cap in ms (default: 5000)","optional":true,"readonly":"!undefined"},{"name":"maxRetries","type":"number","description":"Maximum number of retry attempts (default: 5)","optional":true,"readonly":"!undefined"},{"name":"middleware","type":"Middleware<TDefs>[]","description":"Per-instance middleware pipeline","optional":true,"readonly":"!undefined"},{"name":"reconnect","type":"boolean","description":"Whether to enable reconnection (default: false)","optional":true,"readonly":"!undefined"},{"name":"retryDelay","type":"number | (attempt: number) => number","description":"Base delay in ms between retries, or custom delay function (default: 100)","optional":true,"readonly":"!undefined"},{"name":"serializer","type":"Serializer","description":"Custom serializer","optional":true,"readonly":"!undefined"},{"name":"socketPath","type":"string","description":"Socket path to connect to","optional":"!undefined","readonly":"!undefined"},{"name":"timeout","type":"number","description":"Connection timeout in ms (default: 10000)","optional":true,"readonly":"!undefined"}],"signature":"interface ConnectionOptions<TDefs>"},"detach-capability":{"name":"DetachCapability","slug":"detach-capability","path":"/api/detach-capability","module":"core","kind":"interface","comment":{"summary":"Detach capability mixin.\n\nChannels that support detaching expose this to indicate\nwhether the worker is running detached from the parent."},"description":"Detach capability mixin.\n\nChannels that support detaching expose this to indicate\nwhether the worker is running detached from the parent.","category":"!undefined","properties":[{"name":"detached","type":"boolean","description":"Whether the worker is detached","optional":"!undefined","readonly":true}],"signature":"interface DetachCapability"},"driver":{"name":"Driver","slug":"driver","path":"/api/driver","module":"core","kind":"interface","comment":{"summary":"Driver interface for spawning workers.\n\nDrivers implement this interface to provide different worker\ncommunication backends.","examples":["const childProcessDriver: Driver<ChildProcessCapabilities, ChildProcessOptions> = {\n  name: 'child_process',\n  capabilities: { reconnect: true, detach: true, sharedMemory: false },\n  spawn: async (script, options) => { ... }\n};"]},"description":"Driver interface for spawning workers.\n\nDrivers implement this interface to provide different worker\ncommunication backends.","category":"Drivers","properties":[{"name":"capabilities","type":"TCapabilities","description":"Driver capabilities","optional":"!undefined","readonly":true},{"name":"name","type":"string","description":"Driver identifier","optional":"!undefined","readonly":true}],"methods":[{"name":"spawn","signature":"spawn(script: string, options: TOptions): Promise<DriverChannel>","description":"Spawn a worker and return communication channel","parameters":[{"name":"script","type":"string","description":"!undefined","optional":"!undefined"},{"name":"options","type":"TOptions","description":"!undefined","optional":"!undefined"}],"returnType":"Promise<DriverChannel>"}],"signature":"interface Driver<TCapabilities, TOptions>"},"driver-capabilities":{"name":"DriverCapabilities","slug":"driver-capabilities","path":"/api/driver-capabilities","module":"core","kind":"interface","comment":{"summary":"Driver capability flags.\n\nThese flags indicate what features a driver supports,\nallowing higher-level code to make decisions based on\navailable capabilities."},"description":"Driver capability flags.\n\nThese flags indicate what features a driver supports,\nallowing higher-level code to make decisions based on\navailable capabilities.","category":"Drivers","properties":[{"name":"detach","type":"boolean","description":"Worker can outlive parent process","optional":"!undefined","readonly":"!undefined"},{"name":"reconnect","type":"boolean","description":"Can disconnect/reconnect to running worker","optional":"!undefined","readonly":"!undefined"},{"name":"sharedMemory","type":"boolean","description":"Supports SharedArrayBuffer","optional":"!undefined","readonly":"!undefined"}],"signature":"interface DriverCapabilities"},"driver-channel":{"name":"DriverChannel","slug":"driver-channel","path":"/api/driver-channel","module":"core","kind":"interface","comment":{"summary":"Communication channel returned by driver spawn.\n\nThe channel provides a unified interface for sending messages,\nhandling events, and managing the connection lifecycle."},"description":"Communication channel returned by driver spawn.\n\nThe channel provides a unified interface for sending messages,\nhandling events, and managing the connection lifecycle.","category":"!undefined","properties":[{"name":"isConnected","type":"boolean","description":"Whether the channel is connected","optional":"!undefined","readonly":true},{"name":"pid","type":"number","description":"Process ID (undefined for worker_threads)","optional":"!undefined","readonly":true}],"methods":[{"name":"close","signature":"close(): Promise<void>","description":"Close the channel","parameters":"!undefined","returnType":"Promise<void>"},{"name":"onClose","signature":"onClose(handler: () => void): void","description":"Register a close handler","parameters":[{"name":"handler","type":"() => void","description":"!undefined","optional":"!undefined"}],"returnType":"void"},{"name":"onError","signature":"onError(handler: (error: Error) => void): void","description":"Register an error handler","parameters":[{"name":"handler","type":"(error: Error) => void","description":"!undefined","optional":"!undefined"}],"returnType":"void"},{"name":"onMessage","signature":"onMessage(handler: (message: DriverMessage) => void): void","description":"Register a message handler","parameters":[{"name":"handler","type":"(message: DriverMessage) => void","description":"!undefined","optional":"!undefined"}],"returnType":"void"},{"name":"onShutdown","signature":"onShutdown(handler: (reason: ShutdownReason) => void): void","description":"Register a shutdown handler","parameters":[{"name":"handler","type":"(reason: ShutdownReason) => void","description":"!undefined","optional":"!undefined"}],"returnType":"void"},{"name":"send","signature":"send(message: DriverMessage): Promise<void>","description":"Send a message through the channel","parameters":[{"name":"message","type":"DriverMessage","description":"!undefined","optional":"!undefined"}],"returnType":"Promise<void>"}],"signature":"interface DriverChannel"},"driver-message":{"name":"DriverMessage","slug":"driver-message","path":"/api/driver-message","module":"core","kind":"interface","comment":{"summary":"Message structure for driver communication.\n\nAll messages sent through the driver layer follow this structure,\nenabling type-safe messaging with transaction tracking."},"description":"Message structure for driver communication.\n\nAll messages sent through the driver layer follow this structure,\nenabling type-safe messaging with transaction tracking.","category":"!undefined","properties":[{"name":"payload","type":"unknown","description":"Message payload data","optional":"!undefined","readonly":"!undefined"},{"name":"tx","type":"string","description":"Transaction ID for request/response correlation","optional":"!undefined","readonly":"!undefined"},{"name":"type","type":"string","description":"Message type identifier","optional":"!undefined","readonly":"!undefined"}],"signature":"interface DriverMessage"},"middleware-context":{"name":"MiddlewareContext","slug":"middleware-context","path":"/api/middleware-context","module":"core","kind":"interface","comment":{"summary":"Context passed to middleware functions","deprecated":"Use Middleware<TDefs> from types instead"},"description":"Context passed to middleware functions","category":"!undefined","properties":[{"name":"direction","type":"MiddlewareDirection","description":"Direction of message flow","optional":"!undefined","readonly":"!undefined"},{"name":"message","type":"unknown","description":"The message being sent or received","optional":"!undefined","readonly":"!undefined"}],"signature":"interface MiddlewareContext"},"reconnect-capability":{"name":"ReconnectCapability","slug":"reconnect-capability","path":"/api/reconnect-capability","module":"core","kind":"interface","comment":{"summary":"Reconnect capability mixin.\n\nChannels that support reconnection implement this interface\nto allow disconnecting while keeping the worker alive."},"description":"Reconnect capability mixin.\n\nChannels that support reconnection implement this interface\nto allow disconnecting while keeping the worker alive.","category":"!undefined","methods":[{"name":"disconnect","signature":"disconnect(): Promise<void>","description":"Disconnect from worker but keep process alive","parameters":"!undefined","returnType":"Promise<void>"},{"name":"reconnect","signature":"reconnect(): Promise<void>","description":"Reconnect to existing worker","parameters":"!undefined","returnType":"Promise<void>"}],"signature":"interface ReconnectCapability"},"server-channel":{"name":"ServerChannel","slug":"server-channel","path":"/api/server-channel","module":"core","kind":"interface","comment":{"summary":"Server channel interface for worker-side communication."},"description":"Server channel interface for worker-side communication.","category":"!undefined","properties":[{"name":"isRunning","type":"boolean","description":"Whether the server is running","optional":"!undefined","readonly":true},{"name":"socketPath","type":"string","description":"Socket path the server is listening on (empty for worker_threads)","optional":"!undefined","readonly":true}],"methods":[{"name":"onError","signature":"onError(handler: (error: Error) => void): void","description":"Register an error handler","parameters":[{"name":"handler","type":"(error: Error) => void","description":"!undefined","optional":"!undefined"}],"returnType":"void"},{"name":"onMessage","signature":"onMessage(handler: (message: DriverMessage, respond: (response: DriverMessage) => Promise<void>) => void): void","description":"Register a message handler","parameters":[{"name":"handler","type":"(message: DriverMessage, respond: (response: DriverMessage) => Promise<void>) => void","description":"!undefined","optional":"!undefined"}],"returnType":"void"},{"name":"stop","signature":"stop(): Promise<void>","description":"Stop the server and cleanup","parameters":"!undefined","returnType":"Promise<void>"}],"signature":"interface ServerChannel"},"server-driver":{"name":"ServerDriver","slug":"server-driver","path":"/api/server-driver","module":"core","kind":"interface","comment":{"summary":"Driver interface for server-side usage.\n\nThis is a minimal interface that drivers must satisfy for use with\nstartWorkerServer. Both ChildProcessDriver and WorkerThreadsDriver\nsatisfy this interface."},"description":"Driver interface for server-side usage.\n\nThis is a minimal interface that drivers must satisfy for use with\nstartWorkerServer. Both ChildProcessDriver and WorkerThreadsDriver\nsatisfy this interface.","category":"!undefined","properties":[{"name":"name","type":"string","description":"Driver identifier","optional":"!undefined","readonly":true}],"methods":[{"name":"createServer","signature":"createServer(options: ServerOptions): ServerChannel | Promise<ServerChannel>","description":"Create server channel","parameters":[{"name":"options","type":"ServerOptions","description":"!undefined","optional":"!undefined"}],"returnType":"ServerChannel | Promise<ServerChannel>"},{"name":"getStartupData","signature":"getStartupData(): unknown","description":"Get startup data (throws if not in correct context)","parameters":"!undefined","returnType":"unknown"}],"signature":"interface ServerDriver"},"server-options":{"name":"ServerOptions","slug":"server-options","path":"/api/server-options","module":"core","kind":"interface","comment":{"summary":"Options for creating a server channel"},"description":"Options for creating a server channel","category":"!undefined","properties":[{"name":"logger","type":"Logger","description":"Custom logger","optional":true,"readonly":"!undefined"},{"name":"logLevel","type":"LogLevel","description":"Log level","optional":true,"readonly":"!undefined"},{"name":"serializer","type":"Serializer","description":"Custom serializer (must match host!)","optional":true,"readonly":"!undefined"}],"signature":"interface ServerOptions"},"typed-message":{"name":"TypedMessage","slug":"typed-message","path":"/api/typed-message","module":"core","kind":"interface","comment":{"summary":"Message with type discriminator"},"description":"Message with type discriminator","category":"!undefined","properties":[{"name":"payload","type":"T","description":"!undefined","optional":"!undefined","readonly":"!undefined"},{"name":"type","type":"string","description":"!undefined","optional":"!undefined","readonly":"!undefined"}],"signature":"interface TypedMessage<T> extends BaseMessage"},"typed-result":{"name":"TypedResult","slug":"typed-result","path":"/api/typed-result","module":"core","kind":"interface","comment":{"summary":"Result message with type discriminator"},"description":"Result message with type discriminator","category":"!undefined","properties":[{"name":"payload","type":"T","description":"!undefined","optional":"!undefined","readonly":"!undefined"},{"name":"type","type":"string","description":"!undefined","optional":"!undefined","readonly":"!undefined"}],"signature":"interface TypedResult<T> extends BaseMessage"},"worker-client":{"name":"WorkerClient","slug":"worker-client","path":"/api/worker-client","module":"core","kind":"interface","comment":{"summary":"Base worker client interface for type-safe messaging.\n\nThe availability of certain methods depends on the driver's capabilities:\n- `disconnect()` / `reconnect()`: Only available with child_process driver\n- `pid`: Returns number for child_process, undefined for worker_threads"},"description":"Base worker client interface for type-safe messaging.\n\nThe availability of certain methods depends on the driver's capabilities:\n- `disconnect()` / `reconnect()`: Only available with child_process driver\n- `pid`: Returns number for child_process, undefined for worker_threads","category":"!undefined","properties":[{"name":"capabilities","type":"TCapabilities","description":"The driver capabilities for this worker","optional":"!undefined","readonly":true},{"name":"disconnect","type":"TCapabilities[\"reconnect\"] extends true ? () => Promise<void> : never","description":"Disconnect from worker but keep process alive.\nOnly available when driver supports reconnect capability.","optional":"!undefined","readonly":"!undefined"},{"name":"isActive","type":"boolean","description":"Whether the worker process is active","optional":"!undefined","readonly":"!undefined"},{"name":"isConnected","type":"boolean","description":"Whether connection to worker is active","optional":"!undefined","readonly":"!undefined"},{"name":"pid","type":"number","description":"Process ID of the worker.\nReturns undefined for worker_threads (they share the parent's PID).","optional":"!undefined","readonly":"!undefined"},{"name":"reconnect","type":"TCapabilities[\"reconnect\"] extends true ? () => Promise<void> : never","description":"Reconnect to existing worker.\nOnly available when driver supports reconnect capability.","optional":"!undefined","readonly":"!undefined"}],"methods":[{"name":"close","signature":"close(): Promise<void>","description":"Close the worker gracefully","parameters":"!undefined","returnType":"Promise<void>"},{"name":"send","signature":"send(type: K, payload: TMessages[K][\"payload\"]): Promise<TMessages[K] extends { result: R } ? R : void>","description":"Send a message and await response","parameters":[{"name":"type","type":"K","description":"!undefined","optional":"!undefined"},{"name":"payload","type":"TMessages[K][\"payload\"]","description":"!undefined","optional":"!undefined"}],"returnType":"Promise<TMessages[K] extends { result: R } ? R : void>"}],"signature":"interface WorkerClient<TMessages, TCapabilities>"},"worker-options":{"name":"WorkerOptions","slug":"worker-options","path":"/api/worker-options","module":"core","kind":"interface","comment":{"summary":"Worker options for spawning"},"description":"Worker options for spawning","category":"!undefined","properties":[{"name":"connection","type":"{ attempts: number; delay: number | (attempt: number) => number; maxDelay: number }","description":"Connection options (child_process driver only).","optional":true,"readonly":"!undefined"},{"name":"debug","type":"boolean","description":"!undefined","optional":true,"readonly":"!undefined"},{"name":"detached","type":"boolean","description":"Worker lifecycle options","optional":true,"readonly":"!undefined"},{"name":"driver","type":"TDriver","description":"Driver to use for spawning the worker.\n\nIf not provided, the child_process driver is dynamically loaded.\nPass a driver instance for explicit control over the communication backend.","optional":true,"readonly":"!undefined"},{"name":"driverOptions","type":"Partial<DriverOptionsFor<TDriver>>","description":"Driver-specific options.\n\nThese options are passed directly to the driver's spawn method.\nAvailable options depend on the driver being used.","optional":true,"readonly":"!undefined"},{"name":"env","type":"Record<string, string>","description":"Environment variables to pass to worker","optional":true,"readonly":"!undefined"},{"name":"logger","type":"Logger","description":"!undefined","optional":true,"readonly":"!undefined"},{"name":"logLevel","type":"LogLevel","description":"Logging options","optional":true,"readonly":"!undefined"},{"name":"middleware","type":"Middleware<TDefs>[]","description":"Messaging options","optional":true,"readonly":"!undefined"},{"name":"script","type":"string","description":"Path to worker script","optional":"!undefined","readonly":"!undefined"},{"name":"serializer","type":"Serializer","description":"!undefined","optional":true,"readonly":"!undefined"},{"name":"socketPath","type":"string","description":"Advanced options","optional":true,"readonly":"!undefined"},{"name":"spawnOptions","type":"SpawnOptions","description":"!undefined","optional":true,"readonly":"!undefined"},{"name":"timeout","type":"number | Partial<Record<BuiltInTimeoutKey | keyof TDefs, number>>","description":"Timeout configuration for worker operations.\n\nCan be a number (applies to all operations) or an object with per-operation timeouts:\n- `WORKER_STARTUP`: Time to wait for worker to start (default: 10s)\n- `WORKER_MESSAGE`: Default timeout for all messages (default: 5min)\n- `[messageType]`: Timeout for specific message type (overrides WORKER_MESSAGE)","optional":true,"readonly":"!undefined"},{"name":"txIdGenerator","type":"TransactionIdGenerator<TDefs>","description":"!undefined","optional":true,"readonly":"!undefined"},{"name":"unexpectedShutdown","type":"UnexpectedShutdownConfig<TDefs>","description":"Unexpected shutdown configuration","optional":true,"readonly":"!undefined"}],"signature":"interface WorkerOptions<TDefs, TDriver>"},"worker-server":{"name":"WorkerServer","slug":"worker-server","path":"/api/worker-server","module":"core","kind":"interface","comment":{"summary":"Active worker server"},"description":"Active worker server","category":"!undefined","properties":[{"name":"isRunning","type":"boolean","description":"Whether the server is running","optional":"!undefined","readonly":"!undefined"}],"methods":[{"name":"stop","signature":"stop(): Promise<void>","description":"Stop the server and cleanup","parameters":"!undefined","returnType":"Promise<void>"}],"signature":"interface WorkerServer"},"worker-server-options":{"name":"WorkerServerOptions","slug":"worker-server-options","path":"/api/worker-server-options","module":"core","kind":"interface","comment":{"summary":"Server configuration options"},"description":"Server configuration options","category":"!undefined","properties":[{"name":"driver","type":"ServerDriver","description":"Driver to use for server communication.\nDefaults to ChildProcessDriver if not specified.\nMust match the driver used on the host side.","optional":true,"readonly":"!undefined"},{"name":"logger","type":"Logger","description":"Custom logger instance","optional":true,"readonly":"!undefined"},{"name":"logLevel","type":"LogLevel","description":"Log level for server operations","optional":true,"readonly":"!undefined"},{"name":"middleware","type":"Middleware<TDefs>[]","description":"Middleware pipeline for message processing","optional":true,"readonly":"!undefined"},{"name":"serializer","type":"Serializer","description":"Custom serializer (must match host!)","optional":true,"readonly":"!undefined"},{"name":"txIdGenerator","type":"TransactionIdGenerator<TDefs>","description":"Custom transaction ID generator","optional":true,"readonly":"!undefined"}],"signature":"interface WorkerServerOptions<TDefs>"},"worker-threads-capabilities":{"name":"WorkerThreadsCapabilities","slug":"worker-threads-capabilities","path":"/api/worker-threads-capabilities","module":"core","kind":"interface","comment":{"summary":"Capability type for worker_threads driver.\n\nWorker thread workers support SharedArrayBuffer but cannot\nbe reconnected or detached from the parent."},"description":"Capability type for worker_threads driver.\n\nWorker thread workers support SharedArrayBuffer but cannot\nbe reconnected or detached from the parent.","category":"Drivers","properties":[{"name":"detach","type":"false","description":"Worker can outlive parent process","optional":"!undefined","readonly":"!undefined"},{"name":"reconnect","type":"false","description":"Can disconnect/reconnect to running worker","optional":"!undefined","readonly":"!undefined"},{"name":"sharedMemory","type":"true","description":"Supports SharedArrayBuffer","optional":"!undefined","readonly":"!undefined"}],"signature":"interface WorkerThreadsCapabilities extends DriverCapabilities"},"built-in-timeout-key":{"name":"BuiltInTimeoutKey","slug":"built-in-timeout-key","path":"/api/built-in-timeout-key","module":"core","kind":"type","comment":{"summary":"Built-in timeout keys for worker lifecycle events"},"description":"Built-in timeout keys for worker lifecycle events","category":"!undefined","signature":"type BuiltInTimeoutKey = \"WORKER_STARTUP\" | \"WORKER_MESSAGE\" | \"SERVER_CONNECT\""},"driver-options-for":{"name":"DriverOptionsFor","slug":"driver-options-for","path":"/api/driver-options-for","module":"core","kind":"type","comment":{"summary":"Driver-specific options mapping"},"description":"Driver-specific options mapping","category":"!undefined","signature":"type DriverOptionsFor = TDriver extends Driver<ChildProcessCapabilities> ? ChildProcessDriverOptions : TDriver extends Driver<WorkerThreadsCapabilities> ? WorkerThreadsDriverOptions : Record<string, unknown>"},"message-handler":{"name":"MessageHandler","slug":"message-handler","path":"/api/message-handler","module":"core","kind":"type","comment":{"summary":"Handler function type for message processing"},"description":"Handler function type for message processing","category":"!undefined","signature":"type MessageHandler = (payload: unknown) => unknown | Promise<unknown>"},"middleware-direction":{"name":"MiddlewareDirection","slug":"middleware-direction","path":"/api/middleware-direction","module":"core","kind":"type","comment":{"summary":"Direction for middleware context","deprecated":"Use 'incoming' | 'outgoing' directly"},"description":"Direction for middleware context","category":"!undefined","signature":"type MiddlewareDirection = \"send\" | \"receive\""},"timeout-config":{"name":"TimeoutConfig","slug":"timeout-config","path":"/api/timeout-config","module":"core","kind":"type","comment":{"summary":"Timeout configuration allowing per-message-type timeouts.\n\nBuilt-in keys:\n- `WORKER_STARTUP`: Time to wait for worker to start (default: 10s)\n- `SERVER_CONNECT`: Time for server to wait for host connection (default: 30s)\n- `WORKER_MESSAGE`: Default timeout for all messages (default: 5min)\n\nYou can also specify timeouts for specific message types by their key name.\nMessage-specific timeouts take precedence over WORKER_MESSAGE.","examples":["const worker = await createWorker<MyMessages>({\n  script: './worker.js',\n  timeout: {\n    WORKER_STARTUP: 5000,        // 5s startup\n    SERVER_CONNECT: 10000,       // 10s for server to wait for host\n    WORKER_MESSAGE: 60000,       // 1min default for messages\n    'slowOperation': 600000,     // 10min for specific message type\n  }\n});"]},"description":"Timeout configuration allowing per-message-type timeouts.\n\nBuilt-in keys:\n- `WORKER_STARTUP`: Time to wait for worker to start (default: 10s)\n- `SERVER_CONNECT`: Time for server to wait for host connection (default: 30s)\n- `WORKER_MESSAGE`: Default timeout for all messages (default: 5min)\n\nYou can also specify timeouts for specific message types by their key name.\nMessage-specific timeouts take precedence over WORKER_MESSAGE.","category":"!undefined","signature":"type TimeoutConfig = Partial<Record<BuiltInTimeoutKey | keyof TDefs, number>>"},"worker-handler":{"name":"WorkerHandler","slug":"worker-handler","path":"/api/worker-handler","module":"core","kind":"type","comment":{"summary":"Handler function type for worker messages"},"description":"Handler function type for worker messages","category":"!undefined","signature":"type WorkerHandler = (payload: TPayload) => TResult | Promise<TResult>"},"worker-handlers":{"name":"WorkerHandlers","slug":"worker-handlers","path":"/api/worker-handlers","module":"core","kind":"type","comment":{"summary":"Collection of handlers for different message types"},"description":"Collection of handlers for different message types","category":"!undefined","signature":"type WorkerHandlers = Record<string, WorkerHandler>"},"create-worker":{"name":"createWorker","slug":"create-worker","path":"/api/create-worker","module":"core","kind":"function","comment":{"summary":"Create a worker process with type-safe messaging.\n\nBy default, uses the child_process driver which spawns a separate Node.js process\nand communicates via Unix domain sockets (or named pipes on Windows).\n\nYou can pass a different driver for alternative backends:\n- `WorkerThreadsDriver`: Uses worker_threads with MessagePort (shared memory capable)","examples":["const worker = await createWorker<MyMessages>({\n  script: './worker.js',\n});","import { WorkerThreadsDriver } from 'isolated-workers/drivers/worker-threads';\n\nconst worker = await createWorker<MyMessages>({\n  script: './worker.js',\n  driver: new WorkerThreadsDriver(),\n});"]},"description":"Create a worker process with type-safe messaging.\n\nBy default, uses the child_process driver which spawns a separate Node.js process\nand communicates via Unix domain sockets (or named pipes on Windows).\n\nYou can pass a different driver for alternative backends:\n- `WorkerThreadsDriver`: Uses worker_threads with MessagePort (shared memory capable)","category":"Core","parameters":[{"name":"options","type":"WorkerOptions<TMessages, TDriver>","description":"Worker options including script path and optional driver","optional":"!undefined","defaultValue":"!undefined"}],"returnType":"Promise<WorkerClient<TMessages, TDriver extends Driver<C, unknown> ? C : DriverCapabilities>>","signature":"function createWorker(options: WorkerOptions<TMessages, TDriver>): Promise<WorkerClient<TMessages, TDriver extends Driver<C, unknown> ? C : DriverCapabilities>>"},"start-worker-server":{"name":"startWorkerServer","slug":"start-worker-server","path":"/api/start-worker-server","module":"core","kind":"function","comment":{"summary":"Start a worker server that listens for messages (type-safe version)"},"description":"Start a worker server that listens for messages (type-safe version)","category":"Core","parameters":[{"name":"handlers","type":"Handlers<TDefs>","description":"Map of typed message handlers","optional":"!undefined","defaultValue":"!undefined"},{"name":"options","type":"WorkerServerOptions<TDefs>","description":"Server options","optional":true,"defaultValue":"!undefined"}],"returnType":"Promise<WorkerServer>","signature":"function startWorkerServer(handlers: Handlers<TDefs>, options?: WorkerServerOptions<TDefs>): Promise<WorkerServer>"},"json-serializer":{"name":"JsonSerializer","slug":"json-serializer","path":"/api/json-serializer","module":"utils","kind":"class","comment":{"summary":"Default JSON serializer with newline terminator"},"description":"Default JSON serializer with newline terminator","category":"Serialization","properties":[{"name":"terminator","type":"string","description":"Terminator sequence used to delimit messages in the stream.\nMust be the same on both client and server.","optional":"!undefined","readonly":"!undefined"}],"methods":[{"name":"deserialize","signature":"deserialize(data: string | Uint8Array<ArrayBufferLike>): T","description":"Deserialize string or Uint8Array back to data","parameters":[{"name":"data","type":"string | Uint8Array<ArrayBufferLike>","description":"!undefined","optional":"!undefined"}],"returnType":"T"},{"name":"serialize","signature":"serialize(data: T): string","description":"Serialize data to string or Uint8Array","parameters":[{"name":"data","type":"T","description":"!undefined","optional":"!undefined"}],"returnType":"string"}],"signature":"class JsonSerializer extends Serializer"},"serializer":{"name":"Serializer","slug":"serializer","path":"/api/serializer","module":"utils","kind":"class","comment":{"summary":"Abstract serializer class for custom message serialization.\nIncludes terminator sequence to delimit messages in the stream.\n\nIMPORTANT: Must be a named class (not anonymous) for mismatch detection."},"description":"Abstract serializer class for custom message serialization.\nIncludes terminator sequence to delimit messages in the stream.\n\nIMPORTANT: Must be a named class (not anonymous) for mismatch detection.","category":"Serialization","properties":[{"name":"terminator","type":"string | Uint8Array<ArrayBufferLike>","description":"Terminator sequence used to delimit messages in the stream.\nMust be the same on both client and server.","optional":"!undefined","readonly":"!undefined"}],"methods":[{"name":"deserialize","signature":"deserialize(data: string | Uint8Array<ArrayBufferLike>): T","description":"Deserialize string or Uint8Array back to data","parameters":[{"name":"data","type":"string | Uint8Array<ArrayBufferLike>","description":"!undefined","optional":"!undefined"}],"returnType":"T"},{"name":"serialize","signature":"serialize(data: T): string | Uint8Array<ArrayBufferLike>","description":"Serialize data to string or Uint8Array","parameters":[{"name":"data","type":"T","description":"!undefined","optional":"!undefined"}],"returnType":"string | Uint8Array<ArrayBufferLike>"}],"signature":"class Serializer"},"logger":{"name":"Logger","slug":"logger","path":"/api/logger","module":"utils","kind":"interface","comment":{"summary":"Logger interface - must implement all log level methods"},"description":"Logger interface - must implement all log level methods","category":"!undefined","methods":[{"name":"debug","signature":"debug(parts: unknown[]): void","description":"!undefined","parameters":[{"name":"parts","type":"unknown[]","description":"!undefined","optional":"!undefined"}],"returnType":"void"},{"name":"error","signature":"error(parts: unknown[]): void","description":"!undefined","parameters":[{"name":"parts","type":"unknown[]","description":"!undefined","optional":"!undefined"}],"returnType":"void"},{"name":"info","signature":"info(parts: unknown[]): void","description":"!undefined","parameters":[{"name":"parts","type":"unknown[]","description":"!undefined","optional":"!undefined"}],"returnType":"void"},{"name":"warn","signature":"warn(parts: unknown[]): void","description":"!undefined","parameters":[{"name":"parts","type":"unknown[]","description":"!undefined","optional":"!undefined"}],"returnType":"void"}],"signature":"interface Logger"},"log-level":{"name":"LogLevel","slug":"log-level","path":"/api/log-level","module":"utils","kind":"type","comment":{"summary":"Log level enum"},"description":"Log level enum","category":"!undefined","signature":"type LogLevel = \"debug\" | \"info\" | \"warn\" | \"error\""},"default-logger":{"name":"defaultLogger","slug":"default-logger","path":"/api/default-logger","module":"utils","kind":"variable","comment":{"summary":"Default console-based logger"},"description":"Default console-based logger","category":"!undefined","signature":"type defaultLogger = Logger"},"worker-crashed-error":{"name":"WorkerCrashedError","slug":"worker-crashed-error","path":"/api/worker-crashed-error","module":"types","kind":"class","comment":"!undefined","description":"!undefined","category":"!undefined","properties":[{"name":"attempt","type":"number","description":"!undefined","optional":"!undefined","readonly":true},{"name":"maxAttempts","type":"number","description":"!undefined","optional":"!undefined","readonly":true},{"name":"messageType","type":"string","description":"!undefined","optional":"!undefined","readonly":true},{"name":"name","type":"string","description":"!undefined","optional":"!undefined","readonly":"!undefined"},{"name":"reason","type":"ShutdownReason","description":"!undefined","optional":"!undefined","readonly":true}],"signature":"class WorkerCrashedError extends Error"},"base-message":{"name":"BaseMessage","slug":"base-message","path":"/api/base-message","module":"types","kind":"interface","comment":{"summary":"Base message with transaction ID for request/response pairing"},"description":"Base message with transaction ID for request/response pairing","category":"!undefined","properties":[{"name":"tx","type":"string","description":"Transaction ID","optional":"!undefined","readonly":"!undefined"}],"signature":"interface BaseMessage"},"message-def":{"name":"MessageDef","slug":"message-def","path":"/api/message-def","module":"types","kind":"interface","comment":{"summary":"Message definition shape - each message has a payload and optional result"},"description":"Message definition shape - each message has a payload and optional result","category":"!undefined","properties":[{"name":"payload","type":"unknown","description":"Payload type for the message","optional":"!undefined","readonly":"!undefined"},{"name":"result","type":"unknown","description":"Optional result type (if message expects a response)","optional":true,"readonly":"!undefined"}],"signature":"interface MessageDef"},"all-messages":{"name":"AllMessages","slug":"all-messages","path":"/api/all-messages","module":"types","kind":"type","comment":{"summary":"Union of all message types in the definition.","examples":["type AllMsgs = AllMessages<MyMessages>;\n// MessageOf<MyMessages, 'load'> | MessageOf<MyMessages, 'compute'> | ..."]},"description":"Union of all message types in the definition.","category":"!undefined","signature":"type AllMessages = { [key: string]: ... }[keyof TDefs & string]"},"all-results":{"name":"AllResults","slug":"all-results","path":"/api/all-results","module":"types","kind":"type","comment":{"summary":"Union of all result types in the definition.","examples":["type AllRes = AllResults<MyMessages>;\n// ResultOf<MyMessages, 'load'> | ResultOf<MyMessages, 'compute'> | ..."]},"description":"Union of all result types in the definition.","category":"!undefined","signature":"type AllResults = { [key: string]: ... }[WithResult<TDefs> & string]"},"any-message":{"name":"AnyMessage","slug":"any-message","path":"/api/any-message","module":"types","kind":"type","comment":{"summary":"Union of all message types (requests and responses).\nUse this for middleware, transaction ID generators, and other\nfunctions that handle any message type.","examples":["type MyMessages = DefineMessages<{\n  load: { payload: { config: string }; result: { loaded: true } };\n}>;\n\nfunction middleware(msg: AnyMessage<MyMessages>) {\n  console.log('Handling:', msg.type);\n}"]},"description":"Union of all message types (requests and responses).\nUse this for middleware, transaction ID generators, and other\nfunctions that handle any message type.","category":"!undefined","signature":"type AnyMessage = AllMessages<TDefs> | AllResults<TDefs>"},"define-messages":{"name":"DefineMessages","slug":"define-messages","path":"/api/define-messages","module":"types","kind":"type","comment":{"summary":"Type constructor for defining message sets.\n\nUse this to define your worker's message contract with full type safety.","examples":["type MyMessages = DefineMessages<{\n  load: { payload: { config: string }; result: { loaded: true } };\n  compute: { payload: { data: number }; result: { value: number } };\n  shutdown: { payload: void };\n}>;"]},"description":"Type constructor for defining message sets.\n\nUse this to define your worker's message contract with full type safety.","category":"Types","signature":"type DefineMessages = TDefs"},"handlers":{"name":"Handlers","slug":"handlers","path":"/api/handlers","module":"types","kind":"type","comment":{"summary":"Handler function type for a message definition.\n\nHandlers receive the payload and return the result (or void if no result).","examples":["const handlers: Handlers<MyMessages> = {\n  load: async (payload) => ({ loaded: true }),\n  shutdown: () => { console.log('bye'); }\n};"]},"description":"Handler function type for a message definition.\n\nHandlers receive the payload and return the result (or void if no result).","category":"Configuration","signature":"type Handlers = { [key: string]: ... }"},"maybe-promise":{"name":"MaybePromise","slug":"maybe-promise","path":"/api/maybe-promise","module":"types","kind":"type","comment":{"summary":"Utility type for values that may be promises"},"description":"Utility type for values that may be promises","category":"!undefined","signature":"type MaybePromise = T | Promise<T>"},"message-defs":{"name":"MessageDefs","slug":"message-defs","path":"/api/message-defs","module":"types","kind":"type","comment":{"summary":"Collection of message definitions"},"description":"Collection of message definitions","category":"!undefined","signature":"type MessageDefs = Record<string, MessageDef>"},"message-of":{"name":"MessageOf","slug":"message-of","path":"/api/message-of","module":"types","kind":"type","comment":{"summary":"Extract the full message type for a given key.","examples":["type LoadMessage = MessageOf<MyMessages, 'load'>;\n// { tx: string; type: 'load'; payload: { config: string } }"]},"description":"Extract the full message type for a given key.","category":"!undefined","signature":"type MessageOf = BaseMessage & { payload: TDefs[K][\"payload\"]; type: K }"},"message-result":{"name":"MessageResult","slug":"message-result","path":"/api/message-result","module":"types","kind":"type","comment":{"summary":"Map a message type to its corresponding result type.","examples":["type LoadResponse = MessageResult<'load', MyMessages>;\n// ResultOf<MyMessages, 'load'>"]},"description":"Map a message type to its corresponding result type.","category":"!undefined","signature":"type MessageResult = TMessageType extends WithResult<TDefs> ? ResultOf<TDefs, TMessageType> : never"},"message-type":{"name":"MessageType","slug":"message-type","path":"/api/message-type","module":"types","kind":"type","comment":"!undefined","description":"!undefined","category":"!undefined","signature":"type MessageType = keyof TDefs & string"},"middleware":{"name":"Middleware","slug":"middleware","path":"/api/middleware","module":"types","kind":"type","comment":{"summary":"Middleware function type for message inspection/transformation.\nApplied sequentially in the order provided.\n\nMessages are sealed before being passed to middleware, so you can\nmodify existing properties but cannot add new ones.","examples":["const logMiddleware: Middleware<MyMessages> = (msg, direction) => {\n  console.log(`${direction}:`, msg.type);\n  return msg;\n};"]},"description":"Middleware function type for message inspection/transformation.\nApplied sequentially in the order provided.\n\nMessages are sealed before being passed to middleware, so you can\nmodify existing properties but cannot add new ones.","category":"Configuration","signature":"type Middleware = (message: AnyMessage<TDefs>, direction: \"incoming\" | \"outgoing\") => AnyMessage<TDefs> | void | Promise<AnyMessage<TDefs> | void>"},"payload-of":{"name":"PayloadOf","slug":"payload-of","path":"/api/payload-of","module":"types","kind":"type","comment":{"summary":"Extract the payload type for a given message key."},"description":"Extract the payload type for a given message key.","category":"!undefined","signature":"type PayloadOf = TDefs[K][\"payload\"]"},"result-of":{"name":"ResultOf","slug":"result-of","path":"/api/result-of","module":"types","kind":"type","comment":{"summary":"Extract the full result type for a given key.","examples":["type LoadResult = ResultOf<MyMessages, 'load'>;\n// { tx: string; type: 'loadResult'; payload: { loaded: true } }"]},"description":"Extract the full result type for a given key.","category":"!undefined","signature":"type ResultOf = BaseMessage & { payload: TDefs[K] extends { result: unknown } ? TDefs[K][\"result\"] : never; type: string }"},"result-payload-of":{"name":"ResultPayloadOf","slug":"result-payload-of","path":"/api/result-payload-of","module":"types","kind":"type","comment":{"summary":"Extract the result type for a given message key."},"description":"Extract the result type for a given message key.","category":"!undefined","signature":"type ResultPayloadOf = TDefs[K] extends { result: unknown } ? TDefs[K][\"result\"] : never"},"shutdown-reason":{"name":"ShutdownReason","slug":"shutdown-reason","path":"/api/shutdown-reason","module":"types","kind":"type","comment":"!undefined","description":"!undefined","category":"!undefined","signature":"type ShutdownReason = { code: number | null; signal: string | null; type: \"exit\" } | { error: Error; type: \"error\" } | { type: \"close\" }"},"transaction-id-generator":{"name":"TransactionIdGenerator","slug":"transaction-id-generator","path":"/api/transaction-id-generator","module":"types","kind":"type","comment":{"summary":"Transaction ID generator function type.\nReceives a message and returns a unique transaction ID string.","examples":["const customGen: TransactionIdGenerator<MyMessages> = (msg) => {\n  return `${msg.type}-${Date.now()}`;\n};"]},"description":"Transaction ID generator function type.\nReceives a message and returns a unique transaction ID string.","category":"!undefined","signature":"type TransactionIdGenerator = (message: AnyMessage<TDefs>) => string"},"unexpected-shutdown-config":{"name":"UnexpectedShutdownConfig","slug":"unexpected-shutdown-config","path":"/api/unexpected-shutdown-config","module":"types","kind":"type","comment":"!undefined","description":"!undefined","category":"!undefined","signature":"type UnexpectedShutdownConfig = UnexpectedShutdownStrategy & { [key: string]: ... }"},"unexpected-shutdown-strategy":{"name":"UnexpectedShutdownStrategy","slug":"unexpected-shutdown-strategy","path":"/api/unexpected-shutdown-strategy","module":"types","kind":"type","comment":"!undefined","description":"!undefined","category":"!undefined","signature":"type UnexpectedShutdownStrategy = { strategy: \"reject\" } | { attempts: number; strategy: \"retry\" }"},"with-result":{"name":"WithResult","slug":"with-result","path":"/api/with-result","module":"types","kind":"type","comment":{"summary":"Extract keys that have a result defined.","examples":["type Messages = DefineMessages<{\n  load: { payload: {}; result: {} };  // Has result\n  shutdown: { payload: {} };          // No result\n}>;\ntype WithRes = WithResult<Messages>; // 'load'"]},"description":"Extract keys that have a result defined.","category":"Types","signature":"type WithResult = { [key: string]: ... }[keyof TDefs]"}},"allExports":[{"name":"ChildProcessChannel","slug":"child-process-channel","path":"/api/child-process-channel","module":"core","kind":"class","comment":{"summary":"Channel implementation for child process driver.\n\nWraps a Connection and ChildProcess, providing the DriverChannel interface\nwith optional reconnect and detach capabilities."},"description":"Channel implementation for child process driver.\n\nWraps a Connection and ChildProcess, providing the DriverChannel interface\nwith optional reconnect and detach capabilities.","category":"!undefined","methods":[{"name":"close","signature":"close(): Promise<void>","description":"Close the channel","parameters":"!undefined","returnType":"Promise<void>"},{"name":"disconnect","signature":"disconnect(): Promise<void>","description":"Disconnect from worker but keep process alive","parameters":"!undefined","returnType":"Promise<void>"},{"name":"onClose","signature":"onClose(handler: () => void): void","description":"Register a close handler","parameters":[{"name":"handler","type":"() => void","description":"!undefined","optional":"!undefined"}],"returnType":"void"},{"name":"onError","signature":"onError(handler: (error: Error) => void): void","description":"Register an error handler","parameters":[{"name":"handler","type":"(error: Error) => void","description":"!undefined","optional":"!undefined"}],"returnType":"void"},{"name":"onMessage","signature":"onMessage(handler: (message: DriverMessage) => void): void","description":"Register a message handler","parameters":[{"name":"handler","type":"(message: DriverMessage) => void","description":"!undefined","optional":"!undefined"}],"returnType":"void"},{"name":"onShutdown","signature":"onShutdown(handler: (reason: ShutdownReason) => void): void","description":"Register a shutdown handler","parameters":[{"name":"handler","type":"(reason: ShutdownReason) => void","description":"!undefined","optional":"!undefined"}],"returnType":"void"},{"name":"reconnect","signature":"reconnect(): Promise<void>","description":"Reconnect to existing worker","parameters":"!undefined","returnType":"Promise<void>"},{"name":"send","signature":"send(message: DriverMessage): Promise<void>","description":"Send a message through the channel","parameters":[{"name":"message","type":"DriverMessage","description":"!undefined","optional":"!undefined"}],"returnType":"Promise<void>"}],"signature":"class ChildProcessChannel"},{"name":"ChildProcessServerChannel","slug":"child-process-server-channel","path":"/api/child-process-server-channel","module":"core","kind":"class","comment":{"summary":"Child process server channel implementation.\n\nWraps a net.Server and provides the ServerChannel interface."},"description":"Child process server channel implementation.\n\nWraps a net.Server and provides the ServerChannel interface.","category":"!undefined","methods":[{"name":"onError","signature":"onError(handler: (error: Error) => void): void","description":"Register an error handler","parameters":[{"name":"handler","type":"(error: Error) => void","description":"!undefined","optional":"!undefined"}],"returnType":"void"},{"name":"onMessage","signature":"onMessage(handler: (message: DriverMessage, respond: ResponseFunction) => void): void","description":"Register a message handler","parameters":[{"name":"handler","type":"(message: DriverMessage, respond: ResponseFunction) => void","description":"!undefined","optional":"!undefined"}],"returnType":"void"},{"name":"start","signature":"start(hostConnectTimeout: number): Promise<void>","description":"Start listening for connections from the host","parameters":[{"name":"hostConnectTimeout","type":"number","description":"!undefined","optional":"!undefined"}],"returnType":"Promise<void>"},{"name":"stop","signature":"stop(): Promise<void>","description":"Stop the server and cleanup","parameters":"!undefined","returnType":"Promise<void>"}],"signature":"class ChildProcessServerChannel"},{"name":"ChildProcessStartupData","slug":"child-process-startup-data","path":"/api/child-process-startup-data","module":"core","kind":"interface","comment":{"summary":"Startup data specific to child_process driver.\n\nExtends the base StartupData with child_process-specific fields."},"description":"Startup data specific to child_process driver.\n\nExtends the base StartupData with child_process-specific fields.","category":"!undefined","properties":[{"name":"driver","type":"\"child_process\"","description":"Driver identifier - always 'child_process' for this driver","optional":"!undefined","readonly":"!undefined"},{"name":"socketPath","type":"string","description":"Socket path for IPC communication (required for child_process)","optional":"!undefined","readonly":"!undefined"}],"signature":"interface ChildProcessStartupData extends StartupData"},{"name":"ChildProcessDriverType","slug":"child-process-driver-type","path":"/api/child-process-driver-type","module":"core","kind":"type","comment":{"summary":"Type of the ChildProcessDriver"},"description":"Type of the ChildProcessDriver","category":"!undefined","signature":"type ChildProcessDriverType = typeof unknown"},{"name":"ResponseFunction","slug":"response-function","path":"/api/response-function","module":"core","kind":"type","comment":{"summary":"Function to send a response back to the host"},"description":"Function to send a response back to the host","category":"!undefined","signature":"type ResponseFunction = (response: DriverMessage) => Promise<void>"},{"name":"ChildProcessDriver","slug":"child-process-driver","path":"/api/child-process-driver","module":"core","kind":"variable","comment":{"summary":"Child process driver.\n\nUses child_process.fork() with Unix domain sockets for IPC.\nSupports disconnect/reconnect and detached workers.","examples":["import { ChildProcessDriver } from 'isolated-workers/drivers/child-process';\n\n// Host side: spawn a worker\nconst channel = await ChildProcessDriver.spawn('./worker.js', {\n  detached: false,\n  timeout: 10000,\n});\n\n// Worker side: create server\nconst server = await ChildProcessDriver.createServer();"]},"description":"Child process driver.\n\nUses child_process.fork() with Unix domain sockets for IPC.\nSupports disconnect/reconnect and detached workers.","category":"!undefined","signature":"type ChildProcessDriver = { detached: false; name: \"child_process\"; createServer: unknown; disconnect: unknown; getStartupData: unknown; reconnect: unknown; spawn: unknown } & { capabilities: InferCapabilities<{ detached: false; name: \"child_process\"; createServer: unknown; disconnect: unknown; getStartupData: unknown; reconnect: unknown; spawn: unknown }> }"},{"name":"DEFAULT_SERVER_CONNECT_TIMEOUT","slug":"default-server-connect-timeout","path":"/api/default-server-connect-timeout","module":"core","kind":"variable","comment":{"summary":"Default server connect timeout (30 seconds)"},"description":"Default server connect timeout (30 seconds)","category":"!undefined","signature":"type DEFAULT_SERVER_CONNECT_TIMEOUT = 30000"},{"name":"STARTUP_DATA_ENV_KEY","slug":"startup-data-env-key","path":"/api/startup-data-env-key","module":"core","kind":"variable","comment":{"summary":"Environment variable key for startup data"},"description":"Environment variable key for startup data","category":"!undefined","signature":"type STARTUP_DATA_ENV_KEY = \"ISOLATED_WORKERS_STARTUP_DATA\""},{"name":"createServer","slug":"create-server","path":"/api/create-server","module":"core","kind":"function","comment":{"summary":"Create a child process server for worker-side communication.\n\nThis function takes startup data to determine the socket path and configuration,\nthen creates a server listening for host connections.","examples":["import { getStartupData } from '../startup.js';\nimport { createServer } from './child-process/server.js';\n\nconst startupData = getStartupData();\nconst server = await createServer(startupData);\n\nserver.onMessage(async (message, respond) => {\n  console.log('Received:', message);\n  await respond({\n    tx: message.tx,\n    type: message.type,\n    payload: { result: 'ok' },\n  });\n});"]},"description":"Create a child process server for worker-side communication.\n\nThis function takes startup data to determine the socket path and configuration,\nthen creates a server listening for host connections.","category":"!undefined","parameters":[{"name":"startupData","type":"ChildProcessStartupData","description":"Startup data from the host process","optional":"!undefined","defaultValue":"!undefined"},{"name":"options","type":"ServerOptions","description":"Server options (overrides startup data if provided)","optional":"!undefined","defaultValue":"{}"}],"returnType":"Promise<ChildProcessServerChannel>","signature":"function createServer(startupData: ChildProcessStartupData, options: ServerOptions): Promise<ChildProcessServerChannel>"},{"name":"encodeStartupData","slug":"encode-startup-data","path":"/api/encode-startup-data","module":"core","kind":"function","comment":{"summary":"Encode startup data for passing to child_process via environment variable."},"description":"Encode startup data for passing to child_process via environment variable.","category":"!undefined","parameters":[{"name":"data","type":"StartupData","description":"The startup data to encode","optional":"!undefined","defaultValue":"!undefined"}],"returnType":"string","signature":"function encodeStartupData(data: StartupData): string"},{"name":"spawnWorker","slug":"spawn-worker","path":"/api/spawn-worker","module":"core","kind":"function","comment":{"summary":"Spawn a worker process and establish communication channel."},"description":"Spawn a worker process and establish communication channel.","category":"!undefined","parameters":[{"name":"script","type":"string","description":"Path to the worker script","optional":"!undefined","defaultValue":"!undefined"},{"name":"options","type":"ChildProcessDriverOptions","description":"Spawn options","optional":"!undefined","defaultValue":"{}"}],"returnType":"Promise<ChildProcessChannel>","signature":"function spawnWorker(script: string, options: ChildProcessDriverOptions): Promise<ChildProcessChannel>"},{"name":"ChildProcessDriverOptions","slug":"child-process-driver-options","path":"/api/child-process-driver-options","module":"core","kind":"variable","comment":"!undefined","description":"!undefined","category":"!undefined"},{"name":"WorkerThreadsChannel","slug":"worker-threads-channel","path":"/api/worker-threads-channel","module":"core","kind":"class","comment":{"summary":"Channel implementation for worker threads driver.\n\nWraps a Worker and provides the DriverChannel interface\nusing MessagePort-based communication."},"description":"Channel implementation for worker threads driver.\n\nWraps a Worker and provides the DriverChannel interface\nusing MessagePort-based communication.","category":"!undefined","methods":[{"name":"close","signature":"close(): Promise<void>","description":"Close the channel","parameters":"!undefined","returnType":"Promise<void>"},{"name":"onClose","signature":"onClose(handler: () => void): void","description":"Register a close handler","parameters":[{"name":"handler","type":"() => void","description":"!undefined","optional":"!undefined"}],"returnType":"void"},{"name":"onError","signature":"onError(handler: (error: Error) => void): void","description":"Register an error handler","parameters":[{"name":"handler","type":"(error: Error) => void","description":"!undefined","optional":"!undefined"}],"returnType":"void"},{"name":"onMessage","signature":"onMessage(handler: (message: DriverMessage) => void): void","description":"Register a message handler","parameters":[{"name":"handler","type":"(message: DriverMessage) => void","description":"!undefined","optional":"!undefined"}],"returnType":"void"},{"name":"onShutdown","signature":"onShutdown(handler: (reason: ShutdownReason) => void): void","description":"Register a shutdown handler","parameters":[{"name":"handler","type":"(reason: ShutdownReason) => void","description":"!undefined","optional":"!undefined"}],"returnType":"void"},{"name":"send","signature":"send(message: DriverMessage): Promise<void>","description":"Send a message through the channel","parameters":[{"name":"message","type":"DriverMessage","description":"!undefined","optional":"!undefined"}],"returnType":"Promise<void>"}],"signature":"class WorkerThreadsChannel"},{"name":"WorkerThreadsServerChannel","slug":"worker-threads-server-channel","path":"/api/worker-threads-server-channel","module":"core","kind":"class","comment":{"summary":"Worker threads server channel implementation.\n\nWraps parentPort and provides the ServerChannel interface."},"description":"Worker threads server channel implementation.\n\nWraps parentPort and provides the ServerChannel interface.","category":"!undefined","methods":[{"name":"onError","signature":"onError(handler: (error: Error) => void): void","description":"Register an error handler","parameters":[{"name":"handler","type":"(error: Error) => void","description":"!undefined","optional":"!undefined"}],"returnType":"void"},{"name":"onMessage","signature":"onMessage(handler: (message: DriverMessage, respond: ResponseFunction) => void): void","description":"Register a message handler","parameters":[{"name":"handler","type":"(message: DriverMessage, respond: ResponseFunction) => void","description":"!undefined","optional":"!undefined"}],"returnType":"void"},{"name":"start","signature":"start(): void","description":"Start listening for messages from the host","parameters":"!undefined","returnType":"void"},{"name":"stop","signature":"stop(): Promise<void>","description":"Stop the server and cleanup","parameters":"!undefined","returnType":"Promise<void>"}],"signature":"class WorkerThreadsServerChannel"},{"name":"WorkerThreadsStartupData","slug":"worker-threads-startup-data","path":"/api/worker-threads-startup-data","module":"core","kind":"interface","comment":{"summary":"Startup data specific to worker_threads driver.\n\nExtends the base StartupData with worker_threads-specific fields."},"description":"Startup data specific to worker_threads driver.\n\nExtends the base StartupData with worker_threads-specific fields.","category":"!undefined","properties":[{"name":"driver","type":"\"worker_threads\"","description":"Driver identifier - always 'worker_threads' for this driver","optional":"!undefined","readonly":"!undefined"}],"signature":"interface WorkerThreadsStartupData extends StartupData"},{"name":"ResponseFunction","slug":"response-function","path":"/api/response-function","module":"core","kind":"type","comment":{"summary":"Function to send a response back to the host"},"description":"Function to send a response back to the host","category":"!undefined","signature":"type ResponseFunction = (response: DriverMessage) => Promise<void>"},{"name":"WorkerThreadsDriverType","slug":"worker-threads-driver-type","path":"/api/worker-threads-driver-type","module":"core","kind":"type","comment":{"summary":"Type of the WorkerThreadsDriver"},"description":"Type of the WorkerThreadsDriver","category":"!undefined","signature":"type WorkerThreadsDriverType = typeof unknown"},{"name":"STARTUP_DATA_WORKER_KEY","slug":"startup-data-worker-key","path":"/api/startup-data-worker-key","module":"core","kind":"variable","comment":{"summary":"workerData key for startup data"},"description":"workerData key for startup data","category":"!undefined","signature":"type STARTUP_DATA_WORKER_KEY = \"__isolatedWorkers\""},{"name":"WorkerThreadsDriver","slug":"worker-threads-driver","path":"/api/worker-threads-driver","module":"core","kind":"variable","comment":{"summary":"Worker threads driver.\n\nUses worker_threads module with MessagePort for IPC.\nSupports SharedArrayBuffer for shared memory.","examples":["import { WorkerThreadsDriver } from 'isolated-workers/drivers/worker-threads';\n\n// Host side: spawn a worker\nconst channel = await WorkerThreadsDriver.spawn('./worker.js', {\n  resourceLimits: { maxOldGenerationSizeMb: 128 },\n});\n\n// Worker side: create server\nconst server = WorkerThreadsDriver.createServer();"]},"description":"Worker threads driver.\n\nUses worker_threads module with MessagePort for IPC.\nSupports SharedArrayBuffer for shared memory.","category":"!undefined","signature":"type WorkerThreadsDriver = { name: \"worker_threads\"; createServer: unknown; getStartupData: unknown; spawn: unknown; transferSharedMemory: unknown } & { capabilities: InferCapabilities<{ name: \"worker_threads\"; createServer: unknown; getStartupData: unknown; spawn: unknown; transferSharedMemory: unknown }> }"},{"name":"createServer","slug":"create-server","path":"/api/create-server","module":"core","kind":"function","comment":{"summary":"Create a worker threads server for worker-side communication.\n\nThis function uses parentPort from worker_threads to establish\ncommunication with the host process.","examples":["import { WorkerThreadsDriver } from 'isolated-workers/drivers/worker-threads';\n\nconst startupData = WorkerThreadsDriver.getStartupData();\nconst server = createServer(startupData);\n\nserver.onMessage(async (message, respond) => {\n  console.log('Received:', message);\n  await respond({\n    tx: message.tx,\n    type: message.type,\n    payload: { result: 'ok' },\n  });\n});\n\nserver.start();"]},"description":"Create a worker threads server for worker-side communication.\n\nThis function uses parentPort from worker_threads to establish\ncommunication with the host process.","category":"!undefined","parameters":[{"name":"startupData","type":"WorkerThreadsStartupData","description":"Startup data from the host process","optional":"!undefined","defaultValue":"!undefined"},{"name":"options","type":"ServerOptions","description":"Server options","optional":"!undefined","defaultValue":"{}"}],"returnType":"Promise<WorkerThreadsServerChannel>","signature":"function createServer(startupData: WorkerThreadsStartupData, options: ServerOptions): Promise<WorkerThreadsServerChannel>"},{"name":"spawnWorker","slug":"spawn-worker","path":"/api/spawn-worker","module":"core","kind":"function","comment":{"summary":"Spawn a worker thread and establish communication channel."},"description":"Spawn a worker thread and establish communication channel.","category":"!undefined","parameters":[{"name":"script","type":"string","description":"Path to the worker script (or code if eval is true)","optional":"!undefined","defaultValue":"!undefined"},{"name":"options","type":"WorkerThreadsDriverOptions","description":"Spawn options","optional":"!undefined","defaultValue":"{}"}],"returnType":"Promise<WorkerThreadsChannel>","signature":"function spawnWorker(script: string, options: WorkerThreadsDriverOptions): Promise<WorkerThreadsChannel>"},{"name":"WorkerThreadsDriverOptions","slug":"worker-threads-driver-options","path":"/api/worker-threads-driver-options","module":"core","kind":"variable","comment":"!undefined","description":"!undefined","category":"!undefined"},{"name":"WorkerThreadsResourceLimits","slug":"worker-threads-resource-limits","path":"/api/worker-threads-resource-limits","module":"core","kind":"variable","comment":"!undefined","description":"!undefined","category":"!undefined"},{"name":"ChildProcessCapabilities","slug":"child-process-capabilities","path":"/api/child-process-capabilities","module":"core","kind":"interface","comment":{"summary":"Capability type for child_process driver.\n\nChild process workers support reconnection and detaching,\nbut cannot use SharedArrayBuffer across the IPC boundary."},"description":"Capability type for child_process driver.\n\nChild process workers support reconnection and detaching,\nbut cannot use SharedArrayBuffer across the IPC boundary.","category":"Drivers","properties":[{"name":"detach","type":"true","description":"Worker can outlive parent process","optional":"!undefined","readonly":"!undefined"},{"name":"reconnect","type":"true","description":"Can disconnect/reconnect to running worker","optional":"!undefined","readonly":"!undefined"},{"name":"sharedMemory","type":"false","description":"Supports SharedArrayBuffer","optional":"!undefined","readonly":"!undefined"}],"signature":"interface ChildProcessCapabilities extends DriverCapabilities"},{"name":"ChildProcessDriverOptions","slug":"child-process-driver-options","path":"/api/child-process-driver-options","module":"core","kind":"interface","comment":{"summary":"Options for child process driver spawn"},"description":"Options for child process driver spawn","category":"!undefined","properties":[{"name":"detached","type":"boolean","description":"Whether to detach the worker process","optional":true,"readonly":"!undefined"},{"name":"env","type":"Record<string, string>","description":"Environment variables to pass to worker","optional":true,"readonly":"!undefined"},{"name":"logger","type":"Logger","description":"Custom logger instance","optional":true,"readonly":"!undefined"},{"name":"logLevel","type":"LogLevel","description":"Log level for driver operations","optional":true,"readonly":"!undefined"},{"name":"maxDelay","type":"number","description":"Maximum retry delay cap (default: 5000)","optional":true,"readonly":"!undefined"},{"name":"maxRetries","type":"number","description":"Maximum connection retry attempts (default: 5)","optional":true,"readonly":"!undefined"},{"name":"onShutdown","type":"(reason: ShutdownReason) => void","description":"Shutdown handler callback","optional":true,"readonly":"!undefined"},{"name":"retryDelay","type":"number","description":"Retry delay in ms (default: 100)","optional":true,"readonly":"!undefined"},{"name":"serializer","type":"Serializer","description":"Custom serializer (must match worker side)","optional":true,"readonly":"!undefined"},{"name":"serverConnectTimeout","type":"number","description":"Server connect timeout passed to worker (default: 30000)","optional":true,"readonly":"!undefined"},{"name":"socketPath","type":"string","description":"Override socket path (auto-generated if not provided)","optional":true,"readonly":"!undefined"},{"name":"spawnOptions","type":"SpawnOptions","description":"Additional spawn options","optional":true,"readonly":"!undefined"},{"name":"timeout","type":"number","description":"Connection timeout in ms (default: 10000)","optional":true,"readonly":"!undefined"}],"signature":"interface ChildProcessDriverOptions"},{"name":"Connection","slug":"connection","path":"/api/connection","module":"core","kind":"interface","comment":{"summary":"Active connection interface"},"description":"Active connection interface","category":"!undefined","properties":[{"name":"isConnected","type":"boolean","description":"Whether the connection is active","optional":"!undefined","readonly":"!undefined"},{"name":"socket","type":"Socket","description":"Underlying socket","optional":"!undefined","readonly":"!undefined"}],"methods":[{"name":"close","signature":"close(): Promise<void>","description":"Close the connection","parameters":"!undefined","returnType":"Promise<void>"},{"name":"onClose","signature":"onClose(handler: () => void): void","description":"Register a close handler","parameters":[{"name":"handler","type":"() => void","description":"!undefined","optional":"!undefined"}],"returnType":"void"},{"name":"onError","signature":"onError(handler: (error: Error) => void): void","description":"Register an error handler","parameters":[{"name":"handler","type":"(error: Error) => void","description":"!undefined","optional":"!undefined"}],"returnType":"void"},{"name":"onMessage","signature":"onMessage(handler: (message: TypedResult) => void): void","description":"Register a message handler","parameters":[{"name":"handler","type":"(message: TypedResult) => void","description":"!undefined","optional":"!undefined"}],"returnType":"void"},{"name":"send","signature":"send(message: TypedMessage<T>): Promise<void>","description":"Send a message through the connection","parameters":[{"name":"message","type":"TypedMessage<T>","description":"!undefined","optional":"!undefined"}],"returnType":"Promise<void>"}],"signature":"interface Connection"},{"name":"ConnectionOptions","slug":"connection-options","path":"/api/connection-options","module":"core","kind":"interface","comment":{"summary":"Connection options"},"description":"Connection options","category":"!undefined","properties":[{"name":"logger","type":"Logger","description":"Custom logger","optional":true,"readonly":"!undefined"},{"name":"maxDelay","type":"number","description":"Maximum delay cap in ms (default: 5000)","optional":true,"readonly":"!undefined"},{"name":"maxRetries","type":"number","description":"Maximum number of retry attempts (default: 5)","optional":true,"readonly":"!undefined"},{"name":"middleware","type":"Middleware<TDefs>[]","description":"Per-instance middleware pipeline","optional":true,"readonly":"!undefined"},{"name":"reconnect","type":"boolean","description":"Whether to enable reconnection (default: false)","optional":true,"readonly":"!undefined"},{"name":"retryDelay","type":"number | (attempt: number) => number","description":"Base delay in ms between retries, or custom delay function (default: 100)","optional":true,"readonly":"!undefined"},{"name":"serializer","type":"Serializer","description":"Custom serializer","optional":true,"readonly":"!undefined"},{"name":"socketPath","type":"string","description":"Socket path to connect to","optional":"!undefined","readonly":"!undefined"},{"name":"timeout","type":"number","description":"Connection timeout in ms (default: 10000)","optional":true,"readonly":"!undefined"}],"signature":"interface ConnectionOptions<TDefs>"},{"name":"DetachCapability","slug":"detach-capability","path":"/api/detach-capability","module":"core","kind":"interface","comment":{"summary":"Detach capability mixin.\n\nChannels that support detaching expose this to indicate\nwhether the worker is running detached from the parent."},"description":"Detach capability mixin.\n\nChannels that support detaching expose this to indicate\nwhether the worker is running detached from the parent.","category":"!undefined","properties":[{"name":"detached","type":"boolean","description":"Whether the worker is detached","optional":"!undefined","readonly":true}],"signature":"interface DetachCapability"},{"name":"Driver","slug":"driver","path":"/api/driver","module":"core","kind":"interface","comment":{"summary":"Driver interface for spawning workers.\n\nDrivers implement this interface to provide different worker\ncommunication backends.","examples":["const childProcessDriver: Driver<ChildProcessCapabilities, ChildProcessOptions> = {\n  name: 'child_process',\n  capabilities: { reconnect: true, detach: true, sharedMemory: false },\n  spawn: async (script, options) => { ... }\n};"]},"description":"Driver interface for spawning workers.\n\nDrivers implement this interface to provide different worker\ncommunication backends.","category":"Drivers","properties":[{"name":"capabilities","type":"TCapabilities","description":"Driver capabilities","optional":"!undefined","readonly":true},{"name":"name","type":"string","description":"Driver identifier","optional":"!undefined","readonly":true}],"methods":[{"name":"spawn","signature":"spawn(script: string, options: TOptions): Promise<DriverChannel>","description":"Spawn a worker and return communication channel","parameters":[{"name":"script","type":"string","description":"!undefined","optional":"!undefined"},{"name":"options","type":"TOptions","description":"!undefined","optional":"!undefined"}],"returnType":"Promise<DriverChannel>"}],"signature":"interface Driver<TCapabilities, TOptions>"},{"name":"DriverCapabilities","slug":"driver-capabilities","path":"/api/driver-capabilities","module":"core","kind":"interface","comment":{"summary":"Driver capability flags.\n\nThese flags indicate what features a driver supports,\nallowing higher-level code to make decisions based on\navailable capabilities."},"description":"Driver capability flags.\n\nThese flags indicate what features a driver supports,\nallowing higher-level code to make decisions based on\navailable capabilities.","category":"Drivers","properties":[{"name":"detach","type":"boolean","description":"Worker can outlive parent process","optional":"!undefined","readonly":"!undefined"},{"name":"reconnect","type":"boolean","description":"Can disconnect/reconnect to running worker","optional":"!undefined","readonly":"!undefined"},{"name":"sharedMemory","type":"boolean","description":"Supports SharedArrayBuffer","optional":"!undefined","readonly":"!undefined"}],"signature":"interface DriverCapabilities"},{"name":"DriverChannel","slug":"driver-channel","path":"/api/driver-channel","module":"core","kind":"interface","comment":{"summary":"Communication channel returned by driver spawn.\n\nThe channel provides a unified interface for sending messages,\nhandling events, and managing the connection lifecycle."},"description":"Communication channel returned by driver spawn.\n\nThe channel provides a unified interface for sending messages,\nhandling events, and managing the connection lifecycle.","category":"!undefined","properties":[{"name":"isConnected","type":"boolean","description":"Whether the channel is connected","optional":"!undefined","readonly":true},{"name":"pid","type":"number","description":"Process ID (undefined for worker_threads)","optional":"!undefined","readonly":true}],"methods":[{"name":"close","signature":"close(): Promise<void>","description":"Close the channel","parameters":"!undefined","returnType":"Promise<void>"},{"name":"onClose","signature":"onClose(handler: () => void): void","description":"Register a close handler","parameters":[{"name":"handler","type":"() => void","description":"!undefined","optional":"!undefined"}],"returnType":"void"},{"name":"onError","signature":"onError(handler: (error: Error) => void): void","description":"Register an error handler","parameters":[{"name":"handler","type":"(error: Error) => void","description":"!undefined","optional":"!undefined"}],"returnType":"void"},{"name":"onMessage","signature":"onMessage(handler: (message: DriverMessage) => void): void","description":"Register a message handler","parameters":[{"name":"handler","type":"(message: DriverMessage) => void","description":"!undefined","optional":"!undefined"}],"returnType":"void"},{"name":"onShutdown","signature":"onShutdown(handler: (reason: ShutdownReason) => void): void","description":"Register a shutdown handler","parameters":[{"name":"handler","type":"(reason: ShutdownReason) => void","description":"!undefined","optional":"!undefined"}],"returnType":"void"},{"name":"send","signature":"send(message: DriverMessage): Promise<void>","description":"Send a message through the channel","parameters":[{"name":"message","type":"DriverMessage","description":"!undefined","optional":"!undefined"}],"returnType":"Promise<void>"}],"signature":"interface DriverChannel"},{"name":"DriverMessage","slug":"driver-message","path":"/api/driver-message","module":"core","kind":"interface","comment":{"summary":"Message structure for driver communication.\n\nAll messages sent through the driver layer follow this structure,\nenabling type-safe messaging with transaction tracking."},"description":"Message structure for driver communication.\n\nAll messages sent through the driver layer follow this structure,\nenabling type-safe messaging with transaction tracking.","category":"!undefined","properties":[{"name":"payload","type":"unknown","description":"Message payload data","optional":"!undefined","readonly":"!undefined"},{"name":"tx","type":"string","description":"Transaction ID for request/response correlation","optional":"!undefined","readonly":"!undefined"},{"name":"type","type":"string","description":"Message type identifier","optional":"!undefined","readonly":"!undefined"}],"signature":"interface DriverMessage"},{"name":"MiddlewareContext","slug":"middleware-context","path":"/api/middleware-context","module":"core","kind":"interface","comment":{"summary":"Context passed to middleware functions","deprecated":"Use Middleware<TDefs> from types instead"},"description":"Context passed to middleware functions","category":"!undefined","properties":[{"name":"direction","type":"MiddlewareDirection","description":"Direction of message flow","optional":"!undefined","readonly":"!undefined"},{"name":"message","type":"unknown","description":"The message being sent or received","optional":"!undefined","readonly":"!undefined"}],"signature":"interface MiddlewareContext"},{"name":"ReconnectCapability","slug":"reconnect-capability","path":"/api/reconnect-capability","module":"core","kind":"interface","comment":{"summary":"Reconnect capability mixin.\n\nChannels that support reconnection implement this interface\nto allow disconnecting while keeping the worker alive."},"description":"Reconnect capability mixin.\n\nChannels that support reconnection implement this interface\nto allow disconnecting while keeping the worker alive.","category":"!undefined","methods":[{"name":"disconnect","signature":"disconnect(): Promise<void>","description":"Disconnect from worker but keep process alive","parameters":"!undefined","returnType":"Promise<void>"},{"name":"reconnect","signature":"reconnect(): Promise<void>","description":"Reconnect to existing worker","parameters":"!undefined","returnType":"Promise<void>"}],"signature":"interface ReconnectCapability"},{"name":"ServerChannel","slug":"server-channel","path":"/api/server-channel","module":"core","kind":"interface","comment":{"summary":"Server channel interface for worker-side communication."},"description":"Server channel interface for worker-side communication.","category":"!undefined","properties":[{"name":"isRunning","type":"boolean","description":"Whether the server is running","optional":"!undefined","readonly":true},{"name":"socketPath","type":"string","description":"Socket path the server is listening on (empty for worker_threads)","optional":"!undefined","readonly":true}],"methods":[{"name":"onError","signature":"onError(handler: (error: Error) => void): void","description":"Register an error handler","parameters":[{"name":"handler","type":"(error: Error) => void","description":"!undefined","optional":"!undefined"}],"returnType":"void"},{"name":"onMessage","signature":"onMessage(handler: (message: DriverMessage, respond: (response: DriverMessage) => Promise<void>) => void): void","description":"Register a message handler","parameters":[{"name":"handler","type":"(message: DriverMessage, respond: (response: DriverMessage) => Promise<void>) => void","description":"!undefined","optional":"!undefined"}],"returnType":"void"},{"name":"stop","signature":"stop(): Promise<void>","description":"Stop the server and cleanup","parameters":"!undefined","returnType":"Promise<void>"}],"signature":"interface ServerChannel"},{"name":"ServerDriver","slug":"server-driver","path":"/api/server-driver","module":"core","kind":"interface","comment":{"summary":"Driver interface for server-side usage.\n\nThis is a minimal interface that drivers must satisfy for use with\nstartWorkerServer. Both ChildProcessDriver and WorkerThreadsDriver\nsatisfy this interface."},"description":"Driver interface for server-side usage.\n\nThis is a minimal interface that drivers must satisfy for use with\nstartWorkerServer. Both ChildProcessDriver and WorkerThreadsDriver\nsatisfy this interface.","category":"!undefined","properties":[{"name":"name","type":"string","description":"Driver identifier","optional":"!undefined","readonly":true}],"methods":[{"name":"createServer","signature":"createServer(options: ServerOptions): ServerChannel | Promise<ServerChannel>","description":"Create server channel","parameters":[{"name":"options","type":"ServerOptions","description":"!undefined","optional":"!undefined"}],"returnType":"ServerChannel | Promise<ServerChannel>"},{"name":"getStartupData","signature":"getStartupData(): unknown","description":"Get startup data (throws if not in correct context)","parameters":"!undefined","returnType":"unknown"}],"signature":"interface ServerDriver"},{"name":"ServerOptions","slug":"server-options","path":"/api/server-options","module":"core","kind":"interface","comment":{"summary":"Options for creating a server channel"},"description":"Options for creating a server channel","category":"!undefined","properties":[{"name":"logger","type":"Logger","description":"Custom logger","optional":true,"readonly":"!undefined"},{"name":"logLevel","type":"LogLevel","description":"Log level","optional":true,"readonly":"!undefined"},{"name":"serializer","type":"Serializer","description":"Custom serializer (must match host!)","optional":true,"readonly":"!undefined"}],"signature":"interface ServerOptions"},{"name":"TypedMessage","slug":"typed-message","path":"/api/typed-message","module":"core","kind":"interface","comment":{"summary":"Message with type discriminator"},"description":"Message with type discriminator","category":"!undefined","properties":[{"name":"payload","type":"T","description":"!undefined","optional":"!undefined","readonly":"!undefined"},{"name":"type","type":"string","description":"!undefined","optional":"!undefined","readonly":"!undefined"}],"signature":"interface TypedMessage<T> extends BaseMessage"},{"name":"TypedResult","slug":"typed-result","path":"/api/typed-result","module":"core","kind":"interface","comment":{"summary":"Result message with type discriminator"},"description":"Result message with type discriminator","category":"!undefined","properties":[{"name":"payload","type":"T","description":"!undefined","optional":"!undefined","readonly":"!undefined"},{"name":"type","type":"string","description":"!undefined","optional":"!undefined","readonly":"!undefined"}],"signature":"interface TypedResult<T> extends BaseMessage"},{"name":"WorkerClient","slug":"worker-client","path":"/api/worker-client","module":"core","kind":"interface","comment":{"summary":"Base worker client interface for type-safe messaging.\n\nThe availability of certain methods depends on the driver's capabilities:\n- `disconnect()` / `reconnect()`: Only available with child_process driver\n- `pid`: Returns number for child_process, undefined for worker_threads"},"description":"Base worker client interface for type-safe messaging.\n\nThe availability of certain methods depends on the driver's capabilities:\n- `disconnect()` / `reconnect()`: Only available with child_process driver\n- `pid`: Returns number for child_process, undefined for worker_threads","category":"!undefined","properties":[{"name":"capabilities","type":"TCapabilities","description":"The driver capabilities for this worker","optional":"!undefined","readonly":true},{"name":"disconnect","type":"TCapabilities[\"reconnect\"] extends true ? () => Promise<void> : never","description":"Disconnect from worker but keep process alive.\nOnly available when driver supports reconnect capability.","optional":"!undefined","readonly":"!undefined"},{"name":"isActive","type":"boolean","description":"Whether the worker process is active","optional":"!undefined","readonly":"!undefined"},{"name":"isConnected","type":"boolean","description":"Whether connection to worker is active","optional":"!undefined","readonly":"!undefined"},{"name":"pid","type":"number","description":"Process ID of the worker.\nReturns undefined for worker_threads (they share the parent's PID).","optional":"!undefined","readonly":"!undefined"},{"name":"reconnect","type":"TCapabilities[\"reconnect\"] extends true ? () => Promise<void> : never","description":"Reconnect to existing worker.\nOnly available when driver supports reconnect capability.","optional":"!undefined","readonly":"!undefined"}],"methods":[{"name":"close","signature":"close(): Promise<void>","description":"Close the worker gracefully","parameters":"!undefined","returnType":"Promise<void>"},{"name":"send","signature":"send(type: K, payload: TMessages[K][\"payload\"]): Promise<TMessages[K] extends { result: R } ? R : void>","description":"Send a message and await response","parameters":[{"name":"type","type":"K","description":"!undefined","optional":"!undefined"},{"name":"payload","type":"TMessages[K][\"payload\"]","description":"!undefined","optional":"!undefined"}],"returnType":"Promise<TMessages[K] extends { result: R } ? R : void>"}],"signature":"interface WorkerClient<TMessages, TCapabilities>"},{"name":"WorkerOptions","slug":"worker-options","path":"/api/worker-options","module":"core","kind":"interface","comment":{"summary":"Worker options for spawning"},"description":"Worker options for spawning","category":"!undefined","properties":[{"name":"connection","type":"{ attempts: number; delay: number | (attempt: number) => number; maxDelay: number }","description":"Connection options (child_process driver only).","optional":true,"readonly":"!undefined"},{"name":"debug","type":"boolean","description":"!undefined","optional":true,"readonly":"!undefined"},{"name":"detached","type":"boolean","description":"Worker lifecycle options","optional":true,"readonly":"!undefined"},{"name":"driver","type":"TDriver","description":"Driver to use for spawning the worker.\n\nIf not provided, the child_process driver is dynamically loaded.\nPass a driver instance for explicit control over the communication backend.","optional":true,"readonly":"!undefined"},{"name":"driverOptions","type":"Partial<DriverOptionsFor<TDriver>>","description":"Driver-specific options.\n\nThese options are passed directly to the driver's spawn method.\nAvailable options depend on the driver being used.","optional":true,"readonly":"!undefined"},{"name":"env","type":"Record<string, string>","description":"Environment variables to pass to worker","optional":true,"readonly":"!undefined"},{"name":"logger","type":"Logger","description":"!undefined","optional":true,"readonly":"!undefined"},{"name":"logLevel","type":"LogLevel","description":"Logging options","optional":true,"readonly":"!undefined"},{"name":"middleware","type":"Middleware<TDefs>[]","description":"Messaging options","optional":true,"readonly":"!undefined"},{"name":"script","type":"string","description":"Path to worker script","optional":"!undefined","readonly":"!undefined"},{"name":"serializer","type":"Serializer","description":"!undefined","optional":true,"readonly":"!undefined"},{"name":"socketPath","type":"string","description":"Advanced options","optional":true,"readonly":"!undefined"},{"name":"spawnOptions","type":"SpawnOptions","description":"!undefined","optional":true,"readonly":"!undefined"},{"name":"timeout","type":"number | Partial<Record<BuiltInTimeoutKey | keyof TDefs, number>>","description":"Timeout configuration for worker operations.\n\nCan be a number (applies to all operations) or an object with per-operation timeouts:\n- `WORKER_STARTUP`: Time to wait for worker to start (default: 10s)\n- `WORKER_MESSAGE`: Default timeout for all messages (default: 5min)\n- `[messageType]`: Timeout for specific message type (overrides WORKER_MESSAGE)","optional":true,"readonly":"!undefined"},{"name":"txIdGenerator","type":"TransactionIdGenerator<TDefs>","description":"!undefined","optional":true,"readonly":"!undefined"},{"name":"unexpectedShutdown","type":"UnexpectedShutdownConfig<TDefs>","description":"Unexpected shutdown configuration","optional":true,"readonly":"!undefined"}],"signature":"interface WorkerOptions<TDefs, TDriver>"},{"name":"WorkerServer","slug":"worker-server","path":"/api/worker-server","module":"core","kind":"interface","comment":{"summary":"Active worker server"},"description":"Active worker server","category":"!undefined","properties":[{"name":"isRunning","type":"boolean","description":"Whether the server is running","optional":"!undefined","readonly":"!undefined"}],"methods":[{"name":"stop","signature":"stop(): Promise<void>","description":"Stop the server and cleanup","parameters":"!undefined","returnType":"Promise<void>"}],"signature":"interface WorkerServer"},{"name":"WorkerServerOptions","slug":"worker-server-options","path":"/api/worker-server-options","module":"core","kind":"interface","comment":{"summary":"Server configuration options"},"description":"Server configuration options","category":"!undefined","properties":[{"name":"driver","type":"ServerDriver","description":"Driver to use for server communication.\nDefaults to ChildProcessDriver if not specified.\nMust match the driver used on the host side.","optional":true,"readonly":"!undefined"},{"name":"logger","type":"Logger","description":"Custom logger instance","optional":true,"readonly":"!undefined"},{"name":"logLevel","type":"LogLevel","description":"Log level for server operations","optional":true,"readonly":"!undefined"},{"name":"middleware","type":"Middleware<TDefs>[]","description":"Middleware pipeline for message processing","optional":true,"readonly":"!undefined"},{"name":"serializer","type":"Serializer","description":"Custom serializer (must match host!)","optional":true,"readonly":"!undefined"},{"name":"txIdGenerator","type":"TransactionIdGenerator<TDefs>","description":"Custom transaction ID generator","optional":true,"readonly":"!undefined"}],"signature":"interface WorkerServerOptions<TDefs>"},{"name":"WorkerThreadsCapabilities","slug":"worker-threads-capabilities","path":"/api/worker-threads-capabilities","module":"core","kind":"interface","comment":{"summary":"Capability type for worker_threads driver.\n\nWorker thread workers support SharedArrayBuffer but cannot\nbe reconnected or detached from the parent."},"description":"Capability type for worker_threads driver.\n\nWorker thread workers support SharedArrayBuffer but cannot\nbe reconnected or detached from the parent.","category":"Drivers","properties":[{"name":"detach","type":"false","description":"Worker can outlive parent process","optional":"!undefined","readonly":"!undefined"},{"name":"reconnect","type":"false","description":"Can disconnect/reconnect to running worker","optional":"!undefined","readonly":"!undefined"},{"name":"sharedMemory","type":"true","description":"Supports SharedArrayBuffer","optional":"!undefined","readonly":"!undefined"}],"signature":"interface WorkerThreadsCapabilities extends DriverCapabilities"},{"name":"WorkerThreadsDriverOptions","slug":"worker-threads-driver-options","path":"/api/worker-threads-driver-options","module":"core","kind":"interface","comment":{"summary":"Options for worker threads driver spawn"},"description":"Options for worker threads driver spawn","category":"!undefined","properties":[{"name":"argv","type":"string[]","description":"Arguments to pass to the worker script","optional":true,"readonly":"!undefined"},{"name":"eval","type":"boolean","description":"If true, script is treated as JavaScript code instead of a path","optional":true,"readonly":"!undefined"},{"name":"execArgv","type":"string[]","description":"List of node CLI options passed to the worker.\nUseful for loading TypeScript files via tsx:","optional":true,"readonly":"!undefined"},{"name":"logger","type":"Logger","description":"Custom logger instance","optional":true,"readonly":"!undefined"},{"name":"logLevel","type":"LogLevel","description":"Log level for driver operations","optional":true,"readonly":"!undefined"},{"name":"resourceLimits","type":"WorkerThreadsResourceLimits","description":"Resource limits for the worker thread","optional":true,"readonly":"!undefined"},{"name":"serializer","type":"Serializer","description":"Custom serializer (must match worker side)","optional":true,"readonly":"!undefined"},{"name":"transferList","type":"ArrayBuffer[]","description":"List of transferable objects to transfer to worker","optional":true,"readonly":"!undefined"},{"name":"workerData","type":"unknown","description":"Additional data to pass to worker via workerData","optional":true,"readonly":"!undefined"}],"signature":"interface WorkerThreadsDriverOptions"},{"name":"WorkerThreadsResourceLimits","slug":"worker-threads-resource-limits","path":"/api/worker-threads-resource-limits","module":"core","kind":"interface","comment":{"summary":"Resource limits for worker threads"},"description":"Resource limits for worker threads","category":"!undefined","properties":[{"name":"codeRangeSizeMb","type":"number","description":"Size of the pre-allocated code range in MB","optional":true,"readonly":"!undefined"},{"name":"maxOldGenerationSizeMb","type":"number","description":"Maximum size of the old generation heap in MB","optional":true,"readonly":"!undefined"},{"name":"maxYoungGenerationSizeMb","type":"number","description":"Maximum size of the young generation heap in MB","optional":true,"readonly":"!undefined"},{"name":"stackSizeMb","type":"number","description":"Default stack size for the worker thread in KB","optional":true,"readonly":"!undefined"}],"signature":"interface WorkerThreadsResourceLimits"},{"name":"BuiltInTimeoutKey","slug":"built-in-timeout-key","path":"/api/built-in-timeout-key","module":"core","kind":"type","comment":{"summary":"Built-in timeout keys for worker lifecycle events"},"description":"Built-in timeout keys for worker lifecycle events","category":"!undefined","signature":"type BuiltInTimeoutKey = \"WORKER_STARTUP\" | \"WORKER_MESSAGE\" | \"SERVER_CONNECT\""},{"name":"DriverOptionsFor","slug":"driver-options-for","path":"/api/driver-options-for","module":"core","kind":"type","comment":{"summary":"Driver-specific options mapping"},"description":"Driver-specific options mapping","category":"!undefined","signature":"type DriverOptionsFor = TDriver extends Driver<ChildProcessCapabilities> ? ChildProcessDriverOptions : TDriver extends Driver<WorkerThreadsCapabilities> ? WorkerThreadsDriverOptions : Record<string, unknown>"},{"name":"MessageHandler","slug":"message-handler","path":"/api/message-handler","module":"core","kind":"type","comment":{"summary":"Handler function type for message processing"},"description":"Handler function type for message processing","category":"!undefined","signature":"type MessageHandler = (payload: unknown) => unknown | Promise<unknown>"},{"name":"MiddlewareDirection","slug":"middleware-direction","path":"/api/middleware-direction","module":"core","kind":"type","comment":{"summary":"Direction for middleware context","deprecated":"Use 'incoming' | 'outgoing' directly"},"description":"Direction for middleware context","category":"!undefined","signature":"type MiddlewareDirection = \"send\" | \"receive\""},{"name":"TimeoutConfig","slug":"timeout-config","path":"/api/timeout-config","module":"core","kind":"type","comment":{"summary":"Timeout configuration allowing per-message-type timeouts.\n\nBuilt-in keys:\n- `WORKER_STARTUP`: Time to wait for worker to start (default: 10s)\n- `SERVER_CONNECT`: Time for server to wait for host connection (default: 30s)\n- `WORKER_MESSAGE`: Default timeout for all messages (default: 5min)\n\nYou can also specify timeouts for specific message types by their key name.\nMessage-specific timeouts take precedence over WORKER_MESSAGE.","examples":["const worker = await createWorker<MyMessages>({\n  script: './worker.js',\n  timeout: {\n    WORKER_STARTUP: 5000,        // 5s startup\n    SERVER_CONNECT: 10000,       // 10s for server to wait for host\n    WORKER_MESSAGE: 60000,       // 1min default for messages\n    'slowOperation': 600000,     // 10min for specific message type\n  }\n});"]},"description":"Timeout configuration allowing per-message-type timeouts.\n\nBuilt-in keys:\n- `WORKER_STARTUP`: Time to wait for worker to start (default: 10s)\n- `SERVER_CONNECT`: Time for server to wait for host connection (default: 30s)\n- `WORKER_MESSAGE`: Default timeout for all messages (default: 5min)\n\nYou can also specify timeouts for specific message types by their key name.\nMessage-specific timeouts take precedence over WORKER_MESSAGE.","category":"!undefined","signature":"type TimeoutConfig = Partial<Record<BuiltInTimeoutKey | keyof TDefs, number>>"},{"name":"WorkerHandler","slug":"worker-handler","path":"/api/worker-handler","module":"core","kind":"type","comment":{"summary":"Handler function type for worker messages"},"description":"Handler function type for worker messages","category":"!undefined","signature":"type WorkerHandler = (payload: TPayload) => TResult | Promise<TResult>"},{"name":"WorkerHandlers","slug":"worker-handlers","path":"/api/worker-handlers","module":"core","kind":"type","comment":{"summary":"Collection of handlers for different message types"},"description":"Collection of handlers for different message types","category":"!undefined","signature":"type WorkerHandlers = Record<string, WorkerHandler>"},{"name":"createWorker","slug":"create-worker","path":"/api/create-worker","module":"core","kind":"function","comment":{"summary":"Create a worker process with type-safe messaging.\n\nBy default, uses the child_process driver which spawns a separate Node.js process\nand communicates via Unix domain sockets (or named pipes on Windows).\n\nYou can pass a different driver for alternative backends:\n- `WorkerThreadsDriver`: Uses worker_threads with MessagePort (shared memory capable)","examples":["const worker = await createWorker<MyMessages>({\n  script: './worker.js',\n});","import { WorkerThreadsDriver } from 'isolated-workers/drivers/worker-threads';\n\nconst worker = await createWorker<MyMessages>({\n  script: './worker.js',\n  driver: new WorkerThreadsDriver(),\n});"]},"description":"Create a worker process with type-safe messaging.\n\nBy default, uses the child_process driver which spawns a separate Node.js process\nand communicates via Unix domain sockets (or named pipes on Windows).\n\nYou can pass a different driver for alternative backends:\n- `WorkerThreadsDriver`: Uses worker_threads with MessagePort (shared memory capable)","category":"Core","parameters":[{"name":"options","type":"WorkerOptions<TMessages, TDriver>","description":"Worker options including script path and optional driver","optional":"!undefined","defaultValue":"!undefined"}],"returnType":"Promise<WorkerClient<TMessages, TDriver extends Driver<C, unknown> ? C : DriverCapabilities>>","signature":"function createWorker(options: WorkerOptions<TMessages, TDriver>): Promise<WorkerClient<TMessages, TDriver extends Driver<C, unknown> ? C : DriverCapabilities>>"},{"name":"startWorkerServer","slug":"start-worker-server","path":"/api/start-worker-server","module":"core","kind":"function","comment":{"summary":"Start a worker server that listens for messages (type-safe version)"},"description":"Start a worker server that listens for messages (type-safe version)","category":"Core","parameters":[{"name":"handlers","type":"Handlers<TDefs>","description":"Map of typed message handlers","optional":"!undefined","defaultValue":"!undefined"},{"name":"options","type":"WorkerServerOptions<TDefs>","description":"Server options","optional":true,"defaultValue":"!undefined"}],"returnType":"Promise<WorkerServer>","signature":"function startWorkerServer(handlers: Handlers<TDefs>, options?: WorkerServerOptions<TDefs>): Promise<WorkerServer>"},{"name":"JsonSerializer","slug":"json-serializer","path":"/api/json-serializer","module":"utils","kind":"class","comment":{"summary":"Default JSON serializer with newline terminator"},"description":"Default JSON serializer with newline terminator","category":"Serialization","properties":[{"name":"terminator","type":"string","description":"Terminator sequence used to delimit messages in the stream.\nMust be the same on both client and server.","optional":"!undefined","readonly":"!undefined"}],"methods":[{"name":"deserialize","signature":"deserialize(data: string | Uint8Array<ArrayBufferLike>): T","description":"Deserialize string or Uint8Array back to data","parameters":[{"name":"data","type":"string | Uint8Array<ArrayBufferLike>","description":"!undefined","optional":"!undefined"}],"returnType":"T"},{"name":"serialize","signature":"serialize(data: T): string","description":"Serialize data to string or Uint8Array","parameters":[{"name":"data","type":"T","description":"!undefined","optional":"!undefined"}],"returnType":"string"}],"signature":"class JsonSerializer extends Serializer"},{"name":"Serializer","slug":"serializer","path":"/api/serializer","module":"utils","kind":"class","comment":{"summary":"Abstract serializer class for custom message serialization.\nIncludes terminator sequence to delimit messages in the stream.\n\nIMPORTANT: Must be a named class (not anonymous) for mismatch detection."},"description":"Abstract serializer class for custom message serialization.\nIncludes terminator sequence to delimit messages in the stream.\n\nIMPORTANT: Must be a named class (not anonymous) for mismatch detection.","category":"Serialization","properties":[{"name":"terminator","type":"string | Uint8Array<ArrayBufferLike>","description":"Terminator sequence used to delimit messages in the stream.\nMust be the same on both client and server.","optional":"!undefined","readonly":"!undefined"}],"methods":[{"name":"deserialize","signature":"deserialize(data: string | Uint8Array<ArrayBufferLike>): T","description":"Deserialize string or Uint8Array back to data","parameters":[{"name":"data","type":"string | Uint8Array<ArrayBufferLike>","description":"!undefined","optional":"!undefined"}],"returnType":"T"},{"name":"serialize","signature":"serialize(data: T): string | Uint8Array<ArrayBufferLike>","description":"Serialize data to string or Uint8Array","parameters":[{"name":"data","type":"T","description":"!undefined","optional":"!undefined"}],"returnType":"string | Uint8Array<ArrayBufferLike>"}],"signature":"class Serializer"},{"name":"Logger","slug":"logger","path":"/api/logger","module":"utils","kind":"interface","comment":{"summary":"Logger interface - must implement all log level methods"},"description":"Logger interface - must implement all log level methods","category":"!undefined","methods":[{"name":"debug","signature":"debug(parts: unknown[]): void","description":"!undefined","parameters":[{"name":"parts","type":"unknown[]","description":"!undefined","optional":"!undefined"}],"returnType":"void"},{"name":"error","signature":"error(parts: unknown[]): void","description":"!undefined","parameters":[{"name":"parts","type":"unknown[]","description":"!undefined","optional":"!undefined"}],"returnType":"void"},{"name":"info","signature":"info(parts: unknown[]): void","description":"!undefined","parameters":[{"name":"parts","type":"unknown[]","description":"!undefined","optional":"!undefined"}],"returnType":"void"},{"name":"warn","signature":"warn(parts: unknown[]): void","description":"!undefined","parameters":[{"name":"parts","type":"unknown[]","description":"!undefined","optional":"!undefined"}],"returnType":"void"}],"signature":"interface Logger"},{"name":"LogLevel","slug":"log-level","path":"/api/log-level","module":"utils","kind":"type","comment":{"summary":"Log level enum"},"description":"Log level enum","category":"!undefined","signature":"type LogLevel = \"debug\" | \"info\" | \"warn\" | \"error\""},{"name":"defaultLogger","slug":"default-logger","path":"/api/default-logger","module":"utils","kind":"variable","comment":{"summary":"Default console-based logger"},"description":"Default console-based logger","category":"!undefined","signature":"type defaultLogger = Logger"},{"name":"WorkerCrashedError","slug":"worker-crashed-error","path":"/api/worker-crashed-error","module":"types","kind":"class","comment":"!undefined","description":"!undefined","category":"!undefined","properties":[{"name":"attempt","type":"number","description":"!undefined","optional":"!undefined","readonly":true},{"name":"maxAttempts","type":"number","description":"!undefined","optional":"!undefined","readonly":true},{"name":"messageType","type":"string","description":"!undefined","optional":"!undefined","readonly":true},{"name":"name","type":"string","description":"!undefined","optional":"!undefined","readonly":"!undefined"},{"name":"reason","type":"ShutdownReason","description":"!undefined","optional":"!undefined","readonly":true}],"signature":"class WorkerCrashedError extends Error"},{"name":"BaseMessage","slug":"base-message","path":"/api/base-message","module":"types","kind":"interface","comment":{"summary":"Base message with transaction ID for request/response pairing"},"description":"Base message with transaction ID for request/response pairing","category":"!undefined","properties":[{"name":"tx","type":"string","description":"Transaction ID","optional":"!undefined","readonly":"!undefined"}],"signature":"interface BaseMessage"},{"name":"MessageDef","slug":"message-def","path":"/api/message-def","module":"types","kind":"interface","comment":{"summary":"Message definition shape - each message has a payload and optional result"},"description":"Message definition shape - each message has a payload and optional result","category":"!undefined","properties":[{"name":"payload","type":"unknown","description":"Payload type for the message","optional":"!undefined","readonly":"!undefined"},{"name":"result","type":"unknown","description":"Optional result type (if message expects a response)","optional":true,"readonly":"!undefined"}],"signature":"interface MessageDef"},{"name":"AllMessages","slug":"all-messages","path":"/api/all-messages","module":"types","kind":"type","comment":{"summary":"Union of all message types in the definition.","examples":["type AllMsgs = AllMessages<MyMessages>;\n// MessageOf<MyMessages, 'load'> | MessageOf<MyMessages, 'compute'> | ..."]},"description":"Union of all message types in the definition.","category":"!undefined","signature":"type AllMessages = { [key: string]: ... }[keyof TDefs & string]"},{"name":"AllResults","slug":"all-results","path":"/api/all-results","module":"types","kind":"type","comment":{"summary":"Union of all result types in the definition.","examples":["type AllRes = AllResults<MyMessages>;\n// ResultOf<MyMessages, 'load'> | ResultOf<MyMessages, 'compute'> | ..."]},"description":"Union of all result types in the definition.","category":"!undefined","signature":"type AllResults = { [key: string]: ... }[WithResult<TDefs> & string]"},{"name":"AnyMessage","slug":"any-message","path":"/api/any-message","module":"types","kind":"type","comment":{"summary":"Union of all message types (requests and responses).\nUse this for middleware, transaction ID generators, and other\nfunctions that handle any message type.","examples":["type MyMessages = DefineMessages<{\n  load: { payload: { config: string }; result: { loaded: true } };\n}>;\n\nfunction middleware(msg: AnyMessage<MyMessages>) {\n  console.log('Handling:', msg.type);\n}"]},"description":"Union of all message types (requests and responses).\nUse this for middleware, transaction ID generators, and other\nfunctions that handle any message type.","category":"!undefined","signature":"type AnyMessage = AllMessages<TDefs> | AllResults<TDefs>"},{"name":"DefineMessages","slug":"define-messages","path":"/api/define-messages","module":"types","kind":"type","comment":{"summary":"Type constructor for defining message sets.\n\nUse this to define your worker's message contract with full type safety.","examples":["type MyMessages = DefineMessages<{\n  load: { payload: { config: string }; result: { loaded: true } };\n  compute: { payload: { data: number }; result: { value: number } };\n  shutdown: { payload: void };\n}>;"]},"description":"Type constructor for defining message sets.\n\nUse this to define your worker's message contract with full type safety.","category":"Types","signature":"type DefineMessages = TDefs"},{"name":"Handlers","slug":"handlers","path":"/api/handlers","module":"types","kind":"type","comment":{"summary":"Handler function type for a message definition.\n\nHandlers receive the payload and return the result (or void if no result).","examples":["const handlers: Handlers<MyMessages> = {\n  load: async (payload) => ({ loaded: true }),\n  shutdown: () => { console.log('bye'); }\n};"]},"description":"Handler function type for a message definition.\n\nHandlers receive the payload and return the result (or void if no result).","category":"Configuration","signature":"type Handlers = { [key: string]: ... }"},{"name":"MaybePromise","slug":"maybe-promise","path":"/api/maybe-promise","module":"types","kind":"type","comment":{"summary":"Utility type for values that may be promises"},"description":"Utility type for values that may be promises","category":"!undefined","signature":"type MaybePromise = T | Promise<T>"},{"name":"MessageDefs","slug":"message-defs","path":"/api/message-defs","module":"types","kind":"type","comment":{"summary":"Collection of message definitions"},"description":"Collection of message definitions","category":"!undefined","signature":"type MessageDefs = Record<string, MessageDef>"},{"name":"MessageOf","slug":"message-of","path":"/api/message-of","module":"types","kind":"type","comment":{"summary":"Extract the full message type for a given key.","examples":["type LoadMessage = MessageOf<MyMessages, 'load'>;\n// { tx: string; type: 'load'; payload: { config: string } }"]},"description":"Extract the full message type for a given key.","category":"!undefined","signature":"type MessageOf = BaseMessage & { payload: TDefs[K][\"payload\"]; type: K }"},{"name":"MessageResult","slug":"message-result","path":"/api/message-result","module":"types","kind":"type","comment":{"summary":"Map a message type to its corresponding result type.","examples":["type LoadResponse = MessageResult<'load', MyMessages>;\n// ResultOf<MyMessages, 'load'>"]},"description":"Map a message type to its corresponding result type.","category":"!undefined","signature":"type MessageResult = TMessageType extends WithResult<TDefs> ? ResultOf<TDefs, TMessageType> : never"},{"name":"MessageType","slug":"message-type","path":"/api/message-type","module":"types","kind":"type","comment":"!undefined","description":"!undefined","category":"!undefined","signature":"type MessageType = keyof TDefs & string"},{"name":"Middleware","slug":"middleware","path":"/api/middleware","module":"types","kind":"type","comment":{"summary":"Middleware function type for message inspection/transformation.\nApplied sequentially in the order provided.\n\nMessages are sealed before being passed to middleware, so you can\nmodify existing properties but cannot add new ones.","examples":["const logMiddleware: Middleware<MyMessages> = (msg, direction) => {\n  console.log(`${direction}:`, msg.type);\n  return msg;\n};"]},"description":"Middleware function type for message inspection/transformation.\nApplied sequentially in the order provided.\n\nMessages are sealed before being passed to middleware, so you can\nmodify existing properties but cannot add new ones.","category":"Configuration","signature":"type Middleware = (message: AnyMessage<TDefs>, direction: \"incoming\" | \"outgoing\") => AnyMessage<TDefs> | void | Promise<AnyMessage<TDefs> | void>"},{"name":"PayloadOf","slug":"payload-of","path":"/api/payload-of","module":"types","kind":"type","comment":{"summary":"Extract the payload type for a given message key."},"description":"Extract the payload type for a given message key.","category":"!undefined","signature":"type PayloadOf = TDefs[K][\"payload\"]"},{"name":"ResultOf","slug":"result-of","path":"/api/result-of","module":"types","kind":"type","comment":{"summary":"Extract the full result type for a given key.","examples":["type LoadResult = ResultOf<MyMessages, 'load'>;\n// { tx: string; type: 'loadResult'; payload: { loaded: true } }"]},"description":"Extract the full result type for a given key.","category":"!undefined","signature":"type ResultOf = BaseMessage & { payload: TDefs[K] extends { result: unknown } ? TDefs[K][\"result\"] : never; type: string }"},{"name":"ResultPayloadOf","slug":"result-payload-of","path":"/api/result-payload-of","module":"types","kind":"type","comment":{"summary":"Extract the result type for a given message key."},"description":"Extract the result type for a given message key.","category":"!undefined","signature":"type ResultPayloadOf = TDefs[K] extends { result: unknown } ? TDefs[K][\"result\"] : never"},{"name":"ShutdownReason","slug":"shutdown-reason","path":"/api/shutdown-reason","module":"types","kind":"type","comment":"!undefined","description":"!undefined","category":"!undefined","signature":"type ShutdownReason = { code: number | null; signal: string | null; type: \"exit\" } | { error: Error; type: \"error\" } | { type: \"close\" }"},{"name":"TransactionIdGenerator","slug":"transaction-id-generator","path":"/api/transaction-id-generator","module":"types","kind":"type","comment":{"summary":"Transaction ID generator function type.\nReceives a message and returns a unique transaction ID string.","examples":["const customGen: TransactionIdGenerator<MyMessages> = (msg) => {\n  return `${msg.type}-${Date.now()}`;\n};"]},"description":"Transaction ID generator function type.\nReceives a message and returns a unique transaction ID string.","category":"!undefined","signature":"type TransactionIdGenerator = (message: AnyMessage<TDefs>) => string"},{"name":"UnexpectedShutdownConfig","slug":"unexpected-shutdown-config","path":"/api/unexpected-shutdown-config","module":"types","kind":"type","comment":"!undefined","description":"!undefined","category":"!undefined","signature":"type UnexpectedShutdownConfig = UnexpectedShutdownStrategy & { [key: string]: ... }"},{"name":"UnexpectedShutdownStrategy","slug":"unexpected-shutdown-strategy","path":"/api/unexpected-shutdown-strategy","module":"types","kind":"type","comment":"!undefined","description":"!undefined","category":"!undefined","signature":"type UnexpectedShutdownStrategy = { strategy: \"reject\" } | { attempts: number; strategy: \"retry\" }"},{"name":"WithResult","slug":"with-result","path":"/api/with-result","module":"types","kind":"type","comment":{"summary":"Extract keys that have a result defined.","examples":["type Messages = DefineMessages<{\n  load: { payload: {}; result: {} };  // Has result\n  shutdown: { payload: {} };          // No result\n}>;\ntype WithRes = WithResult<Messages>; // 'load'"]},"description":"Extract keys that have a result defined.","category":"Types","signature":"type WithResult = { [key: string]: ... }[keyof TDefs]"}]}}}