{"pageId":"/pages/api","routeParams":{},"data":{"type":"export","export":{"name":"WorkerThreadsDriver","slug":"worker-threads-driver","path":"/api/worker-threads-driver","module":"core","kind":"variable","comment":{"summary":"Worker threads driver.\n\nUses worker_threads module with MessagePort for IPC.\nSupports SharedArrayBuffer for shared memory.","examples":["import { WorkerThreadsDriver } from 'isolated-workers/drivers/worker-threads';\n\n// Host side: spawn a worker\nconst channel = await WorkerThreadsDriver.spawn('./worker.js', {\n  resourceLimits: { maxOldGenerationSizeMb: 128 },\n});\n\n// Worker side: create server\nconst server = WorkerThreadsDriver.createServer();"]},"description":"Worker threads driver.\n\nUses worker_threads module with MessagePort for IPC.\nSupports SharedArrayBuffer for shared memory.","category":"!undefined","signature":"type WorkerThreadsDriver = { name: \"worker_threads\"; createServer: unknown; getStartupData: unknown; spawn: unknown; transferSharedMemory: unknown } & { capabilities: InferCapabilities<{ name: \"worker_threads\"; createServer: unknown; getStartupData: unknown; spawn: unknown; transferSharedMemory: unknown }> }"},"knownExports":{"ChildProcessChannel":"/api/child-process-channel","ChildProcessServerChannel":"/api/child-process-server-channel","ChildProcessStartupData":"/api/child-process-startup-data","ChildProcessDriverType":"/api/child-process-driver-type","ResponseFunction":"/api/response-function","ChildProcessDriver":"/api/child-process-driver","DEFAULT_SERVER_CONNECT_TIMEOUT":"/api/default-server-connect-timeout","STARTUP_DATA_ENV_KEY":"/api/startup-data-env-key","createServer":"/api/create-server","encodeStartupData":"/api/encode-startup-data","spawnWorker":"/api/spawn-worker","ChildProcessDriverOptions":"/api/child-process-driver-options","WorkerThreadsChannel":"/api/worker-threads-channel","WorkerThreadsServerChannel":"/api/worker-threads-server-channel","WorkerThreadsStartupData":"/api/worker-threads-startup-data","WorkerThreadsDriverType":"/api/worker-threads-driver-type","STARTUP_DATA_WORKER_KEY":"/api/startup-data-worker-key","WorkerThreadsDriver":"/api/worker-threads-driver","WorkerThreadsDriverOptions":"/api/worker-threads-driver-options","WorkerThreadsResourceLimits":"/api/worker-threads-resource-limits","ChildProcessCapabilities":"/api/child-process-capabilities","Connection":"/api/connection","ConnectionOptions":"/api/connection-options","DetachCapability":"/api/detach-capability","Driver":"/api/driver","DriverCapabilities":"/api/driver-capabilities","DriverChannel":"/api/driver-channel","DriverMessage":"/api/driver-message","MiddlewareContext":"/api/middleware-context","ReconnectCapability":"/api/reconnect-capability","ServerChannel":"/api/server-channel","ServerDriver":"/api/server-driver","ServerOptions":"/api/server-options","TypedMessage":"/api/typed-message","TypedResult":"/api/typed-result","WorkerClient":"/api/worker-client","WorkerOptions":"/api/worker-options","WorkerServer":"/api/worker-server","WorkerServerOptions":"/api/worker-server-options","WorkerThreadsCapabilities":"/api/worker-threads-capabilities","BuiltInTimeoutKey":"/api/built-in-timeout-key","DriverOptionsFor":"/api/driver-options-for","MessageHandler":"/api/message-handler","MiddlewareDirection":"/api/middleware-direction","TimeoutConfig":"/api/timeout-config","WorkerHandler":"/api/worker-handler","WorkerHandlers":"/api/worker-handlers","createWorker":"/api/create-worker","startWorkerServer":"/api/start-worker-server","JsonSerializer":"/api/json-serializer","Serializer":"/api/serializer","Logger":"/api/logger","LogLevel":"/api/log-level","defaultLogger":"/api/default-logger","WorkerCrashedError":"/api/worker-crashed-error","BaseMessage":"/api/base-message","MessageDef":"/api/message-def","AllMessages":"/api/all-messages","AllResults":"/api/all-results","AnyMessage":"/api/any-message","DefineMessages":"/api/define-messages","Handlers":"/api/handlers","MaybePromise":"/api/maybe-promise","MessageDefs":"/api/message-defs","MessageOf":"/api/message-of","MessageResult":"/api/message-result","MessageType":"/api/message-type","Middleware":"/api/middleware","PayloadOf":"/api/payload-of","ResultOf":"/api/result-of","ResultPayloadOf":"/api/result-payload-of","ShutdownReason":"/api/shutdown-reason","TransactionIdGenerator":"/api/transaction-id-generator","UnexpectedShutdownConfig":"/api/unexpected-shutdown-config","UnexpectedShutdownStrategy":"/api/unexpected-shutdown-strategy","WithResult":"/api/with-result"},"highlightedExamples":[{"html":"<pre class=\"shiki github-dark\" style=\"background-color:#00000000;color:#e1e4e8\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color:#F97583\">import</span><span style=\"color:#E1E4E8\"> { <a href=\"/isolated-workers/api/worker-threads-driver\" class=\"code-link\">WorkerThreadsDriver</a> } </span><span style=\"color:#F97583\">from</span><span style=\"color:#9ECBFF\"> 'isolated-workers/drivers/worker-threads'</span><span style=\"color:#E1E4E8\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#6A737D\">// Host side: spawn a worker</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">const</span><span style=\"color:#79B8FF\"> channel</span><span style=\"color:#F97583\"> =</span><span style=\"color:#F97583\"> await</span><span style=\"color:#E1E4E8\"> <a href=\"/isolated-workers/api/worker-threads-driver\" class=\"code-link\">WorkerThreadsDriver</a>.</span><span style=\"color:#B392F0\">spawn</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#9ECBFF\">'./worker.js'</span><span style=\"color:#E1E4E8\">, {</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">  resourceLimits: { maxOldGenerationSizeMb: </span><span style=\"color:#79B8FF\">128</span><span style=\"color:#E1E4E8\"> },</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">});</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#6A737D\">// Worker side: create server</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">const</span><span style=\"color:#79B8FF\"> server</span><span style=\"color:#F97583\"> =</span><span style=\"color:#E1E4E8\"> <a href=\"/isolated-workers/api/worker-threads-driver\" class=\"code-link\">WorkerThreadsDriver</a>.</span><span style=\"color:#B392F0\"><a href=\"/isolated-workers/api/create-server\" class=\"code-link\">createServer</a></span><span style=\"color:#E1E4E8\">();</span></span></code></pre>","code":"import { WorkerThreadsDriver } from 'isolated-workers/drivers/worker-threads';\n\n// Host side: spawn a worker\nconst channel = await WorkerThreadsDriver.spawn('./worker.js', {\n  resourceLimits: { maxOldGenerationSizeMb: 128 },\n});\n\n// Worker side: create server\nconst server = WorkerThreadsDriver.createServer();"}],"highlightedSignature":{"html":"<pre class=\"shiki github-dark\" style=\"background-color:#00000000;color:#e1e4e8\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color:#F97583\">type</span><span style=\"color:#B392F0\"> <a href=\"/isolated-workers/api/worker-threads-driver\" class=\"code-link\">WorkerThreadsDriver</a></span><span style=\"color:#F97583\"> =</span><span style=\"color:#E1E4E8\"> { </span><span style=\"color:#FFAB70\">name</span><span style=\"color:#F97583\">:</span><span style=\"color:#9ECBFF\"> \"worker_threads\"</span><span style=\"color:#E1E4E8\">; </span><span style=\"color:#FFAB70\"><a href=\"/isolated-workers/api/create-server\" class=\"code-link\">createServer</a></span><span style=\"color:#F97583\">:</span><span style=\"color:#79B8FF\"> unknown</span><span style=\"color:#E1E4E8\">; </span><span style=\"color:#FFAB70\">getStartupData</span><span style=\"color:#F97583\">:</span><span style=\"color:#79B8FF\"> unknown</span><span style=\"color:#E1E4E8\">; </span><span style=\"color:#FFAB70\">spawn</span><span style=\"color:#F97583\">:</span><span style=\"color:#79B8FF\"> unknown</span><span style=\"color:#E1E4E8\">; </span><span style=\"color:#FFAB70\">transferSharedMemory</span><span style=\"color:#F97583\">:</span><span style=\"color:#79B8FF\"> unknown</span><span style=\"color:#E1E4E8\"> } </span><span style=\"color:#F97583\">&#x26;</span><span style=\"color:#E1E4E8\"> { </span><span style=\"color:#FFAB70\">capabilities</span><span style=\"color:#F97583\">:</span><span style=\"color:#B392F0\"> InferCapabilities</span><span style=\"color:#E1E4E8\">&#x3C;{ </span><span style=\"color:#FFAB70\">name</span><span style=\"color:#F97583\">:</span><span style=\"color:#9ECBFF\"> \"worker_threads\"</span><span style=\"color:#E1E4E8\">; </span><span style=\"color:#FFAB70\"><a href=\"/isolated-workers/api/create-server\" class=\"code-link\">createServer</a></span><span style=\"color:#F97583\">:</span><span style=\"color:#79B8FF\"> unknown</span><span style=\"color:#E1E4E8\">; </span><span style=\"color:#FFAB70\">getStartupData</span><span style=\"color:#F97583\">:</span><span style=\"color:#79B8FF\"> unknown</span><span style=\"color:#E1E4E8\">; </span><span style=\"color:#FFAB70\">spawn</span><span style=\"color:#F97583\">:</span><span style=\"color:#79B8FF\"> unknown</span><span style=\"color:#E1E4E8\">; </span><span style=\"color:#FFAB70\">transferSharedMemory</span><span style=\"color:#F97583\">:</span><span style=\"color:#79B8FF\"> unknown</span><span style=\"color:#E1E4E8\"> }> }</span></span></code></pre>","code":"type WorkerThreadsDriver = { name: \"worker_threads\"; createServer: unknown; getStartupData: unknown; spawn: unknown; transferSharedMemory: unknown } & { capabilities: InferCapabilities<{ name: \"worker_threads\"; createServer: unknown; getStartupData: unknown; spawn: unknown; transferSharedMemory: unknown }> }"},"descriptionHtml":"<p>Worker threads driver.</p>\n<p>Uses worker_threads module with MessagePort for IPC.\nSupports SharedArrayBuffer for shared memory.</p>"}}